"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[8408],{98408:(e,t,n)=>{n.r(t),n.d(t,{default:()=>k});var r=n(65612),a=n(17901),i=n(25134),o=n(64961),c=n(40838),l=n(87029),s=n(21257),u=n(43939),d=n(6833),p=n(82406),m=n(20494),f=n(44194),g=n(10479),v=n(47245),E=n(26154),h=n(73432),R=n(62508),A=n(16168),S=n(43151),y=n(79271),P=n(72274),I=n(95241),b=n(38722),C=n(28e3),O=n(40578);function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,c=[],l=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw a}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return T(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?T(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Z=function(e){var t=e["data-componentid"],n=(0,g.$)().t,T=(0,v.I0)(),Z=(0,m.fQ)().getLink,k=(0,b.Z)(),w=k.resourceServerListTitle,L=k.resourceServerListPageTitle,G=k.addNewResourceButtonText,N=k.resourceServerType,_=k.resourceServerListDescription,z=k.defaultSearchFilter,U=k.resourceSearchBarPlaceholder,B=x((0,f.useState)(1),2),K=B[0],F=B[1],$=x((0,f.useState)(!1),2),M=$[0],Q=$[1],j=x((0,f.useState)(!1),2),D=j[0],V=j[1],W=x((0,f.useState)(!1),2),X=W[0],H=W[1],J=x((0,f.useState)(""),2),Y=J[0],q=J[1],ee=x((0,f.useState)([]),2),te=ee[0],ne=ee[1],re=x((0,f.useState)(void 0),2),ae=re[0],ie=re[1],oe=x((0,f.useState)(void 0),2),ce=oe[0],le=oe[1],se=x((0,f.useState)(void 0),2),ue=se[0],de=se[1],pe=x((0,f.useState)(void 0),2),me=pe[0],fe=pe[1],ge=x((0,f.useState)(z),2),ve=ge[0],Ee=ge[1],he=x((0,f.useState)(I.KG.PROPERTIES),1)[0],Re=(0,v.v9)((function(e){return e.config.ui.features})),Ae=(0,v.v9)((function(e){var t;return null==e||null===(t=e.auth)||void 0===t?void 0:t.allowedScopes})),Se=(0,v.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.endpoints)||void 0===t?void 0:t.apiResources})),ye=(0,s.z)().organizationType,Pe=(0,S.cQ)(ae,ce,ve,!0,he),Ie=Pe.data,be=Pe.isLoading,Ce=Pe.error;(0,f.useEffect)((function(){if(Ie instanceof u.u)T((0,p.V_)({description:n("extensions:develop.apiResource.notifications.getAPIResources.genericError.description"),level:d.QU.ERROR,message:n("extensions:develop.apiResource.notifications.getAPIResources.genericError.message")}));else if(Ie){var e,t=Ie.apiResources.map((function(e){return e}));if(de(void 0),fe(void 0),Ie.links&&0!==Ie.links.length)null===(e=Ie.links)||void 0===e||e.forEach((function(e){switch(e.rel){case I.KG.NEXT_REL:de(e.href.split("".concat(I.KG.AFTER,"="))[1]);break;case I.KG.PREVIOUS_REL:fe(e.href.split("".concat(I.KG.BEFORE,"="))[1])}}));ne(t)}}),[Ie]),(0,f.useEffect)((function(){Ce&&T((0,p.V_)({description:n("extensions:develop.apiResource.notifications.getAPIResources.genericError.description"),level:d.QU.ERROR,message:n("extensions:develop.apiResource.notifications.getAPIResources.genericError.message")}))}),[Ce]),(0,f.useEffect)((function(){D&&((0,A.j)((function(e){return"string"==typeof e&&e.includes(Se)}),void 0,{revalidate:!0}),V(!1))}),[D]),(0,f.useEffect)((function(){var e=z;Ee(Y?"".concat(Y," and ").concat(e):e)}),[Y]);var Oe=function(e,t){ie(e),le(t),V(!0)};return f.createElement(m.Xg,{action:O.H.isAPIResourceCreateAllowed(Re,Ae)&&(null==te?void 0:te.length)>0&&f.createElement(m.KM,{"data-testid":"".concat(t,"-add-api-resources-button"),onClick:function(){return Q(!0)}},f.createElement(E.Z,{name:"add"}),G),pageTitle:L,title:w,description:ye!==l.$B.SUBORGANIZATION?_:f.createElement(f.Fragment,null,n("extensions:develop.apiResource.pageHeader.subOrgDescription"),f.createElement(m.eb,{link:Z("develop.apiResources.learnMore")},n("common:learnMore"))),"data-componentid":"".concat(t,"-page-layout"),"data-testid":"".concat(t,"-page-layout"),headingColumnWidth:"11",actionColumnWidth:"5"},N!==C.X.API||be?null:f.createElement(f.Fragment,null,ye!==l.$B.SUBORGANIZATION&&f.createElement(m.pJ,{onClick:function(){c.m.push(I.KG.getPaths().get("API_RESOURCES_CATEGORY").replace(":categoryId",I.$d.MANAGEMENT))},className:"clickable","data-componentid":"".concat(t,"-management-api-container")},f.createElement(h.Z,null,f.createElement(h.Z.Item,null,f.createElement(r.Z,{container:!0,direction:"row",xs:12,alignItems:"center"},f.createElement(r.Z,{xs:10,alignContent:"center"},f.createElement(m.dn,{verticalAlign:"middle",fill:"primary",transparent:!0,icon:f.createElement(a.At,{size:"medium"}),spaced:"right",floated:"left",className:"mt-1"}),f.createElement(h.Z.Header,null,n("extensions:develop.apiResource.managementAPI.header")),f.createElement(h.Z.Description,null,n("extensions:develop.apiResource.managementAPI.description"))),f.createElement(r.Z,{xs:2},f.createElement(m.dn,{verticalAlign:"middle",fill:"primary",transparent:!0,icon:f.createElement(a.XC,null),spaced:"right",floated:"right"})))))),f.createElement(m.pJ,{onClick:function(){c.m.push(I.KG.getPaths().get("API_RESOURCES_CATEGORY").replace(":categoryId",I.$d.ORGANIZATION))},className:"clickable","data-componentid":"".concat(t,"-organization-api-container")},f.createElement(h.Z,null,f.createElement(h.Z.Item,null,f.createElement(r.Z,{container:!0,direction:"row",xs:12,alignItems:"center"},f.createElement(r.Z,{xs:10,alignContent:"center"},f.createElement(m.dn,{verticalAlign:"middle",fill:"primary",transparent:!0,icon:f.createElement(a.qW,{size:"medium"}),spaced:"right",floated:"left",className:"mt-1"}),f.createElement(h.Z.Header,null,n("extensions:develop.apiResource.organizationAPI.header")),f.createElement(h.Z.Description,null,n("extensions:develop.apiResource.organizationAPI.description"))),f.createElement(r.Z,{xs:2},f.createElement(m.dn,{verticalAlign:"middle",fill:"primary",transparent:!0,icon:f.createElement(a.XC,null),spaced:"right",floated:"right"}))))))),f.createElement(R.Z,{hidden:!0}),f.createElement(m.PS,{advancedSearch:f.createElement(i.n,{onFilter:function(e){q(e)},filterAttributeOptions:[{key:0,text:n("common:name"),value:"name"}],filterAttributePlaceholder:n("applications:advancedSearch.form.inputs.filterAttribute.placeholder"),filterConditionsPlaceholder:n("applications:advancedSearch.form.inputs.filterCondition.placeholder"),filterValuePlaceholder:n("applications:advancedSearch.form.inputs.filterValue.placeholder"),placeholder:U,style:{minWidth:"425px"},defaultSearchAttribute:"name",defaultSearchOperator:"co",triggerClearQuery:X,"data-componentid":"".concat(t,"-list-advanced-search")}),showTopActionPanel:!!Y||(null==te?void 0:te.length)>0,"data-componentid":"".concat(t,"-api-resources-list-layout"),"data-testid":"".concat(t,"-api-resources-list-layout"),onPageChange:function(e,t){var n=parseInt(null==t?void 0:t.activePage);n>K?Oe(ue,void 0):n<K&&Oe(void 0,me),F(n)},showPagination:!0,totalPages:I.KG.DEFAULT_TOTAL_PAGES,totalListSize:null==te?void 0:te.length,showPaginationPageLimit:!1,isLoading:be,activePage:K,paginationOptions:{disableNextButton:!ue,disablePreviousButton:!me}},Ce?f.createElement(m.$J,{subtitle:[n("extensions:develop.apiResource.apiResourceError.subtitles.0"),n("extensions:develop.apiResource.apiResourceError.subtitles.1")],title:n("extensions:develop.apiResource.apiResourceError.title"),image:(0,o.jF)().genericError,imageSize:"tiny"}):f.createElement(y.v,{apiResourcesList:te,isAPIResourcesListLoading:be,featureConfig:Re,onAPIResourceDelete:function(){Oe()},onSearchQueryClear:function(){q(""),H(!X)},searchQuery:Y,categoryId:I.$d.CUSTOM,onEmptyListPlaceholderActionClicked:function(){return Q(!0)}})),M&&f.createElement(P.d,{"data-testid":"".concat(t,"-add-api-resource-wizard-modal"),closeWizard:function(){return Q(!1)},resourceType:N}))};Z.defaultProps={"data-componentid":"api-resources"};const k=Z}}]);