"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[6130],{64707:(e,t,n)=>{n.d(t,{FR:()=>s,Ud:()=>c,jp:()=>l,zu:()=>d});var a=n(2292),r=n(76271),i=n(6833),o=a.AsgardeoSPAClient.getInstance().httpRequest.bind(a.AsgardeoSPAClient.getInstance()),l=function(e){var t={data:e,headers:{"Content-Type":"application/json"},method:i.f2.POST,url:r.h.getState().config.endpoints.vcTemplates};return o(t).then((function(e){return Promise.resolve(null==e?void 0:e.data)})).catch((function(e){return Promise.reject(e)}))},c=function(e,t){var n={data:t,headers:{"Content-Type":"application/json"},method:i.f2.PUT,url:"".concat(r.h.getState().config.endpoints.vcTemplates,"/").concat(e)};return o(n).then((function(e){return Promise.resolve(null==e?void 0:e.data)})).catch((function(e){return Promise.reject(e)}))},s=function(e){var t={headers:{"Content-Type":"application/json"},method:i.f2.DELETE,url:"".concat(r.h.getState().config.endpoints.vcTemplates,"/").concat(e)};return o(t).then((function(e){return Promise.resolve(e)})).catch((function(e){return Promise.reject(e)}))},d=function(e){var t={headers:{"Content-Type":"application/json"},method:i.f2.POST,url:"".concat(r.h.getState().config.endpoints.vcTemplates,"/").concat(e,"/offer")};return o(t).then((function(e){return Promise.resolve(null==e?void 0:e.data)})).catch((function(e){return Promise.reject(e)}))}},96130:(e,t,n)=>{n.r(t),n.d(t,{default:()=>te});var a=n(26833),r=n(53615),i=n(64724),o=n(6894),l=n(60486),c=n(40838),s=n(6833),d=n(82406),m=n(79438),u=n(20494),f=n(44194),p=n(10479),v=n(47245),b=n(89141),g=n(62508),y=n(64707),h=n(18347),C=n(88945),E=n(37105),P=n(51835),S=n.n(P),T=n(27975),Z=n.n(T),O=n(55900),I=n.n(O),R=n(21555),w=n.n(R),j=n(3621),A=n.n(j),U=n(5062),x=n.n(U),N=n(27828),k={};k.styleTagTransform=x(),k.setAttributes=w(),k.insert=I().bind(null,"head"),k.domAPI=Z(),k.insertStyleElement=A();S()(N.Z,k);N.Z&&N.Z.locals&&N.Z.locals;var V=function(e){var t=e.selected,n=e.displayName,a=e.claimURI,r=e.renderOptionProps;return f.createElement("li",r,f.createElement(C.Z,{container:!0,justifyContent:"space-between",alignItems:"center",xs:12},f.createElement(C.Z,{container:!0,alignItems:"top",xs:8},f.createElement(C.Z,null,f.createElement(h.Z,{checked:t,className:"claim-attribute-option-checkbox"})),f.createElement(C.Z,{xs:5},f.createElement(E.Z,{primary:n}),f.createElement(u.EK,null,a)))))},L=n(45532),_=n(72857),M=n(26154),D=n(10909);function H(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,i,o,l=[],c=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(a=i.call(n)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(e){s=!0,r=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw r}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Q(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Q(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}var $=function(e){var t=e.template,n=e.onUpdate,a=e.readOnly,r=e["data-componentid"],i=(0,p.$)().t,o=(0,v.I0)(),l=H((0,f.useState)(!1),2),c=l[0],m=l[1],g=H((0,f.useState)(!1),2),h=g[0],C=g[1],E=function(){m(!0),(0,y.zu)(t.id).then((function(){o((0,d.V_)({description:i("verifiableCredentials:offer.notifications.generate.success.description"),level:s.QU.SUCCESS,message:i("verifiableCredentials:offer.notifications.generate.success.message")})),n(t.id),C(!1)})).catch((function(e){var t;o((0,d.V_)({description:(null==e||null===(t=e.response)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.description)||i("verifiableCredentials:offer.notifications.generate.error.description"),level:s.QU.ERROR,message:i("verifiableCredentials:offer.notifications.generate.error.message")}))})).finally((function(){m(!1)}))};return f.createElement(u.pJ,{padded:"very"},f.createElement(b.Z,null,f.createElement(b.Z.Row,null,f.createElement(b.Z.Column,{width:16},null!=t&&t.offerId?f.createElement(f.Fragment,null,f.createElement(_.Z,{info:!0},f.createElement(M.Z,{name:"info circle"}),i("verifiableCredentials:offer.active")),f.createElement(b.Z,null,f.createElement(b.Z.Row,null,f.createElement(b.Z.Column,{width:12},f.createElement(u.OR,{value:function(){if(null==t||!t.offerId)return"";var e=L.D.resolveServerHost(!1,!0);return"openid-credential-offer://?credential_offer_uri=".concat(e,"/oid4vci/credential-offer/").concat(t.offerId)}(),"data-componentid":"".concat(r,"-offer-uri")})),f.createElement(b.Z.Column,{width:4},f.createElement(D.Z,{color:"red",className:"fluid",loading:c,disabled:c||a,onClick:function(){return C(!0)},"data-componentid":"".concat(r,"-regenerate-button")},i("verifiableCredentials:offer.regenerate")))))):f.createElement(f.Fragment,null,f.createElement(_.Z,{info:!0},f.createElement(M.Z,{name:"info circle"}),i("verifiableCredentials:offer.empty")),f.createElement(D.Z,{primary:!0,loading:c,disabled:c||a,onClick:E,"data-componentid":"".concat(r,"-generate-button")},i("verifiableCredentials:offer.generate")))))),h&&f.createElement(u.cV,{primaryActionLoading:c,onClose:function(){return C(!1)},type:"warning",open:h,assertionHint:i("verifiableCredentials:offer.confirmation.regenerate.assertionHint"),assertionType:"checkbox",primaryAction:i("common:confirm"),secondaryAction:i("common:cancel"),onSecondaryActionClick:function(){return C(!1)},onPrimaryActionClick:E,"data-componentid":"".concat(r,"-regenerate-confirmation-modal"),closeOnDimmerClick:!1},f.createElement(u.cV.Header,null,i("verifiableCredentials:offer.confirmation.regenerate.header")),f.createElement(u.cV.Message,{attached:!0,warning:!0},i("verifiableCredentials:offer.confirmation.regenerate.message")),f.createElement(u.cV.Content,null,i("verifiableCredentials:offer.confirmation.regenerate.content"))))},z=n(96124),F=n(76271),W=n(9501),q={};q.styleTagTransform=x(),q.setAttributes=w(),q.insert=I().bind(null,"head"),q.domAPI=Z(),q.insertStyleElement=A();S()(W.Z,q);W.Z&&W.Z.locals&&W.Z.locals;function B(e){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B(e)}function J(){return J=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},J.apply(null,arguments)}function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){G(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function G(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=B(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=B(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==B(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,i,o,l=[],c=!0,s=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(a=i.call(n)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(e){s=!0,r=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw r}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ee(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ee(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}const te=function(e){var t=e["data-componentid"],n=void 0===t?"vc-template-edit":t,h=(0,p.$)().t,C=(0,v.I0)(),E=Y((0,f.useState)(null),2),P=E[0],S=E[1],T=Y((0,f.useState)(!1),2),Z=T[0],O=T[1],I=Y((0,f.useState)(!1),2),R=I[0],w=I[1],j=Y((0,f.useState)(!1),2),A=j[0],U=j[1],x=Y((0,f.useState)([]),2),N=x[0],k=x[1],L=Y((0,f.useState)([]),2),_=L[0],M=L[1],D=Y((0,f.useState)([]),2),H=D[0],Q=D[1],W=Y((0,f.useState)([]),2),q=W[0],B=W[1],K=Y((0,f.useState)(!0),2),G=K[0],ee=K[1];(0,f.useEffect)((function(){var e=c.m.location.pathname.split("/"),t=e[e.length-1];S(t)}),[]);var te=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n={headers:{"Content-Type":"application/json"},method:s.f2.GET,url:"".concat(F.h.getState().config.endpoints.vcTemplates,"/").concat(e)},a=(0,z.Z)(t&&e?n:null);return{data:a.data,error:a.error,isLoading:a.isLoading,isValidating:a.isValidating,mutate:a.mutate}}(P,!!P),ne=te.data,ae=te.isLoading,re=te.error,ie=te.mutate;(0,f.useEffect)((function(){re&&C((0,d.V_)({description:h("verifiableCredentials:notifications.fetchTemplate.error.description"),level:s.QU.ERROR,message:h("verifiableCredentials:notifications.fetchTemplate.error.message")}))}),[re]),(0,f.useEffect)((function(){oe(),le()}),[]),(0,f.useEffect)((function(){if((null==N?void 0:N.length)>0&&(null==_?void 0:_.length)>0){var e=_.map((function(e){var t=N.find((function(t){return t.claimURI===e.mappedLocalClaimURI}));return null!=t&&t.displayName?X(X({},e),{},{localClaimDisplayName:t.displayName}):e}));Q(e)}}),[N,_]),(0,f.useEffect)((function(){if(ne&&H&&0!==H.length){var e=H.filter((function(e){var t;return null===(t=ne.claims)||void 0===t?void 0:t.includes(e.claimURI)}));B(e)}}),[ne,H]);var oe=function(){(0,o.WN)(null).then((function(e){k(e)})).catch((function(){C((0,d.V_)({description:h("verifiableCredentials:notifications.fetchClaims.error.description"),level:s.QU.ERROR,message:h("verifiableCredentials:notifications.fetchClaims.error.message")}))}))},le=function(){ee(!0),(0,o.gR)("aHR0cDovL3dzbzIub3JnL3ZjL2NsYWlt",null).then((function(e){M(e)})).catch((function(){C((0,d.V_)({description:h("verifiableCredentials:notifications.fetchClaims.error.description"),level:s.QU.ERROR,message:h("verifiableCredentials:notifications.fetchClaims.error.message")}))})).finally((function(){ee(!1)}))},ce=function(e){O(!0);var t={claims:q.map((function(e){return e.claimURI})),displayName:e.displayName,expiresIn:e.expiresIn};(0,y.Ud)(P,t).then((function(){ie(),C((0,d.V_)({description:h("verifiableCredentials:notifications.updateTemplate.success.description"),level:s.QU.SUCCESS,message:h("verifiableCredentials:notifications.updateTemplate.success.message")}))})).catch((function(){C((0,d.V_)({description:h("verifiableCredentials:notifications.updateTemplate.error.description"),level:s.QU.ERROR,message:h("verifiableCredentials:notifications.updateTemplate.error.message")}))})).finally((function(){O(!1)}))};return ae||!ne?f.createElement(u.Xg,{pageTitle:h("verifiableCredentials:editPage.title"),title:h("verifiableCredentials:editPage.title"),"data-componentid":"".concat(n,"-page-layout")},f.createElement(u.pO,null)):f.createElement(u.Xg,{pageTitle:(null==ne?void 0:ne.displayName)||h("verifiableCredentials:editPage.title"),title:(null==ne?void 0:ne.displayName)||h("verifiableCredentials:editPage.title"),backButton:{onClick:function(){c.m.push(l.$.getPaths().get("VC_TEMPLATES"))},text:h("verifiableCredentials:editPage.backButton")},bottomMargin:!1,contentTopMargin:!0,pageHeaderMaxWidth:!1,"data-componentid":"".concat(n,"-page-layout")},f.createElement(u.M$,{panes:[{componentId:"general",menuItem:h("verifiableCredentials:editPage.tabs.general"),render:function(){var e;return f.createElement(u.M$.Pane,{controlledSegmentation:!0},f.createElement(m.vy,{onSubmit:ce,initialValues:{displayName:null==ne?void 0:ne.displayName,expiresIn:null==ne||null===(e=ne.expiresIn)||void 0===e?void 0:e.toString()},render:function(e){var t=e.handleSubmit;return f.createElement(u.pJ,{padded:"very"},f.createElement("form",{id:"vc-template-edit-form",onSubmit:t},f.createElement(b.Z,null,f.createElement(b.Z.Row,{columns:1},f.createElement(b.Z.Column,{mobile:16,tablet:16,computer:10},f.createElement(m.SE,{key:"displayName",width:16,FormControlProps:{margin:"dense"},ariaLabel:"displayName",required:!0,"data-componentid":"".concat(n,"-display-name-input"),name:"displayName",type:"text",label:h("verifiableCredentials:editPage.form.displayName.label"),placeholder:h("verifiableCredentials:editPage.form.displayName.placeholder"),component:m.xh,maxLength:255,minLength:1}))),f.createElement(b.Z.Row,{columns:1},f.createElement(b.Z.Column,{mobile:16,tablet:16,computer:10},f.createElement("label",{className:"form-label"},h("verifiableCredentials:editPage.form.identifier.label")),f.createElement(u.OR,{value:(null==ne?void 0:ne.identifier)||"","data-componentid":"".concat(n,"-identifier-copy-field")}))),f.createElement(b.Z.Row,{columns:1},f.createElement(b.Z.Column,{mobile:16,tablet:16,computer:10},f.createElement(m.SE,{key:"expiresIn",width:16,FormControlProps:{margin:"dense"},ariaLabel:"expiresIn",required:!0,"data-componentid":"".concat(n,"-expires-in-input"),name:"expiresIn",type:"number",label:h("verifiableCredentials:editPage.form.expiresIn.label"),placeholder:h("verifiableCredentials:editPage.form.expiresIn.placeholder"),helperText:f.createElement(u.kW,{className:"hint",compact:!0},h("verifiableCredentials:editPage.form.expiresIn.hint")),component:m.xh}))),f.createElement(b.Z.Row,{columns:1},f.createElement(b.Z.Column,{mobile:16,tablet:16,computer:10},f.createElement(a.Z,{className:"vc-claims-dropdown",size:"small",disablePortal:!0,multiple:!0,disableCloseOnSelect:!0,loading:G,options:H,value:q,"data-componentid":"".concat(n,"-claims-dropdown"),getOptionLabel:function(e){return e.localClaimDisplayName||e.claimURI},renderInput:function(e){return f.createElement(i.Z,J({},e,{className:"vc-claims-dropdown-input",label:h("verifiableCredentials:editPage.form.claims.label"),placeholder:h("verifiableCredentials:editPage.form.claims.placeholder")}))},onChange:function(e,t){B(t)},isOptionEqualToValue:function(e,t){return e.claimURI===t.claimURI},renderTags:function(e,t){return e.map((function(e,n){return f.createElement(r.Z,J({},t({index:n}),{key:e.claimURI,label:e.localClaimDisplayName||e.claimURI}))}))},renderOption:function(e,t,n){var a=n.selected;return f.createElement(V,{selected:a,displayName:t.localClaimDisplayName,claimURI:t.claimURI,renderOptionProps:e})}}),f.createElement(u.kW,null,h("verifiableCredentials:editPage.form.claims.hint")))),f.createElement(b.Z.Row,{columns:1},f.createElement(b.Z.Column,{mobile:16,tablet:16,computer:10},f.createElement(u.KM,{type:"submit","aria-label":"update",size:"small",disabled:Z,loading:Z,"data-componentid":"".concat(n,"-update-button")},h("common:update")))))))}}),f.createElement(g.Z,{hidden:!0}),f.createElement(u.v9,{sectionHeader:h("verifiableCredentials:editPage.dangerZone.header")},f.createElement(u.cN,{actionTitle:h("verifiableCredentials:editPage.dangerZone.delete.actionTitle"),header:h("verifiableCredentials:editPage.dangerZone.delete.header"),subheader:h("verifiableCredentials:editPage.dangerZone.delete.subheader"),onActionClick:function(){return w(!0)},"data-componentid":"".concat(n,"-danger-zone")})))}},{componentId:"offer",menuItem:h("verifiableCredentials:editPage.tabs.offer"),render:function(){return f.createElement(u.M$.Pane,{controlledSegmentation:!0},f.createElement($,{template:ne,onUpdate:function(){return ie()},"data-componentid":"".concat(n,"-offer")}))}}]}),f.createElement(u.cV,{primaryActionLoading:A,open:R,onClose:function(){return w(!1)},type:"negative",assertionHint:h("verifiableCredentials:editPage.confirmations.deleteTemplate.assertionHint"),assertionType:"checkbox",primaryAction:h("common:confirm"),secondaryAction:h("common:cancel"),onSecondaryActionClick:function(){return w(!1)},onPrimaryActionClick:function(){U(!0),(0,y.FR)(P).then((function(){C((0,d.V_)({description:h("verifiableCredentials:notifications.deleteTemplate.success.description"),level:s.QU.SUCCESS,message:h("verifiableCredentials:notifications.deleteTemplate.success.message")})),w(!1),c.m.push(l.$.getPaths().get("VC_TEMPLATES"))})).catch((function(){C((0,d.V_)({description:h("verifiableCredentials:notifications.deleteTemplate.error.description"),level:s.QU.ERROR,message:h("verifiableCredentials:notifications.deleteTemplate.error.message")}))})).finally((function(){U(!1)}))},"data-componentid":"".concat(n,"-delete-confirmation-modal"),closeOnDimmerClick:!1},f.createElement(u.cV.Header,{"data-componentid":"".concat(n,"-delete-confirmation-modal-header")},h("verifiableCredentials:editPage.confirmations.deleteTemplate.header")),f.createElement(u.cV.Message,{attached:!0,negative:!0,"data-componentid":"".concat(n,"-delete-confirmation-modal-message")},h("verifiableCredentials:editPage.confirmations.deleteTemplate.message")),f.createElement(u.cV.Content,{"data-componentid":"".concat(n,"-delete-confirmation-modal-content")},h("verifiableCredentials:editPage.confirmations.deleteTemplate.content"))))}},27828:(e,t,n)=>{n.d(t,{Z:()=>l});var a=n(81611),r=n.n(a),i=n(83948),o=n.n(i)()(r());o.push([e.id,".claim-attribute-option-checkbox{padding:4px}",""]);const l=o},9501:(e,t,n)=>{n.d(t,{Z:()=>l});var a=n(81611),r=n.n(a),i=n(83948),o=n.n(i)()(r());o.push([e.id,".vc-claims-dropdown{padding-top:1rem !important}.vc-claims-dropdown-input input{border:none !important;width:auto !important}.vc-claims-dropdown-input .MuiInputBase-root{margin-top:.5em !important}.vc-claims-dropdown-input .MuiFormLabel-root{font-size:.92857143em !important}",""]);const l=o}}]);