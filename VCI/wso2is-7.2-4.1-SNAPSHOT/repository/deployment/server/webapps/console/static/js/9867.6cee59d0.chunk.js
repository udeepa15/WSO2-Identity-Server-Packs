"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[9867],{32753:(e,t,n)=>{n.d(t,{Z:()=>h});var r=n(25340),o=n(55467),i=n(44194),a=n(14517),l=n(87883),s=n(49706),u=n(62808),c=n(99769),d=n(90757);function f(e){return(0,d.ZP)("MuiCardContent",e)}(0,c.Z)("MuiCardContent",["root"]);var p=n(31549);const m=["className","component"],v=(0,s.ZP)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})((()=>({padding:16,"&:last-child":{paddingBottom:24}}))),h=i.forwardRef((function(e,t){const n=(0,u.Z)({props:e,name:"MuiCardContent"}),{className:i,component:s="div"}=n,c=(0,o.Z)(n,m),d=(0,r.Z)({},n,{component:s}),h=(e=>{const{classes:t}=e;return(0,l.Z)({root:["root"]},f,t)})(d);return(0,p.jsx)(v,(0,r.Z)({as:s,className:(0,a.Z)(h.root,i),ownerState:d,ref:t},c))}))},26596:(e,t,n)=>{n.d(t,{E:()=>a});var r=n(96124),o=n(76271),i=n(6833),a=function(e,t,n,a){var l=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],s={headers:{"Content-Type":"application/json"},method:i.f2.GET,params:{attributes:a,count:e,excludedAttributes:"roles,groups",filter:n,startIndex:t},url:o.h.getState().config.endpoints.agents},u=(0,r.Z)(l?s:null);return{data:u.data,error:u.error,isLoading:u.isLoading,isValidating:u.isValidating,mutate:u.mutate}}},39203:(e,t,n)=>{n.d(t,{Ug:()=>u,VL:()=>c,fF:()=>d,hI:()=>s,sS:()=>m,tN:()=>f,yq:()=>p});var r=n(2292),o=n(96124),i=n(76271),a=n(6833),l=r.AsgardeoSPAClient.getInstance().httpRequest.bind(r.AsgardeoSPAClient.getInstance()),s=function(e,t){var n={headers:{"Access-Control-Allow-Origin":i.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:a.f2.GET,params:{domain:e,excludedAttributes:t},url:i.h.getState().config.endpoints.groups};return l(n).then((function(e){if(200==e.status)return Promise.resolve(e)})).catch((function(e){return Promise.reject(e)}))},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0,l=arguments.length>4?arguments[4]:void 0,s=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],u={headers:{"Content-Type":"application/json"},method:a.f2.GET,params:{count:e,domain:r,excludedAttributes:l,filter:n,startIndex:t},url:i.h.getState().config.endpoints.groups},c=(0,o.Z)(s?u:null),d=c.data,f=c.error;return{data:d,error:f,isLoading:!f&&!d,isValidating:c.isValidating,mutate:c.mutate,response:c.response}},c=function(e,t){var n={headers:{"Access-Control-Allow-Origin":i.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:a.f2.GET,params:{excludedAttributes:t},url:i.h.getState().config.endpoints.groups+"/"+e};return l(n).then((function(e){return Promise.resolve(e)})).catch((function(e){return Promise.reject(e)}))},d=function(e,t){var n={data:t,headers:{"Access-Control-Allow-Origin":i.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:a.f2.PATCH,url:i.h.getState().config.endpoints.groups+"/"+e};return l(n).then((function(e){return Promise.resolve(e)})).catch((function(e){return Promise.reject(e)}))},f=function(e){var t={data:e,headers:{"Access-Control-Allow-Origin":i.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:a.f2.POST,url:i.h.getState().config.endpoints.groups+"/.search"};return l(t).then((function(e){return Promise.resolve(e)})).catch((function(e){return Promise.reject(e)}))},p=function(e){var t={headers:{"Access-Control-Allow-Origin":i.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:a.f2.DELETE,url:i.h.getState().config.endpoints.groups+"/"+e};return l(t).then((function(e){return Promise.resolve(e)})).catch((function(e){return Promise.reject(e)}))},m=function(e){var t={data:e,headers:{"Access-Control-Allow-Origin":i.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:a.f2.POST,url:i.h.getState().config.endpoints.groups};return l(t).then((function(e){return Promise.resolve(e)})).catch((function(e){return Promise.reject(e)}))}},3192:(e,t,n)=>{n.d(t,{Rh:()=>d,af:()=>c});var r=n(2292),o=n(14092),i=n(76271),a=n(96124),l=n(43939),s=n(6833),u=r.AsgardeoSPAClient.getInstance().httpRequest.bind(r.AsgardeoSPAClient.getInstance()),c=function(e,t,n,r){var o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],l={headers:{Accept:"application/json","Content-Type":"application/json"},method:s.f2.GET,params:{filter:n,limit:e,offset:t,requiredAttributes:r},url:i.h.getState().config.endpoints.identityProviders},u=(0,a.Z)(o?l:null),c=u.data,d=u.error;return{data:c,error:d,isLoading:!d&&!c,isValidating:u.isValidating,mutate:u.mutate}},d=function(){var e={headers:{Accept:"application/json","Access-Control-Allow-Origin":i.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:s.f2.GET,url:i.h.getState().config.endpoints.localAuthenticators};return u(e).then((function(e){if(200!==e.status)throw new l.u(o.Y.ERROR_MESSAGES.LOCAL_AUTHENTICATORS_FETCH_INVALID_STATUS_CODE_ERROR,null,e.status,e.request,e,e.config);return Promise.resolve(e.data)})).catch((function(e){throw new l.u(o.Y.ERROR_MESSAGES.LOCAL_AUTHENTICATORS_FETCH_ERROR,e.stack,e.code,e.request,e.response,e.config)}))}},83406:(e,t,n)=>{n.d(t,{Q:()=>C});var r=n(60486),o=n(40838),i=n(6833),a=n(82406),l=n(79438),s=n(20494),u=n(44194),c=n(10479),d=n(47245),f=n(62508),p=n(9183),m=n(79282),v=n(7231),h=n(9779),g=n(33519);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function E(){E=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof g?t:g,a=Object.create(i.prototype),l=new P(r||[]);return o(a,"_invoke",{value:R(e,n,l)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var f="suspendedStart",p="suspendedYield",m="executing",v="completed",h={};function g(){}function b(){}function S(){}var A={};u(A,a,(function(){return this}));var O=Object.getPrototypeOf,C=O&&O(O(_([])));C&&C!==n&&r.call(C,a)&&(A=C);var w=S.prototype=g.prototype=Object.create(A);function I(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function n(o,i,a,l){var s=d(e[o],e,i);if("throw"!==s.type){var u=s.arg,c=u.value;return c&&"object"==y(c)&&r.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,a,l)}),(function(e){n("throw",e,a,l)})):t.resolve(c).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,l)}))}l(s.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function R(t,n,r){var o=f;return function(i,a){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var l=r.delegate;if(l){var s=N(l,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=m;var u=d(t,n,r);if("normal"===u.type){if(o=r.done?v:p,u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=v,r.method="throw",r.arg=u.arg)}}}function N(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,N(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var i=d(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,h;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,h):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function U(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(U,this),this.reset(!0)}function _(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(y(t)+" is not iterable")}return b.prototype=S,o(w,"constructor",{value:S,configurable:!0}),o(S,"constructor",{value:b,configurable:!0}),b.displayName=u(S,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,S):(e.__proto__=S,u(e,s,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},I(T.prototype),u(T.prototype,l,(function(){return this})),t.AsyncIterator=T,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new T(c(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},I(w),u(w,s,"Generator"),u(w,a,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=_,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return l.type="throw",l.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],l=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),L(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;L(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:_(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),h}},t}function b(e,t,n,r,o,i,a){try{var l=e[i](a),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return A(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?A(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var O="edit-role-basic",C=function(e){var t,n=(0,c.$)().t,y=(0,d.I0)(),A=e.role,C=e.onRoleUpdate,w=e.isReadOnly,I=e.tabIndex,T=e.enableDeleteErrorConnetedAppsModal,R=e["data-componentid"],N=S((0,u.useState)(!1),2),U=N[0],L=N[1],P=S((0,u.useState)(!1),2),_=P[0],x=P[1],Z=S((0,u.useState)(!1),2),j=Z[0],M=Z[1],V=S((0,u.useState)(!0),2),k=V[0],D=V[1],H=S((0,u.useState)(void 0),2),F=H[0],G=H[1],q=(0,d.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t||null===(t=t.features)||void 0===t||null===(t=t.userRolesV3)||void 0===t?void 0:t.enabled})),Q=q?p.AR:p.dB,$=(0,m.Z)(void 0,void 0,F,"users,groups,permissions,associatedApplications"),J=$.data,z=$.isLoading,B=$.error,W=$.isValidating,X=function(e){y((0,a.V_)(e))},Y=function(){var e,t=(e=E().mark((function e(t){var r,o,i,a;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i={roleName:void 0},A.displayName!==(null===(r=t.roleName)||void 0===r?void 0:r.toString().trim())){e.next=5;break}D(!0),e.next=10;break;case 5:if(!((null===(o=t.roleName)||void 0===o?void 0:o.toString().trim().length)>=v.nL.ROLE_NAME_MIN_LENGTH)){e.next=10;break}return D(!1),G("displayName eq ".concat(null===(a=t.roleName)||void 0===a?void 0:a.toString().trim()," and audience.value eq ").concat(A.audience.value)),z&&W||((null==J?void 0:J.totalResults)>0||B)&&(i.roleName=n("roles:addRoleWizard.forms.roleBasicDetails.roleName.validations.duplicate",{type:"Role"})),e.abrupt("return",i);case 10:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){b(i,r,o,a,l,"next",e)}function l(e){b(i,r,o,a,l,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}();return u.createElement(u.Fragment,null,u.createElement(s.pJ,{padded:"very"},u.createElement(l.l0,{id:O,uncontrolledForm:!1,validate:Y,noValidate:!0,onSubmit:function(e){var t,r={Operations:[{op:"replace",path:"displayName",value:null==e||null===(t=e.roleName)||void 0===t?void 0:t.toString().trim()}],schemas:[v.lg.PATCH_OP]};M(!0),Q(A.id,r).then((function(){C(I),X({description:n("roles:notifications.updateRole.success.description"),level:i.QU.SUCCESS,message:n("roles:notifications.updateRole.success.message")})})).catch((function(){X({description:n("roles:notifications.updateRole.genericError.description"),level:i.QU.ERROR,message:n("roles:notifications.updateRole.genericError.message")})})).finally((function(){M(!1)}))}},u.createElement(l.gN.Input,{ariaLabel:"roleName",name:"roleName",inputType:"roleName",required:!0,readOnly:w,value:null==A?void 0:A.displayName,label:n("roles:edit.basics.fields.roleName.name"),placeholder:n("roles:edit.basics.fields.roleName.placeholder"),maxLength:v.nL.ROLE_NAME_MAX_LENGTH,minLength:v.nL.ROLE_NAME_MIN_LENGTH}),u.createElement(l.gN.Button,{form:O,buttonType:"primary_btn",ariaLabel:"Update button",name:"update-button",hidden:w,disabled:j||k,loading:j,"data-componentid":"".concat(R,"-role-update-button"),label:n("extensions:develop.apiResource.tabs.general.form.updateButton")}))),u.createElement(f.Z,{hidden:!0}),!w&&u.createElement(s.v9,{sectionHeader:"Danger Zone"},u.createElement(s.cN,{actionTitle:n("roles:edit.basics.dangerZone.actionTitle",{type:"Role"}),header:n("roles:edit.basics.dangerZone.header",{type:"role"}),subheader:n("roles:edit.basics.dangerZone.subheader",{type:"role"}),isButtonDisabled:j||(0,h.A)(null==A?void 0:A.displayName,null==A||null===(t=A.audience)||void 0===t?void 0:t.display),onActionClick:function(){var e;T&&(null==A||null===(e=A.audience)||void 0===e||null===(e=e.type)||void 0===e?void 0:e.toUpperCase())===v.cv.APPLICATION?x(!0):L(!0)},"data-componentid":"".concat(R,"-role-danger-zone")})),U&&u.createElement(s.cV,{onClose:function(){return L(!1)},type:"negative",open:U,assertionHint:n("roles:edit.basics.confirmation.assertionHint"),assertionType:"checkbox",primaryAction:n("common:confirm"),secondaryAction:n("common:cancel"),onSecondaryActionClick:function(){return L(!1)},onPrimaryActionClick:function(){(q?p.sj:p.iy)(A.id).then((function(){X({description:n("roles:notifications.deleteRole.success.description"),level:i.QU.SUCCESS,message:n("roles:notifications.deleteRole.success.message")}),o.m.push(r.$.getPaths().get("ROLES"))}))},"data-componentid":"".concat(R,"-role-confirmation-modal"),closeOnDimmerClick:!1},u.createElement(s.cV.Header,null,n("roles:edit.basics.confirmation.header")),u.createElement(s.cV.Message,{attached:!0,negative:!0},n("roles:edit.basics.confirmation.message",{type:"role."})),u.createElement(s.cV.Content,null,n("roles:edit.basics.confirmation.content",{type:"role"}))),_&&u.createElement(g.u,{selectedRole:A,isOpen:_,onClose:function(){return x(!1)},"data-componentid":"".concat(R,"-role-delete-error-confirmation-modal")}))};C.defaultProps={"data-componentid":"edit-role-basic",enableDeleteErrorConnetedAppsModal:!0}},526:(e,t,n)=>{n.d(t,{w:()=>g});var r=n(758),o=n(44194),i=n(18365),a=n(45002),l=n(65612),s=n(48934),u=n(43800),c=n(47237),d=n(64961),f=n(20494),p=function(e){var t=e.popoverAnchorEl,n=e.onPopoverClose,p=e.primaryText,m=e.secondaryText,v=e.userStore;return o.createElement(c.ZP,{className:"role-chip-popover",open:!!t,anchorEl:t,onClose:n,anchorOrigin:{horizontal:"left",vertical:"bottom"},transformOrigin:{horizontal:"left",vertical:"top"},elevation:0,disableRestoreFocus:!0},o.createElement(u.Z,null,o.createElement(i.Z,{className:"role-chip-more-details"},o.createElement(a.Z,null,o.createElement(l.Z,{container:!0,alignItems:"center",columnSpacing:2},o.createElement(l.Z,{container:!0,alignItems:"center",justifyContent:"flex-start"},o.createElement(l.Z,null,o.createElement(f.JT,{image:o.createElement(f.Xo,{name:p,size:"mini"}),size:"mini"})),o.createElement(l.Z,null,o.createElement(s.Z,{primary:p,secondary:m}))),o.createElement(l.Z,{justifyContent:"flex-end"},v?o.createElement(r.Z,{icon:o.createElement(f.dn,{inline:!0,size:"default",transparent:!0,icon:(0,d.Uz)().userStore,verticalAlign:"middle"}),label:v}):null))))))};function m(){return m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m.apply(null,arguments)}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return h(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var g=function(e){var t=e.key,n=e.setActiveOption,i=e.primaryText,a=e.secondaryText,l=e.userStore,s=e.option,u=e.activeOption,c=v((0,o.useState)(null),2),d=c[0],f=c[1],h=function(){f(null),n(null)};return o.createElement(o.Fragment,null,o.createElement(r.Z,m({},e,{key:t,label:i,onMouseEnter:function(e){f(e.currentTarget),n(s)},onMouseLeave:h})),(null==u?void 0:u.id)===s.id?o.createElement(p,{popoverAnchorEl:d,onPopoverClose:h,primaryText:i,secondaryText:a,userStore:l}):null)}},99096:(e,t,n)=>{n.d(t,{q:()=>Y});var r=n(55007),o=n(39709),i=n(48023),a=n(3192),l=n(86105),s=n(6833),u=n(82406),c=n(20494),d=n(44194),f=n(10479),p=n(47245),m=n(62508),v=n(69837),h=n(17308),g=n(26653),y=n(74822),E=n(82160),b=n(7603),S=n(50342),A=n(17901),O=n(96124),C=n(76271),w=n(63571),I=n(46570),T=n(917),R=n(55495),N=n(50699),U=n(10159),L=n(526),P=n(7231);function _(){return _=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_.apply(null,arguments)}function x(e){return function(e){if(Array.isArray(e))return M(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||j(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,t)||j(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){if(e){if("string"==typeof e)return M(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?M(e,t):void 0}}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var V=function(e){var t,n,r,o,i,a,l=e.isReadOnly,m=e.initialSelectedGroups,j=e.onUpdate,M=e.identityProvider,V=e.onSelectedGroupsListChange,k=e.isExpanded,D=e.onExpansionChange,H=e.isUpdating,F=e["data-componentid"],G=null==m?void 0:m.map((function(e){return{id:e.value,name:e.display}})),q=(0,f.$)().t,Q=(0,p.I0)(),$=(0,T.Z)().UIConfig,J=Z((0,d.useState)(G),2),z=J[0],B=J[1],W=Z((0,d.useState)(void 0),2),X=W[0],Y=W[1],K=Z((0,d.useState)(void 0),2),ee=K[0],te=K[1],ne=Z((0,d.useState)([]),2),re=ne[0],oe=ne[1],ie=Z((0,d.useState)(!1),2),ae=ie[0],le=ie[1],se=k,ue=null==$?void 0:$.connectionResourcesUrl,ce=(t=M.id,n=se,r={headers:{"Content-Type":"application/json"},method:s.f2.GET,url:"".concat(C.h.getState().config.endpoints.identityProviders,"/").concat(t,"/groups")},o=(0,O.Z)(n?r:null),i=o.data,a=o.error,{data:i,error:a,isLoading:!a&&!i,isValidating:o.isValidating,mutate:o.mutate,response:o.response}),de=ce.data,fe=ce.isLoading,pe=ce.error;(0,d.useEffect)((function(){l||(de&&(null==de?void 0:de.length)>0?oe(de):oe([]))}),[de]),(0,d.useEffect)((function(){pe&&Q((0,u.V_)({description:q("roles:edit.groups.notifications.fetchError.description"),level:s.QU.ERROR,message:q("roles:edit.groups.notifications.fetchError.message")}))}),[pe]),(0,d.useEffect)((function(){!l&&G&&z&&te(null==G?void 0:G.filter((function(e){return void 0===(null==z?void 0:z.find((function(t){return t.id===e.id})))})))}),[z]),(0,d.useEffect)((function(){if(V){var e=null==z?void 0:z.map((function(e){return e.id})),t=null==ee?void 0:ee.map((function(e){return e.id}));V(null==M?void 0:M.id,e,t)}}),[z,ee]);var me=(0,d.useCallback)((0,R.Z)((function(e){if((0,N.Z)(e))return oe(de),void le(!1);var t=e.trim(),n=null==de?void 0:de.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())}));oe(n),le(!1)}),P.nL.DEBOUNCE_TIMEOUT),[de]);return d.createElement(c.pJ,{"data-componentid":F,className:"mt-2",basic:!0},d.createElement(v.Z,{onChange:function(e,t){D&&D(M.id,t)},elevation:1,variant:"elevation",disableGutters:!0,expanded:k},d.createElement(g.Z,{"aria-controls":"panel1a-content",id:"panel1a-header",expandIcon:d.createElement(A.v4,null)},d.createElement(d.Fragment,null,d.createElement(c.dn,{square:!0,transparent:!0,className:"card-image",size:"mini",icon:M.image?I.Zs.resolveConnectionResourcePath(ue,M.image):(0,w.xs)().default,floated:"left"}),d.createElement(S.Z,{className:"ml-4",variant:"h6"},M.name))),d.createElement(h.Z,null,d.createElement(d.Fragment,null,l?d.createElement(y.Z,{multiple:!0,disableCloseOnSelect:!0,options:z||[],value:z||[],getOptionLabel:function(e){return e.name},renderInput:function(e){return d.createElement(b.Z,_({},e,{placeholder:q("roles:edit.groups.actions.search.placeholder")}))},renderTags:function(e,t){return e.map((function(e,n){return d.createElement(L.w,_({},t({index:n}),{key:n,primaryText:e.name,option:e,activeOption:X,setActiveOption:Y,onDelete:null}))}))},renderOption:function(e,t){return d.createElement(U.U,{displayName:t.name,renderOptionProps:e})}}):d.createElement(y.Z,{multiple:!0,disableCloseOnSelect:!0,loading:fe||ae,options:re,value:z||[],getOptionLabel:function(e){return e.name},renderInput:function(e){return d.createElement(b.Z,_({},e,{placeholder:q("roles:edit.groups.actions.assign.placeholder")}))},onChange:function(e,t){B(t)},filterOptions:function(e){return e},onInputChange:function(e,t){le(!0),me(t)},isOptionEqualToValue:function(e,t){return e.id===t.id},renderTags:function(e,t){return e.map((function(e,n){return d.createElement(L.w,_({},t({index:n}),{key:n,primaryText:e.name,option:e,activeOption:X,setActiveOption:Y,variant:null!=G&&G.find((function(t){return t.id===e.id}))?"filled":"outlined"}))}))},renderOption:function(e,t,n){var r=n.selected;return d.createElement(U.U,{selected:r,displayName:t.name,renderOptionProps:e})}}),(null==ee?void 0:ee.length)>0?d.createElement(y.Z,{multiple:!0,disableCloseOnSelect:!0,loading:fe||ae,options:ee,value:ee,getOptionLabel:function(e){return e.name},onChange:function(e,t){return function(e){var t=[];ee.forEach((function(n){null!=e&&e.find((function(e){return e.id===n.id}))||t.push(n)})),B([].concat(x(z),t))}(t)},renderInput:function(e){return d.createElement(b.Z,_({},e,{placeholder:q("roles:edit.groups.actions.remove.placeholder"),label:q("roles:edit.groups.actions.remove.label"),margin:"dense"}))},renderTags:function(e,t){return e.map((function(e,n){return d.createElement(L.w,_({},t({index:n}),{key:n,primaryText:e.name,option:e,activeOption:X,setActiveOption:Y,variant:"outlined",onDelete:function(){B([].concat(x(z),[e]))}}))}))},renderOption:function(e,t){return d.createElement(U.U,{displayName:t.name,renderOptionProps:e})}}):null,l?null:d.createElement(E.Z,{className:"role-assigned-button",variant:"contained",loading:H,onClick:j,disabled:G===z},q("common:update"))))))};V.defaultProps={"data-componentid":"edit-role-federated-group-configure-item",isReadOnly:!1};var k=n(39203),D=n(86485);function H(){return H=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},H.apply(null,arguments)}function F(e){return function(e){if(Array.isArray(e))return Q(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||q(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,t)||q(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e,t){if(e){if("string"==typeof e)return Q(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Q(e,t):void 0}}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var $=function(e){var t=e.isReadOnly,n=e.initialSelectedGroups,r=e.onUpdate,o=e.onSelectedGroupsListChange,i=e.isUpdating,a=e["data-componentid"],l=null==n?void 0:n.map((function(e){return{id:e.value,name:e.display}})),m=(0,f.$)().t,v=(0,p.I0)(),h=G((0,d.useState)(l),2),g=h[0],S=h[1],A=G((0,d.useState)(void 0),2),O=A[0],C=A[1],w=G((0,d.useState)(void 0),2),I=w[0],T=w[1],_=G((0,d.useState)([]),2),x=_[0],Z=_[1],j=G((0,d.useState)(void 0),2),M=j[0],V=j[1],q=G((0,d.useState)(!1),2),Q=q[0],$=q[1],J=(0,k.Ug)(null,null,M?"displayName co ".concat(M):null,null),z=J.data,B=J.isLoading,W=J.error;(0,d.useEffect)((function(){t||(z&&0!==(null==z?void 0:z.totalResults)?Z(z.Resources.map((function(e){return{id:e.id,name:e.displayName}}))):Z([]))}),[z]),(0,d.useEffect)((function(){W&&v((0,u.V_)({description:m("roles:edit.groups.notifications.fetchError.description"),level:s.QU.ERROR,message:m("roles:edit.groups.notifications.fetchError.message")}))}),[W]),(0,d.useEffect)((function(){!t&&l&&g&&T(null==l?void 0:l.filter((function(e){return void 0===(null==g?void 0:g.find((function(t){return t.id===e.id})))})))}),[g]),(0,d.useEffect)((function(){if(o){var e=null==g?void 0:g.map((function(e){return e.id})),t=null==I?void 0:I.map((function(e){return e.id}));o(null,e,t)}}),[g,I]);var X=(0,d.useCallback)((0,R.Z)((function(e){e=(0,N.Z)(e)?null:e,V(e)}),P.nL.DEBOUNCE_TIMEOUT),[]);return d.createElement(c.pJ,{className:"mt-2",basic:!0},d.createElement(d.Fragment,null,t?d.createElement(y.Z,{multiple:!0,disableCloseOnSelect:!0,options:g||[],value:g||[],"data-componentid":"".concat(a,"-local-groups-accordion"),getOptionLabel:function(e){return e.name},renderInput:function(e){return d.createElement(b.Z,H({},e,{placeholder:m("roles:edit.groups.actions.search.placeholder")}))},renderTags:function(e,t){return e.map((function(e,n){return d.createElement(L.w,H({},t({index:n}),{key:n,primaryText:D.J.getDisplayName(e.name),userStore:D.J.getUserStore(e.name),option:e,activeOption:O,setActiveOption:C,onDelete:null}))}))},renderOption:function(e,t){return d.createElement(U.U,{displayName:D.J.getDisplayName(t.name),userstore:D.J.getUserStore(t.name),renderOptionProps:e})}}):d.createElement(y.Z,{multiple:!0,disableCloseOnSelect:!0,loading:B||Q,options:x,value:g||[],"data-componentid":"".concat(a,"-local-groups-accordion"),getOptionLabel:function(e){return e.name},renderInput:function(e){return d.createElement(b.Z,H({},e,{placeholder:m("roles:edit.groups.actions.assign.placeholder")}))},onChange:function(e,t){S(t)},filterOptions:function(e){return e},onInputChange:function(e,t){$(!0),X(t)},isOptionEqualToValue:function(e,t){return e.id===t.id},renderTags:function(e,t){return e.map((function(e,n){return d.createElement(L.w,H({},t({index:n}),{key:n,primaryText:D.J.getDisplayName(e.name),userStore:D.J.getUserStore(e.name),option:e,activeOption:O,setActiveOption:C,variant:null!=l&&l.find((function(t){return t.id===e.id}))?"filled":"outlined"}))}))},renderOption:function(e,t,n){var r=n.selected;return d.createElement(U.U,{selected:r,displayName:D.J.getDisplayName(t.name),userstore:D.J.getUserStore(t.name),renderOptionProps:e})}}),(null==I?void 0:I.length)>0?d.createElement(y.Z,{multiple:!0,disableCloseOnSelect:!0,loading:B||Q,options:I,value:I,"data-componentid":"".concat(a,"-local-groups-accordion"),getOptionLabel:function(e){return e.name},onChange:function(e,t){return function(e){var t=[];I.forEach((function(n){null!=e&&e.find((function(e){return e.id===n.id}))||t.push(n)})),S([].concat(F(g),t))}(t)},renderInput:function(e){return d.createElement(b.Z,H({},e,{placeholder:m("roles:edit.groups.actions.remove.placeholder"),label:m("roles:edit.groups.actions.remove.label"),margin:"dense"}))},renderTags:function(e,t){return e.map((function(e,n){return d.createElement(L.w,H({},t({index:n}),{key:n,primaryText:D.J.getDisplayName(e.name),userStore:D.J.getUserStore(e.name),option:e,activeOption:O,setActiveOption:C,variant:"outlined",onDelete:function(){S([].concat(F(g),[e]))}}))}))},renderOption:function(e,t){return d.createElement(U.U,{displayName:D.J.getDisplayName(t.name),userstore:D.J.getUserStore(t.name),renderOptionProps:e})}}):null,t?null:d.createElement(E.Z,{className:"role-assigned-button",variant:"contained",loading:i,onClick:r,disabled:l===g,"data-componentid":"".concat(a,"-local-groups-update-button")},m("common:update"))))};$.defaultProps={"data-componentid":"edit-role-local-groups",isReadOnly:!1};var J=n(9183);function z(e){return function(e){if(Array.isArray(e))return X(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||W(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,t)||W(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e,t){if(e){if("string"==typeof e)return X(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?X(e,t):void 0}}function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Y=function(e){var t,n,v,h=e.role,g=e.onRoleUpdate,y=e.isReadOnly,E=e.tabIndex,b=null===(t=h.audience)||void 0===t||null===(t=t.type)||void 0===t?void 0:t.toUpperCase(),S=D.J.getRoleGroupsGroupedByIdp(null==h?void 0:h.groups),A="LOCAL",O=(0,f.$)().t,C=(0,p.I0)(),w=(0,p.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t||null===(t=t.features)||void 0===t?void 0:t.userRoles})),I=(0,l.cr)(w,P.nL.FEATURE_DICTIONARY.get(P.Yg.EnforceRoleOperationPermission)),T=(0,r.EV)(null==w||null===(n=w.subFeatures)||void 0===n||null===(n=n.roleAssignments)||void 0===n||null===(n=n.scopes)||void 0===n?void 0:n.update),R=y||I&&!T,N=B((0,d.useState)(!1),2),U=N[0],L=N[1],_=B((0,d.useState)([]),2),x=_[0],Z=_[1],j=B((0,d.useState)(new Map),2),M=j[0],k=j[1],H=B((0,d.useState)(new Map),2),F=H[0],G=H[1],q=B((0,d.useState)(A),2),Q=q[0],W=q[1],X=(0,a.af)(null,null,null,"federatedAuthenticators,groups",!0),Y=X.data,K=X.isLoading,ee=X.error,te=(0,o.b)(null===(v=h.audience)||void 0===v?void 0:v.value,b===P.cv.APPLICATION),ne=te.data,re=te.isLoading,oe=te.error,ie=[i.$.AUTHENTICATOR_IDS.ORGANIZATION_ENTERPRISE_AUTHENTICATOR_ID,i.$.AUTHENTICATOR_IDS.EMAIL_OTP_AUTHENTICATOR_ID,i.$.AUTHENTICATOR_IDS.SMS_OTP_AUTHENTICATOR_ID],ae=(0,p.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t||null===(t=t.features)||void 0===t||null===(t=t.userRolesV3)||void 0===t?void 0:t.enabled})),le=ae?J.sS:J.dB;(0,d.useEffect)((function(){var e;if(!(K||ee||b===P.cv.APPLICATION&&(re||oe))){var t=null==Y||null===(e=Y.identityProviders)||void 0===e?void 0:e.filter((function(e){return!ie.includes(e.federatedAuthenticators.defaultAuthenticatorId)}));if(b===P.cv.APPLICATION){var n=[];ne.authenticationSequence.steps.forEach((function(e){e.options.forEach((function(e){var r,o=null==t?void 0:t.find((function(t){return t.name===e.idp}));(null==o||null===(r=o.groups)||void 0===r?void 0:r.length)>0&&n.push(o)}))})),Z(n)}else Z(t)}}),[K,ee,re,oe]);var se=function(e,t,n){k((function(n){var r=new Map(n);return r.set(null!=e?e:A,t),r})),G((function(t){var r=new Map(t);return r.set(null!=e?e:A,n),r}))},ue=function(e,t){W(t?e:void 0)},ce=function(){L(!0);var e=[];null==F||F.forEach((function(t){(null==t?void 0:t.length)>0&&e.push.apply(e,z(t))}));var t=[];Array.from(M.values()).forEach((function(e){null==e||e.forEach((function(e){var n;null!==(n=h.groups)&&void 0!==n&&n.find((function(t){return t.value===e}))||t.push(e)}))}));var n=[];ae?(n.push({op:"add",value:null==t?void 0:t.map((function(e){return{value:e}}))}),e.forEach((function(e){n.push({op:"remove",path:"value eq ".concat(e)})}))):(n.push({op:"add",value:{groups:null==t?void 0:t.map((function(e){return{value:e}}))}}),e.forEach((function(e){n.push({op:"remove",path:"groups[value eq ".concat(e,"]")})})));var r={Operations:n,schemas:[P.lg.PATCH_OP]};le(h.id,r).then((function(){C((0,u.V_)({description:O("roles:edit.groups.notifications.success.description"),level:s.QU.SUCCESS,message:O("roles:edit.groups.notifications.success.message")})),g(E)})).catch((function(e){e.response&&e.response.data.detail?C((0,u.V_)({description:O("roles:edit.groups.notifications.error.description",{description:e.response.data.detail}),level:s.QU.ERROR,message:O("roles:edit.groups.notifications.error.message")})):C((0,u.V_)({description:O("roles:edit.groups.notifications.genericError.description"),level:s.QU.ERROR,message:O("roles:edit.groups.notifications.genericError.message")}))})).finally((function(){L(!1)}))};return d.createElement(c.pJ,{padded:"very"},d.createElement(c.X6,{as:"h4"},O("roles:edit.groups.heading")),d.createElement(c.X6,{subHeading:!0,as:"h6"},O("roles:edit.groups.subHeading")),d.createElement(c.X6,{as:"h5"},O("roles:edit.groups.localGroupsHeading")),d.createElement($,{key:"role-group-accordion-local",isReadOnly:R,onUpdate:ce,initialSelectedGroups:S[A],onSelectedGroupsListChange:se,isUpdating:U}),(null==x?void 0:x.length)>0&&d.createElement(d.Fragment,null,d.createElement(m.Z,{hidden:!0}),d.createElement(m.Z,null),d.createElement(c.X6,{as:"h5"},O("roles:edit.groups.externalGroupsHeading")),null==x?void 0:x.map((function(e){var t=S[e.id];return d.createElement(V,{key:"role-group-accordion-".concat(e.id),isReadOnly:R,onUpdate:ce,initialSelectedGroups:t,identityProvider:e,onSelectedGroupsListChange:se,isExpanded:Q===e.id,onExpansionChange:ue,isUpdating:U})}))))};Y.defaultProps={"data-componentid":"edit-role-group"}},71386:(e,t,n)=>{n.d(t,{G:()=>ne});var r=n(86989),o=n(55007),i=n(26596),a=n(25134),l=n(64961),s=n(90302),u=n(48704),c=n(22669),d=n(10319),f=n(58613),p=n(86105),m=n(6833),v=n(82406),h=n(16590),g=n(20494),y=n(50699),E=n(44194),b=n(10479),S=n(47245),A=n(12638),O=n(26154),C=n(62508),w=n(47625),I=n(82160),T=n(92e3),R=n(6643),N=n(55495),U=n(47018),L=n(89141),P=n(74074);function _(e){return function(e){if(Array.isArray(e))return j(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Z(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,t)||Z(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e,t){if(e){if("string"==typeof e)return j(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?j(e,t):void 0}}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var M=function(e){var t=e.availableUserStores,n=e["data-componentid"],r=void 0===n?"edit-role-users-add-user-modal":n,o=e.handleAddUserSubmit,a=e.handleCloseAddNewUserModal,l=e.isForNonHumanUser,u=e.showAddNewUserModal,c=e.role,d=e.userstore,f=(0,b.$)().t,h=x((0,g.IK)(),3),A=h[0],O=h[2],C=(0,S.I0)(),Z=x((0,E.useState)(!1),2),j=Z[0],M=Z[1],V=x((0,E.useState)(!1),2),k=V[0],D=V[1],H=x((0,E.useState)([]),2),F=H[0],G=H[1],q=x((0,E.useState)([]),2),Q=q[0],$=q[1],J=x((0,E.useState)(null),2),z=J[0],B=J[1],W=x((0,E.useState)(d),2),X=W[0],Y=W[1],K=l?"edit.agents":"edit.users",ee=(0,T.WW)(s.r.DEFAULT_RESOURCE_LIST_ITEM_LIMIT,0,z,null,X,null,!l),te=ee.data,ne=ee.isLoading,re=ee.isValidating,oe=ee.error,ie=(0,i.E)(s.r.DEFAULT_RESOURCE_LIST_ITEM_LIMIT,0,z,null,l),ae=ie.data,le=ie.isLoading,se=l?null==ae?void 0:ae.Resources:null==te?void 0:te.Resources,ue=l?le:ne||re;(0,E.useEffect)((function(){if(!ue)if(se&&se.length>0){var e=[];se.forEach((function(t){var n,r=!1;(null==c||null===(n=c.users)||void 0===n?void 0:n.length)>0&&c.users.forEach((function(e){e.display===(null==t?void 0:t.userName)&&(r=!0)})),r||e.push(t)})),G(e)}else G([])}),[se,ue]),(0,E.useEffect)((function(){var e;oe&&(null!=oe&&null!==(e=oe.response)&&void 0!==e&&null!==(e=e.data)&&void 0!==e&&e.description?C((0,v.V_)({description:oe.response.data.description,level:m.QU.ERROR,message:f("console:manage.features.users.notifications.fetchUsers.error.message")})):C((0,v.V_)({description:f("console:manage.features.users.notifications.fetchUsers.genericError.description"),level:m.QU.ERROR,message:f("console:manage.features.users.notifications.fetchUsers.genericError.message")})))}),[oe]);var ce=(0,E.useCallback)((0,N.Z)((function(e,t){(0,y.Z)(t.trim())?B(null):B("userName co "+t)}),1e3),[]);return E.createElement(U.Z,{"data-componentid":r,dimmer:"blurring",open:u,size:"small",className:"user-roles"},E.createElement(U.Z.Header,null,f(l?"roles:addRoleWizard.agents.assignAgentModal.heading":"roles:addRoleWizard.users.assignUserModal.heading",{type:"Role"}),E.createElement(g.X6,{subHeading:!0,ellipsis:!0,as:"h6"},f(l?"roles:addRoleWizard.agents.assignAgentModal.subHeading":"roles:addRoleWizard.users.assignUserModal.subHeading",{type:"role"}))),E.createElement(U.Z.Content,{className:"add-role-user-modal-content"},E.createElement(L.Z,null,A&&O,E.createElement(g.IX,{compact:!0,basic:!0,className:"one-column-selection",selectionComponent:!0,searchPlaceholder:f(l?"roles:addRoleWizard.agents.assignAgentModal.search":"groups:edit.users.searchUsers"),isLoading:ue,handleHeaderCheckboxChange:function(){return $(k?[]:F),void D(!k)},isHeaderCheckboxChecked:k,handleUnelectedListSearch:function(e,t){var n=t.value;ce(e,n)},showSelectAllCheckbox:!ue&&F.length>0,"data-componentid":"".concat(r,"-transfer-component"),leftActionPanel:!l&&(null==t?void 0:t.length)>0&&E.createElement(P.Z,{width:1,className:"add-role-user-modal-userstore-dropdown"},E.createElement(w.Z,{fluid:!0,selection:!0,labeled:!0,options:t,"data-componentid":"".concat(r,"-userstore-dropdown"),name:"userstore",disabled:!1,value:X,onChange:function(e,t){Y(t.value),D(!1)},tabIndex:1,maxLength:60}))},E.createElement(g.Jv,{bordered:!0,selectionComponent:!0,isListEmpty:(0,y.Z)(F)||F.length<=0,isLoading:ue,listType:"unselected",selectAllCheckboxLabel:f("groups:edit.users.selectAllUsers"),"data-componentid":"".concat(r,"-unselected-transfer-list"),emptyPlaceholderContent:oe?f("roles:edit.users.placeholders.error"):(0,y.Z)(z)?f("roles:"+K+".placeholders.beginSearch"):f("roles:"+K+".placeholders.emptySearchResult"),emptyPlaceholderDefaultContent:f("transferList:list.emptyPlaceholders.default")},null==F?void 0:F.map((function(e,t){var n,o,i,a=R.QH.resolveUserListSubheader(e),s=(0,p.WX)(null==e?void 0:e.userName);return E.createElement(g.qT,{handleItemChange:function(){return function(e){var t=(0,y.Z)(Q)?[]:_(Q);t.includes(e)?t.splice(t.indexOf(e),1):t.push(e),$(t)}(e)},key:t,listItem:l?null!==(n=null===(o=e["urn:scim:wso2:agent:schema"])||void 0===o?void 0:o.DisplayName)&&void 0!==n?n:s:null!=a?a:s,listItemId:e.id,listItemIndex:t,isItemChecked:-1!==(null==Q?void 0:Q.findIndex((function(t){return t.id===e.id}))),showSecondaryActions:!1,showListSubItem:!0,listSubItem:l?(null===(i=e["urn:scim:wso2:agent:schema"])||void 0===i?void 0:i.DisplayName)&&s:a&&E.createElement(g.EK,{compact:!0,withBackground:!1},s),"data-componentid":"".concat(r,"-unselected-transfer-list-item-").concat(t)})})))))),E.createElement(U.Z.Actions,null,E.createElement(L.Z,null,E.createElement(L.Z.Row,{columns:2},E.createElement(L.Z.Column,{mobile:8,tablet:8,computer:8},E.createElement(g.Qj,{"data-componentid":"".concat(r,"-cancel-button"),onClick:a,floated:"left"},f("common:cancel"))),E.createElement(L.Z.Column,{mobile:8,tablet:8,computer:8},E.createElement(I.Z,{variant:"contained",color:"primary","data-componentid":"".concat(r,"-save-button"),onClick:function(){M(!0),o(Q)},loading:j,disabled:j},f("common:save")))))))},V=n(9183),k=n(7231),D=n(51835),H=n.n(D),F=n(27975),G=n.n(F),q=n(55900),Q=n.n(q),$=n(21555),J=n.n($),z=n(3621),B=n.n(z),W=n(5062),X=n.n(W),Y=n(4735),K={};K.styleTagTransform=X(),K.setAttributes=J(),K.insert=Q().bind(null,"head"),K.domAPI=G(),K.insertStyleElement=B();H()(Y.Z,K);Y.Z&&Y.Z.locals&&Y.Z.locals;function ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return te(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?te(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var ne=function(e){var t,n,I,T=e.role,R=e.onRoleUpdate,N=e.isReadOnly,U=e.tabIndex,L=e.activeUserStore,P=e.isForNonHumanUser,_=e.isPrivilegedUsersToggleVisible,x=void 0!==_&&_,Z=e["data-componentid"],j=void 0===Z?"edit-role-users":Z,D=(0,b.$)().t,H=(0,S.I0)(),F=(0,i.E)(s.r.DEFAULT_RESOURCE_LIST_ITEM_LIMIT,0,null,null,P).data,G=P?"roles:edit.agents.":"roles:edit.users.",q=(0,S.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t?void 0:t.primaryUserStoreDomainName})),Q=(0,S.v9)((function(e){var t;return null===(t=e.config.ui)||void 0===t?void 0:t.systemReservedUserStores})),$=(0,S.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t||null===(t=t.features)||void 0===t?void 0:t.consoleSettings})),J=(0,S.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t||null===(t=t.features)||void 0===t?void 0:t.userRoles})),z=(0,p.cr)(J,k.nL.FEATURE_DICTIONARY.get(k.Yg.EnforceRoleOperationPermission)),B=(0,o.EV)(null==J||null===(t=J.subFeatures)||void 0===t||null===(t=t.roleAssignments)||void 0===t||null===(t=t.scopes)||void 0===t?void 0:t.update),W=N||z&&!B,X=!(null!=$&&null!==(n=$.disabledFeatures)&&void 0!==n&&n.includes("consoleSettings.userstoreSelectionInAdministrators")),Y=ee((0,E.useState)((0,y.Z)(L)?null===u.w||void 0===u.w?void 0:u.w.primaryUserstoreName:L),2),K=Y[0],te=Y[1],ne=ee((0,E.useState)([]),2),re=ne[0],oe=ne[1],ie=ee((0,E.useState)(!1),2),ae=ie[0],le=ie[1],se=ee((0,E.useState)(null),2),ue=se[0],ce=se[1],de=ee((0,E.useState)(s.r.DEFAULT_RESOURCE_LIST_ITEM_LIMIT),2),fe=de[0],pe=de[1],me=ee((0,E.useState)(0),2),ve=me[0],he=me[1],ge=ee((0,E.useState)([]),2),ye=ge[0],Ee=ge[1],be=ee((0,E.useState)(!1),2),Se=be[0],Ae=be[1],Oe=ee((0,E.useState)(!1),2),Ce=Oe[0],we=Oe[1],Ie=(0,S.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t||null===(t=t.features)||void 0===t||null===(t=t.userRolesV3)||void 0===t?void 0:t.enabled})),Te=Ie?V.q$:V.dB,Re="AGENT"!==K&&(!x&&X||K!==d.pH),Ne=(0,f.Z)(),Ue=Ne.isLoading,Le=Ne.userStoresList,Pe=(0,E.useMemo)((function(){var e,t=P?[{key:-1,text:"AGENT",value:"AGENT"}]:[{key:-1,text:null===u.w||void 0===u.w?void 0:u.w.primaryUserstoreName,value:null===u.w||void 0===u.w?void 0:u.w.primaryUserstoreName}];!Le||Ue||P||(null==Le?void 0:Le.length)>0&&(null==Le||null===(e=Le.filter((function(e){return!(null!=Q&&Q.includes(e.name))})))||void 0===e||e.forEach((function(e,n){var r=e.enabled;if(e.name.toUpperCase()!==u.w.primaryUserstoreName&&r){var o={key:n,text:e.name,value:e.name};t.push(o)}})));return t}),[Le,Ue,P,Q]);(0,E.useEffect)((function(){var e,t,n;if(null!=T&&null!==(e=T.users)&&void 0!==e&&e.length){var r=null!==(t=null==T||null===(n=T.users)||void 0===n?void 0:n.map((function(e){return{id:e.value,userName:e.display}})).filter((function(e){return xe(e,K)})))&&void 0!==t?t:[];oe(r)}else oe([])}),[T,K]),(0,E.useEffect)((function(){Ze(ve,fe,re,ue)}),[ve,fe,re,ue]),(0,E.useEffect)((function(){te((0,y.Z)(L)?null===u.w||void 0===u.w?void 0:u.w.primaryUserstoreName:L)}),[L]);var _e,xe=function(e,t){var n=e.userName.split("/");return 1===n.length&&h.StringUtils.isEqualCaseInsensitive(t,q)||2===n.length&&h.StringUtils.isEqualCaseInsensitive(n[0],t)},Ze=function(e,t,n,r){if(n)if((0,y.Z)(r))Ee(null==n?void 0:n.slice(e,t+e));else{var o=n.filter((function(e){return e.userName.toLowerCase().includes(r.toLowerCase())}));Ee(null==o?void 0:o.slice(e,t+e))}else Ee([])},je=function(){Ae(!Se),ce(null)},Me=function(e){var t,n,r=null==F||null===(t=F.Resources)||void 0===t?void 0:t.find((function(t){return t.userName===e.userName}));return null==r||null===(n=r["urn:scim:wso2:agent:schema"])||void 0===n?void 0:n.DisplayName};return E.createElement(g.pJ,{padded:"very",className:"list-role-users-section"},E.createElement(r.Z,{display:"flex",justifyContent:"space-between",alignItems:"center"},E.createElement("div",null,E.createElement(g.X6,{as:"h4","data-componentid":j+"-heading"},D(G+"heading")),E.createElement(g.X6,{subHeading:!0,ellipsis:!0,as:"h6"},D(G+"subHeading"))),!W&&E.createElement(g.KM,{"data-componentid":"".concat(j,"-list-edit-button"),onClick:function(){we(!0)}},E.createElement(O.Z,{name:"plus"}),D(G+"list.emptyPlaceholder.action"))),E.createElement(C.Z,{hidden:!0}),E.createElement(g.PS,{advancedSearch:E.createElement(a.n,{"data-componentid":"".concat(j,"-list-advanced-search"),onFilter:function(e){return function(e){ce(e),he(0)}(null==e?void 0:e.trim())},disableSearchFilterDropdown:!0,filterAttributeOptions:[],placeholder:D("users:advancedSearch.placeholder"),defaultSearchAttribute:"",defaultSearchOperator:"",triggerClearQuery:Se,disableSearchAndFilterOptions:0===(null==re?void 0:re.length)}),currentListSize:null==T||null===(I=T.users)||void 0===I?void 0:I.length,listItemLimit:fe,onItemsPerPageDropdownChange:function(e,t){pe(t.value)},"data-componentid":"".concat(j,"-list-layout"),onPageChange:function(e,t){var n=(t.activePage-1)*fe;he(n)},showPagination:!0,totalPages:Math.ceil((null==re?void 0:re.length)/fe),totalListSize:null==re?void 0:re.length,isLoading:Ue||ae,showPaginationPageLimit:!W,rightActionPanel:Re&&E.createElement(w.Z,{"data-componentid":"".concat(j,"-list-usertore-dropdown"),selection:!0,options:Pe,placeholder:D("console:manage.features.groups.list.storeOptions"),onChange:function(e,t){he(0),pe(s.r.DEFAULT_RESOURCE_LIST_ITEM_LIMIT),te(t.value)},defaultValue:L||u.w.primaryUserstoreName})},E.createElement(g.wQ,{isLoading:Ue,loadingStateOptions:{count:s.r.DEFAULT_RESOURCE_LIST_ITEM_LIMIT,imageType:"circular"},actions:[{"data-componentid":"".concat(j,"-list-item-delete-button"),hidden:function(){return W},icon:function(){return"trash alternate"},onClick:function(e,t){return function(e){var t=Ie?{Operations:[{op:"remove",path:"value eq ".concat(e.id)}],schemas:["urn:ietf:params:scim:api:messages:2.0:PatchOp"]}:{Operations:[{op:"remove",path:"users[value eq ".concat(e.id,"]")}],schemas:["urn:ietf:params:scim:api:messages:2.0:PatchOp"]};le(!0),Te(T.id,t).then((function(e){200===(null==e?void 0:e.status)?H((0,v.V_)({description:D(G+"notifications.success.description"),level:m.QU.SUCCESS,message:D(G+"notifications.success.message")})):202===(null==e?void 0:e.status)&&H((0,v.V_)({description:D(G+"notifications.pendingApproval.description"),level:m.QU.WARNING,message:D(G+"notifications.pendingApproval.message")})),R(U)})).catch((function(e){var t;null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(t=t.data)&&void 0!==t&&t.detail?H((0,v.V_)({description:D("roles:edit.groups.notifications.error.description",{description:e.response.data.detail}),level:m.QU.ERROR,message:D("roles:edit.groups.notifications.error.message")})):H((0,v.V_)({description:D("roles:edit.groups.notifications.genericError.description"),level:m.QU.ERROR,message:D("roles:edit.groups.notifications.genericError.message")}))})).finally((function(){le(!1)}))}(t)},popupText:function(){return D("common:delete")},renderer:"semantic-icon"}],columns:(_e=[{allowToggleVisibility:!1,dataIndex:"name",id:"name",key:"name",render:function(e){var t,n,r=P&&null!==(t=Me(e))&&void 0!==t?t:(0,p.WX)(null==e?void 0:e.userName);return E.createElement(A.Z,{image:!0,as:"h6",className:"header-with-icon","data-componentid":"".concat(j,"-list-item-heading")},E.createElement(g.Yt,{"data-componentid":"".concat(j,"-list-item-image"),name:P?null!==(n=Me(e))&&void 0!==n?n:"Agent":c.QH.resolveAvatarUsername(e),size:"mini",image:e.profileUrl,spaced:"right","data-hj-suppress":""}),E.createElement(A.Z.Content,null,E.createElement("div",null,r,P&&E.createElement(A.Z.Subheader,{"data-testid":"".concat(j,"-item-sub-heading")},Me(e)&&(0,p.WX)(null==e?void 0:e.userName)))))},title:null}],_e.push({allowToggleVisibility:!1,dataIndex:"action",id:"actions",key:"actions",textAlign:"right",title:""}),_e),data:ye,onRowClick:function(){return null},placeholders:ue?E.createElement(g.$J,{action:E.createElement(g.Qj,{onClick:je},D("users:usersList.search.emptyResultPlaceholder.clearButton")),image:(0,l.jF)().emptySearch,imageSize:"tiny",title:D("users:usersList.search.emptyResultPlaceholder.title"),subtitle:[D("users:usersList.search.emptyResultPlaceholder.subTitle.0",{query:ue}),D("users:usersList.search.emptyResultPlaceholder.subTitle.1")]}):0===ye.length?E.createElement(g.$J,{title:D(G+"list.emptyPlaceholder.title"),subtitle:[D(G+"list.emptyPlaceholder.subtitles",{type:"role"})],image:(0,l.jF)().emptyList,imageSize:"tiny"}):null,selectable:!1,showHeader:!0,transparent:!0})),Ce&&E.createElement(M,{"data-componentid":"".concat(j,"-add-user-modal"),showAddNewUserModal:Ce,handleAddUserSubmit:function(e){var t=null==e?void 0:e.map((function(e){return{display:e.userName,value:e.id}})),n=Ie?{Operations:[{op:"add",value:t}],schemas:["urn:ietf:params:scim:api:messages:2.0:PatchOp"]}:{Operations:[{op:"add",value:{users:t}}],schemas:["urn:ietf:params:scim:api:messages:2.0:PatchOp"]};le(!0),Te(T.id,n).then((function(e){200===(null==e?void 0:e.status)?H((0,v.V_)({description:D(G+"notifications.success.description"),level:m.QU.SUCCESS,message:D(G+"notifications.success.message")})):202===(null==e?void 0:e.status)&&H((0,v.V_)({description:D(G+"notifications.pendingApproval.description"),level:m.QU.WARNING,message:D(G+"notifications.pendingApproval.message")})),R(U)})).catch((function(e){var t;null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(t=t.data)&&void 0!==t&&t.detail?H((0,v.V_)({description:D("roles:edit.groups.notifications.error.description",{description:e.response.data.detail}),level:m.QU.ERROR,message:D("roles:edit.groups.notifications.error.message")})):H((0,v.V_)({description:D("roles:edit.groups.notifications.genericError.description"),level:m.QU.ERROR,message:D("roles:edit.groups.notifications.genericError.message")}))})).finally((function(){le(!1),we(!1)}))},handleCloseAddNewUserModal:function(){we(!1)},role:T,userstore:K,availableUserStores:!x&&X||K!==d.pH?Pe:[],isForNonHumanUser:P}))}},9779:(e,t,n)=>{n.d(t,{A:()=>i,H:()=>o});var r=n(7231),o=function(e,t,n){var r=t.shift(),i=n.find((function(e){return e.name===r}));return i||(i={key:e.resourcePath,name:r,title:e.displayName},n.push(i)),t.length&&o(e,t,i.children||(i.children=[])),n},i=function(e,t){return!(!e||!t)&&(e===r.nL.IMPERSONATOR_ROLE_NAME&&t===r.nL.MY_ACCOUNT_APP_NAME)}},33519:(e,t,n)=>{n.d(t,{u:()=>f});var r=n(17901),o=n(29571),i=n(32637),a=n(32463),l=n(16199),s=n(48934),u=n(20494),c=n(44194),d=n(10479),f=function(e){var t,n=e.isOpen,f=e.onClose,p=e.selectedRole,m=e["data-componentid"],v=(0,d.$)().t;return c.createElement(u.cV,{onClose:function(){return f()},type:"negative",open:n,secondaryAction:v("common:close"),onSecondaryActionClick:function(){return f()},"data-testid":m,closeOnDimmerClick:!1},c.createElement(u.cV.Header,{"data-testid":"".concat(m,"-header")},v("roles:list.confirmations.deleteItemError.header")),c.createElement(u.cV.Message,{attached:!0,negative:!0,"data-testid":"".concat(m,"-message")},v("roles:list.confirmations.deleteItemError.message")),c.createElement(u.cV.Content,{"data-testid":"".concat(m,"-content")},c.createElement("span",null,v("roles:list.confirmations.deleteItemError.content")),c.createElement(o.Z,{hidden:!0}),c.createElement(i.Z,null,c.createElement(a.Z,null,c.createElement(l.Z,null,c.createElement(r.sB,null)),c.createElement(s.Z,{primary:null==p||null===(t=p.audience)||void 0===t?void 0:t.display})))))};f.defaultProps={"data-componentid":"role-delete-error-confirmation-modal"}},86485:(e,t,n)=>{n.d(t,{J:()=>y});var r,o=n(60486),i=n(76271),a=n(41355),l=n(10319),s=n(86105),u=n(61444),c=n(50699),d=n(9183),f=n(9779);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,g(r.key),r)}}function v(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function h(e,t,n){return(t=g(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==p(t)?t:t+""}var y=v((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}));r=y,h(y,"validateRoleName",(function(e){var t={filter:"displayName eq "+e,schemas:["urn:ietf:params:scim:api:messages:2.0:SearchRequest"],startIndex:1};return(0,d.QW)(t).then((function(e){var t;return 0===(null==e||null===(t=e.data)||void 0===t?void 0:t.totalResults)}))})),h(y,"getAllPermissions",(function(e){return(0,d.pZ)().then((function(t){if(200===t.status&&t.data&&t.data instanceof Array){var n,r,i;return(null===(n=(r=((0,c.Z)(e)?t.data:t.data.filter((function(t){return!e.includes(t.resourcePath)}))).reduce((function(e,t){return(0,f.H)(t,t.resourcePath.replace(/^\/|\/$/g,"").split("/"),e)}),[]))[0])||void 0===n?void 0:n.title)!==o.$.PERMISSIONS_ROOT_NODE?null===(i=r[0])||void 0===i?void 0:i.children:r}}))})),h(y,"getDisplayName",(function(e){return(null==e?void 0:e.split("/").length)>1?null==e?void 0:e.split("/")[1]:e})),h(y,"getGroupDisplayName",(function(e){return r.getDisplayName(null==e?void 0:e.display)})),h(y,"getUserUsername",(function(e){return r.getDisplayName(null==e?void 0:e.userName)})),h(y,"getUserStore",(function(e){var t,n=(0,s.cr)(null===(t=i.h.getState().config)||void 0===t||null===(t=t.ui)||void 0===t||null===(t=t.features)||void 0===t?void 0:t.userStores,l.u4.FEATURE_DICTIONARY.get("USER_STORE_PRIMARY"));return(null==e?void 0:e.split("/").length)>1?null==e?void 0:e.split("/")[0]:n?u.I18n.instance.t("users:userstores.userstoreOptions.primary"):null})),h(y,"getNameToDisplayOfUser",(function(e){var t,n,o,i=null===(t=e.name)||void 0===t?void 0:t.givenName,a=null===(n=e.name)||void 0===n?void 0:n.familyName,l=null===(o=e.emails)||void 0===o||null===(o=o[0])||void 0===o?void 0:o.toString();return i&&a?"".concat(i," ").concat(a):i||(a||(l||r.getUserUsername(e)))})),h(y,"getUserManagedBy",(function(e){var t,n=null===(t=e[a.k.scim.systemSchema])||void 0===t?void 0:t.idpType;return n?n.split("/").length>1?n.split("/")[1]:n:null})),h(y,"getRoleGroupsGroupedByIdp",(function(e){var t=new Map;return(null==e?void 0:e.length)>0&&e.forEach((function(e){var n,r=e.$ref.match(/identity-providers\/([^/]+)/);n=r?r[1]:"LOCAL",t[n]||(t[n]=[]),t[n].push(e)})),t}))},51318:(e,t,n)=>{function r(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return o(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,l=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){s=!0,a=e},f:function(){try{l||null==n.return||n.return()}finally{if(s)throw a}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{F2:()=>l,P_:()=>c});var i=function(e){return Math.random()*e},a=function(e,t){var n,o=r(t);try{for(o.s();!(n=o.n()).done;){var i=n.value;e=e.replace(i,"")}}catch(a){o.e(a)}finally{o.f()}return e},l=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1,d=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1,f=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,p=arguments.length>10&&void 0!==arguments[10]?arguments[10]:[],m="",v="",h=a("abcdefghijklmnopqrstuvwxyz",p),g=a("ABCDEFGHIJKLMNOPQRSTUVWXYZ",p),y=a("0123456789",p),E=a("!#$%&'()*+,-./:;<=>?@[]^_{|}~",p),b=0;b<i;b++)v+=s(v,h);for(var S=0;S<l;S++)v+=s(v,g);for(var A=0;A<c;A++)v+=s(v,y);for(var O=0;O<d;O++)v+=s(v,E);m=v;var C="";C=t?C+h:C,C=n?C+g:C,C=r?C+y:C,C=o?C+E:C,0===i&&0===l&&0===c&&0===d&&(C=C+h+g+y+E);var w=new Set(m.split("")),I=!1;f>0&&w.size<f&&(m=Array.from(w).join(""),I=!0);for(var T=e-m.length,R=0;R<T;R++)m+=I?u(m,C):s(m,C);return m},s=function(e,t){for(var n=t.charAt(i(t.length));n===e.charAt(e.length-1);)n=t.charAt(i(t.length));return n},u=function(e,t){for(var n=t.charAt(i(t.length));e.includes(n);)n=t.charAt(i(t.length));return n},c=function(e){var t=null==e?void 0:e.filter((function(e){return"password"===e.field}));if(!(void 0===t||t.length<1)){var n=t[0],r=null==n?void 0:n.rules;if(!((null==r?void 0:r.length)<1))return{consecutiveCharacterValidatorEnabled:null!==d(r,"RepeatedCharacterValidator","max.consecutive.character"),field:"password",maxConsecutiveCharacters:d(r,"RepeatedCharacterValidator","max.consecutive.character")?d(r,"RepeatedCharacterValidator","max.consecutive.character"):"0",maxLength:d(r,"LengthValidator","max.length")?d(r,"LengthValidator","max.length"):"30",minLength:d(r,"LengthValidator","min.length")?d(r,"LengthValidator","min.length"):"8",minLowerCaseCharacters:d(r,"LowerCaseValidator","min.length")?d(r,"LowerCaseValidator","min.length"):"0",minNumbers:d(r,"NumeralValidator","min.length")?d(r,"NumeralValidator","min.length"):"0",minSpecialCharacters:d(r,"SpecialCharacterValidator","min.length")?d(r,"SpecialCharacterValidator","min.length"):"0",minUniqueCharacters:d(r,"UniqueCharacterValidator","min.unique.character")?d(r,"UniqueCharacterValidator","min.unique.character"):"0",minUpperCaseCharacters:d(r,"UpperCaseValidator","min.length")?d(r,"UpperCaseValidator","min.length"):"0",type:"rules",uniqueCharacterValidatorEnabled:null!==d(r,"UniqueCharacterValidator","min.unique.character")}}},d=function(e,t,n){var r=null==e?void 0:e.filter((function(e){return e.validator===t}));if((null==r?void 0:r.length)>0){var o=r.flatMap((function(e){var t;return null!==(t=e.properties)&&void 0!==t?t:[]}));if((o=o.filter((function(e){return e.key===n}))).length>0)return o[0].value}return null}},6643:(e,t,n)=>{n.d(t,{CU:()=>r.CU,Dy:()=>r.Dy,F2:()=>o.F2,I_:()=>r.I_,KZ:()=>r.KZ,P_:()=>o.P_,QH:()=>r.QH,_g:()=>r._g,al:()=>r.al,t$:()=>r.t$});var r=n(22669),o=n(51318)},84455:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(92336),o=n(31549),i=n(32753),a=n(14517);const l=(0,n(44194).forwardRef)(((e,t)=>{var{className:n}=e,l=(0,r.__rest)(e,["className"]);return(0,o.jsx)(i.Z,Object.assign({ref:t,className:(0,a.Z)("oxygen-card-content","OxygenCardContent-root",n)},l))}))},45002:(e,t,n)=>{n.d(t,{Z:()=>r.Z});var r=n(84455)},47237:(e,t,n)=>{n.d(t,{ZP:()=>l});var r=n(92336),o=n(31549),i=n(17751),a=n(14517);const l=(0,n(44194).forwardRef)(((e,t)=>{var{className:n}=e,l=(0,r.__rest)(e,["className"]);return(0,o.jsx)(i.ZP,Object.assign({className:(0,a.Z)("oxygen-popover","OxygenPopover-root",n)},l,{ref:t}))}))},4735:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(81611),o=n.n(r),i=n(83948),a=n.n(i)()(o());a.push([e.id,".edit-role.users .MuiFormControl-root{height:100%}.edit-role.users .MuiFormControl-root .MuiSelect-select{padding:11.5px}.edit-role.users .MuiFormControl-root .MuiInputBase-adornedStart{padding:6px !important}.edit-role.users .MuiFormControl-root .MuiInputBase-adornedEnd{padding:9.5px}.edit-role.users .MuiFormControl-root .MuiInputBase-formControl{height:100%}.list-role-users-section .ui.table thead th{background:rgba(0,0,0,0)}.add-role-user-modal-content{min-height:400px}.ui.grid .column.add-role-user-modal-userstore-dropdown{padding-right:0px}",""]);const l=a}}]);