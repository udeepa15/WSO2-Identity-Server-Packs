"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[9542],{89542:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ke});var r=n(55007),o=n(60486),a=n(40838);const i={renderAlternativeSmsProviderOptions:function(){return null}};var l,c=n(43939),s=n(6833),u=n(82406),d=n(79438),p=n(20494),m=n(44194),h=n(10479),v=n(47245),f=n(41193),E=n(89141),y=n(62508),S=n(91970),g=n(99925),_=n(86989),O=n(82160),P=n(74868),I=n(22764),R=n(59673),w=(n(6387),n(60507)),b=function(e){return e.NONE="NONE",e.BEARER="BEARER",e.BASIC="BASIC",e.API_KEY="API_KEY",e.CLIENT_CREDENTIAL="CLIENT_CREDENTIAL",e}({}),T=function(e){return e.JSON="JSON",e.FORM="FORM",e}({});function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,D(r.key),r)}}function L(e,t,n){return t&&A(e.prototype,t),n&&A(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function N(e,t,n){return(t=D(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D(e){var t=function(e,t){if("object"!=C(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=C(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==C(t)?t:t+""}var M=L((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}));l=M,N(M,"SMS_PROVIDER_CONFIG_NAME","SMSPublisher"),N(M,"TWILIO_SMS_PROVIDER","TwilioSMSProvider"),N(M,"TWILIO","Twilio"),N(M,"VONAGE_SMS_PROVIDER","VonageSMSProvider"),N(M,"VONAGE","Vonage"),N(M,"CUSTOM_SMS_PROVIDER","CustomSMSProvider"),N(M,"CUSTOM","Custom"),N(M,"SMS_PROVIDER_CONFIG_FETCH_ERROR_CODE","ASG-SPC-00001"),N(M,"SMS_PROVIDER_CONFIG_FETCH_INVALID_STATUS_CODE_ERROR_CODE","ASG-SPC-00002"),N(M,"SMS_PROVIDER_CONFIG_UPDATE_ERROR_CODE","ASG-SP-00003"),N(M,"SMS_PROVIDER_CONFIG_DELETE_ERROR_CODE","ASG-SP-60004"),N(M,"SMS_PROVIDER_CONFIG_NOT_FOUND_ERROR_CODE","NSM-60006"),N(M,"SMS_PROVIDER_CONFIG_UNABLE_TO_DISABLE_ERROR_CODE","NSM-60008"),N(M,"SMS_NOTIFICATION_SENDER_DELETION_ERROR_ACTIVE_SUBS","NSM-65015"),N(M,"SMS_PROVIDER_CONFIG_FIELD_MIN_LENGTH",0),N(M,"SMS_PROVIDER_CONFIG_FIELD_MAX_LENGTH",100),N(M,"SMS_PROVIDER_CONFIG_TEMPLATE_FIELD_MAX_LENGTH",1020),N(M,"SMS_REGEX",/^[^\s@]+@[^\s@]+\.[^\s@]+$/),N(M,"AUTH_TYPES",[{key:b.NONE,text:"externalApiAuthentication:fields.authentication.types.none.name",value:b.NONE},{key:b.BASIC,text:"externalApiAuthentication:fields.authentication.types.basic.name",value:b.BASIC},{key:b.CLIENT_CREDENTIAL,text:"externalApiAuthentication:fields.authentication.types.clientCredential.name",value:b.CLIENT_CREDENTIAL},{key:b.BEARER,text:"externalApiAuthentication:fields.authentication.types.bearer.name",value:b.BEARER},{key:b.API_KEY,text:"externalApiAuthentication:fields.authentication.types.apiKey.name",value:b.API_KEY}]),N(M,"ErrorMessages",{SMS_PROVIDER_CONFIG_DELETE_ERROR_CODE:new w.O(l.SMS_PROVIDER_CONFIG_DELETE_ERROR_CODE,"An error occurred while deleting the sms provider configurations.","Error while deleting sms provider configurations",null),SMS_PROVIDER_CONFIG_FETCH_ERROR_CODE:new w.O(l.SMS_PROVIDER_CONFIG_FETCH_ERROR_CODE,"An error occurred while fetching the sms provider configurations.","Error while fetching the sms provider configurations",null),SMS_PROVIDER_CONFIG_FETCH_INVALID_STATUS_CODE_ERROR_CODE:new w.O(l.SMS_PROVIDER_CONFIG_FETCH_INVALID_STATUS_CODE_ERROR_CODE,"Received an invalid status code while fetching the sms provider configurations.","Invalid Status Code while fetching the sms provider configurations",null),SMS_PROVIDER_CONFIG_UPDATE_ERROR_CODE:new w.O(l.SMS_PROVIDER_CONFIG_UPDATE_ERROR_CODE,"An error occurred while updating the sms provider configurations.","Error while updating the sms provider configurations",null)});var x=n(51835),k=n.n(x),F=n(27975),V=n.n(F),G=n(55900),Z=n.n(G),j=n(21555),U=n.n(j),q=n(3621),H=n.n(q),W=n(5062),K=n.n(W),B=n(24919),X={};X.styleTagTransform=K(),X.setAttributes=U(),X.insert=Z().bind(null,"head"),X.domAPI=V(),X.insertStyleElement=H();k()(B.Z,X);B.Z&&B.Z.locals&&B.Z.locals;function z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Y(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Y(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var $=function(e){var t=e["data-componentid"],n=e.isLoading,r=e.isReadOnly,o=e.onSubmit,a=e.hasExistingConfig,i=e.currentAuthType,l=e.endpointAuthType,c=e.setEndpointAuthType,s=e.isAuthenticationUpdateFormState,u=e.setIsAuthenticationUpdateFormState,v=e.formState,f=e.onAuthenticationChange,w=(0,h.$)().t,T=z((0,m.useState)(!1),2),C=T[0],A=T[1],L=z((0,m.useState)(!1),2),N=L[0],D=L[1],x=z((0,m.useState)(l),2),k=x[0],F=x[1],V=z((0,m.useState)(!1),2),G=V[0],Z=V[1],j=k||l;return m.createElement(p.pJ,{padded:"very","data-componentid":"".concat(t,"-tab")},m.createElement(E.Z,null,m.createElement(E.Z.Row,{columns:1},m.createElement(E.Z.Column,null,m.createElement("h2",null,w("smsProviders:form.custom.subHeading")))),m.createElement(E.Z.Row,{columns:2},m.createElement(E.Z.Column,null,m.createElement(d.SE,{key:"providerURL",fullWidth:!0,FormControlProps:{margin:"dense"},ariaLabel:"providerURL",readOnly:r,required:!0,"data-componentid":"".concat(t,"-providerURL"),name:"providerURL",type:"text",label:w("smsProviders:form.custom.providerUrl.label"),placeholder:w("smsProviders:form.custom.providerUrl.placeholder"),helperText:m.createElement(p.kW,{compact:!0},w("smsProviders:form.custom.providerUrl.hint")),component:d.xh,maxLength:M.SMS_PROVIDER_CONFIG_FIELD_MAX_LENGTH,minLength:M.SMS_PROVIDER_CONFIG_FIELD_MIN_LENGTH,autoComplete:"new-password"})),m.createElement(E.Z.Column,null,m.createElement(d.SE,{key:"contentType",fullWidth:!0,FormControlProps:{margin:"dense"},ariaLabel:"contentType",readOnly:r,"data-componentid":"".concat(t,"-contentType"),name:"contentType",type:"text",label:w("smsProviders:form.custom.contentType.label"),placeholder:w("smsProviders:form.custom.contentType.placeholder"),helperText:m.createElement(p.kW,{compact:!0},w("smsProviders:form.custom.contentType.hint")),component:d.xh,maxLength:M.SMS_PROVIDER_CONFIG_FIELD_MAX_LENGTH,minLength:M.SMS_PROVIDER_CONFIG_FIELD_MIN_LENGTH,autoComplete:"new-password",required:!0}))),m.createElement(E.Z.Row,{columns:2},m.createElement(E.Z.Column,null,m.createElement(d.SE,{key:"httpMethod",fullWidth:!0,FormControlProps:{margin:"dense"},ariaLabel:"httpMethod",readOnly:r,required:!1,"data-componentid":"".concat(t,"-httpMethod"),name:"httpMethod",type:"text",label:w("smsProviders:form.custom.httpMethod.label"),placeholder:w("smsProviders:form.custom.httpMethod.placeholder"),helperText:m.createElement(p.kW,{compact:!0},w("smsProviders:form.custom.httpMethod.hint")),component:d.xh,maxLength:M.SMS_PROVIDER_CONFIG_FIELD_MAX_LENGTH,minLength:M.SMS_PROVIDER_CONFIG_FIELD_MIN_LENGTH,autoComplete:"new-password"})),m.createElement(E.Z.Column,null,m.createElement(d.SE,{key:"headers",fullWidth:!0,FormControlProps:{margin:"dense"},ariaLabel:"headers",readOnly:r,required:!1,"data-componentid":"".concat(t,"-headers"),name:"headers",type:"text",label:w("smsProviders:form.custom.headers.label"),placeholder:w("smsProviders:form.custom.headers.placeholder"),helperText:m.createElement(p.kW,{compact:!0},w("smsProviders:form.custom.headers.hint")),component:d.xh,maxLength:M.SMS_PROVIDER_CONFIG_FIELD_MAX_LENGTH,minLength:M.SMS_PROVIDER_CONFIG_FIELD_MIN_LENGTH,autoComplete:"new-password"}))),m.createElement(E.Z.Row,{columns:1},m.createElement(E.Z.Column,null,m.createElement(d.SE,{key:"payload",fullWidth:!0,FormControlProps:{margin:"dense"},ariaLabel:"payload",readOnly:r,required:!0,"data-componentid":"".concat(t,"-payload"),name:"payload",type:"text",label:w("smsProviders:form.custom.payload.label"),placeholder:w("smsProviders:form.custom.payload.placeholder"),helperText:m.createElement(p.kW,{compact:!0},w("smsProviders:form.custom.payload.hint")),component:d.xh,maxLength:M.SMS_PROVIDER_CONFIG_TEMPLATE_FIELD_MAX_LENGTH,minLength:M.SMS_PROVIDER_CONFIG_FIELD_MIN_LENGTH,autoComplete:"new-password"})))),m.createElement("div",{className:"external-api-auth-config-page",id:"".concat(t,"-authentication-section")},m.createElement("div",{className:"form-wrapper"},m.createElement(y.Z,{className:"divider-container"}),m.createElement(p.X6,{className:"heading-container",as:"h5"},w("externalApiAuthentication:fields.authenticationTypeDropdown.title")),(!a||s||!i)&&m.createElement(_.Z,{className:"box-container"},m.createElement("div",{className:"box-field"},a&&s&&G&&m.createElement(S.Z,{severity:"warning",className:"authentication-update-alert",sx:{mb:2}},w("smsProviders:form.custom.authentication.updateRequired")),m.createElement(I.lP,{subscription:{values:!0}},(function(e){var t,n=e.values,r=null==n?void 0:n.authType;return r&&r!==j&&(F(t=r),c(t)),null})),m.createElement(d.SE,{key:"authType",ariaLabel:"authType",readOnly:r,required:!0,"data-componentid":"".concat(t,"-authentication-dropdown"),name:"authType",label:w("externalApiAuthentication:fields.authenticationTypeDropdown.label"),placeholder:w("externalApiAuthentication:fields.authenticationTypeDropdown.placeholder"),options:M.AUTH_TYPES.map((function(e){return{key:e.key,text:w(e.text),value:e.value}})),component:d.ZY}),(0,P.lw)(!!a,w,p.kW),j===b.BASIC&&m.createElement(m.Fragment,null,m.createElement(d.SE,{key:"userName",ariaLabel:"username",className:"addon-field-wrapper",name:"userName",type:C?"text":"password",required:!0,"data-componentid":"".concat(t,"-endpoint-authentication-property-username"),label:w("externalApiAuthentication:fields.authenticationTypeDropdown.authProperties.username.label"),placeholder:w("externalApiAuthentication:fields.authenticationTypeDropdown.authProperties.username.placeholder"),component:d.xh,maxLength:100,readOnly:r,InputProps:{endAdornment:(0,P.b2)(C,(function(){return A(!C)}),t)}}),m.createElement(d.SE,{key:"password",ariaLabel:"password",className:"addon-field-wrapper",name:"password",type:N?"text":"password",required:!0,"data-componentid":"".concat(t,"-endpoint-authentication-property-password"),label:w("externalApiAuthentication:fields.authenticationTypeDropdown.authProperties.password.label"),placeholder:w("externalApiAuthentication:fields.authenticationTypeDropdown.authProperties.password.placeholder"),component:d.xh,maxLength:100,readOnly:r,InputProps:{endAdornment:(0,P.b2)(N,(function(){return D(!N)}),t)}})),j===b.CLIENT_CREDENTIAL&&m.createElement(m.Fragment,null,m.createElement(d.SE,{key:"clientId",ariaLabel:"clientId",className:"addon-field-wrapper",name:"clientId",type:C?"text":"password",required:!0,"data-componentid":"".concat(t,"-endpoint-authentication-property-clientId"),label:w("externalApiAuthentication:fields.authenticationTypeDropdown.authProperties.clientID.label"),placeholder:w("externalApiAuthentication:fields.authenticationTypeDropdown.authProperties.clientID.placeholder"),component:d.xh,maxLength:100,readOnly:r,InputProps:{endAdornment:(0,P.b2)(C,(function(){return A(!C)}),t)}}),m.createElement(d.SE,{key:"clientSecret",ariaLabel:"clientSecret",className:"addon-field-wrapper",name:"clientSecret",type:N?"text":"password",required:!0,"data-componentid":"".concat(t,"-endpoint-authentication-property-clientSecret"),label:w("externalApiAuthentication:fields.authenticationTypeDropdown.authProperties.clientSecret.label"),placeholder:w("externalApiAuthentication:fields.authenticationTypeDropdown.authProperties.clientSecret.placeholder"),component:d.xh,maxLength:100,readOnly:r,InputProps:{endAdornment:(0,P.b2)(N,(function(){return D(!N)}),t)}}),m.createElement(d.SE,{key:"tokenEndpoint",ariaLabel:"tokenEndpoint",className:"addon-field-wrapper",name:"tokenEndpoint",type:"url",required:!0,"data-componentid":"".concat(t,"-endpoint-authentication-property-tokenEndpoint"),label:w("externalApiAuthentication:fields.authenticationTypeDropdown.authProperties.tokenEndpoint.label"),placeholder:w("externalApiAuthentication:fields.authenticationTypeDropdown.authProperties.tokenEndpoint.placeholder"),component:d.xh,maxLength:2048,readOnly:r}),m.createElement(d.SE,{key:"scopes",ariaLabel:"scopes",className:"addon-field-wrapper",name:"scopes",type:"text",required:!1,"data-componentid":"".concat(t,"-endpoint-authentication-property-scopes"),label:w("externalApiAuthentication:fields.authenticationTypeDropdown.authProperties.scopes.label"),placeholder:w("externalApiAuthentication:fields.authenticationTypeDropdown.authProperties.scopes.placeholder"),component:d.xh,maxLength:500,readOnly:r})),j===b.BEARER&&m.createElement(m.Fragment,null,m.createElement(d.SE,{key:"accessToken",ariaLabel:"accessToken",className:"addon-field-wrapper",name:"accessToken",type:C?"text":"password",required:!0,"data-componentid":"".concat(t,"-endpoint-authentication-property-accessToken"),label:w("externalApiAuthentication:fields.authenticationTypeDropdown.authProperties.accessToken.label"),placeholder:w("externalApiAuthentication:fields.authenticationTypeDropdown.authProperties.accessToken.placeholder"),component:d.xh,maxLength:1e3,readOnly:r,InputProps:{endAdornment:(0,P.b2)(C,(function(){return A(!C)}),t)}})),j===b.API_KEY&&m.createElement(m.Fragment,null,m.createElement(d.SE,{key:"header",ariaLabel:"header",className:"addon-field-wrapper",name:"header",type:"text",required:!0,"data-componentid":"".concat(t,"-endpoint-authentication-property-header"),label:w("externalApiAuthentication:fields.authenticationTypeDropdown.authProperties.header.label"),placeholder:w("externalApiAuthentication:fields.authenticationTypeDropdown.authProperties.header.placeholder"),component:d.xh,maxLength:100,readOnly:r}),m.createElement(d.SE,{key:"value",ariaLabel:"value",className:"addon-field-wrapper",name:"value",type:C?"text":"password",required:!0,"data-componentid":"".concat(t,"-endpoint-authentication-property-value"),label:w("externalApiAuthentication:fields.authenticationTypeDropdown.authProperties.value.label"),placeholder:w("externalApiAuthentication:fields.authenticationTypeDropdown.authProperties.value.placeholder"),component:d.xh,maxLength:500,readOnly:r,InputProps:{endAdornment:(0,P.b2)(C,(function(){return A(!C)}),t)}})),s&&m.createElement(O.Z,{onClick:function(){Z(!1),u(!1),F(i),c(i),function(){if(v.current){var e,t,n,r,o,a,i,l,c,s,u,d=null===(e=v.current.getState())||void 0===e?void 0:e.initialValues;v.current.change("authType",null!==(t=null==d?void 0:d.authType)&&void 0!==t?t:void 0),v.current.change("userName",null!==(n=null==d?void 0:d.userName)&&void 0!==n?n:""),v.current.change("password",null!==(r=null==d?void 0:d.password)&&void 0!==r?r:""),v.current.change("clientId",null!==(o=null==d?void 0:d.clientId)&&void 0!==o?o:""),v.current.change("clientSecret",null!==(a=null==d?void 0:d.clientSecret)&&void 0!==a?a:""),v.current.change("tokenEndpoint",null!==(i=null==d?void 0:d.tokenEndpoint)&&void 0!==i?i:""),v.current.change("scopes",null!==(l=null==d?void 0:d.scopes)&&void 0!==l?l:""),v.current.change("accessToken",null!==(c=null==d?void 0:d.accessToken)&&void 0!==c?c:""),v.current.change("header",null!==(s=null==d?void 0:d.header)&&void 0!==s?s:""),v.current.change("value",null!==(u=null==d?void 0:d.value)&&void 0!==u?u:"")}}()},variant:"outlined",size:"small",className:"secondary-button","data-componentid":"".concat(t,"-cancel-edit-authentication-button")},w("actions:buttons.cancel")))),a&&!s&&i&&(0,P.Kx)(i,t,w,f,S.Z,g.Z,R.c,O.Z))),!r&&m.createElement(m.Fragment,null,m.createElement(y.Z,{hidden:!0}),m.createElement(E.Z,null,m.createElement(E.Z.Row,{columns:1},m.createElement(E.Z.Column,{mobile:16,tablet:16,computer:16},m.createElement(p.KM,{size:"small",type:"button",onClick:function(){var e;a&&i&&!s?(Z(!0),u(!0)):o(null===(e=v.current)||void 0===e?void 0:e.getState().values)},ariaLabel:"SMS provider form update button","data-componentid":"".concat(t,"-update-button"),loading:n},"Submit"))))))};$.defaultProps={"data-componentid":"custom-sms-provider"};const J=$;var Q=n(76647),ee=n(26154);function te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ne(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ne(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var re=function(e){var t=e["data-componentid"],n=e.onSubmit,r=e.isLoading,o=e.isReadOnly,a=(0,h.$)().t,i=te((0,m.useState)(!1),2),l=i[0],c=i[1];return m.createElement(p.pJ,{className:"form-wrapper",padded:"very","data-componentid":"".concat(t,"-tab")},m.createElement(E.Z,null,m.createElement(E.Z.Row,{columns:1},m.createElement(E.Z.Column,null,m.createElement("h2",null,a("smsProviders:form.twilio.subHeading")))),m.createElement(E.Z.Row,{columns:2},m.createElement(E.Z.Column,null,m.createElement(d.SE,{key:"twilioKkey",width:16,FormControlProps:{margin:"dense"},ariaLabel:"twilioKey",readOnly:o,required:!0,"data-componentid":"".concat(t,"-twilio-key"),name:"twilioKey",type:"text",label:a("smsProviders:form.twilio.accountSID.label"),placeholder:a("smsProviders:form.twilio.accountSID.placeholder"),helperText:m.createElement(p.kW,{compact:!0},a("smsProviders:form.twilio.accountSID.hint")),component:d.xh,maxLength:M.SMS_PROVIDER_CONFIG_FIELD_MAX_LENGTH,minLength:M.SMS_PROVIDER_CONFIG_FIELD_MIN_LENGTH,autoComplete:"new-password"})),m.createElement(E.Z.Column,null,m.createElement(d.SE,{key:"twilioSecret",width:16,FormControlProps:{margin:"dense"},readOnly:o,ariaLabel:"twilioSecret",required:!0,"data-componentid":"".concat(t,"-twilio-secret"),name:"twilioSecret",hidePassword:a("common:hidePassword"),showPassword:a("common:showPassword"),type:l?"text":"password",label:a("smsProviders:form.twilio.authToken.label"),placeholder:a("smsProviders:form.twilio.authToken.placeholder"),helperText:m.createElement(p.kW,{compact:!0},a("smsProviders:form.twilio.authToken.hint")),component:d.xh,InputProps:{endAdornment:m.createElement(Q.Z,{position:"end"},m.createElement(ee.Z,{link:!0,className:"list-icon reset-field-to-default-adornment",size:"small",color:"grey",name:l?"eye slash":"eye","data-testid":"view-button",onClick:function(){c(!l)}}))},maxLength:M.SMS_PROVIDER_CONFIG_FIELD_MAX_LENGTH,minLength:M.SMS_PROVIDER_CONFIG_FIELD_MIN_LENGTH,autoComplete:"new-password"}))),m.createElement(E.Z.Row,{columns:2},m.createElement(E.Z.Column,null,m.createElement(d.SE,{key:"twilioSender",width:16,FormControlProps:{margin:"dense"},readOnly:o,ariaLabel:"twilioSender",required:!0,"data-componentid":"".concat(t,"-twilio-sender"),name:"twilioSender",type:"text",label:a("smsProviders:form.twilio.sender.label"),placeholder:a("smsProviders:form.twilio.sender.placeholder"),helperText:m.createElement(p.kW,{compact:!0},a("smsProviders:form.twilio.sender.hint")),component:d.xh,maxLength:M.SMS_PROVIDER_CONFIG_FIELD_MAX_LENGTH,minLength:M.SMS_PROVIDER_CONFIG_FIELD_MIN_LENGTH,autoComplete:"new-password"}))),!o&&m.createElement(m.Fragment,null,m.createElement(y.Z,{hidden:!0}),m.createElement(E.Z.Row,{columns:1},m.createElement(E.Z.Column,{mobile:16,tablet:16,computer:16},m.createElement(p.KM,{size:"small",onClick:n,ariaLabel:"SMS provider form update button","data-componentid":"".concat(t,"-update-button"),loading:r},"Submit"))))))};re.defaultProps={"data-componentid":"twilio-sms-provider"};const oe=re;function ae(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ie(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ie(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var le=function(e){var t=e["data-componentid"],n=e.isLoading,r=e.isReadOnly,o=e.onSubmit,a=(0,h.$)().t,i=ae((0,m.useState)(!1),2),l=i[0],c=i[1];return m.createElement(p.pJ,{className:"form-wrapper",padded:"very","data-componentid":"".concat(t,"-tab")},m.createElement(E.Z,null,m.createElement(E.Z.Row,{columns:1},m.createElement(E.Z.Column,null,m.createElement("h2",null,a("smsProviders:form.vonage.subHeading")))),m.createElement(E.Z.Row,{columns:2},m.createElement(E.Z.Column,null,m.createElement(d.SE,{key:"vonageKey",width:16,FormControlProps:{margin:"dense"},ariaLabel:"vonageKey",readOnly:r,required:!0,"data-componentid":"".concat(t,"-vonage-key"),name:"vonageKey",type:"text",label:a("smsProviders:form.vonage.accountSID.label"),placeholder:a("smsProviders:form.vonage.accountSID.placeholder"),helperText:m.createElement(p.kW,{compact:!0},a("smsProviders:form.vonage.accountSID.hint")),component:d.xh,maxLength:M.SMS_PROVIDER_CONFIG_FIELD_MAX_LENGTH,minLength:M.SMS_PROVIDER_CONFIG_FIELD_MIN_LENGTH,autoComplete:"new-password"})),m.createElement(E.Z.Column,null,m.createElement(d.SE,{className:"addon-field-wrapper",key:"vonageSecret",width:16,FormControlProps:{margin:"dense"},ariaLabel:"vonageSecret",readOnly:r,required:!0,"data-componentid":"".concat(t,"-vonage-secret"),name:"vonageSecret",inputType:"password",type:l?"text":"password",label:a("smsProviders:form.vonage.authToken.label"),placeholder:a("smsProviders:form.vonage.authToken.placeholder"),helperText:m.createElement(p.kW,{compact:!0},a("smsProviders:form.vonage.authToken.hint")),component:d.xh,maxLength:M.SMS_PROVIDER_CONFIG_FIELD_MAX_LENGTH,minLength:M.SMS_PROVIDER_CONFIG_FIELD_MIN_LENGTH,autoComplete:"new-password",InputProps:{endAdornment:m.createElement(Q.Z,{position:"end"},m.createElement(ee.Z,{link:!0,className:"list-icon reset-field-to-default-adornment",size:"small",color:"grey",name:l?"eye slash":"eye","data-testid":"view-button",onClick:function(){c(!l)}}))}}))),m.createElement(E.Z.Row,{columns:2},m.createElement(E.Z.Column,null,m.createElement(d.SE,{key:"vonageSender",width:16,FormControlProps:{margin:"dense"},ariaLabel:"vonageSender",readOnly:r,required:!0,"data-componentid":"".concat(t,"-vonage-sender"),name:"vonageSender",type:"text",label:a("smsProviders:form.vonage.sender.label"),placeholder:a("smsProviders:form.vonage.sender.placeholder"),helperText:m.createElement(p.kW,{compact:!0},a("smsProviders:form.vonage.sender.hint")),component:d.xh,maxLength:M.SMS_PROVIDER_CONFIG_FIELD_MAX_LENGTH,minLength:M.SMS_PROVIDER_CONFIG_FIELD_MIN_LENGTH,autoComplete:"new-password"}))),!r&&m.createElement(m.Fragment,null,m.createElement(y.Z,{hidden:!0}),m.createElement(E.Z.Row,{columns:1},m.createElement(E.Z.Column,{mobile:16,tablet:16,computer:16},m.createElement(p.KM,{size:"small",onClick:o,ariaLabel:"SMS provider form update button","data-componentid":"".concat(t,"-update-button"),loading:n},"Submit"))))))};le.defaultProps={"data-componentid":"vonage-sms-provider"};const ce=le;var se,ue=n(2292),de=n(96124),pe=n(76271),me=ue.AsgardeoSPAClient.getInstance().httpRequest.bind(ue.AsgardeoSPAClient.getInstance()).bind(ue.AsgardeoSPAClient.getInstance()),he=function(e){var t={data:e,headers:{Accept:"application/json","Content-Type":"application/json"},method:s.f2.POST,url:pe.h.getState().config.endpoints.smsProviderV2Endpoint};return me(t).then((function(e){if(200!==e.status&&201!==e.status)throw new c.u(M.ErrorMessages.SMS_PROVIDER_CONFIG_FETCH_INVALID_STATUS_CODE_ERROR_CODE.getErrorMessage(),null,e.status,e.request,e,e.config);return Promise.resolve(e.data)})).catch((function(e){var t;throw new c.u(M.ErrorMessages.SMS_PROVIDER_CONFIG_UPDATE_ERROR_CODE.getErrorMessage(),e.stack,null===(t=e.response)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.code,e.request,e.response,e.config)}))},ve=function(e){var t={data:e,headers:{Accept:"application/json","Content-Type":"application/json"},method:s.f2.PUT,url:pe.h.getState().config.endpoints.smsProviderV2Endpoint+"/SMSPublisher"};return me(t).then((function(e){if(200!==e.status&&201!==e.status)throw new c.u(M.ErrorMessages.SMS_PROVIDER_CONFIG_FETCH_INVALID_STATUS_CODE_ERROR_CODE.getErrorMessage(),null,e.status,e.request,e,e.config);return Promise.resolve(e.data)})).catch((function(e){var t;throw new c.u(M.ErrorMessages.SMS_PROVIDER_CONFIG_UPDATE_ERROR_CODE.getErrorMessage(),e.stack,null===(t=e.response)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.code,e.request,e.response,e.config)}))},fe=function(){var e={headers:{Accept:"application/json","Content-Type":"application/json"},method:s.f2.DELETE,url:pe.h.getState().config.endpoints.smsProviderV2Endpoint+"/SMSPublisher"};return me(e).then((function(e){if(204!==e.status)throw new c.u(M.ErrorMessages.SMS_PROVIDER_CONFIG_FETCH_INVALID_STATUS_CODE_ERROR_CODE.getErrorMessage(),null,e.status,e.request,e,e.config);return Promise.resolve(e.data)})).catch((function(e){var t,n,r;throw new c.u(null!==(t=null===(n=e.response)||void 0===n||null===(n=n.data)||void 0===n?void 0:n.message)&&void 0!==t?t:M.ErrorMessages.SMS_PROVIDER_CONFIG_DELETE_ERROR_CODE.getErrorMessage(),e.stack,null===(r=e.response)||void 0===r||null===(r=r.data)||void 0===r?void 0:r.code,e.request,e.response,e.config)}))},Ee=n(6930),ye=["title","titleId"];function Se(){return Se=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Se.apply(null,arguments)}var ge=function(e,t){var n=e.title,r=e.titleId,o=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,ye);return m.createElement("svg",Se({className:"icon",fill:"#F22F46",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 30 30",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":r},o),n?m.createElement("title",{id:r},n):null,se||(se=m.createElement("path",{d:"M15 0C6.7 0 0 6.7 0 15s6.7 15 15 15 15-6.7 15-15S23.3 0 15 0zm0 26C8.9 26 4 21.1 4 15S8.9 4 15 4s11 4.9 11 11-4.9 11-11 11zm6.8-14.7c0 1.7-1.4 3.1-3.1 3.1s-3.1-1.4-3.1-3.1 1.4-3.1 3.1-3.1 3.1 1.4 3.1 3.1zm0 7.4c0 1.7-1.4 3.1-3.1 3.1s-3.1-1.4-3.1-3.1c0-1.7 1.4-3.1 3.1-3.1s3.1 1.4 3.1 3.1zm-7.4 0c0 1.7-1.4 3.1-3.1 3.1s-3.1-1.4-3.1-3.1c0-1.7 1.4-3.1 3.1-3.1s3.1 1.4 3.1 3.1zm0-7.4c0 1.7-1.4 3.1-3.1 3.1S8.2 13 8.2 11.3s1.4-3.1 3.1-3.1 3.1 1.4 3.1 3.1z"})))},_e=(0,m.forwardRef)(ge);n.p;n.p;var Oe=function(){return{custom:Ee.r,twilio:_e,vonage:Ee.r}},Pe=[{icon:Oe().twilio,id:1,key:"TwilioSMSProvider",name:"Twilio"},{icon:Oe().vonage,id:2,key:"VonageSMSProvider",name:"Vonage"},{icon:Oe().custom,id:3,key:"CustomSMSProvider",name:"Custom"}];function Ie(e){return Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ie(e)}function Re(e){return function(e){if(Array.isArray(e))return Me(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||De(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function we(){we=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var a=t&&t.prototype instanceof E?t:E,i=Object.create(a.prototype),l=new A(r||[]);return o(i,"_invoke",{value:w(e,n,l)}),i}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var p="suspendedStart",m="suspendedYield",h="executing",v="completed",f={};function E(){}function y(){}function S(){}var g={};s(g,i,(function(){return this}));var _=Object.getPrototypeOf,O=_&&_(_(L([])));O&&O!==n&&r.call(O,i)&&(g=O);var P=S.prototype=E.prototype=Object.create(g);function I(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function R(e,t){function n(o,a,i,l){var c=d(e[o],e,a);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"==Ie(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):t.resolve(u).then((function(e){s.value=e,i(s)}),(function(e){return n("throw",e,i,l)}))}l(c.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function w(t,n,r){var o=p;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var l=r.delegate;if(l){var c=b(l,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var s=d(t,n,r);if("normal"===s.type){if(o=r.done?v:m,s.arg===f)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(o=v,r.method="throw",r.arg=s.arg)}}}function b(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,b(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var a=d(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,f;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,f):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,f)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function L(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(Ie(t)+" is not iterable")}return y.prototype=S,o(P,"constructor",{value:S,configurable:!0}),o(S,"constructor",{value:y,configurable:!0}),y.displayName=s(S,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,S):(e.__proto__=S,s(e,c,"GeneratorFunction")),e.prototype=Object.create(P),e},t.awrap=function(e){return{__await:e}},I(R.prototype),s(R.prototype,l,(function(){return this})),t.AsyncIterator=R,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new R(u(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},I(P),s(P,c,"Generator"),s(P,i,(function(){return this})),s(P,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=L,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return l.type="throw",l.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;C(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:L(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),f}},t}function be(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function Te(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){be(a,r,o,i,l,"next",e)}function l(e){be(a,r,o,i,l,"throw",e)}i(void 0)}))}}function Ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(n),!0).forEach((function(t){Le(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Le(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Ie(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ie(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ie(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(e,t)||De(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function De(e,t){if(e){if("string"==typeof e)return Me(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Me(e,t):void 0}}function Me(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var xe=function(e){var t,n,l,S,g,_,O,P=e["data-componentid"],I=(0,v.v9)((function(e){return e.config.ui.features})),R=Ne((0,m.useState)(!1),2),w=R[0],C=R[1],A=(0,p.fQ)().getLink,L=(0,h.$)().t,N=(0,v.I0)(),D=Ne((0,m.useState)(!1),2),x=D[0],k=D[1],F=Ne((0,m.useState)(!1),2),V=F[0],G=F[1],Z=Ne((0,m.useState)(null),2),j=Z[0],U=Z[1],q=Ne((0,m.useState)(!1),2),H=q[0],W=q[1],K=(0,m.useRef)(null),B={CustomSMSProvider:{key:"",name:M.SMS_PROVIDER_CONFIG_NAME,provider:"",providerURL:"",secret:"",sender:""},TwilioSMSProvider:{name:M.SMS_PROVIDER_CONFIG_NAME,provider:M.TWILIO,twilioKey:"",twilioSecret:"",twilioSender:""},VonageSMSProvider:{name:M.SMS_PROVIDER_CONFIG_NAME,provider:M.VONAGE,vonageKey:"",vonageSecret:"",vonageSender:""}},X=Ne((0,m.useState)({providerParams:B,selectedProvider:null}),2),z=X[0],Y=X[1],$=(0,r.EV)(null==I||null===(t=I.smsProviders)||void 0===t||null===(t=t.scopes)||void 0===t?void 0:t.update),Q=null==I||null===(n=I.pushProviders)||void 0===n?void 0:n.enabled,ee=(S={headers:{Accept:"application/json","Content-Type":"application/json"},method:s.f2.GET,url:pe.h.getState().config.endpoints.smsProviderV2Endpoint},g=(0,de.Z)(S),_=g.data,O=g.error,{data:_,error:O,isLoading:!O&&!_,isValidating:g.isValidating,mutate:g.mutate}),te=ee.data,ne=ee.isLoading,re=ee.mutate,ae=ee.error,ie=Ne((0,m.useState)(!0),2),le=ie[0],se=ie[1],ue=Ne((0,m.useState)(!1),2),me=ue[0],Ee=ue[1],ye=Ne((0,m.useState)([]),2),Se=ye[0],ge=ye[1];(0,m.useEffect)((function(){if(!ne){var e=[],t=!1;null==te||te.forEach((function(n){var r;e.push(n.provider+"SMSProvider"),null===(r=n.properties)||void 0===r||r.forEach((function(e){"channel.type"===e.key&&"choreo"===e.value&&(t=!0)}))})),Ee(t),ge(e)}}),[ne,te]),(0,m.useEffect)((function(){if(te)if(te instanceof c.u||ae)Oe();else{var e=M.TWILIO_SMS_PROVIDER,t=te.reduce((function(t,n){var r,o,a;e=n.provider===M.TWILIO?M.TWILIO_SMS_PROVIDER:n.provider===M.VONAGE?M.VONAGE_SMS_PROVIDER:M.CUSTOM_SMS_PROVIDER;var i={contentType:n.contentType,headers:null===(r=n.properties.find((function(e){return"http.headers"===e.key})))||void 0===r?void 0:r.value,httpMethod:null===(o=n.properties.find((function(e){return"http.method"===e.key})))||void 0===o?void 0:o.value,name:n.name,payload:null===(a=n.properties.find((function(e){return"body"===e.key})))||void 0===a?void 0:a.value,provider:n.provider,providerURL:null==n?void 0:n.providerURL};return e===M.TWILIO_SMS_PROVIDER?(i.twilioKey=n.key,i.twilioSecret=n.secret,i.twilioSender=n.sender):e===M.VONAGE_SMS_PROVIDER?(i.vonageKey=n.key,i.vonageSecret=n.secret,i.vonageSender=n.sender):(i.key=n.key,i.secret=n.secret,i.sender=n.sender,n.authentication&&(i.authType=n.authentication.type,n.authentication.properties&&(i.userName=n.authentication.properties.username,i.password=n.authentication.properties.password,i.clientId=n.authentication.properties.clientId,i.clientSecret=n.authentication.properties.clientSecret,i.tokenEndpoint=n.authentication.properties.tokenEndpoint,i.scopes=n.authentication.properties.scopes,i.header=n.authentication.properties.header,i.value=n.authentication.properties.value,i.accessToken=n.authentication.properties.accessToken))),t[e]=i,t}),{});Y({providerParams:Ae(Ae({},z.providerParams),t),selectedProvider:e}),se(!1)}}),[te]);var _e=function(){re()},Oe=function(){N((0,u.V_)({description:L("smsProviders:notifications.getConfiguration.error.description"),level:s.QU.ERROR,message:L("smsProviders:notifications.getConfiguration.error.message")}))},Ie=function(){W(!0);var e=z.providerParams[z.selectedProvider];null!=e&&e.authType&&(U(e.authType),K.current&&(K.current.change("authType",e.authType),e.authType===b.BASIC?(K.current.change("userName",e.userName),K.current.change("password",null)):e.authType===b.CLIENT_CREDENTIAL?(K.current.change("clientId",e.clientId),K.current.change("tokenEndpoint",e.tokenEndpoint),K.current.change("scopes",e.scopes),K.current.change("clientSecret",null)):e.authType===b.BEARER?K.current.change("accessToken",null):e.authType===b.API_KEY&&(K.current.change("header",e.header),K.current.change("value",null))))},be=function(){var e=Te(we().mark((function e(t){var n,r,o,a,i,l,c,d,p;return we().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:k(!0),r=z.selectedProvider,o=Ce(t),e.t0=r,e.next=e.t0===M.TWILIO_SMS_PROVIDER?6:e.t0===M.VONAGE_SMS_PROVIDER?8:10;break;case 6:return a=M.TWILIO,e.abrupt("break",11);case 8:return a=M.VONAGE,e.abrupt("break",11);case 10:a=M.CUSTOM;case 11:if(i=null!==(n=t.contentType)&&void 0!==n?n:T.JSON,l={contentType:i,key:r===M.TWILIO_SMS_PROVIDER?null==t?void 0:t.twilioKey:r===M.VONAGE_SMS_PROVIDER?t.vonageKey:null,properties:o,provider:a,secret:r===M.TWILIO_SMS_PROVIDER?null==t?void 0:t.twilioSecret:r===M.VONAGE_SMS_PROVIDER?t.vonageSecret:null,sender:r===M.TWILIO_SMS_PROVIDER?null==t?void 0:t.twilioSender:r===M.VONAGE_SMS_PROVIDER?t.vonageSender:t.sender},t.providerURL&&(l.providerURL=t.providerURL),c=!Se.includes("CustomSMSProvider"),r===M.CUSTOM_SMS_PROVIDER&&t.authType&&(c||H)&&(l.authentication={properties:{},type:t.authType},t.authType===b.NONE||(t.authType===b.BASIC?(l.authentication.properties.username=t.userName,l.authentication.properties.password=t.password):t.authType===b.CLIENT_CREDENTIAL?(l.authentication.properties.clientId=t.clientId,l.authentication.properties.clientSecret=t.clientSecret,l.authentication.properties.tokenEndpoint=t.tokenEndpoint,l.authentication.properties.scopes=t.scopes):t.authType===b.BEARER?l.authentication.properties.accessToken=t.accessToken:t.authType===b.API_KEY&&(l.authentication.properties.header=t.header,l.authentication.properties.value=t.value))),!me){e.next=30;break}return e.prev=17,e.next=20,fe();case 20:e.next=27;break;case 22:return e.prev=22,e.t1=e.catch(17),p=e.t1.code===M.SMS_NOTIFICATION_SENDER_DELETION_ERROR_ACTIVE_SUBS?"activeSubs":e.t1.code===M.SMS_PROVIDER_CONFIG_UNABLE_TO_DISABLE_ERROR_CODE?"connectedApps":"generic",N((0,u.V_)({description:L("extensions:develop.identityProviders.smsOTP.settings."+"errorNotifications.smsPublisherDeletionError.".concat(p,".description")),level:s.QU.ERROR,message:L("extensions:develop.identityProviders.smsOTP.settings."+"errorNotifications.smsPublisherDeletionError.".concat(p,".message"))})),e.abrupt("return");case 27:d=he(l),e.next=31;break;case 30:d=Se.length>=1?ve(l):he(l);case 31:d.then((function(e){var t,n,o,i={contentType:e.contentType,headers:null===(t=e.properties.find((function(e){return"http.headers"===e.key})))||void 0===t?void 0:t.value,httpMethod:null===(n=e.properties.find((function(e){return"http.method"===e.key})))||void 0===n?void 0:n.value,key:e.key,name:e.name,payload:null===(o=e.properties.find((function(e){return"body"===e.key})))||void 0===o?void 0:o.value,provider:e.provider,providerURL:e.providerURL,secret:e.secret,sender:e.sender},l=Ae(Ae({},B),{},Le({},r,i));Y(Ae(Ae({},z),{},{providerParams:l})),N((0,u.V_)({description:L("smsProviders:notifications.updateConfiguration.success.description"),level:s.QU.SUCCESS,message:L("smsProviders:notifications.updateConfiguration.success.message")})),k(!1),ge([a+"SMSProvider"]),W(!1)})).catch((function(){N((0,u.V_)({description:L("smsProviders:notifications.updateConfiguration.error.description"),level:s.QU.ERROR,message:L("smsProviders:notifications.updateConfiguration.error.message")}))})).finally((function(){k(!1),re()}));case 32:case"end":return e.stop()}}),e,null,[[17,22]])})));return function(t){return e.apply(this,arguments)}}(),Ce=function(e){var t=[];return e.payload&&t.push({key:"body",value:e.payload}),e.headers&&t.push({key:"http.headers",value:e.headers}),e.httpMethod&&t.push({key:"http.method",value:e.httpMethod}),t},De=function(){var e=Te(we().mark((function e(){return we().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return G(!0),e.abrupt("return",fe().then((function(){return N((0,u.V_)({description:L("smsProviders:notifications.deleteConfiguration.success.description"),level:s.QU.SUCCESS,message:L("smsProviders:notifications.deleteConfiguration.success.message")})),Y({providerParams:{},selectedProvider:M.TWILIO_SMS_PROVIDER}),re(),!0})).catch((function(e){return Me(e),!1})).finally((function(){G(!1)})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Me=function(e){var t,n,r,o=L("smsProviders:notifications.deleteConfiguration.error.message"),a=L("smsProviders:notifications.deleteConfiguration.error.description");(null==e||null===(t=e.response)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.code)===M.SMS_PROVIDER_CONFIG_UNABLE_TO_DISABLE_ERROR_CODE&&(o=null==e||null===(n=e.response)||void 0===n||null===(n=n.data)||void 0===n?void 0:n.message,a=null==e||null===(r=e.response)||void 0===r||null===(r=r.data)||void 0===r?void 0:r.description);N((0,u.V_)({description:a,level:s.QU.ERROR,message:o}))};return m.createElement(p.Xg,{title:L("smsProviders:heading"),pageTitle:L("smsProviders:heading"),description:m.createElement("div",{style:{whiteSpace:"pre-line"}},L("smsProviders:subHeading"),m.createElement(p.eb,{link:A("develop.smsProviders.learnMore")},L("common:learnMore"))),bottomMargin:!1,contentTopMargin:!1,pageHeaderMaxWidth:!0,backButton:{onClick:function(){a.m.push("".concat(o.$.getPaths().get(Q?"NOTIFICATION_CHANNELS":"EMAIL_AND_SMS")))},text:L(Q?"smsProviders:goBack":"extensions:develop.emailAndSms.goBack")},"data-componentid":"".concat(P,"-form-layout")},ne||V||le?m.createElement("div",{"data-componentid":"".concat(P,"-form-loading")},Re(Array(3)).map((function(e){return m.createElement(f.Z,{key:e},m.createElement(f.Z.Line,{length:"very short"}),m.createElement("div",null,m.createElement(f.Z.Line,{length:"long"}),m.createElement(f.Z.Line,{length:"medium"})))}))):m.createElement(E.Z,{className:"mt-2"},m.createElement(E.Z.Row,{columns:1},m.createElement(E.Z.Column,null,m.createElement(d.vy,{onSubmit:be,validate:function(e){var t={contentType:void 0,key:void 0,payload:void 0,provider:void 0,providerURL:void 0,secret:void 0,sender:void 0,twilioKey:void 0,twilioSecret:void 0,twilioSender:void 0,vonageKey:void 0,vonageSecret:void 0,vonageSender:void 0};if("TwilioSMSProvider"===z.selectedProvider)null!=e&&e.twilioKey||(t.twilioKey=L("smsProviders:form.twilio.validations.required")),null!=e&&e.twilioSecret||(t.twilioSecret=L("smsProviders:form.twilio.validations.required")),null!=e&&e.twilioSender||(t.twilioSender=L("smsProviders:form.twilio.validations.required"));else if("VonageSMSProvider"===z.selectedProvider)null!=e&&e.vonageKey||(t.vonageKey=L("smsProviders:form.vonage.validations.required")),null!=e&&e.vonageSecret||(t.vonageSecret=L("smsProviders:form.vonage.validations.required")),null!=e&&e.vonageSender||(t.vonageSender=L("smsProviders:form.vonage.validations.required"));else{null!=e&&e.providerURL||(t.providerURL=L("smsProviders:form.custom.validations.required")),null!=e&&e.contentType||(t.contentType=L("smsProviders:form.custom.validations.required")),null!=e&&e.payload||(t.payload=L("smsProviders:form.custom.validations.required"));var n=!Se.includes("CustomSMSProvider")||H;(null==e?void 0:e.authType)===b.NONE||((null==e?void 0:e.authType)===b.BASIC?(null!=e&&e.userName||(t.userName=L("smsProviders:form.custom.validations.required")),null!=e&&e.password||!n||(t.password=L("smsProviders:form.custom.validations.required"))):(null==e?void 0:e.authType)===b.CLIENT_CREDENTIAL?(null!=e&&e.clientId||(t.clientId=L("smsProviders:form.custom.validations.required")),null!=e&&e.clientSecret||!n||(t.clientSecret=L("smsProviders:form.custom.validations.required")),null!=e&&e.tokenEndpoint||(t.tokenEndpoint=L("smsProviders:form.custom.validations.required"))):(null==e?void 0:e.authType)===b.BEARER?null!=e&&e.accessToken||!n||(t.accessToken=L("smsProviders:form.custom.validations.required")):(null==e?void 0:e.authType)===b.API_KEY&&(null!=e&&e.header||(t.header=L("smsProviders:form.custom.validations.required")),null!=e&&e.value||!n||(t.value=L("smsProviders:form.custom.validations.required"))))}return t},initialValues:null!=z&&z.selectedProvider&&!me?null==z?void 0:z.providerParams[null==z?void 0:z.selectedProvider]:{},render:function(e){var t,n=e.handleSubmit,r=e.form;return K.current=r,m.createElement("form",{className:"sms-provider-config-form",onSubmit:n,noValidate:!0},m.createElement("div",{className:"card-list"},m.createElement(E.Z,null,m.createElement(E.Z.Row,{columns:3},Pe.map((function(e){var t,n=null==e||null===(t=e.name)||void 0===t?void 0:t.toLocaleLowerCase();return m.createElement(E.Z.Column,{key:null==e?void 0:e.id},m.createElement(p.rJ,{fluid:!0,"data-componentid":"".concat(n,"-sms-provider-info-card"),image:e.icon,imageSize:"x30",header:e.name,className:(null==z?void 0:z.selectedProvider)===(null==e?void 0:e.key)?"sms-provider-info-card selected":"sms-provider-info-card",key:e.id,onClick:function(){return t=null==e?void 0:e.key,void Y(Ae(Ae({},z),{},{selectedProvider:t}));var t},showSetupGuideButton:!1,showCardAction:!1}))}))))),(null==z?void 0:z.selectedProvider)===M.CUSTOM_SMS_PROVIDER&&m.createElement(m.Fragment,null,m.createElement(J,{isLoading:x,isReadOnly:!$,onSubmit:n,"data-componentid":"custom-sms-provider",hasExistingConfig:Se.includes("CustomSMSProvider"),currentAuthType:null==z||null===(t=z.providerParams[M.CUSTOM_SMS_PROVIDER])||void 0===t?void 0:t.authType,endpointAuthType:j,setEndpointAuthType:U,isAuthenticationUpdateFormState:H,setIsAuthenticationUpdateFormState:W,formState:K,onAuthenticationChange:Ie}),i.renderAlternativeSmsProviderOptions({existingSMSProviders:Se,mutateGetSMSProviderConfig:_e,originalSMSProviderConfig:te,smsProviderConfigFetchRequestError:ae})),(null==z?void 0:z.selectedProvider)===M.TWILIO_SMS_PROVIDER&&m.createElement(oe,{isLoading:x,isReadOnly:!$,onSubmit:n,"data-componentid":"twilio-sms-provider"}),(null==z?void 0:z.selectedProvider)===M.VONAGE_SMS_PROVIDER&&m.createElement(ce,{isLoading:x,isReadOnly:!$,onSubmit:n,"data-componentid":"vonage-sms-provider"}))}})))),!le&&!ne&&m.createElement(r.di,{when:null==I||null===(l=I.notificationChannels)||void 0===l||null===(l=l.scopes)||void 0===l?void 0:l.delete},m.createElement(y.Z,{hidden:!0}),m.createElement(p.v9,{sectionHeader:L("smsProviders:dangerZoneGroup.header")},m.createElement(p.cN,{"data-componentid":"".concat(P,"-revert-sms-provider-config"),actionTitle:L("smsProviders:dangerZoneGroup.revertConfig.actionTitle"),header:L("smsProviders:dangerZoneGroup.revertConfig.heading"),subheader:L("smsProviders:dangerZoneGroup.revertConfig.subHeading"),onActionClick:function(){C(!0)}})),m.createElement(p.cV,{primaryActionLoading:x,"data-componentid":"".concat(P,"-revert-confirmation-modal"),onClose:function(){return C(!1)},type:"negative",open:w,assertionHint:L("smsProviders:confirmationModal.assertionHint"),assertionType:"checkbox",primaryAction:L("common:confirm"),secondaryAction:L("common:cancel"),onSecondaryActionClick:function(){return C(!1)},onPrimaryActionClick:function(){k(!0),De().finally((function(){k(!1),C(!1),ge([])}))},closeOnDimmerClick:!1},m.createElement(p.cV.Header,{"data-componentid":"".concat(P,"-revert-confirmation-modal-header")},L("smsProviders:confirmationModal.header")),m.createElement(p.cV.Message,{"data-componentid":"".concat(P,"revert-confirmation-modal-message"),attached:!0,negative:!0},L("smsProviders:confirmationModal.message")),m.createElement(p.cV.Content,null,L("smsProviders:confirmationModal.content")))))};xe.defaultProps={"data-componentid":"sms-provider-page"};const ke=xe},24919:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(81611),o=n.n(r),a=n(83948),i=n.n(a)()(o());i.push([e.id,".sms-provider-config-form .MuiInputBase-root.Mui-readOnly{cursor:default;background-color:#e9ecef !important}.sms-provider-config-form .external-api-auth-config-page .form-wrapper .hint-text{margin-bottom:16px}.sms-provider-config-form .external-api-auth-config-page .box-container .box-field .addon-field-wrapper{margin-bottom:16px}.sms-provider-config-form .external-api-auth-config-page .box-container .box-field .addon-field-wrapper:first-of-type{margin-top:8px}",""]);const l=i}}]);