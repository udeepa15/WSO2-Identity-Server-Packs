"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[1981],{76096:(e,t,n)=>{n.d(t,{z:()=>P});var r=n(37746),i=n(43974),o=n(90955),a=n(6833),l=n(82406),c=n(20494),s=n(91009),u=n(29893),p=n(50699),d=n(44194),f=n(10479),h=n(47245),m=n(47018),g=n(19980),v=n(719),y=n(62508),E=n(59421);function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}var A=["applicationId","clientId","onApplicationSharingCompleted","onClose","data-componentid"];function S(){return S=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},S.apply(null,arguments)}function O(e){return function(e){if(Array.isArray(e))return C(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||R(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(){w=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof v?t:v,a=Object.create(o.prototype),l=new N(r||[]);return i(a,"_invoke",{value:R(e,n,l)}),a}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",f="suspendedYield",h="executing",m="completed",g={};function v(){}function y(){}function E(){}var A={};s(A,a,(function(){return this}));var S=Object.getPrototypeOf,O=S&&S(S(x([])));O&&O!==n&&r.call(O,a)&&(A=O);var I=E.prototype=v.prototype=Object.create(A);function L(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function n(i,o,a,l){var c=p(e[i],e,o);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"==b(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,l)}),(function(e){n("throw",e,a,l)})):t.resolve(u).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,l)}))}l(c.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function R(t,n,r){var i=d;return function(o,a){if(i===h)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var l=r.delegate;if(l){var c=C(l,r);if(c){if(c===g)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===d)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=h;var s=p(t,n,r);if("normal"===s.type){if(i=r.done?m:f,s.arg===g)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(i=m,r.method="throw",r.arg=s.arg)}}}function C(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,C(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var o=p(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function x(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(b(t)+" is not iterable")}return y.prototype=E,i(I,"constructor",{value:E,configurable:!0}),i(E,"constructor",{value:y,configurable:!0}),y.displayName=s(E,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,s(e,c,"GeneratorFunction")),e.prototype=Object.create(I),e},t.awrap=function(e){return{__await:e}},L(_.prototype),s(_.prototype,l,(function(){return this})),t.AsyncIterator=_,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new _(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},L(I),s(I,c,"Generator"),s(I,a,(function(){return this})),s(I,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=x,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return l.type="throw",l.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],l=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(c&&s){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;P(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:x(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function I(e,t,n,r,i,o,a){try{var l=e[o](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,i)}function L(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){I(o,r,i,a,l,"next",e)}function l(e){I(o,r,i,a,l,"throw",e)}a(void 0)}))}}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,i=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw i}}return l}}(e,t)||R(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){if(e){if("string"==typeof e)return C(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?C(e,t):void 0}}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var T=function(e){return e[e.SHARE_ALL=0]="SHARE_ALL",e[e.SHARE_SELECTED=1]="SHARE_SELECTED",e[e.UNSHARE=2]="UNSHARE",e}(T||{}),P=function(e){var t=e.applicationId,n=e.clientId,b=e.onApplicationSharingCompleted,I=e.onClose,R=e["data-componentid"],C=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,A),P=(0,h.I0)(),N=(0,f.$)().t,x=(0,h.v9)((function(e){return e.organization.organization})),j=_((0,d.useState)([]),2),Z=j[0],k=j[1],H=_((0,d.useState)([]),2),D=H[0],U=H[1],M=_((0,d.useState)(T.SHARE_ALL),2),z=M[0],F=M[1],G=_((0,d.useState)([]),2),V=G[0],W=G[1],Q=_((0,d.useState)([]),2),B=Q[0],$=Q[1],Y=_((0,d.useState)(),2),X=Y[0],q=Y[1],K=(0,r.Z)().isOrganizationManagementEnabled,J=i.l.getInstance();(0,d.useEffect)((function(){return k(V||[])}),[V]),(0,d.useEffect)((function(){return U(B||[])}),[B]),(0,d.useEffect)((function(){open&&K&&((0,o.jX)(null,null,null,null,!0,!1).then((function(e){W(e.organizations)})).catch((function(e){null!=e&&e.description?P((0,l.V_)({description:e.description,level:a.QU.ERROR,message:N("organizations:notifications.getOrganizationList.error.message")})):P((0,l.V_)({description:N("organizations:notifications.getOrganizationList.genericError.description"),level:a.QU.ERROR,message:N("organizations:notifications.getOrganizationList.genericError.message")}))})),(0,o.DM)(x.id,t).then((function(e){$(e.data.organizations)})).catch((function(e){e.response.data.description?P((0,l.V_)({description:e.response.data.description,level:a.QU.ERROR,message:N("applications:edit.sections.shareApplication.getSharedOrganizations.genericError.message")})):P((0,l.V_)({description:N("applications:edit.sections.shareApplication.getSharedOrganizations.genericError.description"),level:a.QU.ERROR,message:N("applications:edit.sections.shareApplication.getSharedOrganizations.genericError.message")}))})))}),[o.jX,open]);var ee=(0,d.useCallback)(L(w().mark((function e(){var r,i,c,u;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(z!==T.SHARE_ALL){e.next=4;break}r={shareWithAllChildren:!0},e.next=14;break;case 4:if(z!==T.SHARE_SELECTED){e.next=14;break}if(!z){e.next=11;break}return c=D.map((function(e){return e.id})),e.next=9,(0,o.An)(t);case 9:e.next=13;break;case 11:c=(0,s.Z)(D,B,"id").map((function(e){return e.id})),i=(0,s.Z)(B,D,"id");case 13:r={shareWithAllChildren:!1,sharedOrganizations:c};case 14:z===T.SHARE_ALL||z===T.SHARE_SELECTED?((0,o.Bn)(x.id,t,r).then((function(){I(null,null),P((0,l.V_)({description:N("applications:edit.sections.shareApplication.addSharingNotification.success.description"),level:a.QU.SUCCESS,message:N("applications:edit.sections.shareApplication.addSharingNotification.success.message")})),J.publish("application-share",{"client-id":n})})).catch((function(e){I(null,null),e.response.data.message?P((0,l.V_)({description:e.response.data.message,level:a.QU.ERROR,message:N("applications:edit.sections.shareApplication.addSharingNotification.genericError.message")})):P((0,l.V_)({description:N("applications:edit.sections.shareApplication.addSharingNotification.genericError.description"),level:a.QU.ERROR,message:N("applications:edit.sections.shareApplication.addSharingNotification.genericError.message")})),J.publish("application-share-error",{"client-id":n})})).finally((function(){return b()})),null===(u=i)||void 0===u||u.forEach((function(e){(0,o.NY)(x.id,t,e.id).then((function(){I(null,null),P((0,l.V_)({description:N("applications:edit.sections.shareApplication.stopSharingNotification.success.description",{organization:e.name}),level:a.QU.SUCCESS,message:N("applications:edit.sections.shareApplication.stopSharingNotification.success.message")})),J.publish("application-share",{"client-id":n})})).catch((function(t){I(null,null),t.response.data.message?P((0,l.V_)({description:t.response.data.message,level:a.QU.ERROR,message:N("applications:edit.sections.shareApplication.stopSharingNotification.genericError.message")})):P((0,l.V_)({description:N("applications:edit.sections.shareApplication.stopSharingNotification.genericError.description",{organization:e.name}),level:a.QU.ERROR,message:N("applications:edit.sections.shareApplication.stopSharingNotification.genericError.message")})),J.publish("application-share-error",{"client-id":n})}))}))):z===T.UNSHARE&&(0,o.An)(t).then((function(){I(null,null),P((0,l.V_)({description:N("applications:edit.sections.shareApplication.addSharingNotification.success.description"),level:a.QU.SUCCESS,message:N("applications:edit.sections.shareApplication.addSharingNotification.success.message")})),J.publish("application-share",{"client-id":n})})).catch((function(e){I(null,null),e.response.data.message?P((0,l.V_)({description:e.response.data.message,level:a.QU.ERROR,message:N("applications:edit.sections.shareApplication.addSharingNotification.genericError.message")})):P((0,l.V_)({description:N("applications:edit.sections.shareApplication.addSharingNotification.genericError.description"),level:a.QU.ERROR,message:N("applications:edit.sections.shareApplication.addSharingNotification.genericError.message")})),J.publish("application-share-error",{"client-id":n})})).finally((function(){return b()}));case 15:case"end":return e.stop()}}),e)}))),[B,D,o.NY,P,x.id,t,I,z]),te=(0,d.useCallback)((function(){D.length!==V.length?U(V):U([])}),[V,k,D]);return d.createElement(m.Z,S({isLoading:!0,closeOnDimmerClick:!0,dimmer:"blurring",size:"tiny",closeOnDocumentClick:!0,closeOnEscape:!0,"data-testid":"".concat(R,"-share-application-modal"),"data-componentid":"".concat(R,"-share-application-modal")},C),d.createElement(m.Z.Header,null,N("applications:edit.sections.shareApplication.heading")),d.createElement(m.Z.Content,null,d.createElement(c.X6,{ellipsis:!0,as:"h6"},N("organizations:shareApplicationSubTitle")),d.createElement(g.Z,{basic:!0},d.createElement(v.Z,{label:N("organizations:shareApplicationRadio"),onChange:function(){return F(T.SHARE_ALL)},checked:z===T.SHARE_ALL,"data-componentid":"".concat(R,"-share-with-all-checkbox")}),d.createElement(c.kW,{popup:!0,inline:!0},N("organizations:shareApplicationInfo")),d.createElement(y.Z,{hidden:!0,className:"mb-1 mt-0"}),d.createElement(v.Z,{label:N("organizations:shareWithSelectedOrgsRadio"),onChange:function(){return F(T.SHARE_SELECTED)},checked:z===T.SHARE_SELECTED,"data-componentid":"".concat(R,"-share-with-all-checkbox")}),d.createElement(E.Z,{visible:z===T.SHARE_SELECTED,animation:"slide down",duration:1e3},d.createElement(c.IX,{className:"pl-2",disabled:z!==T.SHARE_SELECTED,selectionComponent:!0,searchPlaceholder:N("transferList:searchPlaceholder",{type:"organizations"}),handleUnelectedListSearch:function(e,t){var n=t.value,r=[];if((0,p.Z)(n))k(V);else{q(n);var i=new RegExp((0,u.Z)(n),"i");V&&V.map((function(e){i.test(e.name)&&r.push(e)})),k(r)}},"data-componentId":"application-share-modal-organization-transfer-component"},d.createElement(c.Jv,{disabled:z!==T.SHARE_SELECTED,isListEmpty:!((null==Z?void 0:Z.length)>0),handleHeaderCheckboxChange:te,isHeaderCheckboxChecked:(null==D?void 0:D.length)===(null==V?void 0:V.length),listType:"unselected",listHeaders:[N("transferList:list.headers.1"),""],emptyPlaceholderContent:N("console:develop.placeholders.emptySearchResult.subtitles.0",{query:X})+". "+N("console:develop.placeholders.emptySearchResult.subtitles.1"),"data-testid":"application-share-modal-organization-transfer-component-all-items",emptyPlaceholderDefaultContent:N("transferList:list.emptyPlaceholders.default")},null==Z?void 0:Z.map((function(e,t){var n=null==e?void 0:e.name,r=-1!==D.findIndex((function(t){return t.id===e.id}));return d.createElement(c.qT,{disabled:z!==T.SHARE_SELECTED,handleItemChange:function(){return function(e){var t=O(D),n=t.findIndex((function(t){return t.id===e.id}));-1!==n?(t.splice(n,1),U(t)):(t.push(e),U(t))}(e)},key:t,listItem:n,listItemId:e.id,listItemIndex:t,isItemChecked:r,showSecondaryActions:!1,"data-testid":"application-share-modal-organization-transfer-component -unselected-organizations"})}))))))),d.createElement(m.Z.Actions,null,d.createElement(c.Qj,{"data-testid":"".concat(R,"-cancel-button"),onClick:function(){return b()}},N("common:cancel")),d.createElement(c.KM,{disabled:z===T.SHARE_SELECTED&&(0==(null==D?void 0:D.length)||!V),onClick:function(){ee()},"data-testid":"".concat(R,"-save-button")},N("applications:edit.sections.shareApplication.shareApplication"))))};P.defaultProps={"data-componentid":"application-share-modal"}},39131:(e,t,n)=>{n.d(t,{y:()=>ut});var r=n(86989),i=n(758),o=n(55007),a=n(5262),l=n(17028),c=n(4244),s=n(13550),u=n(60486),p=n(40838),d=n(37746),f=n(76271),h=n(43974),m=n(51021),g=n(66132),v=n(29314),y=n(87029),E=n(21257),b=n(7231),A=n(10319),S=n(58613),O=n(86105),w=n(6833),I=n(82406),L=n(96334),_=n(20494),R=n(47513),C=n(64704),T=n(50699),P=n(47130),N=n(2446),x=n(23744),j=n(44194),Z=n(10479),k=n(47245),H=n(50735),D=n(89141),U=n(1807),M=n(62508),z=n(39114),F=n(76314),G=n(89331),V=n(18220),W=n(6567),Q=n(29903),B=n(9821),$=n(89608),Y=n(45572),X=n(56514),q=n(84548),K=n(48773),J=n(35407),ee=n(76096),te=n(91970),ne=n(62782),re=n(94709),ie=n(65612),oe=n(6470),ae=n(5184),le=n(85658),ce=n(35932),se=n(92529),ue=n(37626),pe=n(2279),de=n(47018),fe=n(51630),he=n(39709),me=n(88490),ge=n(62210),ve=n(97434),ye=n(32980),Ee=n(84374),be=n(71619),Ae=n(72137),Se=n(37880),Oe=n(51835),we=n.n(Oe),Ie=n(27975),Le=n.n(Ie),_e=n(55900),Re=n.n(_e),Ce=n(21555),Te=n.n(Ce),Pe=n(3621),Ne=n.n(Pe),xe=n(5062),je=n.n(xe),Ze=n(92167),ke={};ke.styleTagTransform=je(),ke.setAttributes=Te(),ke.insert=Re().bind(null,"head"),ke.domAPI=Le(),ke.insertStyleElement=Ne();we()(Ze.Z,ke);Ze.Z&&Ze.Z.locals&&Ze.Z.locals;function He(e){return He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},He(e)}function De(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?De(Object(n),!0).forEach((function(t){Me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):De(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Me(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=He(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=He(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==He(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ze(e){return function(e){if(Array.isArray(e))return Ve(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ge(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,i=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw i}}return l}}(e,t)||Ge(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ge(e,t){if(e){if("string"==typeof e)return Ve(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ve(e,t):void 0}}function Ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const We=function(e){var t=e["data-componentid"],n=void 0===t?"org-selective-share-with-all-roles":t,i=e.application,o=e.addedOrgs,a=e.removedOrgs,l=e.setAddedOrgs,c=e.setRemovedOrgs,u=e.selectedItems,p=e.setSelectedItems,f=(0,k.v9)((function(e){var t;return null==e||null===(t=e.organization)||void 0===t||null===(t=t.organization)||void 0===t?void 0:t.id})),h=(0,Z.$)().t,m=(0,k.I0)(),g=(0,d.Z)().isOrganizationManagementEnabled,v=Fe((0,j.useState)([]),2),y=v[0],E=v[1],b=Fe((0,j.useState)({}),2),A=b[0],S=b[1],O=Fe((0,j.useState)(!1),2),L=O[0],R=O[1],C=Fe((0,j.useState)(),2),P=C[0],N=C[1],x=Fe((0,j.useState)(),2),H=x[0],D=x[1],U=Fe((0,j.useState)(),2),M=U[0],z=U[1],F=Fe((0,j.useState)([]),2),G=F[0],V=F[1],W=(0,Ae.Z)(null==i?void 0:i.id,!(0,T.Z)(null==i?void 0:i.id),!0,null,null,null,null,null,"sharingMode"),Q=W.data,B=W.isLoading,$=W.error,Y=(0,se.Z)(g,null,15,(0,T.Z)(H)?null:H,null,!1,!1),X=Y.data,q=Y.error,K=(0,se.Z)(g&&!(0,T.Z)(M),"parentId eq '".concat(M,"'"),null,null,null,!1,!1),J=K.data,ee=K.error;(0,j.useEffect)((function(){var e;if((null==Q||null===(e=Q.organizations)||void 0===e?void 0:e.length)>0){var t,n=Q.organizations.map((function(e){return e.id})),r={};null===(t=Q.organizations)||void 0===t||t.forEach((function(e){r[e.id]=e})),p(n)}else p([])}),[Q]),(0,j.useEffect)((function(){var e,t;if((null==X||null===(e=X.organizations)||void 0===e?void 0:e.length)>0){var n=te(X.organizations);E((function(e){if(0===e.length)return n;var t=e.map((function(e){return e.id})),r=n.filter((function(e){return!t.includes(e.id)}));return 0===r.length?e:[].concat(ze(e),ze(r))}));var r=Ue({},A);X.organizations.forEach((function(e){r[e.id]=e})),S(r)}if((null==X||null===(t=X.links)||void 0===t?void 0:t.length)>0){var i=X.links.find((function(e){return"next"===e.rel}));i?(N(i.href),R(!0)):(N(void 0),R(!1))}else R(!1)}),[X]),(0,j.useEffect)((function(){var e;if((null==J||null===(e=J.organizations)||void 0===e?void 0:e.length)>0){var t=te(null==J?void 0:J.organizations),n=(0,Se.pe)(y,M,t);E(n)}}),[J]),(0,j.useEffect)((function(){$&&m((0,I.V_)({description:h("applications:edit.sections.sharedAccess.notifications.fetchApplicationOrgTree.genericError.description"),level:w.QU.ERROR,message:h("applications:edit.sections.sharedAccess.notifications.fetchApplicationOrgTree.genericError.message")}))}),[$]),(0,j.useEffect)((function(){(q||ee)&&m((0,I.V_)({description:h("consoleSettings:sharedAccess.notifications.fetchOrgTree.error.description"),level:w.QU.ERROR,message:h("consoleSettings:sharedAccess.notifications.fetchOrgTree.error.message")}))}),[q,ee]);var te=function(e){var t={},n=Ue({},A);return e.forEach((function(e){var r,i,o,a;(t[e.id]={children:e.hasChildren?[{children:[],id:"".concat(e.name,"-temp-child"),label:"Loading..."}]:[],id:e.id,label:e.name,parentId:null!==(r=null!==(i=e.parentId)&&void 0!==i?i:M)&&void 0!==r?r:f},n[e.id])||(n[e.id]={hasChildren:e.hasChildren,id:e.id,name:e.name,parentId:null!==(o=null!==(a=e.parentId)&&void 0!==a?a:M)&&void 0!==o?o:f,ref:e.ref,status:e.status})})),S(n),e.map((function(e){return t[e.id]}))},ne=function(e){var t=A[e];if(t){var n=A[t.parentId];n&&(u.includes(n.id)||(p((function(e){return[].concat(ze(e),[n.id])})),ne(n.id),o.includes(n.id)||l((function(e){return[].concat(ze(e),[n.id])}))))}},re=function(e){var t=A[e];if(t&&t.hasChildren){var n=(0,Se.qZ)(e,A);p((function(e){return e.filter((function(e){return!n.includes(e)}))})),a.includes(e)||c((function(t){return[].concat(ze(t),[e])})),n.forEach((function(e){re(e)}))}},oe=function(e){var t=(0,Se.qZ)(e,A);(null==t?void 0:t.length)>0&&t.forEach((function(e){V((function(t){return t.filter((function(t){return t!==e}))})),oe(e)}))};return j.createElement(ie.Z,{container:!0,xs:12,className:"roles-selective-share-all-roles-container"},B?j.createElement(ie.Z,{container:!0,xs:12,padding:1,className:"roles-selective-share-all-roles",justifyContent:"center",alignItems:"center"},j.createElement(ve.Z,{size:30})):j.createElement(ie.Z,{xs:12,padding:1,className:"roles-selective-share-all-roles",id:"scrollableOrgContainer"},j.createElement(be.Z,{dataLength:y.length,next:function(){var e=null==P?void 0:P.split("after=");e.length<2?R(!1):D(e[1])},hasMore:L,loader:j.createElement(ye.Z,null),scrollableTarget:"scrollableOrgContainer"},y.length>0?j.createElement(ge.q,{"data-componentid":"".concat(n,"-tree-view"),className:"roles-selective-share-tree-view",items:y,expandedItems:G,selectedItems:u,onItemSelectionToggle:function(e,t,n){return function(e,t){t?(u.includes(e)||p((function(t){return[].concat(ze(t),[e])})),o.includes(e)||l((function(t){return[].concat(ze(t),[e])})),c((function(t){return t.filter((function(t){return t!==e}))})),ne(e)):(p((function(t){return t.filter((function(t){return t!==e}))})),a.includes(e)||c((function(t){return[].concat(ze(t),[e])})),l((function(t){return t.filter((function(t){return t!==e}))})),re(e))}(t,n)},onItemExpansionToggle:function(e,t,n){n?(z(t),V((function(e){return[].concat(ze(e),[t])}))):(V((function(e){return e.filter((function(e){return e!==t}))})),oe(t))},selectionPropagation:{descendants:!1,parents:!1},checkboxSelection:!0,multiSelect:!0,slots:{item:Ee.P}}):j.createElement(r.Z,{"data-componentid":"".concat(n,"-no-orgs"),display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%"},j.createElement(_.$J,{className:"p-0","data-componentid":"".concat(n,"-empty-list-placeholder"),image:(0,s.jF)().emptyList,imageSize:"mini",subtitle:[h("organizations:placeholders.emptyList.subtitles.0")]})))))};function Qe(e){return Qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qe(e)}var Be=["applicationId","clientId","onApplicationSharingCompleted","onClose","data-componentid"];function $e(){return $e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$e.apply(null,arguments)}function Ye(){Ye=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof v?t:v,a=Object.create(o.prototype),l=new T(r||[]);return i(a,"_invoke",{value:L(e,n,l)}),a}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",f="suspendedYield",h="executing",m="completed",g={};function v(){}function y(){}function E(){}var b={};s(b,a,(function(){return this}));var A=Object.getPrototypeOf,S=A&&A(A(P([])));S&&S!==n&&r.call(S,a)&&(b=S);var O=E.prototype=v.prototype=Object.create(b);function w(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function I(e,t){function n(i,o,a,l){var c=p(e[i],e,o);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"==Qe(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,l)}),(function(e){n("throw",e,a,l)})):t.resolve(u).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,l)}))}l(c.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function L(t,n,r){var i=d;return function(o,a){if(i===h)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var l=r.delegate;if(l){var c=_(l,r);if(c){if(c===g)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===d)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=h;var s=p(t,n,r);if("normal"===s.type){if(i=r.done?m:f,s.arg===g)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(i=m,r.method="throw",r.arg=s.arg)}}}function _(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,_(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var o=p(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function R(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(R,this),this.reset(!0)}function P(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(Qe(t)+" is not iterable")}return y.prototype=E,i(O,"constructor",{value:E,configurable:!0}),i(E,"constructor",{value:y,configurable:!0}),y.displayName=s(E,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,s(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},w(I.prototype),s(I.prototype,l,(function(){return this})),t.AsyncIterator=I,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new I(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(O),s(O,c,"Generator"),s(O,a,(function(){return this})),s(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=P,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return l.type="throw",l.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],l=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(c&&s){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;C(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:P(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function Xe(e,t,n,r,i,o,a){try{var l=e[o](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,i)}function qe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,i=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw i}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ke(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ke(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Je=function(e){var t=e.applicationId,n=e.clientId,r=e.onApplicationSharingCompleted,i=e.onClose,o=e["data-componentid"],a=void 0===o?"application-share-modal":o,l=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,Be),c=(0,k.I0)(),s=(0,Z.$)().t,u=qe((0,j.useState)(me.yw.SHARE_ALL),2),p=u[0],f=u[1],m=qe((0,j.useState)(me.ys.SHARE_WITH_ALL),2),g=m[0],v=m[1],y=qe((0,j.useState)([]),2),E=y[0],b=y[1],A=qe((0,j.useState)([]),2),S=A[0],O=A[1],L=qe((0,j.useState)([]),2),R=L[0],C=L[1],P=(0,d.Z)().isOrganizationManagementEnabled,N=h.l.getInstance(),x=(0,he.b)(t,!!t),H=x.data,D=x.error,U=(0,se.Z)(P,null,1,null,null,!1,!1).data,z=(0,j.useMemo)((function(){var e;return!(!P||(0,T.Z)(U))&&(null==U||null===(e=U.organizations)||void 0===e?void 0:e.length)>0}),[U,P]);(0,j.useEffect)((function(){D&&c((0,I.V_)({description:s("applications:notifications.fetchApplication.genericError.description"),level:w.QU.ERROR,message:s("applications:notifications.fetchApplication.genericError.message")}))}),[D]);var F=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t={applicationId:H.id,policy:ce.wD.ALL_EXISTING_AND_FUTURE_ORGS,roleSharing:{mode:e?ce.yx.ALL:ce.yx.NONE,roles:[]}};(0,fe.Js)(t).then((function(){c((0,I.V_)({description:s("applications:edit.sections.sharedAccess.notifications.share.success.description"),level:w.QU.SUCCESS,message:s("applications:edit.sections.sharedAccess.notifications.share.success.message")})),N.publish("application-share",{"client-id":n})})).catch((function(e){c((0,I.V_)({description:s("applications:edit.sections.sharedAccess.notifications.share.error.description",{error:e.message}),level:w.QU.ERROR,message:s("applications:edit.sections.sharedAccess.notifications.share.error.message")})),N.publish("application-share-error",{"client-id":n})})).finally((function(){r(),i(null,null)}))},G=function(){var e,t=(e=Ye().mark((function e(){var t;return Ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:E.length>0?(t={applicationId:H.id,organizations:E.map((function(e){return{orgId:e,policy:ce.wD.SELECTED_ORG_ONLY,roleSharing:{mode:ce.yx.ALL,roles:[]}}}))},(0,fe.C_)(t).then((function(){c((0,I.V_)({description:s("applications:edit.sections.sharedAccess.notifications.share.success.description"),level:w.QU.SUCCESS,message:s("applications:edit.sections.sharedAccess.notifications.share.success.message")})),N.publish("application-share",{"client-id":n})})).catch((function(e){c((0,I.V_)({description:s("applications:edit.sections.sharedAccess.notifications.share.error.description",{error:e.message}),level:w.QU.ERROR,message:s("applications:edit.sections.sharedAccess.notifications.share.error.message")})),N.publish("application-share-error",{"client-id":n})})).finally((function(){r(),i(null,null)}))):(r(),i(null,null));case 1:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Xe(o,r,i,a,l,"next",e)}function l(e){Xe(o,r,i,a,l,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}();return j.createElement(de.Z,$e({closeOnDimmerClick:!0,dimmer:"blurring",size:"small",closeOnDocumentClick:!0,closeOnEscape:!0,"data-testid":"".concat(a,"-share-application-modal"),"data-componentid":"".concat(a,"-share-application-modal")},l),j.createElement(de.Z.Header,null,s("applications:edit.sections.shareApplication.heading")),j.createElement(de.Z.Content,null,j.createElement(_.X6,{ellipsis:!0,as:"h6"},s("applications:edit.sections.sharedAccess.subTitle")),j.createElement(ne.Z,{fullWidth:!0},j.createElement(ae.Z,{value:p,onChange:function(e){f(e.target.value)},"data-componentid":"".concat(a,"-radio-group")},P&&j.createElement(re.Z,{value:me.yw.SHARE_SELECTED,label:z?s("organizations:shareWithSelectedOrgsRadio"):j.createElement(j.Fragment,null,s("organizations:shareWithSelectedOrgsRadio"),j.createElement(_.kW,{inline:!0,popup:!0},s("organizations:placeholders.emptyList.subtitles.0"))),control:j.createElement(oe.Z,null),disabled:!z,"data-componentid":"".concat(a,"-share-with-selected-orgs-checkbox")}),j.createElement(ue.M,{mode:"wait"},p===me.yw.SHARE_SELECTED&&j.createElement(pe.E.div,{key:"selected-orgs-block",initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"ml-5"},j.createElement(ie.Z,{xs:14},j.createElement(We,{application:H,selectedItems:E,setSelectedItems:b,addedOrgs:S,setAddedOrgs:O,removedOrgs:R,setRemovedOrgs:C})))),j.createElement(re.Z,{value:me.yw.SHARE_ALL,label:s("organizations:shareApplicationRadio"),control:j.createElement(oe.Z,null),"data-componentid":"".concat(a,"-share-with-all-orgs-checkbox")}),j.createElement(ue.M,{mode:"wait"},p===me.yw.SHARE_ALL&&j.createElement(pe.E.div,{key:"selected-orgs-block",initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"ml-5"},j.createElement(re.Z,{control:j.createElement(le.Z,{checked:g===me.ys.SHARE_NONE,onChange:function(e,t){v(t?me.ys.SHARE_NONE:me.ys.SHARE_WITH_ALL)},"data-componentid":"".concat(a,"-share-selected-roles-all-orgs-toggle")}),label:s("applications:edit.sections.sharedAccess.doNotShareRolesWithAllOrgs")}),j.createElement(M.Z,{hidden:!0,className:"mb-0 mt-2"}),g===me.ys.SHARE_WITH_ALL?j.createElement(te.Z,{severity:"info"},s("applications:edit.sections.sharedAccess.allRolesAndOrgsSharingMessage")):j.createElement(te.Z,{severity:"info"},s("applications:edit.sections.sharedAccess.allRolesAndOrgsNotSharingMessage"))))))),j.createElement(de.Z.Actions,null,j.createElement(_.Qj,{"data-testid":"".concat(a,"-cancel-button"),onClick:function(){return r()}},s("common:cancel")),j.createElement(_.KM,{disabled:p===me.yw.SHARE_SELECTED&&(null==E?void 0:E.length)<1,onClick:function(){p===me.yw.SHARE_ALL?g===me.ys.SHARE_WITH_ALL?F(!0):g===me.ys.SHARE_NONE&&F(!1):p===me.yw.SHARE_SELECTED&&G()},"data-testid":"".concat(a,"-save-button")},s("applications:edit.sections.shareApplication.shareApplication"))))},et=n(90158),tt={};tt.styleTagTransform=je(),tt.setAttributes=Te(),tt.insert=Re().bind(null,"head"),tt.domAPI=Le(),tt.insertStyleElement=Ne();we()(et.Z,tt);et.Z&&et.Z.locals&&et.Z.locals;function nt(e){return nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nt(e)}function rt(){rt=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof v?t:v,a=Object.create(o.prototype),l=new T(r||[]);return i(a,"_invoke",{value:L(e,n,l)}),a}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",f="suspendedYield",h="executing",m="completed",g={};function v(){}function y(){}function E(){}var b={};s(b,a,(function(){return this}));var A=Object.getPrototypeOf,S=A&&A(A(P([])));S&&S!==n&&r.call(S,a)&&(b=S);var O=E.prototype=v.prototype=Object.create(b);function w(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function I(e,t){function n(i,o,a,l){var c=p(e[i],e,o);if("throw"!==c.type){var s=c.arg,u=s.value;return u&&"object"==nt(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,l)}),(function(e){n("throw",e,a,l)})):t.resolve(u).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,l)}))}l(c.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function L(t,n,r){var i=d;return function(o,a){if(i===h)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var l=r.delegate;if(l){var c=_(l,r);if(c){if(c===g)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===d)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=h;var s=p(t,n,r);if("normal"===s.type){if(i=r.done?m:f,s.arg===g)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(i=m,r.method="throw",r.arg=s.arg)}}}function _(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,_(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var o=p(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function R(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(R,this),this.reset(!0)}function P(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(nt(t)+" is not iterable")}return y.prototype=E,i(O,"constructor",{value:E,configurable:!0}),i(E,"constructor",{value:y,configurable:!0}),y.displayName=s(E,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,s(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},w(I.prototype),s(I.prototype,l,(function(){return this})),t.AsyncIterator=I,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new I(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(O),s(O,c,"Generator"),s(O,a,(function(){return this})),s(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=P,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return l.type="throw",l.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],l=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(c&&s){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;C(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:P(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function it(e,t,n,r,i,o,a){try{var l=e[o](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,i)}function ot(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function at(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ot(Object(n),!0).forEach((function(t){lt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ot(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function lt(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=nt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=nt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==nt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ct(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,i=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw i}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return st(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?st(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function st(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var ut=function(e){var t=e.title,n=e.closeWizard,te=e.template,ne=e.subTemplates,re=e.subTemplatesSectionTitle,ie=e.subTitle,oe=e.templateLoadingStrategy,ae=(e.setIsApplicationSharingEnabled,e["data-testid"]),le=e["data-componentid"],ce=(0,Z.$)().t,se=(0,_.fQ)().getLink,ue=(0,E.z)().isSuperOrganization,pe=(0,k.I0)(),de=(0,d.Z)().isOrganizationManagementEnabled,fe=f.h.getState().config.deployment.tenant,he=(0,S.Z)().userStoresList,me=(0,j.useMemo)((function(){return null==he?void 0:he.some((function(e){return e.id===A.Rp}))}),[he]),ge=ct((0,L.cC)(),2),ve=ge[0],ye=ge[1],Ee=ct((0,L.cC)(),2),be=Ee[0],Ae=Ee[1],Se=(0,k.v9)((function(e){var t;return null===(t=e.config)||void 0===t||null===(t=t.deployment)||void 0===t||null===(t=t.extensions)||void 0===t?void 0:t.asgardeoReservedAppRegex})),Oe=(0,k.v9)((function(e){return e.config.ui.isClientSecretHashEnabled})),we=(0,k.v9)((function(e){var t;return null==e||null===(t=e.organization)||void 0===t?void 0:t.organizationType})),Ie=(0,k.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t?void 0:t.features})),Le=(0,O.cr)(null==Ie?void 0:Ie.applications,B.jo.FEATURE_DICTIONARY.get("FAPI_APP_CREATION")),_e=(0,k.v9)((function(e){return e.organization.isFirstLevelOrganization})),Re=(0,O.cr)(null==Ie?void 0:Ie.applications,B.jo.FEATURE_DICTIONARY.get("APPLICATION_ROLE_SHARING")),Ce=ct((0,j.useState)(null),2),Te=Ce[0],Pe=Ce[1],Ne=ct((0,j.useState)(void 0),2),xe=Ne[0],je=Ne[1],Ze=ct((0,j.useState)(K.AI.OAUTH2_OIDC),2),ke=Ze[0],He=Ze[1],De=ct((0,j.useState)(!1),2),Ue=De[0],Me=De[1],ze=ct((0,j.useState)(void 0),2),Fe=ze[0],Ge=ze[1],Ve=ct((0,j.useState)(te),2),We=Ve[0],Qe=Ve[1],Be=ct((0,j.useState)([]),2),$e=Be[0],Ye=Be[1],Xe=ct((0,j.useState)(!1),2),qe=Xe[0],Ke=Xe[1],et=ct((0,j.useState)(!1),2),tt=et[0],nt=et[1],ot=ct((0,j.useState)(!1),2),lt=ot[0],st=ot[1],ut=ct((0,j.useState)(!1),2),pt=ut[0],dt=ut[1],ft=ct((0,j.useState)(!1),2),ht=ft[0],mt=ft[1],gt=ct((0,j.useState)(!1),2),vt=gt[0],yt=gt[1],Et=ct((0,j.useState)(!1),2),bt=Et[0],At=Et[1],St=ct((0,j.useState)(void 0),2),Ot=St[0],wt=St[1],It=(0,j.useRef)(),Lt=(0,j.useRef)(),_t=(0,j.useRef)(),Rt=ct((0,j.useState)(void 0),2),Ct=Rt[0],Tt=Rt[1],Pt=ct((0,_.IK)(),3),Nt=Pt[0],xt=Pt[1],jt=Pt[2],Zt=h.l.getInstance();(0,j.useEffect)((function(){Ot&&At(!0)}),[Ot]),(0,j.useEffect)((function(){if(We&&We.id!==$.id&&ue()){var e=[];(0,a.Z)().then((function(t){t.map((function(t){e.push(t.url)}))})),Ye(e),xt(null)}}),[We]),(0,j.useEffect)((function(){We.id!==$.id?(0,T.Z)(ne)||!Array.isArray(ne)||ne.length<1?Vt(te.id,te):(Qe(ne[0]),Vt(ne[0].id,ne[0])):Pe($)}),[ne]),(0,j.useEffect)((function(){var e;if(Bt("all",!1),(We.id!==$.id||ke!==K.AI.WS_FEDERATION)&&(xe||Fe)){if(!xe){var t;if(We.id===$.id&&ke===K.AI.SAML)return;if(null!=te&&te.authenticationProtocol||(null===(t=te.subTemplates)||void 0===t?void 0:t.length)>0)return}if(Fe){var n,r=(0,R.Z)(Te),i="inboundProtocolConfiguration.oidc.callbackURLs",o=(0,C.Z)(xe,i,[]);if((0,T.Z)(null==o?void 0:o.filter(Boolean))||((0,N.Z)(r,"application.".concat(i),[]),(0,N.Z)(r,"application.".concat("inboundProtocolConfiguration.oidc.allowedOrigins"),[])),null!=r&&null!==(e=r.application)&&void 0!==e&&null!==(e=e.inboundProtocolConfiguration)&&void 0!==e&&null!==(e=e.saml)&&void 0!==e&&e.templateConfiguration)null==r||null===(n=r.application)||void 0===n||null===(n=n.inboundProtocolConfiguration)||void 0===n||null===(n=n.saml)||void 0===n||delete n.templateConfiguration;var a,l=(0,R.Z)((0,P.Z)(null==r?void 0:r.application,xe));if(l.name=Fe.get("name").toString(),l.templateId=We.id,(0,T.Z)(l.associatedRoles)&&(l.associatedRoles={allowedAudience:b.nL.DEFAULT_ROLE_AUDIENCE,roles:[]}),We.id===$.id)if(ke===K.AI.OAUTH2_OIDC)l.templateId=B.jo.CUSTOM_APPLICATION_OIDC,l.inboundProtocolConfiguration={oidc:{grantTypes:["client_credentials"],isFAPIApplication:(null===(a=Fe.get("isFAPIApp"))||void 0===a?void 0:a.length)>=2}};else ke===K.AI.SAML&&(l.templateId=B.jo.CUSTOM_APPLICATION_SAML,Ct===K.T6.MANUAL&&(l.inboundProtocolConfiguration.saml.manualConfiguration=Object.assign(l.inboundProtocolConfiguration.saml.manualConfiguration,{attributeProfile:{alwaysIncludeAttributesInResponse:!0,enabled:!0}})));We.id===q.u.M2M_APPLICATION&&(l.inboundProtocolConfiguration={oidc:{grantTypes:[B.jo.CLIENT_CREDENTIALS_GRANT]}}),vt&&(null==l?void 0:l.templateId)===B.jo.CUSTOM_APPLICATION_OIDC&&((0,N.Z)(l,"inboundProtocolConfiguration.oidc.pkce.mandatory",!0),(0,N.Z)(l,"inboundProtocolConfiguration.oidc.pkce.supportPlainTransformAlgorithm",!1),(0,N.Z)(l,"advancedConfigurations.enableAPIBasedAuthentication",!0),(0,N.Z)(l,"inboundProtocolConfiguration.oidc.accessToken.type","JWT"),(0,N.Z)(l,"inboundProtocolConfiguration.oidc.accessToken.accessTokenAttributes",[]),(0,N.Z)(l,"inboundProtocolConfiguration.oidc.accessToken.applicationAccessTokenExpiryInSeconds",3600),(0,N.Z)(l,"inboundProtocolConfiguration.oidc.accessToken.userAccessTokenExpiryInSeconds",3600)),Me(!0),Mt(l)}}}),[Fe,xe]),(0,j.useEffect)((function(){if(xe){var e=(0,R.Z)(at(at(at({},null==Te?void 0:Te.application),xe),{},{name:Fe.get("name").toString(),templateId:B.jo.CUSTOM_APPLICATION_PASSIVE_STS}));ke===K.AI.WS_FEDERATION&&xe&&Mt(e)}}),[xe]);var kt,Ht,Dt,Ut,Mt=function(e){(0,W.W3)(e).then((function(t){Zt.compute((function(){We.id===$.id?Zt.publish("application-register-new-application",{type:e.templateId}):Zt.publish("application-register-new-application",{type:We.templateId})})),pe((0,I.V_)({description:ce("applications:notifications.addApplication.success.description"),level:w.QU.SUCCESS,message:ce("applications:notifications.addApplication.success.message")}));var n=t.headers.location,r=n.substring(n.lastIndexOf("/")+1);ht?wt(r):zt(r)})).catch((function(e){var t,n;if(403!==(null==e||null===(t=e.response)||void 0===t?void 0:t.status)||(null==e||null===(n=e.response)||void 0===n||null===(n=n.data)||void 0===n?void 0:n.code)!==B.jo.ERROR_CREATE_LIMIT_REACHED.getErrorCode())if(e.response&&e.response.data&&e.response.data.code&&e.response.data.code===B.jo.ERROR_CODE_ISSUER_EXISTS)lt&&(Ct!==K.T6.MANUAL?(xt({description:e.response.data.description,level:w.QU.ERROR,message:ce("applications:notifications.addApplication.error.message")}),$t()):(Bt("issuer",!0),Wt("issuer")));else if(e.response&&e.response.data&&e.response.data.code&&e.response.data.code===B.jo.ERROR_CODE_INVALID_METADATA_URL)lt&&(Bt("metaUrl",!0),Wt("metaUrl"));else{if(e.response&&e.response.data&&e.response.data.description)return xt({description:e.response.data.description,level:w.QU.ERROR,message:ce("applications:notifications.addApplication.error.message")}),void $t();xt({description:ce("applications:notifications.addApplication.genericError.description"),level:w.QU.ERROR,message:ce("applications:notifications.addApplication.genericError.message")}),$t()}else dt(!0)})).finally((function(){Me(!1),Qt(!1),Bt("all",!1)}))},zt=function(e){if(!(0,T.Z)(e)){var t="?",n=0;return We.id!==X.id&&We.id!==Y.id&&Oe&&(t="".concat(t,"&").concat(B.jo.CLIENT_SECRET_HASH_ENABLED_URL_SEARCH_PARAM_KEY,"=true")),We.id===$.id&&(n=m.tZ.customApplication.defaultTabIndex),void p.m.push({hash:"#".concat(q.El.TAB_INDEX).concat(n),pathname:u.$.getPaths().get("APPLICATION_EDIT").replace(":id",e),search:t})}p.m.push(u.$.getPaths().get("APPLICATIONS"))},Ft=function(){At(!1),zt(Ot)},Gt=function(){n()},Vt=function(e,t){oe!==q.IJ.LOCAL?(0,W.FG)(e).then((function(e){Pe(e)})).catch((function(e){e.response&&e.response.data&&e.response.data.description?pe((0,I.V_)({description:e.response.data.description,level:w.QU.ERROR,message:ce("applications:notifications.fetchTemplate.error.message")})):pe((0,I.V_)({description:ce("applications:notifications.fetchTemplate.genericError.description"),level:w.QU.ERROR,message:ce("applications:notifications.fetchTemplate.genericError.message")}))})):Pe(t)},Wt=function(e){var t={behavior:"smooth",block:"center"};switch(e){case"name":It.current.scrollIntoView(t);break;case"issuer":Lt.current.scrollIntoView(t);var n=Lt.current.children[0].children[1].children[0];n.focus(),n.blur();break;case"metaUrl":_t.current.scrollIntoView(t);var r=_t.current.children[0].children[1].children[0];r.focus(),r.blur()}},Qt=function(e){st(e)},Bt=function(e,t){switch(e){case"issuer":Ke(t);break;case"metaUrl":nt(t);break;default:nt(t),Ke(t)}},$t=function(){var e;null===(e=document.getElementById("notification-div"))||void 0===e||e.scrollIntoView({behavior:"smooth"})},Yt=function(){var e,t=(e=rt().mark((function e(t,n){var r,i,o;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.toString().trim(),qt(r)){e.next=5;break}return n.isValid=!1,n.errorMessages.push(ce("applications:forms.spaProtocolSettingsWizard.fields.name.validations.invalid",{appName:t.toString(),characterLimit:B.jo.FORM_FIELD_CONSTRAINTS.APP_NAME_MAX_LENGTH})),e.abrupt("return");case 5:if(!Xt(r)){e.next=9;break}return n.isValid=!1,n.errorMessages.push(ce("applications:forms.generalDetails.fields.name.validations.reserved",{appName:r,characterLimit:B.jo.FORM_FIELD_CONSTRAINTS.APP_NAME_MAX_LENGTH})),e.abrupt("return");case 9:return i=null,e.prev=10,e.next=13,(0,W.AY)(null,null,"name eq "+t.toString());case 13:i=e.sent,(null===(o=i)||void 0===o||null===(o=o.applications)||void 0===o?void 0:o.length)>0&&(n.isValid=!1,n.errorMessages.push(ce("applications:forms.generalDetails.fields.name.validations.duplicate"))),e.next=23;break;case 17:if(e.prev=17,e.t0=e.catch(10),!(e.t0.response&&e.t0.response.data&&e.t0.response.data.description)){e.next=22;break}return pe((0,I.V_)({description:e.t0.response.data.description,level:w.QU.ERROR,message:ce("applications:notifications.fetchApplications.error.message")})),e.abrupt("return");case 22:pe((0,I.V_)({description:ce("applications:notifications.fetchApplications.genericError.description"),level:w.QU.ERROR,message:ce("applications:notifications.fetchApplications.genericError.message")}));case 23:case"end":return e.stop()}}),e,null,[[10,17]])})),function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){it(o,r,i,a,l,"next",e)}function l(e){it(o,r,i,a,l,"throw",e)}a(void 0)}))});return function(e,n){return t.apply(this,arguments)}}(),Xt=function(e){if(!Se)return!1;var t=new RegExp(Se);return e&&t.test(e)},qt=function(e){return e&&!!e.match(B.jo.FORM_FIELD_CONSTRAINTS.APP_NAME_PATTERN)},Kt=(0,k.v9)((function(e){var t;return null===(t=e.config.ui.features)||void 0===t?void 0:t.applications})),Jt=function(){var e=ne&&ne instanceof Array&&ne.length>0,t=We.id===$.id;if(!e&&!t)return null;if("mobile"===te.id||"desktop"===te.id)return null;var n=t?function(e){if(we===y.$B.SUBORGANIZATION)return[K.AI.OAUTH2_OIDC];var t=Object.values(K.AI);t=t.filter((function(t){return m.tZ.customApplication.getAllowedProtocolTypes()&&m.tZ.customApplication.getAllowedProtocolTypes().length>0?!!m.tZ.customApplication.getAllowedProtocolTypes().includes(t)&&t:!(t===K.AI.WS_TRUST||t===K.AI.OIDC||t===K.AI.CUSTOM||e&&t===e)&&t}));var n=[K.AI.OAUTH2_OIDC,K.AI.SAML,K.AI.WS_FEDERATION];return(0,x.Z)(t,(function(e){return n.indexOf(e)}))}():ne;return j.createElement(D.Z.Row,{className:"pt-0 mt-0"},j.createElement(D.Z.Column,{mobile:16,tablet:16,computer:14},j.createElement("div",{className:"sub-template-selection"},j.createElement("label",{className:"sub-templates-label"},re),j.createElement(U.Z.Group,{itemsPerRow:3,className:"sub-templates"},n.map((function(e,n){var r=t?e:e.id,i=t?e:e.image,o=t?e===K.AI.OAUTH2_OIDC?j.createElement(j.Fragment,null,j.createElement("div",null,"OAuth2.0"),j.createElement("div",null,"OpenID Connect")):J.y.resolveProtocolDisplayName(e):e.name,a=t?ke===e:We.id===e.id,l=!t&&e.previewOnly;return j.createElement(_.B0,{key:n,image:at(at({},(0,Q.B0)()),(0,s.r2)())[i],size:"small",className:"sub-template-selection-card selection-card-with-ribbon",header:o,selected:a,onClick:function(){e.previewOnly||(t?He(e):(Qe(e),Vt(e.id,e)))},imageSize:"x30",imageOptions:{relaxed:!0,square:!1,width:"auto"},contentTopBorder:!1,showTooltips:!1,renderDisabledItemsAsGrayscale:!1,disabled:l,overlay:j.createElement(H.Z,{className:"lighter",active:!0},ce("common:featureAvailable")),overlayOpacity:.6,"data-testid":"".concat(ae,"-").concat(r,"-card"),featureLabel:e===K.AI.WS_FEDERATION&&(0,O.cr)(Kt,"applications.create.ws-fed.protocol.template")&&j.createElement(g.Z,{featureFlags:null==Kt?void 0:Kt.featureFlags,featureKey:"applications.create.ws-fed.protocol.template",type:"ribbon"})})}))),j.createElement(M.Z,{hidden:!0}))))};return j.createElement(j.Fragment,null,pt&&j.createElement(c.P,{actionLabel:ce("applications:notifications.tierLimitReachedError.emptyPlaceholder.action"),handleModalClose:function(){dt(!1),Gt()},header:ce("applications:notifications.tierLimitReachedError.heading"),description:ce("applications:notifications.tierLimitReachedError.emptyPlaceholder.subtitles"),message:ce("applications:notifications.tierLimitReachedError.emptyPlaceholder.title"),openModal:pt}),j.createElement(l.wv,{open:!pt&&!bt,className:"wizard minimal-application-create-wizard",dimmer:"blurring",onClose:Gt,closeOnDimmerClick:!1,closeOnEscape:!0,"data-testid":"".concat(ae,"-modal"),"data-componentid":"".concat(le,"-modal")},j.createElement(l.wv.MainPanel,null,j.createElement(l.wv.Header,{className:"wizard-header"},t,ie&&j.createElement(_.X6,{as:"h6"},ie,j.createElement(_.eb,{link:(null==We?void 0:We.templateId)===q.u.SPA?se("develop.applications.newApplication.singlePageApplication.learnMore"):(null==We?void 0:We.templateId)===q.u.OIDC_WEB_APPLICATION?se("develop.applications.newApplication.oidcApplication.learnMore"):(null==We?void 0:We.templateId)===q.u.SAML_WEB_APPLICATION?se("develop.applications.newApplication.samlApplication.learnMore"):(null==We?void 0:We.templateId)===q.u.MOBILE_APPLICATION?se("develop.applications.newApplication.mobileApplication.learnMore"):(null==We?void 0:We.templateId)===q.u.M2M_APPLICATION?se("develop.applications.newApplication.m2mApplication.learnMore"):(null==We?void 0:We.templateId)===q.u.CUSTOM_APPLICATION?se("develop.applications.newApplication.customApplication.learnMore"):void 0},ce("common:learnMore")))),j.createElement(l.wv.Content,null,j.createElement(L.Es,{onSubmit:function(e){Ge(e),Ae()},onSubmitError:function(e,t){for(var n=e.entries(),r=n.next();!r.done;){if(!r.value[1]||!t.get(r.value[0]).isValid){Wt(r.value[0]);break}r=n.next()}},submitState:ve,id:"name-input"},j.createElement(D.Z,null,Nt&&j.createElement(D.Z.Row,{columns:1,id:"notification-div"},j.createElement(D.Z.Column,{mobile:16,tablet:16,computer:14},jt)),j.createElement(D.Z.Row,{columns:1},j.createElement(D.Z.Column,{mobile:16,tablet:16,computer:14},j.createElement(L.gN,{name:"name",ref:It,label:ce("applications:forms.generalDetails.fields.name.label"),required:!0,requiredErrorMessage:ce("applications:forms.generalDetails.fields.name.validations.empty"),placeholder:ce("applications:forms.generalDetails.fields.name.placeholder"),type:"text","data-testid":"".concat(ae,"-application-name-input"),validation:Yt,displayErrorOn:"blur",maxLength:B.jo.FORM_FIELD_CONSTRAINTS.APP_NAME_MAX_LENGTH}))),Jt(),j.createElement(D.Z.Row,{className:"pt-0 mt-0"},j.createElement(D.Z.Column,{mobile:16,tablet:16,computer:14},(Ut=We.authenticationProtocol,We.id===$.id?Ut=ke:We.id===q.u.M2M_APPLICATION&&(Ut=K.AI.OAUTH2_OIDC),Ut===K.AI.OIDC?j.createElement(F.A,{isProtocolConfig:!1,tenantDomain:fe,allowedOrigins:$e,fields:["callbackURLs"],hideFieldHints:!0,triggerSubmit:be,templateValues:null==Te?void 0:Te.application,onSubmit:function(e){return je(e)},showCallbackURL:!0,addOriginByDefault:We.id===X.id,isAllowEnabled:!(We.id===X.id),"data-testid":"".concat(ae,"-oauth-protocol-settings-form"),selectedTemplate:We}):Ut===K.AI.SAML?j.createElement(V._,{issuerRef:Lt,issuerError:qe,metaUrlRef:_t,metaUrlError:tt,handleProtocolValueChange:Qt,fields:["issuer","assertionConsumerURLs"],hideFieldHints:!0,triggerSubmit:be,templateValues:null==Te?void 0:Te.application,onSubmit:function(e){return je(e)},setSAMLConfigureMode:Tt,"data-testid":"".concat(ae,"-saml-protocol-settings-form")}):Ut===K.AI.WS_FEDERATION?j.createElement(G.u,{triggerSubmit:be,initialValues:null,templateValues:Te,onSubmit:function(e){return je(e)},"data-testid":"".concat(ae,"-passive-sts-protocol-settings-form")}):void 0))),we!==y.$B.SUBORGANIZATION&&ke===K.AI.OAUTH2_OIDC&&(null==We?void 0:We.name)===q.So.STANDARD_BASED_APPLICATION&&Le&&j.createElement("div",{className:"pt-0 mt-0"},j.createElement(r.Z,{display:"flex",alignItems:"center"},j.createElement(L.gN,{"data-componentid":"".concat(ae,"-fapi-app-checkbox"),name:"isFAPIApp",required:!1,type:"checkbox",value:["isFAPIApp"],children:[{label:ce("applications:forms.generalDetails.fields.isFapiApp.label"),value:"fapiApp"}]}),m.tZ.advancedConfigurations.showFapiFeatureStatusChip&&j.createElement("div",{className:"oxygen-chip-div"},j.createElement(i.Z,{label:ce(v.j.BETA),className:"oxygen-menu-item-chip oxygen-chip-beta"}))),j.createElement(_.kW,{compact:!0},ce("applications:forms.generalDetails.fields.isFapiApp.hint"))),de&&m.tZ.editApplication.showApplicationShare&&(_e||window.AppUtils.getConfig().organizationName)&&we!==y.$B.SUBORGANIZATION&&(null==te?void 0:te.id)!==q.u.M2M_APPLICATION&&!Oe&&j.createElement(o.di,{when:null==Ie||null===(kt=Ie.applications)||void 0===kt||null===(kt=kt.scopes)||void 0===kt?void 0:kt.update},j.createElement(D.Z.Row,{columns:1},j.createElement(D.Z.Column,{mobile:16,tablet:16,computer:14},j.createElement("div",{className:"pt-0 mt-0"},j.createElement(z.Z,{onChange:function(e,t){mt(t.checked)},label:ce("applications:forms.generalDetails.fields.isSharingEnabled.label")}),j.createElement(_.kW,{inline:!0,popup:!0},ce("applications:forms.generalDetails.fields.isSharingEnabled.hint")))))),(null==Ie||null===(Ht=Ie.agents)||void 0===Ht?void 0:Ht.enabled)&&me&&we!==y.$B.SUBORGANIZATION&&(null==te?void 0:te.id)!==q.u.M2M_APPLICATION&&(We.authenticationProtocol===K.AI.OIDC||We.authenticationProtocol===K.AI.OAUTH2_OIDC||""===We.authenticationProtocol&&ke===K.AI.OAUTH2_OIDC)&&j.createElement(o.di,{when:null==Ie||null===(Dt=Ie.applications)||void 0===Dt||null===(Dt=Dt.scopes)||void 0===Dt?void 0:Dt.update},j.createElement("div",{className:"pt-0 mt-0"},j.createElement(z.Z,{onChange:function(e,t){yt(t.checked)},label:"Allow AI agents to sign into this application"}),j.createElement(_.kW,{inline:!0,popup:!0},"If enabled, this will update the protocol configurations of this application to be accessible by AI agents.")))))),j.createElement(l.wv.Actions,null,j.createElement(D.Z,null,j.createElement(D.Z.Row,{column:1},j.createElement(D.Z.Column,{mobile:8,tablet:8,computer:8},j.createElement(_.Qj,{floated:"left",onClick:Gt},ce("common:cancel"))),j.createElement(D.Z.Column,{mobile:8,tablet:8,computer:8},j.createElement(_.KM,{floated:"right",onClick:function(){Ke(!1),ye()},"data-testid":"".concat(ae,"-next-button"),loading:Ue,disabled:Ue},ce("common:create"))))))),function(){var e,t,n;if(null==We||null===(e=We.content)||void 0===e||!e.wizardHelp)return null;var r,i,o=We.content.wizardHelp;We.authenticationProtocol===K.AI.SAML&&Ct===K.T6.META_FILE&&null!==(t=We.content)&&void 0!==t&&t.wizardHelp2&&(o=null===(r=We.content)||void 0===r?void 0:r.wizardHelp2);We.authenticationProtocol===K.AI.SAML&&Ct===K.T6.META_URL&&null!==(n=We.content)&&void 0!==n&&n.wizardHelp3&&(o=null===(i=We.content)||void 0===i?void 0:i.wizardHelp3);return j.createElement(l.wv.SidePanel,null,j.createElement(l.wv.Header,{className:"wizard-header help-panel-header muted"},j.createElement("div",{className:"help-panel-header-text"},ce("applications:wizards.minimalAppCreationWizard.help.heading"))),j.createElement(l.wv.Content,null,j.createElement(j.Suspense,{fallback:j.createElement(_.pO,null)},j.createElement(o,null))))}()),bt&&(Re?j.createElement(Je,{open:bt,applicationId:Ot,onClose:function(){return At(!1)},onApplicationSharingCompleted:Ft}):j.createElement(ee.z,{open:bt,applicationId:Ot,onClose:function(){return At(!1)},onApplicationSharingCompleted:Ft})))};ut.defaultProps={"data-componentid":"minimal-application-create-wizard","data-testid":"minimal-application-create-wizard",showHelpPanel:!0}},88490:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,l(r.key),r)}}function o(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e,t,n){return(t=l(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}n.d(t,{MS:()=>p,ys:()=>u,yw:()=>s});var c=o((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}));a(c,"APPLICATION_ROLE_NAME_REGEX_PATTERN","^[a-zA-Z][a-zA-Z0-9-_]{2,29}$"),a(c,"CHOREO_APP_TEMPLATE_ID","choreo-apim-application-oidc"),a(c,"IS_CHOREO_APP_SP_PROPERTY","isChoreoApp"),a(c,"ORGANIZATION_LOGIN","Organization Login");var s=function(e){return e.SHARE_ALL="SHARE_ALL",e.SHARE_SELECTED="SHARE_SELECTED",e.UNSHARE="UNSHARE",e}({}),u=function(e){return e.SHARE_WITH_ALL="SHARE_ALL",e.SHARE_SELECTED="SHARE_SELECTED",e.SHARE_NONE="SHARE_NONE",e}({}),p=function(e){return e.WITH_UNSHARE="WITH_UNSHARE",e.WITHOUT_UNSHARE="WITHOUT_UNSHARE",e}({})},5262:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(2292),i=n(6833),o=n(76271),a=r.AsgardeoSPAClient.getInstance().httpRequest.bind(r.AsgardeoSPAClient.getInstance()).bind(r.AsgardeoSPAClient.getInstance()),l=function(){var e={headers:{Accept:"application/json","Access-Control-Allow-Origin":o.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:i.f2.GET,url:o.h.getState().config.endpoints.CORSOrigins};return a(e).then((function(e){return 200!==e.status?Promise.reject(new Error("Failed to fetch the CORS origins")):Promise.resolve(e.data)})).catch((function(e){return Promise.reject(e)}))}},92167:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(81611),i=n.n(r),o=n(83948),a=n.n(o)()(i());a.push([e.id,".roles-selective-share-all-roles-container{border:1px solid var(--oxygen-palette-grey-300);border-radius:var(--oxygen-shape-borderRadius);padding:10px}.roles-selective-share-all-roles-container .roles-selective-share-all-roles{border-radius:var(--oxygen-shape-borderRadius);height:300px;overflow:auto}",""]);const l=a},90158:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(81611),i=n.n(r),o=n(83948),a=n.n(o)()(i());a.push([e.id,".oxygen-chip-div{margin:0 0 1em .5em}",""]);const l=a}}]);