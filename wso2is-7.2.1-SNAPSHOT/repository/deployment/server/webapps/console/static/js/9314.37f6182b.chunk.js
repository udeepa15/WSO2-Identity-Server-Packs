"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[9314],{94045:(e,n,o)=>{o.d(n,{Z:()=>I});var t=o(51021),r=o(86105),a=o(61444),c=o(20494),i=o(41516),l=o(44194),s=o(10479),d=o(47245),u=o(38643),m=o(86456),v=o(77757),p=o(89141),C=o(62508),E=o(47149),g=o(66534),f=function(e){return"true"===e.value||"false"===e.value?c.pg:c._V},_=function(e){return"true"===e.value||"false"===e.value},N=function(e){return e.name.startsWith("__secret__")?"password":"text"},y=function(e){return e?void 0:a.I18n.instance.t("common:required")},A=function(e){var n=e.connector,o=e.isSubmitting,a=e.handleSubmit,m=e["data-testid"],A=e.props.properties,I=(0,d.v9)((function(n){return n.form[e.form].values})),T=(0,s.$)(),S=T.t,R=T.i18n,P=(0,d.v9)((function(e){return e.config.ui.features})),b=(0,d.v9)((function(e){var n;return null==e||null===(n=e.auth)||void 0===n?void 0:n.allowedScopes})),L=(0,l.useMemo)((function(){var e;return!(0,r.Xr)(null==P?void 0:P.attributeDialects,null==P||null===(e=P.attributeDialects)||void 0===e||null===(e=e.scopes)||void 0===e?void 0:e.update,b)}),[P,b]);return l.createElement(v.Z,{onSubmit:a},l.createElement(p.Z,{padded:!0},null==A?void 0:A.map((function(o,r){var a="governanceConnectors:connectorCategories."+(0,i.Z)(null==n?void 0:n.category)+".connectors."+(0,i.Z)(null==n?void 0:n.name)+".properties."+(0,i.Z)(null==o?void 0:o.name)+".label",s=null==o?void 0:o.displayName;R.exists(a)&&(s=S(a));var d="governanceConnectors:connectorCategories."+(0,i.Z)(null==n?void 0:n.category)+".connectors."+(0,i.Z)(null==n?void 0:n.name)+".properties."+(0,i.Z)(null==o?void 0:o.name)+".hint",v=null==o?void 0:o.description;return R.exists(d)&&(v=S(d)),l.createElement(p.Z.Row,{columns:2,className:t.KL.intendSettings&&"pl-3",key:r},l.createElement(p.Z.Column,{mobile:12,tablet:12,computer:10,className:!t.KL.intendSettings&&"pl-0"},_(o)?l.createElement("label",null,s):l.createElement(u.Z,{name:g.e.encodeConnectorPropertyName(o.name),component:f(o),type:N(o),required:!0,width:12,placeholder:o.value,"data-testid":"".concat(m,"-").concat(o.name),label:null!=s?s:null==o?void 0:o.displayName,validate:[y],readOnly:L}),""!==o.description&&l.createElement(c.kW,null,v)),l.createElement(p.Z.Column,{mobile:4,tablet:4,computer:6,className:!t.KL.intendSettings&&"pl-0"},_(o)&&l.createElement(u.Z,{name:g.e.encodeConnectorPropertyName(o.name),component:c.pg,type:N(o),width:10,placeholder:o.value,"data-testid":"".concat(m,"-").concat(o.name),label:I[g.e.encodeConnectorPropertyName(o.name)]?S("governanceConnectors:enabled"):S("governanceConnectors:disabled"),onChange:function(n,t){o.name===E.v.RE_CAPTCHA_ALWAYS_ENABLE&&t&&e.change(g.e.encodeConnectorPropertyName(E.v.RE_CAPTCHA_AFTER_MAX_FAILED_ATTEMPTS_ENABLE),!1),o.name===E.v.RE_CAPTCHA_AFTER_MAX_FAILED_ATTEMPTS_ENABLE&&t&&e.change(g.e.encodeConnectorPropertyName(E.v.RE_CAPTCHA_ALWAYS_ENABLE),!1)},readOnly:L})),l.createElement(C.Z,{hidden:!0}))})),l.createElement(p.Z.Row,{columns:1,className:t.KL.intendSettings&&"pl-3"},l.createElement(p.Z.Column,{mobile:16,tablet:16,computer:14,className:!t.KL.intendSettings&&"pl-0"},!L&&l.createElement(c.KM,{"data-testid":"".concat(m,"-update-button"),type:"submit",loading:o,disabled:o},S("common:update"))))))};const I=(0,m.Z)({enableReinitialize:!0,validate:function(e){var n={},o=g.e.encodeConnectorPropertyName(E.v.ALLOWED_IDLE_TIME_SPAN_IN_DAYS);return parseInt(e[o])<0&&(n[o]=a.I18n.instance.t("governanceConnectors:form.errors.positiveIntegers")),RegExp(/^(?:\d+,)+\d+$/).test(e[g.e.encodeConnectorPropertyName(E.v.ALERT_SENDING_TIME_PERIODS_IN_DAYS)])||(n[g.e.encodeConnectorPropertyName(E.v.ALERT_SENDING_TIME_PERIODS_IN_DAYS)]=a.I18n.instance.t("governanceConnectors:form.errors.format")),E.v.MULTI_ATTRIBUTE_CLAIM_LIST_REGEX_PATTERN.test(e[g.e.encodeConnectorPropertyName(E.v.MULTI_ATTRIBUTE_CLAIM_LIST)])||(n[g.e.encodeConnectorPropertyName(E.v.MULTI_ATTRIBUTE_CLAIM_LIST)]=a.I18n.instance.t("governanceConnectors:form.errors.format")),n}})(A);A.defaultProps={"data-testid":"dynamic-connector-form"}},59314:(e,n,o)=>{o.d(n,{k:()=>N});var t=o(51021),r=o(6833),a=o(82406),c=o(20494),i=o(41516),l=o(42177),s=o(44194),d=o(10479),u=o(59673),m=o(47245),v=o(26154),p=o(94045),C=o(4717),E=o(47149),g=o(66534);function f(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var t,r,a,c,i=[],l=!0,s=!1;try{if(a=(o=o.call(e)).next,0===n){if(Object(o)!==o)return;l=!1}else for(;!(l=(t=a.call(o)).done)&&(i.push(t.value),i.length!==n);l=!0);}catch(e){s=!0,r=e}finally{try{if(!l&&null!=o.return&&(c=o.return(),Object(c)!==c))return}finally{if(s)throw r}}return i}}(e,n)||function(e,n){if(e){if("string"==typeof e)return _(e,n);var o={}.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?_(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,n){(null==n||n>e.length)&&(n=e.length);for(var o=0,t=Array(n);o<n;o++)t[o]=e[o];return t}var N=function(e){var n=e.connector,o=e.onUpdate,_=e["data-componentid"],N=e["data-testid"],y=(0,m.I0)(),A=(0,d.$)(),I=A.t,T=A.i18n,S=f((0,s.useState)(!1),2),R=S[0],P=S[1],b=s.createElement(p.Z,{onSubmit:function(e){var c={operation:"UPDATE",properties:[]};for(var i in e)c.properties.push({name:g.e.decodeConnectorPropertyName(i),value:e[i]});t.KL.connectorToggleName[null==n?void 0:n.name]&&t.KL.autoEnableConnectorToggleProperty&&c.properties.push({name:g.e.decodeConnectorPropertyName(t.KL.connectorToggleName[null==n?void 0:n.name]),value:"true"}),P(!0),(0,C.u9)(c,null==n?void 0:n.categoryId,null==n?void 0:n.id).then((function(){y((0,a.V_)({description:I("governanceConnectors:notifications.updateConnector.success.description",{name:L(n)}),level:r.QU.SUCCESS,message:I("governanceConnectors:notifications.updateConnector.success.message")})),o()})).catch((function(e){!function(e){e.response&&e.response.data&&e.response.data.detail?y((0,a.V_)({description:I("governanceConnectors:notifications.updateConnector.error.description",{description:e.response.data.description}),level:r.QU.ERROR,message:I("governanceConnectors:notifications.updateConnector.error.message")})):y((0,a.V_)({description:I("governanceConnectors:notifications.updateConnector.genericError.description"),level:r.QU.ERROR,message:I("governanceConnectors:notifications.updateConnector.genericError.message")}))}(e)})).finally((function(){P(!1)}))},connector:n,props:{properties:null==n?void 0:n.properties.filter((function(e){return t.KL.connectorPropertiesToShow.includes(e.name)||t.KL.connectorPropertiesToShow.includes(E.v.ALL)}))},form:(0,l.Z)(null==n?void 0:n.friendlyName)+"-form",initialValues:function(e){var n={};return null==e||e.properties.map((function(e){"true"===e.value?n[g.e.encodeConnectorPropertyName(e.name)]=!0:"false"===e.value?n[g.e.encodeConnectorPropertyName(e.name)]=!1:n[g.e.encodeConnectorPropertyName(e.name)]=e.value})),n}(n),"data-testid":"".concat(N,"-").concat(null==n?void 0:n.name,"-form"),isSubmitting:R}),L=function(e){if(!e)return null;if((null==e?void 0:e.id)===E.v.PASSWORD_EXPIRY_CONNECTOR_ID)return I("governanceConnectors:connectorCategories.passwordPolicies.connectors.passwordExpiry.friendlyName");if((null==e?void 0:e.id)===E.v.USER_EMAIL_VERIFICATION_CONNECTOR_ID)return I("governanceConnectors:connectorCategories.userOnboarding.connectors.askPassword.friendlyName");if((null==e?void 0:e.id)===E.v.USER_CLAIM_UPDATE_CONNECTOR_ID)return I("governanceConnectors:connectorCategories.otherSettings.connectors.userClaimUpdate.friendlyName");var n="governanceConnectors:connectorCategories."+(0,i.Z)(null==e?void 0:e.category)+".connectors."+(0,i.Z)(null==e?void 0:e.name)+".friendlyName",o=null==e?void 0:e.friendlyName;return T.exists(n)&&(o=I(n)),o};return t.KL.renderConnector(n,b,String(L(n)),function(e){if(!e)return null;var n=null==e?void 0:e.friendlyName;return(null==e?void 0:e.id)===E.v.PASSWORD_EXPIRY_CONNECTOR_ID&&(n=I("governanceConnectors:connectorCategories.passwordPolicies.connectors.passwordExpiry.friendlyName")),(null==e?void 0:e.id)===E.v.USER_EMAIL_VERIFICATION_CONNECTOR_ID&&(n=I("governanceConnectors:connectorCategories.userOnboarding.connectors.askPassword.friendlyName")),(null==e?void 0:e.id)===E.v.USER_CLAIM_UPDATE_CONNECTOR_ID&&(n=I("governanceConnectors:connectorCategories.otherSettings.connectors.userClaimUpdate.friendlyName")),n.includes(E.v.DEPRECATION_MATCHER)&&(n=n.replace(E.v.DEPRECATION_MATCHER,"")),I("governanceConnectors:connectorSubHeading",{name:n})}(n),function(e){return e&&(null==e?void 0:e.id)===E.v.WSO2_ANALYTICS_ENGINE_CONNECTOR_CATEGORY_ID?s.createElement(c.v0,{warning:!0,className:"mb-5 connector-info","data-componentid":"".concat(_,"-").concat(null==e?void 0:e.id,"-deprecation-warning")},s.createElement(v.Z,{name:"warning sign"}),I("governanceConnectors:connectorCategories.otherSettings.connectors.analyticsEngine.messages.deprecation.heading"),s.createElement(c.xv,{spaced:"top"},s.createElement(u.c,{i18nKey:"governanceConnectors:connectorCategories.otherSettings.connectors.analyticsEngine.messages.deprecation.description"},"WSO2 Identity Server Analytics is now deprecated. Use ",s.createElement(c.xv,{inline:!0,weight:"bold"},"ELK Analytics")," instead."))):null}(n),"")};N.defaultProps={"data-componentid":"dynamic-governance-connector","data-testid":"dynamic-governance-connector"}}}]);