"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[2827],{12827:(e,t,a)=>{a.r(t),a.d(t,{default:()=>I});var l=a(55007),n=a(6894),r=a(25134),i=a(60486),o=a(90302),c=a(40838),u=a(50102),s=a(79408),d=a(51021),f=a(21257),m=a(6833),h=a(82406),v=a(96334),p=a(20494),g=a(44194),y=a(10479),S=a(47245),b=a(26154),C=a(31302),E=a(12252);function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var l,n,r,i,o=[],c=!0,u=!1;try{if(r=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;c=!1}else for(;!(c=(l=r.call(a)).done)&&(o.push(l.value),o.length!==t);c=!0);}catch(e){u=!0,n=e}finally{try{if(!c&&null!=a.return&&(i=a.return(),Object(i)!==i))return}finally{if(u)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return k(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?k(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,l=Array(t);a<t;a++)l[a]=e[a];return l}var P=function(e){var t,a=e["data-testid"],k=(0,y.$)().t,P=(0,p.fQ)().getLink,I=(0,f.z)().isSubOrganization,L=[{key:0,text:k("common:name"),value:"displayName"},{key:1,text:k("claims:local.attributes.attributeURI"),value:"claimURI"}],w=(0,S.v9)((function(e){return e.config.ui.features})),R=A((0,g.useState)(null),2),O=R[0],_=R[1],T=A((0,g.useState)(0),2),M=T[0],U=T[1],x=A((0,g.useState)(o.r.DEFAULT_RESOURCE_LIST_ITEM_LIMIT),2),N=x[0],Q=x[1],z=A((0,g.useState)(!1),2),F=z[0],V=z[1],j=A((0,g.useState)(null),2),D=j[0],$=j[1],q=A((0,g.useState)(L[0]),2),H=q[0],B=q[1],G=A((0,g.useState)(!0),2),K=G[0],W=G[1],X=A((0,g.useState)(""),2),Y=X[0],Z=X[1],J=A((0,g.useState)(!0),2),ee=J[0],te=J[1],ae=A((0,g.useState)(!1),2),le=ae[0],ne=ae[1],re=A((0,v.cC)(),2),ie=re[0],oe=re[1],ce=(0,S.I0)(),ue=(0,g.useRef)(!0),se=function(e,t,a,l){te(!0);var r={"exclude-hidden-claims":!0,filter:l||null,limit:e||null,offset:a||null,sort:t||null};(0,n.WN)(r).then((function(e){var t=null==e?void 0:e.filter((function(e){var t,a="true"===(null==e||null===(t=e.properties)||void 0===t||null===(t=t.find((function(e){return e.key===E.QN.AGENT_CLAIM_PROPERTY_NAME})))||void 0===t?void 0:t.value);return!I()||!a}));_(t),$((0,s.f)(t,H.value,K))})).catch((function(e){var t,a;ce((0,h.V_)({description:(null==e||null===(t=e.response)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.description)||k("claims:local.notifications.getClaims.genericError.description"),level:m.QU.ERROR,message:(null==e||null===(a=e.response)||void 0===a||null===(a=a.data)||void 0===a?void 0:a.message)||k("claims:local.notifications.getClaims.genericError.message")}))})).finally((function(){te(!1)}))};(0,g.useEffect)((function(){ue.current?ue.current=!1:$((0,s.f)(D,H.value,K))}),[H,K]),(0,g.useEffect)((function(){se(null,null,null,null)}),[]);var de=function(e){var t=(0,u.g)(O,e,H.value,K);$(t),Z(fe(e)),U(0),oe()},fe=function(e){var t=null==e?void 0:e.split(" "),a="";if(t)switch(t[1]){case"eq":a="".concat(t[0]," equals to ").concat(t[2]);break;case"co":a="".concat(t[0]," containing ").concat(t[2]);break;case"sw":a="".concat(t[0]," starting with ").concat(t[2]);break;case"ew":a="".concat(t[0]," ending with ").concat(t[2])}return a};return g.createElement(g.Fragment,null,F?g.createElement(C.C$,{open:F,onClose:function(){V(!1)},update:se,"data-testid":"".concat(a,"-add-local-claims-wizard")}):null,g.createElement(p.Xg,{action:(ee||!(!Y&&(null==D?void 0:D.length)<=0))&&d.rk.attributes.addAttribute&&g.createElement(l.di,{when:null==w||null===(t=w.attributeDialects)||void 0===t||null===(t=t.scopes)||void 0===t?void 0:t.create},g.createElement(p.KM,{onClick:function(){V(!0)},"data-testid":"".concat(a,"-list-layout-add-button")},g.createElement(b.Z,{name:"add"}),k("claims:local.pageLayout.local.action"))),isLoading:ee,title:k("claims:local.pageLayout.local.title"),pageTitle:k("claims:local.pageLayout.local.title"),description:g.createElement(g.Fragment,null,k(d.rk.attributes.description),g.createElement(p.eb,{link:P("manage.attributes.attributes.learnMore")},k("common:learnMore"))),backButton:{onClick:function(){c.m.push(i.$.getPaths().get("CLAIM_DIALECTS"))},text:k("claims:local.pageLayout.local.back")},"data-testid":"".concat(a,"-page-layout")},g.createElement(p.PS,{resetPagination:ie,advancedSearch:g.createElement(r.n,{onFilter:de,filterAttributeOptions:[{key:0,text:k("common:name"),value:"displayName"},{key:1,text:k("claims:local.attributes.attributeURI"),value:"claimURI"}],filterAttributePlaceholder:k("claims:local.advancedSearch.form.inputs.filterAttribute.placeholder"),filterConditionsPlaceholder:k("claims:local.advancedSearch.form.inputs.filterCondition.placeholder"),filterValuePlaceholder:k("claims:local.advancedSearch.form.inputs.filterValue.placeholder"),placeholder:k("claims:local.advancedSearch.placeholder"),defaultSearchAttribute:"displayName",defaultSearchOperator:"co",triggerClearQuery:le,"data-testid":"".concat(a,"-list-advanced-search")}),currentListSize:N,listItemLimit:N,onItemsPerPageDropdownChange:function(e,t){Q(t.value)},onPageChange:function(e,t){U((t.activePage-1)*N)},onSortStrategyChange:function(e,t){B(L.filter((function(e){return e.value===t.value}))[0])},leftActionPanel:null,showPagination:!0,sortOptions:L,sortStrategy:H,showTopActionPanel:ee||!(!Y&&(null==D?void 0:D.length)<=0),totalPages:Math.ceil((null==D?void 0:D.length)/N),totalListSize:null==D?void 0:D.length,onSortOrderChange:function(e){W(e)},"data-testid":"".concat(a,"-list-layout")},g.createElement(C.Sf,{advancedSearch:g.createElement(r.n,{onFilter:de,filterAttributeOptions:[{key:0,text:k("common:name"),value:"displayName"},{key:1,text:k("claims:local.attributes.attributeURI"),value:"claimURI"}],filterAttributePlaceholder:k("claims:local.advancedSearch.form.inputs.filterAttribute.placeholder"),filterConditionsPlaceholder:k("claims:local.advancedSearch.form.inputs.filterCondition.placeholder"),filterValuePlaceholder:k("claims:local.advancedSearch.form.inputs.filterValue.placeholder"),placeholder:k("claims:local.advancedSearch.placeholder"),defaultSearchAttribute:"displayName",defaultSearchOperator:"co",triggerClearQuery:le,"data-testid":"".concat(a,"-list-advanced-search")}),showTableHeaders:!0,isLoading:ee,list:function(e,t,a){return null==e?void 0:e.slice(a,a+t)}(D,N,M),localClaim:C.RH.LOCAL,update:se,onEmptyListPlaceholderActionClick:function(){return V(!0)},onSearchQueryClear:function(){ne(!le),Z(""),$(O)},searchQuery:Y,"data-testid":"".concat(a,"-list"),featureConfig:w}))))};P.defaultProps={"data-testid":"local-claims"};const I=P}}]);