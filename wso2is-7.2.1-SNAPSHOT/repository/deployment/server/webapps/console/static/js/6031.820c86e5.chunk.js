"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[6031],{51630:(e,t,n)=>{n.d(t,{C_:()=>d,Js:()=>s,Vi:()=>f,Zw:()=>p,ou:()=>c});var o=n(2292),i=n(76271),r=n(43939),a=n(6833),l=n(9821),u=o.AsgardeoSPAClient.getInstance().httpRequest.bind(o.AsgardeoSPAClient.getInstance()).bind(o.AsgardeoSPAClient.getInstance()),s=function(e){var t={data:e,headers:{Accept:"application/json","Content-Type":"application/json"},method:a.f2.POST,url:"".concat(i.h.getState().config.endpoints.applications,"/share-with-all")};return u(t).then((function(e){if(200!==e.status&&202!==e.status)throw new r.u(l.jo.APPLICATION_STATUS_UPDATE_INVALID_STATUS_CODE_ERROR,null,e.status,e.request,e,e.config);return Promise.resolve(e.data)})).catch((function(e){throw new r.u(l.jo.APPLICATION_STATUS_UPDATE_ERROR,e.stack,e.code,e.request,e.response,e.config)}))},c=function(e){var t={data:e,headers:{Accept:"application/json","Content-Type":"application/json"},method:a.f2.POST,url:"".concat(i.h.getState().config.endpoints.applications,"/unshare-with-all")};return u(t).then((function(e){if(200!==e.status&&202!==e.status)throw new r.u(l.jo.APPLICATION_STATUS_UPDATE_INVALID_STATUS_CODE_ERROR,null,e.status,e.request,e,e.config);return Promise.resolve(e.data)})).catch((function(e){throw new r.u(l.jo.APPLICATION_STATUS_UPDATE_ERROR,e.stack,e.code,e.request,e.response,e.config)}))},d=function(e){var t={data:e,headers:{Accept:"application/json","Content-Type":"application/json"},method:a.f2.POST,url:"".concat(i.h.getState().config.endpoints.applications,"/share")};return u(t).then((function(e){if(200!==e.status&&202!==e.status)throw new r.u(l.jo.APPLICATION_STATUS_UPDATE_INVALID_STATUS_CODE_ERROR,null,e.status,e.request,e,e.config);return Promise.resolve(e.data)})).catch((function(e){throw new r.u(l.jo.APPLICATION_STATUS_UPDATE_ERROR,e.stack,e.code,e.request,e.response,e.config)}))},p=function(e){var t={data:e,headers:{Accept:"application/json","Content-Type":"application/json"},method:a.f2.PATCH,url:"".concat(i.h.getState().config.endpoints.applications,"/share")};return u(t).then((function(e){if(200!==e.status&&202!==e.status)throw new r.u(l.jo.APPLICATION_STATUS_UPDATE_INVALID_STATUS_CODE_ERROR,null,e.status,e.request,e,e.config);return Promise.resolve(e.data)})).catch((function(e){throw new r.u(l.jo.APPLICATION_STATUS_UPDATE_ERROR,e.stack,e.code,e.request,e.response,e.config)}))},f=function(e){var t={data:e,headers:{Accept:"application/json","Content-Type":"application/json"},method:a.f2.POST,url:"".concat(i.h.getState().config.endpoints.applications,"/unshare")};return u(t).then((function(e){if(200!==e.status&&202!==e.status)throw new r.u(l.jo.APPLICATION_STATUS_UPDATE_INVALID_STATUS_CODE_ERROR,null,e.status,e.request,e,e.config);return Promise.resolve(e.data)})).catch((function(e){throw new r.u(l.jo.APPLICATION_STATUS_UPDATE_ERROR,e.stack,e.code,e.request,e.response,e.config)}))}},72137:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(96124),i=n(76271),r=n(6833);const a=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=arguments.length>3?arguments[3]:void 0,l=arguments.length>4?arguments[4]:void 0,u=arguments.length>5?arguments[5]:void 0,s=arguments.length>6?arguments[6]:void 0,c=arguments.length>7?arguments[7]:void 0,d=arguments.length>8?arguments[8]:void 0,p={headers:{Accept:"application/json","Content-Type":"application/json"},method:r.f2.GET,params:{after:c,attributes:d,before:s,excludedAttributes:l,filter:a,limit:u,recursive:n},url:"".concat(i.h.getState().config.endpoints.applications,"/").concat(e,"/share")},f=(0,o.Z)(t?p:null,{shouldRetryOnError:!1}),m=f.data,v=f.error,b=f.isValidating;return{data:m,error:v,isLoading:f.isLoading,isValidating:b,mutate:f.mutate}}},76314:(e,t,n)=>{n.d(t,{A:()=>L});var o=n(16590),i=n(96334),r=n(20494),a=n(1651),l=n(50699),u=n(44194),s=n(10479),c=n(59673),d=n(47245),p=n(89141),f=n(6567),m=n(9821),v=n(56514),b=n(84548),g=n(48773);function h(e){return function(e){if(Array.isArray(e))return S(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||E(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,i,r,a,l=[],u=!0,s=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(o=r.call(n)).done)&&(l.push(o.value),l.length!==t);u=!0);}catch(e){s=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw i}}return l}}(e,t)||E(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){if(e){if("string"==typeof e)return S(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(e,t):void 0}}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}var L=function(e){var t,n=e.selectedTemplate,E=e.isProtocolConfig,S=e.allowedOrigins,L=e.fields,C=e.hideFieldHints,T=e.initialValues,A=e.triggerSubmit,R=e.onSubmit,U=e.templateValues,P=e.showCallbackURL,w=e.tenantDomain,O=e.addOriginByDefault,I=e.isAllowEnabled,N=e["data-testid"],k=(0,s.$)().t,_=(0,d.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t?void 0:t.isSAASDeployment})),j=y((0,u.useState)(""),2),M=j[0],D=j[1],Z=y((0,u.useState)(""),2),x=Z[0],q=Z[1],F=y((0,u.useState)([]),2),V=F[0],z=F[1],W=y((0,u.useState)([]),2),B=W[0],G=W[1],H=y((0,u.useState)(!1),2),Q=H[0],X=H[1],$=y((0,u.useState)(!1),2),Y=$[0],K=$[1],J=y((0,u.useState)(null),2),ee=J[0],te=J[1],ne=y((0,u.useState)(!0),2),oe=ne[0],ie=ne[1],re=y((0,u.useState)(void 0),2),ae=re[0],le=re[1],ue=y((0,u.useState)(void 0),2),se=ue[0],ce=ue[1],de=y((0,u.useState)(!1),2),pe=de[0],fe=de[1],me=y((0,u.useState)(!1),2),ve=me[0],be=me[1],ge=y((0,u.useState)(!1),2),he=ge[0],ye=ge[1],Ee=(0,d.v9)((function(e){return e.config})),Se=y((0,u.useState)(S||[]),2),Le=Se[0],Ce=Se[1];(0,u.useEffect)((function(){(null==n?void 0:n.id)===g.EL.OIDC&&be(!0)}),[n]),(0,u.useEffect)((function(){Y&&M&&""!==M&&K(!1)}),[M]),(0,u.useEffect)((function(){null!=se&&se.includes("authorization_code")||null!=se&&se.includes("implicit")?ie(!0):ie(!1)}),[se,pe]),(0,u.useEffect)((function(){var e,t;void 0===se&&(null!=U&&null!==(e=U.inboundProtocolConfiguration)&&void 0!==e&&null!==(e=e.oidc)&&void 0!==e&&e.grantTypes&&ce(h(null==U||null===(t=U.inboundProtocolConfiguration)||void 0===t||null===(t=t.oidc)||void 0===t?void 0:t.grantTypes)))}),[U]),(0,u.useEffect)((function(){var e;if(U){var t=null==U||null===(e=U.inboundProtocolConfiguration)||void 0===e||null===(e=e.oidc)||void 0===e?void 0:e.callbackURLs;t&&Array.isArray(t)&&t.length>0&&q(t[0])}}),[U]),(0,u.useEffect)((function(){void 0===ae&&null!=n&&n.authenticationProtocol&&(0,f.WL)(n.authenticationProtocol).then((function(e){le(e)}))}),[ae]),(0,u.useEffect)((function(){var e;if(n){var t=null==U||null===(e=U.inboundProtocolConfiguration)||void 0===e||null===(e=e.oidc)||void 0===e?void 0:e.grantTypes;(0,a.Z)(t,["refresh_token"]).length>0&&n.id!==v.id&&n.id!==m.jo.MOBILE&&X(!0)}}),[U,n]);var Te=function(e){var t,n,o=null==e?void 0:e.replace(/['"]+/g,"");(null===(t=o)||void 0===t?void 0:t.split(",").length)>1&&(o="regexp=("+(null===(n=o)||void 0===n?void 0:n.split(",").join("|"))+")");return o},Ae=function(e){return e&&e.includes("regexp=(")&&(e=(e=(e=e.replace("regexp=(","")).replace(")","")).split("|").join(",")),e};(0,u.useEffect)((function(){var e;if((0,l.Z)(null==T||null===(e=T.inboundProtocolConfiguration)||void 0===e?void 0:e.oidc)){var t,n,o,i;if((0,l.Z)(null==U||null===(t=U.inboundProtocolConfiguration)||void 0===t||null===(t=t.oidc)||void 0===t?void 0:t.callbackURLs))D("");else D(Ae(null==U||null===(i=U.inboundProtocolConfiguration)||void 0===i||null===(i=i.oidc)||void 0===i?void 0:i.callbackURLs[0]));null!=U&&null!==(n=U.inboundProtocolConfiguration)&&void 0!==n&&null!==(n=n.oidc)&&void 0!==n&&n.publicClient&&z(["supportPublicClients"]),null!=U&&null!==(o=U.inboundProtocolConfiguration)&&void 0!==o&&null!==(o=o.oidc)&&void 0!==o&&null!==(o=o.refreshToken)&&void 0!==o&&o.renewRefreshToken&&G(["refreshToken"])}else{var r,a,u;D(Ae(null==T||null===(r=T.inboundProtocolConfiguration)||void 0===r||null===(r=r.oidc)||void 0===r?void 0:r.callbackURLs[0])),null!=T&&null!==(a=T.inboundProtocolConfiguration)&&void 0!==a&&null!==(a=a.oidc)&&void 0!==a&&a.publicClient&&z(["supportPublicClients"]),null!=T&&null!==(u=T.inboundProtocolConfiguration)&&void 0!==u&&null!==(u=u.oidc)&&void 0!==u&&null!==(u=u.refreshToken)&&void 0!==u&&u.renewRefreshToken&&G(["refreshToken"])}}),[T]);var Re,Ue,Pe,we=function(e){var t,n=[];(null==e?void 0:e.split(",").length)>1?n=null==e?void 0:e.split(","):n.push(e);var i=null===(t=n)||void 0===t?void 0:t.map((function(e){var t;return null===(t=o.URLUtils.urlComponents(e))||void 0===t?void 0:t.origin}));return h(new Set(i.filter((function(e){return Le.includes(e)}))))},Oe=function(e,t){var o,i,r={inboundProtocolConfiguration:{oidc:{}}};(oe&&(P||!L||L.includes("callbackURLs"))&&(r.inboundProtocolConfiguration.oidc.callbackURLs=[Te(t||M)]),L&&!L.includes("publicClient")||(r.inboundProtocolConfiguration.oidc.publicClient=e.get("publicClients").includes("supportPublicClients")),r.inboundProtocolConfiguration.oidc.refreshToken={expiryInSeconds:parseInt(null==ae?void 0:ae.defaultRefreshTokenExpiryTime,10)},Q||!L||L.includes("RefreshToken"))&&(r.inboundProtocolConfiguration.oidc.refreshToken={expiryInSeconds:parseInt(null==ae?void 0:ae.defaultRefreshTokenExpiryTime,10),extendRenewedRefreshTokenExpiryTime:null!==(o=null===(i=e.get("extendExpiryTime"))||void 0===i?void 0:i.includes("extendExpiryTime"))&&void 0!==o&&o,renewRefreshToken:e.get("RefreshToken").includes("refreshToken")});return oe&&(P||!L||L.includes("callbackURLs"))&&(r.inboundProtocolConfiguration.oidc.allowedOrigins=we(t||M)),!oe&&se&&(r.inboundProtocolConfiguration.oidc.grantTypes=se,r.inboundProtocolConfiguration.oidc.allowedOrigins=we(t||M)),(null==n?void 0:n.templateId)===b.u.SPA&&ae&&(r.inboundProtocolConfiguration.oidc.accessToken={applicationAccessTokenExpiryInSeconds:parseInt(null==ae?void 0:ae.defaultApplicationAccessTokenExpiryTime,10),userAccessTokenExpiryInSeconds:parseInt(null==ae?void 0:ae.defaultUserAccessTokenExpiryTime,10)}),r},Ie=function(e){var t=h(Le);t.push(e),Ce(t)};return U?u.createElement(i.Es,{onSubmit:function(e){oe||!E?Re((function(t){(0,l.Z)(M)&&(0,l.Z)(t)?K(!0):R(Oe(e,t))})):R(Oe(e))},submitState:A},u.createElement(p.Z,null,E&&ve&&u.createElement(p.Z.Row,{columns:1},u.createElement(p.Z.Column,{mobile:16,tablet:16,computer:8},u.createElement(i.gN,{name:"grant",label:k("applications:forms.inboundOIDC.fields.grant.label"),type:"checkbox",required:!0,requiredErrorMessage:k("applications:forms.inboundOIDC.fields.grant.validations.empty"),children:(Ue=null==ae?void 0:ae.allowedGrantTypes,Pe=[],Ue&&Ue.options.map((function(e){Pe.push({displayName:e.displayName,name:e.name})})),Pe),value:null==U||null===(t=U.inboundProtocolConfiguration)||void 0===t||null===(t=t.oidc)||void 0===t?void 0:t.grantTypes,"data-testid":"".concat(N,"-grant-type-checkbox-group"),listen:function(e){return function(e){var t=e.get("grant");ce(t),fe(!pe)}(e)}}),u.createElement(r.kW,null,k("applications:forms.inboundOIDC.fields.grant.hint")))),(!L||L.includes("callbackURLs"))&&oe&&u.createElement(p.Z.Row,{column:1},u.createElement(p.Z.Column,{mobile:16,tablet:16,computer:16,className:"field"},u.createElement(r.wE,{isCustom:n.templateId===m.jo.MOBILE,labelEnabled:!0,handleAddAllowedOrigin:function(e){return Ie(e)},handleRemoveAllowedOrigin:function(e){return function(e){var t=h(Le);t.includes(e)&&t.splice(t.indexOf(e),1),Ce(t)}(e)},tenantDomain:w,allowedOrigins:Le,urlState:M,setURLState:D,labelName:n.templateId===m.jo.MOBILE?"Authorized redirect URIs":k("applications:forms.spaProtocolSettingsWizard.fields.callBackUrls.label"),placeholder:n.templateId===m.jo.MOBILE?k("applications:forms.inboundOIDC.mobileApp.mobileAppPlaceholder"):k("applications:forms.inboundOIDC.fields.callBackUrls.placeholder"),validationErrorMsg:k(he?"applications:forms.spaProtocolSettingsWizard.fields.urlDeepLinkError":"applications:forms.spaProtocolSettingsWizard.fields.callBackUrls.validations.invalid"),emptyErrorMessage:k("applications:forms.spaProtocolSettingsWizard.fields.callBackUrls.validations.empty"),skipInternalValidation:n.templateId===m.jo.MOBILE,validation:function(e){return n.templateId===m.jo.MOBILE?o.URLUtils.isMobileDeepLink(e)?(te(null),!0):(ye(!0),!1):!!o.URLUtils.isURLValid(e)&&(!(!o.URLUtils.isHttpUrl(e,!1)&&!o.URLUtils.isHttpsUrl(e,!1))&&(te(null),!0))},computerWidth:10,setShowError:K,showError:Y,hint:!C&&k("applications:forms.inboundOIDC.fields.callBackUrls.hint"),addURLTooltip:k("common:addURL"),duplicateURLErrorMessage:k("common:duplicateURLError"),"data-testid":"".concat(N,"-callback-url-input"),getSubmit:function(e){Re=e},productName:Ee.ui.productName,required:!0,showPredictions:!1,customLabel:ee,isAllowEnabled:I,addOriginByDefault:O,popupHeaderPositive:k("applications:URLInput.withLabel.positive.header"),popupHeaderNegative:k("applications:URLInput.withLabel.negative.header"),popupContentPositive:k("applications:URLInput.withLabel.positive.content",{productName:Ee.ui.productName}),popupContentNegative:k("applications:URLInput.withLabel.negative.content",{productName:Ee.ui.productName}),popupDetailedContentPositive:k("applications:URLInput.withLabel.positive.detailedContent.0"),popupDetailedContentNegative:k("applications:URLInput.withLabel.negative.detailedContent.0"),insecureURLDescription:k("console:common.validations.inSecureURL.description"),showLessContent:k("common:showLess"),showMoreContent:k("common:showMore")}),x&&_&&u.createElement(r.v0,{type:"info",content:u.createElement(u.Fragment,null,u.createElement(c.c,{i18nKey:"applications:forms.inboundOIDC.fields.callBackUrls.info",tOptions:{callBackURLFromTemplate:x}},"Don\u2019t have an app? Try out a sample app using ",u.createElement("strong",null,x),"as the Authorized URL."),(void 0===M||""===M)&&u.createElement(r.Qj,{className:"m-1 p-1 with-no-border orange",onClick:function(e){e.preventDefault();var t=new URL(x);Ie(t.origin),D(x)},"data-testid":"".concat(N,"-add-now-button")},u.createElement("span",{style:{fontWeight:"bold"}},"Add Now")))}))),!L||L.includes("publicClient")&&u.createElement(p.Z.Row,{columns:1},u.createElement(p.Z.Column,{mobile:16,tablet:16,computer:10},u.createElement(i.gN,{name:"publicClients",label:"",required:!1,requiredErrorMessage:"this is needed",type:"checkbox",value:V,children:[{label:k("applications:forms.inboundOIDC.fields.public.label"),value:"supportPublicClients"}],"data-testid":"".concat(N,"-public-client-checkbox")}),!C&&u.createElement(r.kW,null,k("applications:forms.inboundOIDC.fields.public.hint")))),!L||L.includes("RefreshToken")||Q&&u.createElement(p.Z.Row,{columns:1},u.createElement(p.Z.Column,{mobile:16,tablet:16,computer:10},u.createElement(i.gN,{name:"RefreshToken",label:"",required:!1,requiredErrorMessage:k("applications:forms.inboundOIDC.sections.refreshToken.fields.renew.validations.empty"),type:"checkbox",value:B,children:[{label:k("applications:forms.inboundOIDC.sections.refreshToken.fields.renew.label"),value:"refreshToken"}],"data-testid":"".concat(N,"-renew-refresh-token-checkbox")}),!C&&u.createElement(r.kW,null,k("applications:forms.inboundOIDC.sections.refreshToken.fields.renew.hint")))))):u.createElement(r.pO,null)};L.defaultProps={"data-testid":"oauth-protocol-settings-wizard-form",hideFieldHints:!1,showCallbackURL:!1}},89331:(e,t,n)=>{n.d(t,{u:()=>s});var o=n(96334),i=n(20494),r=n(34194),a=n(44194),l=n(10479),u=n(89141),s=function(e){var t=e.initialValues,n=e.templateValues,s=e.triggerSubmit,c=e.onSubmit,d=e["data-testid"],p=(0,l.$)().t;return n?a.createElement(o.Es,{onSubmit:function(e){c(function(e){return{inboundProtocolConfiguration:{passiveSts:{realm:e.get("realm"),replyTo:e.get("replyTo")}}}}(e))},submitState:s},a.createElement(u.Z,null,a.createElement(u.Z.Row,null,a.createElement(u.Z.Column,{mobile:16},a.createElement(o.gN,{name:"realm",label:p("applications:forms.inboundSTS.fields.realm.label"),required:!0,requiredErrorMessage:p("applications:forms.inboundSTS.fields.realm.validations.empty"),placeholder:p("applications:forms.inboundSTS.fields.realm.placeholder"),type:"text",value:t?null==t?void 0:t.realm:null==n?void 0:n.realm,"data-testid":"".concat(d,"-realm-input")}),a.createElement(i.kW,null,p("applications:forms.inboundSTS.fields.realm.hint")))),a.createElement(u.Z.Row,null,a.createElement(u.Z.Column,{mobile:16},a.createElement(o.gN,{name:"replyTo",label:p("applications:forms.inboundSTS.fields.replyTo.label"),required:!0,requiredErrorMessage:p("applications:forms.inboundSTS.fields.replyTo.validations.empty"),placeholder:p("applications:forms.inboundSTS.fields.replyTo.placeholder"),validation:function(e,t){r.I.url(e)||(t.isValid=!1,t.errorMessages.push(p("applications:forms.inboundSTS.fields.replyTo.validations.invalid")))},type:"text",value:t?null==t?void 0:t.replyTo:null==n?void 0:n.replyTo,"data-testid":"".concat(d,"-reply-url-input")}),a.createElement(i.kW,null,p("applications:forms.inboundSTS.fields.replyTo.hint")))))):a.createElement(i.pO,null)};s.defaultProps={"data-testid":"passive-sts-protocol-settings-wizard-form"}},18220:(e,t,n)=>{n.d(t,{_:()=>S});var o=n(13550),i=n(51021),r=n(16590),a=n(96334),l=n(20494),u=n(34194),s=n(50699),c=n(44194),d=n(10479),p=n(59673),f=n(47245),m=n(89141),v=n(10909),b=n(26154),g=n(48773),h=n(35407);function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,i,r,a,l=[],u=!0,s=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(o=r.call(n)).done)&&(l.push(o.value),l.length!==t);u=!0);}catch(e){s=!0,i=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw i}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return E(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?E(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}var S=function(e){var t=e.fields,n=e.hideFieldHints,E=e.initialValues,S=e.templateValues,C=e.triggerSubmit,T=e.onSubmit,A=e.setSAMLConfigureMode,R=e.issuerRef,U=e.metaUrlRef,P=e.issuerError,w=e.metaUrlError,O=e.handleProtocolValueChange,I=e["data-testid"],N=(0,d.$)().t,k=y((0,c.useState)(""),2),_=k[0],j=k[1],M=y((0,c.useState)(""),2),D=M[0],Z=M[1],x=y((0,c.useState)(""),2),q=x[0],F=x[1],V=y((0,c.useState)(""),2),z=V[0],W=V[1],B=y((0,c.useState)(!1),2),G=B[0],H=B[1],Q=y((0,c.useState)(null),2),X=Q[0],$=Q[1],Y=y((0,c.useState)(void 0),2),K=Y[0],J=Y[1],ee=y((0,c.useState)(!1),2),te=ee[0],ne=ee[1],oe=y((0,c.useState)(),2),ie=oe[0],re=oe[1],ae=y((0,c.useState)(null),2),le=ae[0],ue=ae[1],se=y((0,c.useState)(null),2),ce=se[0],de=se[1],pe=y((0,c.useState)(!1),2),fe=pe[0],me=pe[1],ve=(0,f.v9)((function(e){return e.config})),be=(0,f.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t?void 0:t.isSAASDeployment}));(0,c.useEffect)((function(){var e;if(J(g.T6.MANUAL),(0,s.Z)(null==E||null===(e=E.inboundProtocolConfiguration)||void 0===e?void 0:e.saml)){var t,n,o=null==S||null===(t=S.inboundProtocolConfiguration)||void 0===t||null===(t=t.saml)||void 0===t?void 0:t.manualConfiguration.assertionConsumerUrls,i=null==S||null===(n=S.inboundProtocolConfiguration)||void 0===n||null===(n=n.saml)||void 0===n?void 0:n.manualConfiguration.issuer;(0,s.Z)(o)?j(""):j(o.toString()),(0,s.Z)(i)?Z(""):Z(i.toString())}else{var r,a;j(null==E||null===(r=E.inboundProtocolConfiguration)||void 0===r||null===(r=r.saml)||void 0===r||null===(r=r.manualConfiguration.assertionConsumerUrls)||void 0===r?void 0:r.toString()),Z(null==E||null===(a=E.inboundProtocolConfiguration)||void 0===a||null===(a=a.saml)||void 0===a||null===(a=a.manualConfiguration.issuer)||void 0===a?void 0:a.toString())}}),[E]),(0,c.useEffect)((function(){ie&&fe&&me(!1)}),[ie]),(0,c.useEffect)((function(){K&&A(K)}),[K]),(0,c.useEffect)((function(){var e,t;if(S){var n=null==S||null===(e=S.inboundProtocolConfiguration)||void 0===e||null===(e=e.saml)||void 0===e||null===(e=e.templateConfiguration)||void 0===e?void 0:e.assertionConsumerUrls,o=null==S||null===(t=S.inboundProtocolConfiguration)||void 0===t||null===(t=t.saml)||void 0===t||null===(t=t.templateConfiguration)||void 0===t?void 0:t.issuer;n&&Array.isArray(n)&&n.length>0&&F(n[0]),o&&W(o)}}),[S]);var ge,he,ye,Ee=function(e){te?(j(e),e||ne(!1)):_?(j(_),ne(!0)):(e&&ne(!0),j(e))},Se=function(e,n){var o;return K===g.T6.MANUAL?(o={inboundProtocolConfiguration:{saml:{manualConfiguration:{}}}},t&&!t.includes("assertionConsumerURLs")||(o.inboundProtocolConfiguration.saml.manualConfiguration.assertionConsumerUrls=n?n.split(","):_.split(",")),t&&!t.includes("issuer")||(o.inboundProtocolConfiguration.saml.manualConfiguration.issuer=e.get("issuer")),t&&!t.includes("applicationQualifier")||(o.inboundProtocolConfiguration.saml.manualConfiguration.serviceProviderQualifier=e.get("applicationQualifier"))):K===g.T6.META_URL?o={inboundProtocolConfiguration:{saml:{metadataURL:e.get("url")}}}:K===g.T6.META_FILE&&(o={inboundProtocolConfiguration:{saml:{metadataFile:ie}}}),o};return K?c.createElement(a.Es,{onSubmit:function(e){O(!0),K===g.T6.MANUAL?ge((function(t){(0,s.Z)(_)&&(0,s.Z)(t)?H(!0):T(Se(e,t))})):K===g.T6.META_FILE&&(0,s.Z)(ie)?me(!0):T(Se(e))},submitState:C},c.createElement(m.Z,null,c.createElement(m.Z.Row,null,c.createElement(m.Z.Column,{mobile:16,tablet:16,computer:16},c.createElement(v.Z.Group,{size:"large",labeled:!0,basic:!0},Object.values(g.T6).map((function(e,t){return c.createElement(v.Z,{key:t,active:K===e,className:"saml-config-mode-wizard-tab",content:h.y.resolveSAMLConfigModeDisplayName(e),onClick:function(t){t.preventDefault(),J(e),ne(!1)}})}))))),K==g.T6.MANUAL?c.createElement(c.Fragment,null,(!t||t.includes("issuer"))&&c.createElement(m.Z.Row,{columns:1},c.createElement(m.Z.Column,{mobile:16,tablet:16,computer:16},c.createElement(a.gN,{name:"issuer",ref:R,displayErrorOn:"blur",label:N("applications:forms.inboundSAML.fields.issuer.label"),required:!0,requiredErrorMessage:N("applications:forms.inboundSAML.fields.issuer.validations.empty"),type:"text",placeholder:N("applications:forms.inboundSAML.fields.issuer.placeholder"),value:D,validation:function(e,t){P?(t.isValid=!1,t.errorMessages.push(N("applications:forms.inboundSAML.fields.issuer.errorMessage"))):Z(e)},"data-testid":"".concat(I,"-issuer-input")}),!n&&c.createElement(l.kW,null,N("applications:forms.inboundSAML.fields.issuer.hint")))),(!t||t.includes("applicationQualifier"))&&c.createElement(m.Z.Row,{columns:1},c.createElement(m.Z.Column,{mobile:16,tablet:16,computer:16},c.createElement(a.gN,{name:"applicationQualifier",label:N("applications:forms.inboundSAML.fields.qualifier.label"),required:!1,requiredErrorMessage:N("applications:forms.inboundSAML.fields.qualifier.validations.empty"),type:"text",placeholder:N("applications:forms.inboundSAML.fields.qualifier.placeholder"),value:null==E||null===(he=E.inboundProtocolConfiguration.saml)||void 0===he||null===(he=he.manualConfiguration)||void 0===he?void 0:he.serviceProviderQualifier,"data-testid":"".concat(I,"-application-qualifier-input")}),!n&&c.createElement(l.kW,null,N("applications:forms.inboundSAML.fields.qualifier.hint")))),(!t||t.includes("assertionConsumerURLs"))&&c.createElement(m.Z.Row,{columns:1},c.createElement(m.Z.Column,{mobile:16,tablet:16,computer:16,className:"field"},c.createElement(l.wE,{urlState:_,setURLState:Ee,labelName:N("applications:forms.inboundSAML.fields.assertionURLs.label"),placeholder:N("applications:forms.inboundSAML.fields.assertionURLs.placeholder"),validationErrorMsg:N("applications:forms.spaProtocolSettingsWizard.fields.callBackUrls.validations.invalid"),emptyErrorMessage:N("applications:forms.inboundSAML.fields.assertionURLs.validations.empty"),validation:function(e){return!(!r.URLUtils.isURLValid(e,!0)||!r.URLUtils.isHttpUrl(e)&&!r.URLUtils.isHttpsUrl(e)||!r.URLUtils.isMobileDeepLink(e)||($(null),0))},computerWidth:10,required:!0,showError:G,setShowError:H,hint:!n&&N("applications:forms.inboundSAML.fields.assertionURLs.hint"),addURLTooltip:N("common:addURL"),duplicateURLErrorMessage:N("common:duplicateURLError"),"data-testid":"".concat(I,"-assertion-consumer-url-input"),getSubmit:function(e){ge=e},showPredictions:!1,customLabel:X,popupHeaderPositive:N("applications:URLInput.withLabel.positive.header"),popupHeaderNegative:N("applications:URLInput.withLabel.negative.header"),popupContentPositive:N("applications:URLInput.withLabel.positive.content",{productName:ve.ui.productName}),popupContentNegative:N("applications:URLInput.withLabel.negative.content",{productName:ve.ui.productName}),popupDetailedContentPositive:N("applications:URLInput.withLabel.positive.detailedContent.0"),popupDetailedContentNegative:N("applications:URLInput.withLabel.negative.detailedContent.0"),insecureURLDescription:N("console:common.validations.inSecureURL.description"),showLessContent:N("common:showLess"),showMoreContent:N("common:showMore")}),q&&be&&c.createElement(l.v0,{visible:!0,type:"info",content:c.createElement(c.Fragment,null,c.createElement(p.c,{i18nKey:"applications:forms.inboundSAML.fields.assertionURLs.info",tOptions:{assertionURLFromTemplate:q}},"Don\u2019t have an app? Try out a sample app using ",c.createElement("strong",null,q),"as the assertion Response URL. (You can download and run a sample at a later step.)"),(void 0===_||""===_)&&c.createElement(l.Qj,{className:"m-1 p-1 with-no-border orange",onClick:function(e){e.preventDefault(),j(q),Z(z),ne(!0)},"data-testid":"".concat(I,"-add-now-button")},c.createElement("span",{style:{fontWeight:"bold"}},"Add Now")))})))):K===g.T6.META_URL?c.createElement(m.Z.Row,{columns:1},c.createElement(m.Z.Column,{mobile:16,tablet:16,computer:16},c.createElement(a.gN,{name:"url",ref:U,displayErrorOn:"blur",label:N("applications:forms.inboundSAML.fields.metaURL.label"),required:!0,requiredErrorMessage:N("applications:forms.inboundSAML.fields.metaURL.validations.empty"),type:"text",placeholder:N("applications:forms.inboundSAML.fields.metaURL.placeholder"),validation:function(e,t){u.I.url(e)||(t.isValid=!1,t.errorMessages.push(N("applications:forms.inboundSAML.fields.metaURL.validations.invalid"))),null!==i.xg&&void 0!==i.xg&&i.xg.blockLoopBackCalls&&r.URLUtils.isLoopBackCall(e)&&(t.isValid=!1,t.errorMessages.push(N("idp:forms.common.internetResolvableErrorMessage"))),w&&(t.isValid=!1,t.errorMessages.push(N("applications:forms.inboundSAML.fields.metaURL.errorMessage")))},value:null==E||null===(ye=E.inboundProtocolConfiguration)||void 0===ye||null===(ye=ye.saml)||void 0===ye?void 0:ye.metadataURL,"data-testid":"".concat(I,"-meta-url-input")}),!n&&c.createElement(l.kW,null,N("applications:forms.inboundSAML.fields.metaURL.hint")))):K===g.T6.META_FILE?c.createElement(m.Z.Row,{columns:1},c.createElement(m.Z.Column,{mobile:16,tablet:16,computer:16},c.createElement(l.GB,{key:1,fileStrategy:L,file:le,pastedContent:ce,onChange:function(e){ue(e.file),de(e.pastedContent),re(e.serialized)},uploadButtonText:"Upload Metadata File",dropzoneText:"Drag and drop a XML file here.","data-testid":"".concat(I,"-form-wizard-saml-xml-config-file-picker"),icon:(0,o._5)().uploadPlaceholder,placeholderIcon:c.createElement(b.Z,{name:"file code",size:"huge"}),normalizeStateOnRemoveOperations:!0,emptyFileError:fe,hidePasteOption:!0}))):void 0)):c.createElement(l.pO,null)};S.defaultProps={"data-testid":"saml-protocol-settings-wizard-form",hideFieldHints:!1};var L=new l.R2},37880:(e,t,n)=>{n.d(t,{pe:()=>d,qZ:()=>c,z0:()=>s,zW:()=>u});var o=n(50699);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=i(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i={};return e.forEach((function(e){var r=t.map((function(t){var i,r,a;return{audience:{display:null===(i=t.audience)||void 0===i?void 0:i.display,type:null===(r=t.audience)||void 0===r?void 0:r.type},displayName:t.displayName,id:t.displayName,selected:!!n.includes(t.displayName)||!o&&(null===(a=e.roles)||void 0===a?void 0:a.some((function(e){return e.displayName===t.displayName})))}}));i[e.id]=r})),i},s=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=n[e];if(!a)return{};var l=a.filter((function(e){return e.selected})),u={};return t.forEach((function(e){(0,o.Z)(n[e.id])?u[e.id]=l.map((function(t){var n;return{audience:{display:t.audience.display,type:t.audience.type},displayName:t.displayName,id:t.displayName,selected:!!i.includes(t.displayName)||!r&&(null===(n=e.roles)||void 0===n?void 0:n.some((function(e){return e.displayName===t.displayName})))}})):u[e.id]=l.map((function(t){var o=n[e.id].find((function(e){return e.displayName===t.displayName}));return{audience:{display:t.audience.display,type:t.audience.type},displayName:t.displayName,id:t.displayName,selected:!!i.includes(t.displayName)||!!o&&o.selected}}))})),u},c=function(e,t){var n=[];return Object.keys(t).forEach((function(o){t[o].parentId===e&&n.push(o)})),n},d=function(e,t,n){return e.map((function(e){return e.id===t?a(a({},e),{},{children:n}):e.children&&e.children.length>0?a(a({},e),{},{children:d(e.children,t,n)}):e}))}},35932:(e,t,n)=>{n.d(t,{wD:()=>o,yx:()=>i});var o=function(e){return e.ALL_EXISTING_AND_FUTURE_ORGS="ALL_EXISTING_AND_FUTURE_ORGS",e.SELECTED_ORG_ONLY="SELECTED_ORG_ONLY",e.SELECTED_ORG_WITH_ALL_EXISTING_AND_FUTURE_CHILDREN="SELECTED_ORG_WITH_ALL_EXISTING_AND_FUTURE_CHILDREN",e.ALL_EXISTING_ORGS_ONLY="ALL_EXISTING_ORGS_ONLY",e}({}),i=function(e){return e.ALL="ALL",e.SELECTED="SELECTED",e.NONE="NONE",e}({})},66132:(e,t,n)=>{n.d(t,{Z:()=>u});var o=n(758),i=n(44194),r=n(10479),a=n(60191),l=n(29314);const u=function(e){var t=e.featureKey,n=e.featureFlags,u=e.featureConfig,s=e.featureName,c=e.type,d=void 0===c?"chip":c,p=(0,r.$)().t,f=(0,a.Z)(t,n,u,s),m=function(e){switch(e){case l.j.BETA:return"oxygen-chip-beta";case l.j.NEW:return"oxygen-chip-new";case l.j.COMING_SOON:return"oxygen-chip-coming-soon";case l.j.EXPERIMENTAL:case l.j.PREVIEW:return"oxygen-chip-experimental";default:return""}};return f?function(e){switch(d){case"chip":return i.createElement(o.Z,{size:"small",sx:{marginLeft:1},label:p(e),className:m(e)});case"ribbon":return i.createElement("div",{className:"ribbon "+m(e)},i.createElement("span",{className:"MuiChip-label"},p(e)));default:return i.createElement(o.Z,{size:"small",sx:{marginLeft:1},label:p(e),className:"oxygen-chip-beta"})}}(l.j[f]):null}},60191:(e,t,n)=>{n.d(t,{Z:()=>i});var o=n(44194);const i=function(e,t,n,i){return(0,o.useMemo)((function(){if(!e)return null;var o,r;if(t)return null!==(o=null===(r=t.find((function(t){return t.feature===e})))||void 0===r?void 0:r.flag)&&void 0!==o?o:null;if(n&&i){var a,l,u=n[i];return u&&(null!==(a=null===(l=u.featureFlags)||void 0===l||null===(l=l.find((function(t){return t.feature===e})))||void 0===l?void 0:l.flag)&&void 0!==a)?a:null}return null}),[e,i,t,n])}},92529:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(96124),i=n(76271),r=n(6833);const a=function(e,t,n,a,l,u){var s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],c={headers:{Accept:"application/json","Content-Type":"application/json"},method:r.f2.GET,params:{after:a,before:l,filter:t,limit:n,recursive:u},url:"".concat(s?i.h.getState().config.endpoints.rootOrganization:i.h.getState().config.endpoints.organizations,"/organizations")},d=(0,o.Z)(e?c:null,{shouldRetryOnError:!1});return{data:d.data,error:d.error,isLoading:d.isLoading,isValidating:d.isValidating,mutate:d.mutate}}},84374:(e,t,n)=>{n.d(t,{P:()=>d});var o=n(49706),i=n(24731),r=n(54876),a=n(99403);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=l(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==l(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=(0,o.ZP)(r.kf)((function(e){var t=e.theme;return s(c(c(c(c({color:t.palette.grey[200]},"& .".concat(a.r.content),{"&.Mui-focused":{backgroundColor:(0,i.Fq)(t.palette.primary.main,.2)},"&.Mui-selected .Mui-focused":{backgroundColor:(0,i.Fq)(t.palette.primary.main,.2)},"&.Mui-selected:hover":{backgroundColor:(0,i.Fq)(t.palette.primary.main,.2)},"&[data-selected]":{backgroundColor:"transparent"},"&[data-selected][data-focused]":{backgroundColor:(0,i.Fq)(t.palette.primary.main,.2)},borderRadius:t.spacing(.5),margin:t.spacing(.2,0),padding:t.spacing(.5,1),position:"relative"}),"& .".concat(a.r.iconContainer),s(s({backgroundColor:t.palette.primary.dark,borderRadius:"50%",padding:t.spacing(0,1.2)},t.applyStyles("light",{backgroundColor:(0,i.Fq)(t.palette.primary.main,.25)})),t.applyStyles("dark",{color:t.palette.primary.contrastText}))),"& .".concat(a.r.groupTransition),{borderLeft:"1px dashed ".concat((0,i.Fq)(t.palette.text.primary,.4)),marginLeft:16,paddingLeft:18,position:"relative"}),"&:has(.".concat(a.r.iconContainer,") .").concat(a.r.content,"::before"),{display:"none"}),t.applyStyles("light",{color:t.palette.grey[800]}))}))}}]);