"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[8379],{58379:(e,t,n)=>{n.d(t,{d:()=>k});var i=n(65612),a=n(55007),l=n(13692),o=n(13550),c=n(60486),r=n(40838),s=n(43974),d=n(51021),u=n(23146),p=n(87029),m=n(41158),f=n(21257),A=n(54717),h=n(86105),v=n(6833),g=n(82406),E=n(20494),y=n(50699),C=n(44194),I=n(10479),T=n(59673),_=n(47245),S=n(12638),O=n(37077),b=n(26154),P=n(6567),N=n(9821),R=n(84548),L=n(35407),w=n(18723);function U(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,l,o,c=[],r=!0,s=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;r=!1}else for(;!(r=(i=l.call(n)).done)&&(c.push(i.value),c.length!==t);r=!0);}catch(e){s=!0,a=e}finally{try{if(!r&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(s)throw a}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return D(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?D(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}var k=function(e){var t,n,D=e.advancedSearch,k=e.featureConfig,Z=e.isLoading,j=e.list,M=e.onApplicationDelete,V=e.onListItemClick,z=e.onEmptyListPlaceholderActionClick,x=e.onSearchQueryClear,B=e.searchQuery,G=e.selection,F=e.showListItemActions,$=e.isSetStrongerAuth,K=e.isRenderedOnPortal,H=e["data-testid"],Y=e["data-componentid"],Q=(0,I.$)().t,J=(0,_.I0)(),W=(0,_.v9)((function(e){return e.application.templates})),q=(0,_.v9)((function(e){var t;return null==e||null===(t=e.application)||void 0===t?void 0:t.groupedTemplates})),X=(0,_.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t?void 0:t.ui})),ee=(0,_.v9)((function(e){var t;return null==e||null===(t=e.auth)||void 0===t?void 0:t.tenantDomain})),te=(0,f.z)().organizationType,ne=(0,A.Z)(),ie=ne.templates,ae=ne.isExtensionTemplatesRequestLoading,le=(0,a.EV)(null==k||null===(t=k.applications)||void 0===t||null===(t=t.scopes)||void 0===t?void 0:t.update),oe=(0,a.EV)(null==k||null===(n=k.applications)||void 0===n||null===(n=n.scopes)||void 0===n?void 0:n.delete),ce=U((0,C.useState)(!1),2),re=ce[0],se=ce[1],de=U((0,C.useState)(void 0),2),ue=de[0],pe=de[1],me=U((0,C.useState)(!1),2),fe=me[0],Ae=me[1],he=U((0,C.useState)(!1),2),ve=he[0],ge=he[1],Ee=U((0,E.ZK)(),3),ye=Ee[0],Ce=Ee[1],Ie=Ee[2],Te=s.l.getInstance(),_e=(0,_.v9)((function(e){var t;return null===(t=e.config.ui.features)||void 0===t?void 0:t.applications})),Se=null==k?void 0:k.organizations,Oe=(0,h.cr)(Se,m.a5.FEATURE_DICTIONARY.get(p.nK.OrganizationApplicationCreation));(0,C.useEffect)((function(){void 0===W&&(ge(!0),w.e.getApplicationTemplates().finally((function(){ge(!1)})))}),[W,q]);var be=function(e,t,n){if($){var i;if(null==X||null===(i=X.legacyMode)||void 0===i||!i.applicationListSystemApps){if(n===N.jo.CONSOLE_APP_NAME)return void r.m.push({hash:"tab=".concat(l.w.LOGIN_FLOW),pathname:c.$.getPaths().get("CONSOLE_SETTINGS")});if(n===N.jo.MY_ACCOUNT_APP_NAME)return void r.m.push({pathname:c.$.getPaths().get("APPLICATION_EDIT").replace(":id",e),search:"#tab=".concat(te===p.$B.SUBORGANIZATION?N.jo.SUB_ORG_MY_ACCOUNT_LOGIN_FLOW_TAB:N.jo.MY_ACCOUNT_LOGIN_FLOW_TAB)})}r.m.push({pathname:c.$.getPaths().get("APPLICATION_EDIT").replace(":id",e),search:"?".concat(N.jo.APP_STATE_STRONG_AUTH_PARAM_KEY,"=").concat(N.jo.APP_STATE_STRONG_AUTH_PARAM_VALUE)})}else r.m.push({pathname:c.$.getPaths().get("APPLICATION_EDIT").replace(":id",e),search:t===R.Ch.READ?"?".concat(N.jo.APP_READ_ONLY_STATE_URL_SEARCH_PARAM_KEY,"=true"):""})},Pe=function(){return B&&0===(null==j?void 0:j.totalResults)?C.createElement(E.$J,{action:C.createElement(E.Qj,{onClick:x},Q("console:develop.placeholders.emptySearchResult.action")),image:(0,o.jF)().emptySearch,imageSize:"tiny",title:Q("console:develop.placeholders.emptySearchResult.title"),subtitle:[Q("console:develop.placeholders.emptySearchResult.subtitles.0",{query:B}),Q("console:develop.placeholders.emptySearchResult.subtitles.1")],"data-testid":"".concat(H,"-empty-search-placeholder-icon")}):0===(null==j?void 0:j.totalResults)?C.createElement(E.$J,{className:K?"":"list-placeholder mr-0",action:z&&(te!==p.$B.SUBORGANIZATION||Oe)&&C.createElement(a.di,{when:null==k||null===(e=k.applications)||void 0===e||null===(e=e.scopes)||void 0===e?void 0:e.create},C.createElement(E.KM,{onClick:function(){Te.publish(Y+"-click-new-application-button"),z()}},C.createElement(b.Z,{name:"add"}),Q("applications:placeholders.emptyList.action"))),image:(0,o.jF)().newList,imageSize:"tiny",subtitle:[Q("applications:placeholders.emptyList.subtitles.0")],"data-testid":"".concat(H,"-empty-placeholder")}):null;var e};return C.createElement(C.Fragment,null,C.createElement(E.wQ,{className:"applications-table",externalSearch:D,isLoading:Z||ve||ae,actions:!$&&function(){if(F)return[{"data-testid":"".concat(H,"-item-edit-button"),hidden:function(){return!(0,h.cr)(null==k?void 0:k.applications,N.jo.FEATURE_DICTIONARY.get("APPLICATION_EDIT"))},icon:function(e){return(null==e?void 0:e.access)!==R.Ch.READ&&le?"pencil alternate":"eye"},onClick:function(e,t){return be(t.id,t.access,t.name)},popupText:function(e){return(null==e?void 0:e.access)!==R.Ch.READ&&le?Q("common:edit"):Q("common:view")},renderer:"semantic-icon"},{"data-testid":"".concat(H,"-item-delete-button"),hidden:function(e){var t,n=ee===c.$.getSuperTenant()&&X.systemAppsIdentifiers.includes(null==e?void 0:e.name),i=(null===(t=e.advancedConfigurations)||void 0===t?void 0:t.fragment)||!1;return!oe||n||(null==e?void 0:e.access)===R.Ch.READ||!d.tZ.editApplication.showDeleteButton(e)||i},icon:function(){return"trash alternate"},onClick:function(e,t){se(!0),pe(t)},popupText:function(){return Q("common:delete")},renderer:"semantic-icon"}]}(),columns:[{allowToggleVisibility:!1,dataIndex:"name",id:"name",key:"name",render:function(e){var t,n,a,l="";if(new Set([N.jo.CUSTOM_APPLICATION_SAML,N.jo.CUSTOM_APPLICATION_OIDC,N.jo.CUSTOM_APPLICATION_PASSIVE_STS]).has(e.templateId))l=W&&W instanceof Array&&W.length>0&&W.find((function(e){return e.id===N.jo.CUSTOM_APPLICATION})).name;else{var o=W&&W instanceof Array&&W.length>0&&W.find((function(t){return t.id===e.templateId}));if(null!=o&&o.templateGroup){var c=o.templateGroup;l=q&&q instanceof Array&&q.length>0&&q.find((function(e){return e.id===c||e.templateGroup===c})).name}else{var r;l=W&&W instanceof Array&&(null==W?void 0:W.length)>0&&(null===(r=W.find((function(t){return(null==t?void 0:t.id)===(null==e?void 0:e.templateId)})))||void 0===r?void 0:r.name)}}return l||(l=null==ie||null===(a=ie.find((function(t){return(null==t?void 0:t.id)===(null==e?void 0:e.templateId)})))||void 0===a?void 0:a.name),C.createElement(S.Z,{image:!0,as:"h6",className:"header-with-icon","data-testid":"".concat(H,"-item-heading")},e.image?C.createElement(E.JT,{size:"mini",name:e.name,image:e.image,spaced:"right","data-testid":"".concat(H,"-item-image")}):C.createElement(E.JT,{image:C.createElement(E.Xo,{name:e.name,size:"mini","data-testid":"".concat(H,"-item-image-inner")}),size:"mini",spaced:"right","data-testid":"".concat(H,"-item-image")}),C.createElement(S.Z.Content,null,e.name,(null===(t=e.advancedConfigurations)||void 0===t?void 0:t.fragment)&&C.createElement(O.Z,{size:"mini"},Q("applications:list.labels.fragment")),C.createElement(i.Z,{container:!0,spacing:1},C.createElement(i.Z,{alignItems:"flex-end"},C.createElement("div",null,l&&C.createElement(O.Z,{className:"no-margin-left",size:"mini"},l))),L.y.isChoreoApplication(e)&&C.createElement(i.Z,null,C.createElement("div",null,C.createElement(O.Z,{size:"mini",className:"choreo-label no-margin-left"},Q("extensions:develop.apiResource.managedByChoreoText")))),(0,h.cr)(_e,N.jo.FEATURE_DICTIONARY.get("APPLICATION_OUTDATED_APP_BANNER"))&&L.y.isApplicationOutdated(e.applicationVersion,null!=e.clientId&&!(0,y.Z)(e.clientId))&&!(null!=e&&null!==(n=e.advancedConfigurations)&&void 0!==n&&n.fragment)&&C.createElement(i.Z,null,C.createElement("div",null,C.createElement(O.Z,{size:"mini",className:"outdated-app-label"},Q("applications:forms.inboundOIDC.sections.outdatedApplications.label")))))))},title:Q("applications:list.columns.name")},{allowToggleVisibility:!1,dataIndex:"inboundKey",id:"inboundKey",key:"inboundKey",render:function(e){var t,n="",i="";return null!=e&&e.clientId?null!=e&&e.issuer||null!=e&&e.realm||(n=e.clientId,t=R.B8.CLIENTID,i="client-id-label"):null!=e&&e.issuer&&(null!=e&&e.clientId||null!=e&&e.realm||(n=e.issuer,t=R.B8.ISSUER,i="issuer-label")),C.createElement(S.Z,{as:"h6","data-testid":"".concat(H,"-col-2-item-heading")},C.createElement(S.Z.Content,null,C.createElement(S.Z.Subheader,{"data-testid":"".concat(H,"-col-2-item-sub-heading")},n,t&&C.createElement(O.Z,{pointing:"left",size:"mini",className:i},t))))},title:Q("applications:list.columns.inboundKey")},{allowToggleVisibility:!1,dataIndex:"action",id:"actions",key:"actions",textAlign:"right",title:Q("applications:list.columns.actions")}],data:null==j?void 0:j.applications,onRowClick:function(e,t){be(t.id,t.access,t.name),V&&V(e,t)},placeholders:Pe(),selectable:G,showHeader:u.r.enableTableHeaders,transparent:!(Z||ve||ae)&&null!==Pe(),"data-testid":H}),ue&&C.createElement(E.cV,{primaryActionLoading:fe,onClose:function(){return se(!1)},type:"negative",open:re,assertionHint:Q("applications:confirmations.deleteApplication.assertionHint"),assertionType:"checkbox",primaryAction:Q("common:confirm"),secondaryAction:Q("common:cancel"),onSecondaryActionClick:function(){se(!1),Ce(null)},onPrimaryActionClick:function(){return e=ue.id,Ae(!0),void(0,P.rw)(e).then((function(){J((0,g.V_)({description:Q("applications:notifications.deleteApplication.success.description"),level:v.QU.SUCCESS,message:Q("applications:notifications.deleteApplication.success.message")})),se(!1),M()})).catch((function(e){e.response&&e.response.data&&e.response.data.description?J(Ce({description:e.response.data.description,level:v.QU.ERROR,message:Q("applications:notifications.deleteApplication.error.message")})):J(Ce({description:Q("applications:notifications.deleteApplication.genericError.description"),level:v.QU.ERROR,message:Q("applications:notifications.deleteApplication.genericError.message")}))})).finally((function(){Ae(!1)}));var e},"data-testid":"".concat(H,"-delete-confirmation-modal"),closeOnDimmerClick:!1},L.y.isChoreoApplication(ue)?C.createElement(C.Fragment,null,C.createElement(E.cV.Header,{"data-testid":"".concat(H,"-delete-confirmation-modal-header")},Q("applications:confirmations.deleteChoreoApplication.header")),C.createElement(E.cV.Message,{attached:!0,negative:!0,"data-testid":"".concat(H,"-delete-confirmation-modal-message")},Q("applications:confirmations.deleteChoreoApplication.message")),C.createElement(E.cV.Content,{"data-testid":"".concat(H,"-delete-confirmation-modal-content")},C.createElement("div",{className:"modal-alert-wrapper"}," ",ye&&Ie),C.createElement(T.c,{i18nKey:"applications:confirmations.deleteChoreoApplication.content"},"Deleting this application will break the authentication flows and cause the associated Choreo application to be unusable with its credentials.",C.createElement("b",null,"Proceed at your own risk.")))):C.createElement(C.Fragment,null,C.createElement(E.cV.Header,{"data-testid":"".concat(H,"-delete-confirmation-modal-header")},Q("applications:confirmations.deleteApplication.header")),C.createElement(E.cV.Message,{attached:!0,negative:!0,"data-testid":"".concat(H,"-delete-confirmation-modal-message")},Q("applications:confirmations.deleteApplication.message")),C.createElement(E.cV.Content,{"data-testid":"".concat(H,"-delete-confirmation-modal-content")},C.createElement("div",{className:"modal-alert-wrapper"}," ",ye&&Ie),Q("applications:confirmations.deleteApplication.content")))))};k.defaultProps={"data-componentid":"application","data-testid":"application-list",selection:!0,showListItemActions:!0}}}]);