"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[5746],{39203:(e,t,n)=>{n.d(t,{Ug:()=>u,VL:()=>c,fF:()=>d,hI:()=>s,sS:()=>p,tN:()=>f,yq:()=>m});var r=n(2292),o=n(96124),i=n(76271),a=n(6833),l=r.AsgardeoSPAClient.getInstance().httpRequest.bind(r.AsgardeoSPAClient.getInstance()),s=function(e,t){var n={headers:{"Access-Control-Allow-Origin":i.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:a.f2.GET,params:{domain:e,excludedAttributes:t},url:i.h.getState().config.endpoints.groups};return l(n).then((function(e){if(200==e.status)return Promise.resolve(e)})).catch((function(e){return Promise.reject(e)}))},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0,l=arguments.length>4?arguments[4]:void 0,s=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],u={headers:{"Content-Type":"application/json"},method:a.f2.GET,params:{count:e,domain:r,excludedAttributes:l,filter:n,startIndex:t},url:i.h.getState().config.endpoints.groups},c=(0,o.Z)(s?u:null),d=c.data,f=c.error;return{data:d,error:f,isLoading:!f&&!d,isValidating:c.isValidating,mutate:c.mutate,response:c.response}},c=function(e,t){var n={headers:{"Access-Control-Allow-Origin":i.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:a.f2.GET,params:{excludedAttributes:t},url:i.h.getState().config.endpoints.groups+"/"+e};return l(n).then((function(e){return Promise.resolve(e)})).catch((function(e){return Promise.reject(e)}))},d=function(e,t){var n={data:t,headers:{"Access-Control-Allow-Origin":i.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:a.f2.PATCH,url:i.h.getState().config.endpoints.groups+"/"+e};return l(n).then((function(e){return Promise.resolve(e)})).catch((function(e){return Promise.reject(e)}))},f=function(e){var t={data:e,headers:{"Access-Control-Allow-Origin":i.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:a.f2.POST,url:i.h.getState().config.endpoints.groups+"/.search"};return l(t).then((function(e){return Promise.resolve(e)})).catch((function(e){return Promise.reject(e)}))},m=function(e){var t={headers:{"Access-Control-Allow-Origin":i.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:a.f2.DELETE,url:i.h.getState().config.endpoints.groups+"/"+e};return l(t).then((function(e){return Promise.resolve(e)})).catch((function(e){return Promise.reject(e)}))},p=function(e){var t={data:e,headers:{"Access-Control-Allow-Origin":i.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:a.f2.POST,url:i.h.getState().config.endpoints.groups};return l(t).then((function(e){return Promise.resolve(e)})).catch((function(e){return Promise.reject(e)}))}},54663:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,l(r.key),r)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e,t,n){return(t=l(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}n.d(t,{J:()=>s});var s=i((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}));a(s,"GROUP_VIEW_PATH","/groups/"),a(s,"FEATURE_DICTIONARY",(new Map).set("GROUP_CREATE","groups.create").set("GROUP_UPDATE","groups.update").set("GROUP_DELETE","groups.delete").set("GROUP_READ","groups.read"))},45746:(e,t,n)=>{n.r(t),n.d(t,{default:()=>He});var r=n(55007),o=n(25134),i=n(13550),a=n(90302),l=n(63264),s=n(10319),u=n(58613),c=n(6833),d=n(82406),f=n(20494),m=n(44194),p=n(10479),v=n(47245),h=n(26154),g=n(47625),y=n(39203),b=n(60486),E=n(40838),S=n(51021),w=n(86105),O=n(45634),R=n.n(O),I=n(27320),A=n.n(I),L=n(64869),C=n.n(L),P=n(50699),U=n(12638),N=n(54663);function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return _(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}R().extend(A()),R().extend(C());var j=function(e){var t,n,o=e.defaultListItemLimit,l=e.handleGroupDelete,s=e.isLoading,c=e.featureConfig,d=e.onEmptyListPlaceholderActionClick,v=e.onListItemClick,g=e.onSearchQueryClear,y=e.groupList,O=e.selection,I=e.searchQuery,A=e.showListItemActions,L=e.showMetaContent,C=e.isReadOnlyUserStore,_=e.isUserstoreAddDisabled,j=e.isUserstoreDeleteDisabled,x=e["data-testid"],k=(0,p.$)().t,D=(0,u.Z)().readOnlyUserStoreNamesList,M=T((0,m.useState)(!1),2),z=M[0],G=M[1],V=T((0,m.useState)(),2),Z=V[0],F=V[1],B=(0,r.EV)(null==c||null===(t=c.groups)||void 0===t||null===(t=t.scopes)||void 0===t?void 0:t.update),H=(0,r.EV)(null==c||null===(n=c.groups)||void 0===n||null===(n=n.scopes)||void 0===n?void 0:n.delete),Q=function(e){E.m.push(b.$.getPaths().get("GROUP_EDIT").replace(":id",e))},W=function(){return I?m.createElement(f.$J,{"data-testid":"".concat(x,"-search-empty-placeholder"),action:m.createElement(f.Qj,{"data-testid":"".concat(x,"-search-empty-placeholder-clear-button"),onClick:g},k("roles:list.emptyPlaceholders.search.action")),image:(0,i.jF)().emptySearch,imageSize:"tiny",title:k("roles:list.emptyPlaceholders.search.title"),subtitle:[k("roles:list.emptyPlaceholders.search.subtitles.0",{searchQuery:I}),k("roles:list.emptyPlaceholders.search.subtitles.1")]}):(0,P.Z)(y)||0===y.length?m.createElement(f.$J,{"data-testid":"".concat(x,"-empty-list-empty-placeholder"),action:!C&&!_&&m.createElement(r.di,{when:null==c||null===(e=c.groups)||void 0===e||null===(e=e.scopes)||void 0===e?void 0:e.create},m.createElement(f.KM,{"data-testid":"".concat(x,"-empty-list-empty-placeholder-add-button"),onClick:d},m.createElement(h.Z,{name:"add"}),k("roles:list.emptyPlaceholders.emptyRoleList.action",{type:"Group"}))),image:(0,i.jF)().newList,imageSize:"tiny",title:C||_?k("roles:list.emptyPlaceholders.emptyRoleList.emptyRoles",{type:"groups"}):k("roles:list.emptyPlaceholders.emptyRoleList.title",{type:"group"}),subtitle:C||_?[k("roles:list.emptyPlaceholders.emptyRoleList.subtitles.0",{type:"groups"})]:[k("roles:list.emptyPlaceholders.emptyRoleList.subtitles.0",{type:"groups"}),k("roles:list.emptyPlaceholders.emptyRoleList.subtitles.1",{type:"group"}),k("roles:list.emptyPlaceholders.emptyRoleList.subtitles.2",{type:"group"})]}):null;var e};return m.createElement(m.Fragment,null,m.createElement(f.wQ,{className:"groups-list",isLoading:s,loadingStateOptions:{count:null!=o?o:a.r.DEFAULT_RESOURCE_LIST_ITEM_LIMIT,imageType:"square"},actions:function(){if(A){var e=[{hidden:function(){return!(0,w.cr)(null==c?void 0:c.groups,N.J.FEATURE_DICTIONARY.get("GROUP_READ"))},icon:function(e){var t,n,r=(null==e||null===(t=e.displayName)||void 0===t?void 0:t.split("/").length)>1?null==e||null===(n=e.displayName)||void 0===n?void 0:n.split("/")[0]:null===S.wO||void 0===S.wO?void 0:S.wO.primaryUserstoreName;return!(0,w.cr)(null==c?void 0:c.groups,N.J.FEATURE_DICTIONARY.get("GROUP_UPDATE"))||!B||null!=D&&D.includes(r.toString())?"eye":"pencil alternate"},onClick:function(e,t){return Q(t.id)},popupText:function(e){var t,n,r=(null==e||null===(t=e.displayName)||void 0===t?void 0:t.split("/").length)>1?null==e||null===(n=e.displayName)||void 0===n?void 0:n.split("/")[0]:null===S.wO||void 0===S.wO?void 0:S.wO.primaryUserstoreName;return!(0,w.cr)(null==c?void 0:c.groups,N.J.FEATURE_DICTIONARY.get("GROUP_UPDATE"))||!B||null!=D&&D.includes(r.toString())?k("common:view"):k("common:edit")},renderer:"semantic-icon"}];return e.push({hidden:function(e){var t,n,r=(null==e||null===(t=e.displayName)||void 0===t?void 0:t.split("/").length)>1?null==e||null===(n=e.displayName)||void 0===n?void 0:n.split("/")[0]:null===S.wO||void 0===S.wO?void 0:S.wO.primaryUserstoreName;return!H||(null==D?void 0:D.includes(r.toString()))||C||j},icon:function(){return"trash alternate"},onClick:function(e,t){F(t),G(!z)},popupText:function(){return k("roles:list.popups.delete",{type:"Group"})},renderer:"semantic-icon"}),e}}(),columns:[{allowToggleVisibility:!1,dataIndex:"name",id:"name",key:"name",render:function(e){var t,n=null==e||null===(t=e.displayName)||void 0===t?void 0:t.split("/"),r=(null==n?void 0:n.length)>1?n[1]:n[0];return m.createElement(U.Z,{image:!0,as:"h6",className:"header-with-icon","data-testid":"".concat(x,"-item-heading")},m.createElement(f.JT,{image:m.createElement(f.Xo,{name:r,size:"mini","data-testid":"".concat(x,"-item-image-inner")}),size:"mini",spaced:"right","data-testid":"".concat(x,"-item-image")}),m.createElement(U.Z.Content,null,r))},title:k("console:manage.features.groups.list.columns.name")},{allowToggleVisibility:!1,dataIndex:"lastModified",hidden:!L,id:"lastModified",key:"lastModified",render:function(e){var t=R()(new Date),n=R()(e.meta.lastModified?e.meta.lastModified:e.meta.created);return k("console:common.dateTime.humanizedDateString",{date:R().duration(t.diff(n)).humanize()})},title:k("console:manage.features.groups.list.columns.lastModified")},{allowToggleVisibility:!1,dataIndex:"action",id:"actions",key:"actions",textAlign:"right",title:k("console:manage.features.groups.list.columns.actions")}],data:null!=y?y:[],onRowClick:function(e,t){Q(null==t?void 0:t.id),v&&v(e,t)},placeholders:W(),selectable:O,showHeader:!1,transparent:!s&&null!==W(),"data-testid":x}),z&&m.createElement(f.cV,{"data-testid":"".concat(x,"-delete-item-confirmation-modal"),onClose:function(){return G(!1)},type:"negative",open:z,assertionHint:k("roles:list.confirmations.deleteItem.assertionHint"),assertionType:"checkbox",primaryAction:"Confirm",secondaryAction:"Cancel",onSecondaryActionClick:function(){return G(!1)},onPrimaryActionClick:function(){l(Z),G(!1)},closeOnDimmerClick:!1},m.createElement(f.cV.Header,null,k("roles:list.confirmations.deleteItem.header")),m.createElement(f.cV.Message,{attached:!0,negative:!0},k("roles:list.confirmations.deleteItem.message",{type:"group"})),m.createElement(f.cV.Content,null,k("roles:list.confirmations.deleteItem.content",{type:"group"}))))};j.defaultProps={selection:!0,showListItemActions:!0,showMetaContent:!0};var x=n(6567),k=n(96334),D=n(29893);function M(e){return function(e){if(Array.isArray(e))return V(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||G(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,t)||G(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,t){if(e){if("string"==typeof e)return V(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?V(e,t):void 0}}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Z=function(e){var t,n=e.initialValues,r=e.triggerSubmit,o=e.onSubmit,i=e.handleSetRoleId,a=(0,p.$)().t,l=z((0,m.useState)(null!==(t=null==n?void 0:n.roleList)&&void 0!==t?t:[]),2),s=l[0],u=l[1],c=z((0,m.useState)([]),2),d=c[0],v=c[1],h=z((0,m.useState)(!1),2),g=h[0],y=h[1];(0,m.useEffect)((function(){y((null==d?void 0:d.length)>0&&(null==s?void 0:s.every((function(e){return null==d?void 0:d.includes(e)}))))}),[d,s]);var b=function(e,t){var n=null==e?void 0:e.split("/");if((null==n?void 0:n.length)>0)return"application"==n[0]?{labelColor:null,labelText:a("roles:addRoleWizard.forms.roleBasicDetails.roleAudience.values.application"),name:"audience-label",subLabel:t}:{labelColor:null,labelText:a("roles:addRoleWizard.forms.roleBasicDetails.roleAudience.values.organization"),name:"audience-label"}};return m.createElement(m.Fragment,null,m.createElement(k.Es,{onSubmit:function(){o({roles:d})},submitState:r},m.createElement(f.IX,{selectionComponent:!0,searchPlaceholder:a("transferList:searchPlaceholder",{type:"Roles"}),handleUnelectedListSearch:function(e,t){var r,o,i=t.value;if((0,P.Z)(i)){var a;u(null!==(a=null==n?void 0:n.roleList)&&void 0!==a?a:[])}else{var l=new RegExp((0,D.Z)(i),"i"),s=null!==(r=null==n||null===(o=n.roleList)||void 0===o?void 0:o.filter((function(e){return l.test(e.displayName)})))&&void 0!==r?r:[];u(s)}},"data-testid":"user-mgt-add-user-wizard-modal"},m.createElement(f.Jv,{isListEmpty:!((null==s?void 0:s.length)>0),listType:"unselected",listHeaders:[a("transferList:list.headers.1"),a("transferList:list.headers.2"),""],handleHeaderCheckboxChange:function(){if(g){y(!1);var e=M(d);s.forEach((function(t){var n=e.findIndex((function(e){return e.id===t.id}));-1!==n&&e.splice(n,1)})),v(e)}else{y(!0);var t=M(d);s.forEach((function(e){-1===t.findIndex((function(t){return t.id===e.id}))&&t.push(e)})),v(t)}},isHeaderCheckboxChecked:g,emptyPlaceholderContent:a("transferList:list.emptyPlaceholders.groups.unselected",{type:"roles"}),"data-testid":"user-mgt-add-user-wizard-modal-unselected-roles-select-all-checkbox",emptyPlaceholderDefaultContent:a("transferList:list.emptyPlaceholders.default")},null==s?void 0:s.map((function(e,t){var n,r=null==e||null===(n=e.displayName)||void 0===n?void 0:n.split("/");return m.createElement(f.qT,{handleItemChange:function(){return function(e){var t=null==d?void 0:d.findIndex((function(t){return t.id===e.id}));v(-1===t?function(t){return[].concat(M(t),[e])}:function(e){var n=M(e);return n.splice(t,1),n})}(e)},key:t,listItem:(null==r?void 0:r.length)>1?r[1]:null==e?void 0:e.displayName,listItemId:e.id,listItemIndex:t,listItemTypeLabel:b(null==e?void 0:e.audience.type,null==e?void 0:e.audience.display),isItemChecked:d.includes(e),showSecondaryActions:!1,handleOpenPermissionModal:function(){return i(e.id)},reOrderLabel:!0,showSubLabel:!0,"data-testid":"user-mgt-add-user-wizard-modal-unselected-roles"})}))))))},F=n(9183),B=n(76271),H=n(61339),Q=n(51342),W=n(62508),$=n(89141),q=n(10909),J=n(7231),Y=n(86485);function K(e){return function(e){if(Array.isArray(e))return te(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ee(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,t)||ee(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(e,t){if(e){if("string"==typeof e)return te(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?te(e,t):void 0}}function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var ne=function(e){var t=e.isReadOnly,n=e.emphasize,r=e.triggerSubmit,o=e.onSubmit,i=e.roleObject,a=e.isEdit,l=e.initialValues,s=e.isRole,u=e.isSubmitting,c=e.permissionsToHide,d=e["data-testid"],v=(0,p.$)().t,h=X((0,m.useState)([]),2),g=h[0],y=h[1],b=X((0,m.useState)([]),2),E=b[0],S=b[1],w=X((0,m.useState)([]),2),O=w[0],R=w[1],I=X((0,m.useState)([]),2),A=I[0],L=I[1],C=X((0,m.useState)(!0),2),P=C[0],U=C[1],N=X((0,m.useState)(!1),2),T=N[0],_=N[1];(0,m.useEffect)((function(){var e=[];if(Y.J.getAllPermissions(c).then((function(e){x(T,e),y(e),L([e[0].key.toString()]),U(!1)})),j(),l&&l.length>0){var t=[];l.forEach((function(e){t.push(e.key.toString())})),R(t),null==O||O.forEach((function(t){e.push(z(t,g))})),S(e)}s&&i&&(R(i.permissions),null==O||O.forEach((function(t){e.push(z(t,g))})),S(e))}),[g.length>0]);var j=function(){(0,H.U)().then((function(e){B.h.getState().profile.profileInfo.userName===(null==e?void 0:e.realmConfig.adminUser)&&_(!0)})).catch((function(e){_(!1)}))},x=function(e,t){t[0].children.forEach((function(t){t.key!==J.nL.SUPER_ADMIN_PERMISSION_KEY||e||(t.disableCheckbox=!0,t.children&&D(t.children,!0))}))},D=function(e,t){e.forEach((function(e){e.disableCheckbox=t,e.children&&D(e.children,t)}))},M=function(e,t){if(t.checked){if(!E.find((function(e){return e.key===t.node.key}))){var n,r,o=z(t.node.key,g,!0),i=1;if(null==o||null===(n=o.children)||void 0===n||n.forEach((function(e){E.filter((function(t){return t.key===e.key})).length>0&&++i})),(null==o||null===(r=o.children)||void 0===r?void 0:r.length)===i){var a=E.filter((function(e){e.key.toString().replace(/^\/|\/$/g,"").split("/"),o.key.toString().replace(/^\/|\/$/g,"").split("/")}));S([].concat(K(a),[o]))}else S([].concat(K(E),[t.node]))}}else S(t.checkedNodes)},z=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[t[0]];r.length;){var o=r.shift();if(n){if(o.key===e.slice(0,e.lastIndexOf("/")))return o}else if(o.key===e)return o;o.children&&r.push.apply(r,K(o.children))}return null},G=function(e){return e.isLeaf?null:m.createElement("div",{className:"tree-arrow-wrap"},m.createElement("span",{className:"tree-arrow ".concat(e.expanded?"":"active")},m.createElement("span",null),m.createElement("span",null)))},V=function(){return m.createElement(m.Fragment,null,m.createElement(k.Es,{submitState:r,onSubmit:function(){o(E)}},P?m.createElement(f.pO,{className:"p-3",active:!0}):m.createElement("div",{className:"treeview-container"},m.createElement(Q.Z,{className:"customIcon","data-testid":"".concat(d,"-tree"),disabled:t,checkedKeys:E.map((function(e){return e.key})),defaultExpandedKeys:A,showLine:!0,showIcon:!1,checkable:!0,selectable:!1,onCheck:M,treeData:g,switcherIcon:G})),a&&!P&&m.createElement(m.Fragment,null,m.createElement(W.Z,{hidden:!0}),m.createElement($.Z.Row,{columns:1},m.createElement($.Z.Column,{mobile:16,tablet:16,computer:8},m.createElement(q.Z,{"data-testid":"".concat(d,"-update-button"),primary:!0,type:"submit",loading:u,disabled:u,size:"small",className:"form-button"},v("roles:addRoleWizard.permissions.buttons.update")))))))};return n?m.createElement(f.pJ,{"data-testid":d,padded:"very"},V()):m.createElement("div",{"data-testid":d},V())};ne.defaultProps={emphasize:!0,isReadOnly:!1};var re=n(19980);function oe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ie(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ie(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var ae=function(e){var t=e.roleId,n=e.handleNavigateBack,r=e["data-testid"],o=(0,p.$)().t,i=oe((0,m.useState)(!1),2),a=i[0],l=i[1],s=oe((0,m.useState)(),2),u=s[0],c=s[1];return(0,m.useEffect)((function(){t&&t&&(0,F.xQ)(t).then((function(e){l(!1),c(e.data)}))}),[t]),(0,m.useEffect)((function(){u&&l(!0)}),[u]),a&&m.createElement(m.Fragment,null,m.createElement(f.X6,{as:"h5"},o("user:updateUser.roles.viewPermissionModal.heading",{role:u.displayName})),m.createElement(W.Z,{hidden:!0}),m.createElement(f.Qj,{"data-testid":"".concat(r,"_back_button"),floated:"left",onClick:n},m.createElement(h.Z,{name:"arrow left"}),o("user:updateUser.roles.viewPermissionModal.backButton")),m.createElement(W.Z,{hidden:!0}),m.createElement(W.Z,{hidden:!0}),m.createElement(re.Z,{"data-testid":r},m.createElement("div",{className:"permissions-edit-container"},m.createElement(ne,{isEdit:!1,isRole:!0,roleObject:u}))))},le=n(43974),se=n(79282),ue=n(1651),ce=n(47018),de=n(41355),fe=n(86329),me=n(6643),pe=n(55495),ve=n(54274),he=n(49581),ge=n(33403),ye=n(74074);function be(e){return be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},be(e)}function Ee(){Ee=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof g?t:g,a=Object.create(i.prototype),l=new U(r||[]);return o(a,"_invoke",{value:A(e,n,l)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var f="suspendedStart",m="suspendedYield",p="executing",v="completed",h={};function g(){}function y(){}function b(){}var E={};u(E,a,(function(){return this}));var S=Object.getPrototypeOf,w=S&&S(S(N([])));w&&w!==n&&r.call(w,a)&&(E=w);var O=b.prototype=g.prototype=Object.create(E);function R(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function I(e,t){function n(o,i,a,l){var s=d(e[o],e,i);if("throw"!==s.type){var u=s.arg,c=u.value;return c&&"object"==be(c)&&r.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,a,l)}),(function(e){n("throw",e,a,l)})):t.resolve(c).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,l)}))}l(s.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function A(t,n,r){var o=f;return function(i,a){if(o===p)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var l=r.delegate;if(l){var s=L(l,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=p;var u=d(t,n,r);if("normal"===u.type){if(o=r.done?v:m,u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=v,r.method="throw",r.arg=u.arg)}}}function L(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,L(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var i=d(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,h;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,h):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function U(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function N(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(be(t)+" is not iterable")}return y.prototype=b,o(O,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:y,configurable:!0}),y.displayName=u(b,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,s,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},R(I.prototype),u(I.prototype,l,(function(){return this})),t.AsyncIterator=I,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new I(c(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},R(O),u(O,s,"Generator"),u(O,a,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=N,U.prototype={constructor:U,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return l.type="throw",l.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],l=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:N(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),h}},t}function Se(e,t,n,r,o,i,a){try{var l=e[i](a),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function we(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Oe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Oe(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Re=function(e){var t,n,r,o,i,a=e.onSubmit,l=e.triggerSubmit,h=e.initialValues,g=e.setUserStore,b=e.userStore,E=e["data-componentid"],w=(0,p.$)().t,O=(0,v.I0)(),R=(0,u.Z)(),I=R.isLoading,A=R.isUserStoreReadOnly,L=R.mutateUserStoreList,C=R.userStoresList,P=(0,v.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t?void 0:t.systemReservedUserStores})),U=we((0,m.useState)(null),2),N=U[0],T=U[1],_=(0,m.useRef)(),j=(0,he.q)(b,s.y8.RolenameRegEx),x=j.data,D=j.isLoading,M=(0,m.useMemo)((function(){var e=[{key:-1,text:null===S.wO||void 0===S.wO?void 0:S.wO.primaryUserstoreName,value:null===S.wO||void 0===S.wO?void 0:S.wO.primaryUserstoreName}];return C&&!I&&(null==C?void 0:C.length)>0&&(null==C||C.filter((function(e){return!(null!=P&&P.includes(e.name))})).forEach((function(t,n){var r=t.enabled,o=A(null==t?void 0:t.name);if(t.name.toUpperCase()!==S.wO.primaryUserstoreName&&r&&!o){var i={key:n,text:t.name,value:t.name};e.push(i)}}))),e}),[C,I]);(0,m.useEffect)((function(){L()}),[]),(0,m.useEffect)((function(){N&&a({basicDetails:N})}),[N]);return m.createElement(k.Es,{"data-componentid":E,onSubmit:function(e){T(function(e){var t;return{domain:b,groupName:null==e||null===(t=e.get("groupName"))||void 0===t?void 0:t.toString()}}(e))},submitState:l},m.createElement($.Z,null,(null===S.ld||void 0===S.ld?void 0:S.ld.allowGroupAddForRemoteUserstores)&&m.createElement(ge.Z,null,m.createElement(ye.Z,{mobile:16,tablet:16,computer:10},m.createElement(k.gN,{"data-componentid":"".concat(E,"-domain-dropdown"),type:"dropdown",label:w("roles:addRoleWizard.forms.roleBasicDetails.domain.label.group"),name:"domain",children:M,placeholder:w("roles:addRoleWizard.forms.roleBasicDetails.domain.placeholder"),requiredErrorMessage:w("roles:addRoleWizard.forms.roleBasicDetails.domain.validation.empty.group"),required:!0,element:m.createElement("div",null),listen:function(e){var t,n=null==e||null===(t=e.get("domain"))||void 0===t?void 0:t.toString();g(n)},value:null!==(t=null!==(n=null==h||null===(r=h.basicDetails)||void 0===r?void 0:r.domain)&&void 0!==n?n:b)&&void 0!==t?t:null===(o=M[0])||void 0===o?void 0:o.value}))),m.createElement(ge.Z,null,m.createElement(ye.Z,{mobile:16,tablet:16,computer:10},m.createElement(k.gN,{ref:_,"data-componentid":"".concat(E,"-role-name-input"),type:"text",name:"groupName",label:w("roles:addRoleWizard.forms.roleBasicDetails.roleName.label",{type:"Group"}),placeholder:w("roles:addRoleWizard.forms.roleBasicDetails.roleName.placeholder",{type:"group"}),required:!0,requiredErrorMessage:w("roles:addRoleWizard.forms.roleBasicDetails.roleName.validations.empty",{type:"Group"}),validation:function(){var e,t=(e=Ee().mark((function e(t,n){var r;return Ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ve.w.validateInputAgainstRegEx(t,x)||(n.isValid=!1,x===S.ld.defaultUserstoreRegex?n.errorMessages.push(w(null===S.ld||void 0===S.ld?void 0:S.ld.groupPrimaryUserstoreRegexHint)):n.errorMessages.push(w("groups:groupCreateWizard.groupNameRegexCustomHint",{regex:x}))),r={filter:"displayName eq  ".concat(b,"/").concat(t),schemas:["urn:ietf:params:scim:api:messages:2.0:SearchRequest"],startIndex:1},e.next=6,(0,y.tN)(r).then((function(e){var t;0!==(null==e||null===(t=e.data)||void 0===t?void 0:t.totalResults)&&(n.isValid=!1,n.errorMessages.push(w("roles:addRoleWizard.forms.roleBasicDetails.roleName.validations.duplicate",{type:"Group"})))})).catch((function(){O((0,d.V_)({description:w("console:manage.features.groups.notifications.fetchGroups.genericError.description"),level:c.QU.ERROR,message:w("console:manage.features.groups.notifications.fetchGroups.genericError.message")}))}));case 6:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Se(i,r,o,a,l,"next",e)}function l(e){Se(i,r,o,a,l,"throw",e)}a(void 0)}))});return function(e,n){return t.apply(this,arguments)}}(),value:null==h||null===(i=h.basicDetails)||void 0===i?void 0:i.groupName,loading:D}),m.createElement(f.kW,null,w(null===S.ld||void 0===S.ld?void 0:S.ld.groupPrimaryUserstoreRegexHint))))))};function Ie(e){return function(e){if(Array.isArray(e))return Ce(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Le(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ae(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,t)||Le(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Le(e,t){if(e){if("string"==typeof e)return Ce(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ce(e,t):void 0}}function Ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Pe=function(e){var t=e.triggerSubmit,n=e.onSubmit,r=e.assignedUsers,o=e.initialValues,i=e.selectedUserStore,l=e.setSelectedUserStore,s=e.onUserFetchRequestFinish,u=e["data-componentid"],h=(0,p.$)().t,g=(0,v.I0)(),y=Ae((0,m.useState)([]),2),b=y[0],E=y[1],S=Ae((0,m.useState)([]),2),w=S[0],O=S[1],R=Ae((0,m.useState)(null),2),I=R[0],A=R[1],L=new Map([["name","name"],["emails","emails"],["name","name"],["userName","userName"],["id",""],["profileUrl","profileUrl"],["meta.lastModified","meta.lastModified"],["meta.created",""]]),C=(0,me.al)(L.values()),N=(0,fe.WW)(a.r.DEFAULT_RESOURCE_LIST_ITEM_LIMIT,null,I,C,i),T=N.data,_=N.isLoading,j=N.error;(0,m.useEffect)((function(){if(null!=T&&T.Resources){var e,t=null==T||null===(e=T.Resources)||void 0===e?void 0:e.filter((function(e){var t;return!(null!==(t=e[de.k.scim.systemSchema])&&void 0!==t&&t.userSourceId)}));if(t&&(t.sort((function(e,t){var n,r;return null===(n=e.name)||void 0===n||null===(n=n.givenName)||void 0===n?void 0:n.localeCompare(null===(r=t.name)||void 0===r?void 0:r.givenName)})),E(t)),r&&0!==r.length){var n=[];t&&t instanceof Array&&(t.slice().reverse().forEach((function(e){r.forEach((function(r){e.id===r.value&&(n.push(e),t.splice(t.indexOf(e),1))}))})),n.sort((function(e,t){var n,r;return null===(n=e.name)||void 0===n||null===(n=n.givenName)||void 0===n?void 0:n.localeCompare(null===(r=t.name)||void 0===r?void 0:r.givenName)}))),O(n)}}else E([])}),[T]),(0,m.useEffect)((function(){var e,t,n,r;j&&(g((0,d.V_)({description:null!==(e=null==j||null===(t=j.response)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.description)&&void 0!==e?e:h("users:notifications.fetchUsers.error.description"),level:c.QU.ERROR,message:null!==(n=null==j||null===(r=j.response)||void 0===r||null===(r=r.data)||void 0===r?void 0:r.message)&&void 0!==n?n:h("users:notifications.fetchUsers.error.message")})),E([]))}),[j]),(0,m.useEffect)((function(){_||s()}),[_]),(0,m.useEffect)((function(){null!=o&&o.users&&O(null==o?void 0:o.users)}),[o]);var x=(0,m.useCallback)((0,pe.Z)((function(e,t){(0,P.Z)(t.trim())?A(null):A("userName co "+t)}),1e3),[]);return m.createElement(m.Fragment,null,m.createElement(Re,{"data-componentid":"add-group-form",triggerSubmit:t,initialValues:null==o?void 0:o.basic,userStore:i,setUserStore:l,onSubmit:function(e){n({basic:e,users:w})}}),m.createElement(f.X6,{as:"h5",className:"mt-3"},"Add Users"),m.createElement(f.kW,null,h("roles:addRoleWizard.users.assignUserModal.hint")),m.createElement(f.IX,{compact:!0,basic:!0,bordered:!0,className:"one-column-selection",selectionComponent:!0,searchPlaceholder:h("roles:addRoleWizard.users.assignUserModal.list.searchPlaceholder"),isLoading:_,handleUnelectedListSearch:function(e,t){var n=t.value;x(e,n)},"data-componentid":"".concat(u,"-transfer-component")},m.createElement(f.Jv,{selectionComponent:!0,isListEmpty:!_&&(null==b?void 0:b.length)<1,isLoading:_,listType:"unselected",emptyPlaceholderContent:"We couldn't find any results for search. Please try a different search term.","data-componentid":"".concat(u,"-unselected-transfer-list"),emptyPlaceholderDefaultContent:h("transferList:list.emptyPlaceholders.default")},null==b?void 0:b.map((function(e,t){var n,r=null==e?void 0:e.userName,o=me.QH.resolveUserListSubheader(e);return m.createElement(f.qT,{handleItemChange:function(){return t=e,void O((function(e){return e.some((function(e){return e.id===t.id}))?e.filter((function(e){return e.id!==t.id})):[].concat(Ie(e),[t])}));var t},key:t,listItem:{listItemElement:(n=r,m.createElement("div",{"data-hj-suppress":""},n)),listItemValue:r},listItemId:e.id,listItemIndex:t,isItemChecked:(null==w?void 0:w.filter((function(t){return(null==t?void 0:t.id)===(null==e?void 0:e.id)})).length)>0,showSecondaryActions:!1,showListSubItem:!0,listSubItem:o&&r!==o&&m.createElement(U.Z,{as:"h6"},m.createElement(U.Z.Content,null,m.createElement(U.Z.Subheader,{"data-componentid":"".concat(u,"-item-sub-heading")},o))),"data-componentid":"".concat(u,"-unselected-transfer-list-item-").concat(t)})})))))},Ue=n(51080),Ne=n(60941),Te=n(58628),_e=n(34137),je=function(){return{general:Ue.r,roles:Ne.r,summary:Te.r,users:_e.r}},xe=function(e){return e.BASIC_DETAILS="BasicDetails",e.ROLE_LIST="RoleList",e}({});function ke(e){return ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ke(e)}function De(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?De(Object(n),!0).forEach((function(t){ze(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):De(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ze(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=ke(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ke(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ke(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ge(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ve(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ve(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Ze=function(e){var t,n,o,i,a=e.closeWizard,u=e.initStep,g=e.showStepper,S=e.requiredSteps,O=e.onCreate,R=e.userSelectedUserStore,I=e["data-componentid"],A=(0,p.$)().t,L=(0,v.I0)(),C=Ge((0,f.IK)(),3),U=C[0],N=C[1],T=C[2],_=Ge((0,k.cC)(),2),j=_[0],D=_[1],M=Ge((0,k.cC)(),2),z=M[0],G=M[1],V=Ge((0,m.useState)(u),2),B=V[0],H=V[1],Q=Ge((0,m.useState)(void 0),2),W=Q[0],q=Q[1],Y=Ge((0,m.useState)(void 0),2),K=Y[0],X=Y[1],ee=Ge((0,m.useState)(void 0),2),te=ee[0],ne=ee[1],re=Ge((0,m.useState)(null!=R?R:l.wO.primaryUserstoreName),2),oe=re[0],ie=re[1],de=Ge((0,m.useState)(!1),2),fe=de[0],me=de[1],pe=Ge((0,m.useState)(!0),2),ve=pe[0],he=pe[1],ge=Ge((0,m.useState)(),2),ye=ge[0],be=ge[1],Ee=Ge((0,m.useState)(!1),2),Se=Ee[0],we=Ee[1],Oe=Ge((0,m.useState)(!1),2),Re=Oe[0],Ie=Oe[1],Ae=Ge((0,m.useState)(void 0),2),Le=Ae[0],Ce=Ae[1],Ue=(0,v.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t||null===(t=t.features)||void 0===t?void 0:t.userRoles})),Ne=(0,v.v9)((function(e){var t;return null==e||null===(t=e.auth)||void 0===t?void 0:t.allowedScopes})),Te=(0,v.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t?void 0:t.isSystemRolesEditAllowed})),_e=(0,r.EV)(null==Ue||null===(t=Ue.scopes)||void 0===t?void 0:t.update),ke=(0,m.useMemo)((function(){return!(0,w.cr)(Ue,J.nL.FEATURE_DICTIONARY.get("ROLE_UPDATE"))||!_e}),[Ue,Ne]),De=le.l.getInstance(),Ve=(0,x.Ok)(null,null,null,"name eq Console"),Ze=Ve.data,Fe=Ve.error,Be=null==Ze||null===(n=Ze.applications[0])||void 0===n?void 0:n.id,He=(0,v.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t||null===(t=t.features)||void 0===t||null===(t=t.userRolesV3)||void 0===t?void 0:t.enabled})),Qe=He?F.sS:F.dB,We=(0,se.Z)(100,null,"audience.value ne ".concat(Be),"users,groups,permissions,associatedApplications",!(0,P.Z)(Be)),$e=We.data,qe=We.error,Je=(0,m.useMemo)((function(){return null!=$e&&$e.Resources?Te?$e.Resources:$e.Resources.filter((function(e){return!e.meta.systemRole})):[]}),[$e]);(0,m.useEffect)((function(){ke?(ne(tt([xe.BASIC_DETAILS])),Ce(xe.BASIC_DETAILS)):(ne(tt([xe.BASIC_DETAILS,xe.ROLE_LIST])),Ce(xe.ROLE_LIST))}),[]),(0,m.useEffect)((function(){(Fe||qe)&&L((0,d.V_)({description:A("roles:notifications.fetchRoles.genericError.description"),level:c.QU.ERROR,message:A("roles:notifications.fetchRoles.genericError.message")}))}),[Fe,qe]),(0,m.useEffect)((function(){void 0!==W&&(H(B-1),q(void 0))}),[W]),(0,m.useEffect)((function(){ye&&Se&&Ie(!0)}),[Se]),(0,m.useEffect)((function(){var e,t;null!=K&&null!==(e=K.BasicDetails)&&void 0!==e&&null!==(e=e.basic)&&void 0!==e&&null!==(e=e.basicDetails)&&void 0!==e&&e.domain&&ie(null==K||null===(t=K.BasicDetails)||void 0===t||null===(t=t.basic)||void 0===t||null===(t=t.basicDetails)||void 0===t?void 0:t.domain)}),[K]);var Ye=function(e){De.publish("manage-groups-finish-create-new-group"),function(e){var t,n,r,o,i,l="",u=e.BasicDetails;l=oe===s.pH?null!=u&&null!==(t=u.basic)&&void 0!==t&&t.basicDetails?null==u||null===(n=u.basic)||void 0===n||null===(n=n.basicDetails)||void 0===n?void 0:n.groupName:null==u?void 0:u.groupName:null!=u&&null!==(r=u.basic)&&void 0!==r&&r.basicDetails?(null==u||null===(o=u.basic)||void 0===o||null===(o=o.basicDetails)||void 0===o?void 0:o.domain)+"/"+(null==u||null===(i=u.basic)||void 0===i||null===(i=i.basicDetails)||void 0===i?void 0:i.groupName):(null==u?void 0:u.domain)+"/"+(null==u?void 0:u.groupName);var f=[],m=null==u?void 0:u.users;(null==m?void 0:m.length)>0&&(null==m||m.forEach((function(e){null==f||f.push({display:e.userName,value:e.id})})));var p={displayName:l,members:f,schemas:["urn:ietf:params:scim:schemas:core:2.0:Group"]};me(!0),(0,y.sS)(p).then((function(t){if(201===t.status){var n,r,o=t.data,i=[];null!=e&&null!==(n=e.RoleList)&&void 0!==n&&n.roles&&(null==e||null===(r=e.RoleList)||void 0===r||r.roles.forEach((function(e){null==i||i.push(e.id)})));var l={Operations:[{op:"add",value:He?[{display:o.displayName,value:o.id}]:{groups:[{display:o.displayName,value:o.id}]}}],schemas:["urn:ietf:params:scim:api:messages:2.0:PatchOp"]};(null==i?void 0:i.length)>0?Promise.all(i.map((function(e){return Qe(e,l)}))).then((function(){L((0,d.V_)({description:A("console:manage.features.groups.notifications.createGroup.success.description"),level:c.QU.SUCCESS,message:A("console:manage.features.groups.notifications.createGroup.success.message")})),a(),E.m.push(b.$.getPaths().get("GROUP_EDIT").replace(":id",t.data.id))})).catch((function(e){e.response&&401!==e.response.status?e.response&&e.response.data.detail?N({description:A("console:manage.features.groups.notifications.createPermission.error.description",{description:e.response.data.detail}),level:c.QU.ERROR,message:A("console:manage.features.groups.notifications.createPermission.error.message")}):N({description:A("console:manage.features.groups.notifications.createPermission.genericError.description"),level:c.QU.ERROR,message:A("console:manage.features.groups.notifications.createPermission.genericError.message")}):N({description:A("console:manage.features.groups.notifications.createPermission.error.description"),level:c.QU.ERROR,message:A("console:manage.features.groups.notifications.createPermission.error.message")})})):(L((0,d.V_)({description:A("console:manage.features.groups.notifications.createGroup.success.description"),level:c.QU.SUCCESS,message:A("console:manage.features.groups.notifications.createGroup.success.message")})),a())}O()})).catch((function(e){e.response&&401!==e.response.status?e.response&&e.response.data.detail?L((0,d.V_)({description:A("console:manage.features.groups.notifications.createGroup.error.description",{description:e.response.data.detail}),level:c.QU.ERROR,message:A("console:manage.features.groups.notifications.createGroup.error.message")})):L((0,d.V_)({description:A("console:manage.features.groups.notifications.createGroup.genericError.description"),level:c.QU.ERROR,message:A("console:manage.features.groups.notifications.createGroup.genericError.message")})):L((0,d.V_)({description:A("console:manage.features.groups.notifications.createGroup.error.description"),level:c.QU.ERROR,message:A("console:manage.features.groups.notifications.createGroup.error.message")}))})).finally((function(){a(),me(!1)}))}(e)},Ke=function(e,t){t!==Le?(X(Me(Me({},K),{},ze({},t,e))),H(B+1)):Ye(Me(Me({},K),{},ze({},t,e)))},Xe=function(){switch(B){case 0:D();break;case 1:G()}},et=function(){Ie(!Re),we(!1)},tt=function(e){var t=function(e){var t=[];return e.forEach((function(e){e===xe.BASIC_DETAILS&&t.push(nt()),e===xe.ROLE_LIST&&t.push(rt())})),t};return(null==S?void 0:S.length)<1?t(e):t((0,ue.Z)(e,S))},nt=function(){return{content:m.createElement(Pe,{"data-componentid":"new-group",isEdit:!1,triggerSubmit:j,selectedUserStore:oe,setSelectedUserStore:ie,initialValues:K&&K[xe.BASIC_DETAILS],onSubmit:function(e){return Ke(e,xe.BASIC_DETAILS)},onUserFetchRequestFinish:function(){return he(!1)}}),icon:je().general,name:xe.BASIC_DETAILS,title:A("roles:addRoleWizard.wizardSteps.0")}},rt=function(){return{content:Re?m.createElement(ae,{"data-componentid":"".concat(I,"-group-permission"),handleNavigateBack:et,roleId:ye}):m.createElement(Z,{triggerSubmit:z,onSubmit:function(e){return Ke(e,xe.ROLE_LIST)},initialValues:{roleList:null!=Je?Je:[]},handleSetRoleId:function(e){return function(e){be(e),we(!0)}(e)}}),icon:je().roles,name:xe.ROLE_LIST,title:A("roles:addRoleWizard.wizardSteps.5")}},ot=ke?[nt()]:[nt(),rt()];return m.createElement(ce.Z,{open:!0,className:"wizard create-role-wizard",dimmer:"blurring",size:"small",onClose:a,closeOnDimmerClick:!1,closeOnEscape:!1,"data-componentid":I},m.createElement(ce.Z.Header,{className:"wizard-header"},A("roles:addRoleWizard.heading",{type:"Group"}),K&&null!==(o=K[xe.BASIC_DETAILS])&&void 0!==o&&o.groupName?" - "+(null===(i=K[xe.BASIC_DETAILS])||void 0===i?void 0:i.groupName):"",m.createElement(f.X6,{as:"h6"},A("groups:groupCreateWizard.subHeading"))),g&&!ke&&(null==ot?void 0:ot.length)>1&&m.createElement(ce.Z.Content,{className:"steps-container"},m.createElement(f.Rg.Group,{current:B},ot.map((function(e,t){return m.createElement(f.Rg.Step,{key:t,icon:e.icon,title:e.title})})))),m.createElement(ce.Z.Content,{className:"content-container",scrolling:!0},U&&T,function(){var e,t,n;if(!te)return null;switch(null===(e=te[B])||void 0===e?void 0:e.name){case xe.BASIC_DETAILS:return null===(t=nt())||void 0===t?void 0:t.content;case xe.ROLE_LIST:return null===(n=rt())||void 0===n?void 0:n.content}}()),m.createElement(ce.Z.Actions,null,m.createElement($.Z,null,m.createElement($.Z.Row,{column:1},m.createElement($.Z.Column,{mobile:8,tablet:8,computer:8},m.createElement(f.Qj,{floated:"left",onClick:function(){return a()},"data-componentid":"".concat(I,"-cancel-button")},A("common:cancel"))),m.createElement($.Z.Column,{mobile:8,tablet:8,computer:8},B<(null==te?void 0:te.length)-1&&m.createElement(f.KM,{floated:"right",onClick:Xe,disabled:ve,"data-componentid":"".concat(I,"-next-button")},A("roles:addRoleWizard.buttons.next"),m.createElement(h.Z,{name:"arrow right","data-componentid":"".concat(I,"-next-button-icon")})),B===(null==te?void 0:te.length)-1&&m.createElement(f.KM,{floated:"right",onClick:Xe,"data-componentid":"".concat(I,"-finish-button"),disabled:ve||fe,loading:fe},A("roles:addRoleWizard.buttons.finish")),(null==te?void 0:te.length)>1&&B>0&&m.createElement(f.Qj,{floated:"right",onClick:function(){q(B)},"data-componentid":"".concat(I,"-previous-button"),disabled:ve},m.createElement(h.Z,{name:"arrow left","data-componentid":"".concat(I,"-previous-button-icon")}),A("roles:addRoleWizard.buttons.previous")))))))};function Fe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Be(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Be(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Be(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}Ze.defaultProps={initStep:0,showStepper:!0};const He=function(){var e,t=(0,v.I0)(),n=(0,p.$)().t,b=(0,f.fQ)().getLink,E=(0,u.Z)(),S=E.readOnlyUserStoreNamesList,w=E.isUserStoreReadOnly,O=E.mutateUserStoreList,R=E.userStoresList,I=(0,v.v9)((function(e){return e.config.ui.features})),A=(0,v.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t?void 0:t.systemReservedUserStores})),L=Fe((0,m.useState)(a.r.DEFAULT_RESOURCE_LIST_ITEM_LIMIT),2),C=L[0],P=L[1],U=Fe((0,m.useState)(1),2),N=U[0],T=U[1],_=Fe((0,m.useState)(!1),2),x=_[0],k=_[1],D=Fe((0,m.useState)(l.wO.primaryUserstoreName),2),M=D[0],z=D[1],G=Fe((0,m.useState)(!1),2),V=G[0],Z=G[1],F=Fe((0,m.useState)(null),2),B=F[0],H=F[1],Q=(0,y.Ug)(C,N,B,M,"members,roles",!0),W=Q.data,$=Q.error,q=Q.isLoading,J=Q.mutate,Y=!(null!==l.ld&&void 0!==l.ld&&l.ld.allowGroupDeleteForRemoteUserstores)&&M!==l.wO.primaryUserstoreName,K=!(null!==l.ld&&void 0!==l.ld&&l.ld.allowGroupAddForRemoteUserstores)&&M!==l.wO.primaryUserstoreName,X=(0,m.useMemo)((function(){return w(M)}),[M,S]),ee=(0,m.useMemo)((function(){var e=[{key:-1,text:l.wO.primaryUserstoreName,value:l.wO.primaryUserstoreName}];return(null==R?void 0:R.length)>0&&R.forEach((function(t,n){if(t.enabled&&t.name!==l.wO.primaryUserstoreName&&(null==A||!A.includes(t.name))){var r={disabled:t.typeName===s.uD.RemoteUserStoreManager,key:n,text:t.name,value:t.name};e.push(r)}})),e}),[R]);(0,m.useEffect)((function(){O()}),[]),(0,m.useEffect)((function(){var e,r,o,i,a,l;$&&t((0,d.V_)({description:null!==(e=null!==(r=null==$||null===(o=$.response)||void 0===o||null===(o=o.data)||void 0===o?void 0:o.description)&&void 0!==r?r:null==$||null===(i=$.response)||void 0===i||null===(i=i.data)||void 0===i?void 0:i.detail)&&void 0!==e?e:n("console:manage.features.groups.notifications.fetchGroups.genericError.description"),level:c.QU.ERROR,message:null!==(a=null==$||null===(l=$.response)||void 0===l||null===(l=l.data)||void 0===l?void 0:l.message)&&void 0!==a?a:n("console:manage.features.groups.notifications.fetchGroups.genericError.message")}))}),[$]);var te=function(e){H(e),T(1)},ne=function(e){t((0,d.V_)(e))};return m.createElement(f.Xg,{action:!q&&(null==W?void 0:W.totalResults)>0&&!K&&!X&&m.createElement(r.di,{when:null==I||null===(e=I.groups)||void 0===e||null===(e=e.scopes)||void 0===e?void 0:e.create},m.createElement(f.KM,{"data-testid":"group-mgt-groups-list-add-button",onClick:function(){return k(!0)}},m.createElement(h.Z,{name:"add"}),n("roles:list.buttons.addButton",{type:"Group"}))),title:n("pages:groups.title"),pageTitle:n("pages:groups.title"),description:m.createElement(m.Fragment,null,n("pages:groups.subTitle"),m.createElement(f.eb,{link:b("manage.groups.learnMore")},n("common:learnMore")))},m.createElement(f.PS,{advancedSearch:m.createElement(o.n,{"data-testid":"group-mgt-groups-list-advanced-search",onFilter:te,filterAttributeOptions:[{key:0,text:"Name",value:"displayName"}],filterAttributePlaceholder:n("console:manage.features.groups.advancedSearch.form.inputs.filterAttribute.placeholder"),filterConditionsPlaceholder:n("console:manage.features.groups.advancedSearch.form.inputs.filterCondition.placeholder"),filterValuePlaceholder:n("console:manage.features.groups.advancedSearch.form.inputs.filterValue.placeholder"),placeholder:n("console:manage.features.groups.advancedSearch.placeholder"),defaultSearchAttribute:"displayName",defaultSearchOperator:"co",triggerClearQuery:V,disableSearchAndFilterOptions:(null==W?void 0:W.totalResults)<=0&&!B}),currentListSize:null==W?void 0:W.itemsPerPage,listItemLimit:C,onItemsPerPageDropdownChange:function(e,t){P(t.value)},onPageChange:function(e,t){var n=(t.activePage-1)*C+1;T(n)},rightActionPanel:m.createElement(g.Z,{"data-testid":"group-mgt-groups-list-stores-dropdown",selection:!0,options:ee,placeholder:n("console:manage.features.groups.list.storeOptions"),onChange:function(e,t){z(null==t?void 0:t.value),T(1),P(a.r.DEFAULT_RESOURCE_LIST_ITEM_LIMIT)},defaultValue:l.wO.primaryUserstoreName}),showPagination:!0,totalPages:Math.ceil((null==W?void 0:W.totalResults)/C),totalListSize:null==W?void 0:W.totalResults,isLoading:q},$?m.createElement(f.$J,{subtitle:[n("console:manage.features.groups.placeholders.groupsError.subtitles.0"),n("console:manage.features.groups.placeholders.groupsError.subtitles.1")],title:n("console:manage.features.groups.placeholders.groupsError.title"),image:(0,i.jF)().genericError,imageSize:"tiny"}):m.createElement(j,{"data-testid":"group-mgt-groups-list",handleGroupDelete:function(e){(0,y.yq)(e.id).then((function(){ne({description:n("console:manage.features.groups.notifications.deleteGroup.success.description"),level:c.QU.SUCCESS,message:n("console:manage.features.groups.notifications.deleteGroup.success.message")}),J()})).catch((function(){ne({description:n("console:manage.features.groups.notifications.deleteGroup.genericError.description"),level:c.QU.ERROR,message:n("console:manage.features.groups.notifications.deleteGroup.error.message")})}))},onEmptyListPlaceholderActionClick:function(){return k(!0)},onSearchQueryClear:function(){Z(!V),te(null)},groupList:null==W?void 0:W.Resources,searchQuery:B,featureConfig:I,isReadOnlyUserStore:X,isUserstoreAddDisabled:K,isUserstoreDeleteDisabled:Y})),x&&m.createElement(Ze,{"data-componentid":"group-mgt-create-group-wizard",closeWizard:function(){return k(!1)},onCreate:function(){return J()},requiredSteps:[xe.BASIC_DETAILS,xe.ROLE_LIST],userSelectedUserStore:M}))}},9779:(e,t,n)=>{n.d(t,{A:()=>i,H:()=>o});var r=n(7231),o=function(e,t,n){var r=t.shift(),i=n.find((function(e){return e.name===r}));return i||(i={key:e.resourcePath,name:r,title:e.displayName},n.push(i)),t.length&&o(e,t,i.children||(i.children=[])),n},i=function(e,t){return!(!e||!t)&&(e===r.nL.IMPERSONATOR_ROLE_NAME&&t===r.nL.MY_ACCOUNT_APP_NAME)}},86485:(e,t,n)=>{n.d(t,{J:()=>y});var r,o=n(60486),i=n(76271),a=n(41355),l=n(10319),s=n(86105),u=n(61444),c=n(50699),d=n(9183),f=n(9779);function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,g(r.key),r)}}function v(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function h(e,t,n){return(t=g(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e){var t=function(e,t){if("object"!=m(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=m(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==m(t)?t:t+""}var y=v((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}));r=y,h(y,"validateRoleName",(function(e){var t={filter:"displayName eq "+e,schemas:["urn:ietf:params:scim:api:messages:2.0:SearchRequest"],startIndex:1};return(0,d.QW)(t).then((function(e){var t;return 0===(null==e||null===(t=e.data)||void 0===t?void 0:t.totalResults)}))})),h(y,"getAllPermissions",(function(e){return(0,d.pZ)().then((function(t){if(200===t.status&&t.data&&t.data instanceof Array){var n,r,i;return(null===(n=(r=((0,c.Z)(e)?t.data:t.data.filter((function(t){return!e.includes(t.resourcePath)}))).reduce((function(e,t){return(0,f.H)(t,t.resourcePath.replace(/^\/|\/$/g,"").split("/"),e)}),[]))[0])||void 0===n?void 0:n.title)!==o.$.PERMISSIONS_ROOT_NODE?null===(i=r[0])||void 0===i?void 0:i.children:r}}))})),h(y,"getDisplayName",(function(e){return(null==e?void 0:e.split("/").length)>1?null==e?void 0:e.split("/")[1]:e})),h(y,"getGroupDisplayName",(function(e){return r.getDisplayName(null==e?void 0:e.display)})),h(y,"getUserUsername",(function(e){return r.getDisplayName(null==e?void 0:e.userName)})),h(y,"getUserStore",(function(e){var t,n=(0,s.cr)(null===(t=i.h.getState().config)||void 0===t||null===(t=t.ui)||void 0===t||null===(t=t.features)||void 0===t?void 0:t.userStores,l.u4.FEATURE_DICTIONARY.get("USER_STORE_PRIMARY"));return(null==e?void 0:e.split("/").length)>1?null==e?void 0:e.split("/")[0]:n?u.I18n.instance.t("users:userstores.userstoreOptions.primary"):null})),h(y,"getNameToDisplayOfUser",(function(e){var t,n,o,i=null===(t=e.name)||void 0===t?void 0:t.givenName,a=null===(n=e.name)||void 0===n?void 0:n.familyName,l=null===(o=e.emails)||void 0===o||null===(o=o[0])||void 0===o?void 0:o.toString();return i&&a?"".concat(i," ").concat(a):i||(a||(l||r.getUserUsername(e)))})),h(y,"getUserManagedBy",(function(e){var t,n=null===(t=e[a.k.scim.systemSchema])||void 0===t?void 0:t.idpType;return n?n.split("/").length>1?n.split("/")[1]:n:null})),h(y,"getRoleGroupsGroupedByIdp",(function(e){var t=new Map;return(null==e?void 0:e.length)>0&&e.forEach((function(e){var n,r=e.$ref.match(/identity-providers\/([^/]+)/);n=r?r[1]:"LOCAL",t[n]||(t[n]=[]),t[n].push(e)})),t}))},6643:(e,t,n)=>{n.d(t,{CU:()=>r.CU,Dy:()=>r.Dy,F2:()=>o.F2,I_:()=>r.I_,KZ:()=>r.KZ,P_:()=>o.P_,QH:()=>r.QH,_g:()=>r._g,al:()=>r.al,t$:()=>r.t$});var r=n(22669),o=n(51318)},49581:(e,t,n)=>{n.d(t,{q:()=>s});var r=n(51021),o=n(50699),i=n(44194),a=n(29494),l=n(58613),s=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=(0,l.Z)(),u=s.userStoresList,c=s.isLoading,d=(0,i.useMemo)((function(){return e===r.wO.primaryUserstoreName?r.wO.primaryUserstoreId:!c&&u?null===(t=u.find((function(t){return t.name.toLowerCase()===e.toLowerCase()})))||void 0===t?void 0:t.id:void 0;var t}),[c,u]),f=(0,a.Z)(d,n&&!(0,o.Z)(d)),m=f.data,p=f.isLoading,v=f.error;return{data:(0,i.useMemo)((function(){if(!p&&m){var e=m.properties.find((function(e){var n;return(null==e||null===(n=e.name)||void 0===n?void 0:n.toLowerCase())===(null==t?void 0:t.toLowerCase())}));return null==e?void 0:e.value}}),[p,m]),error:v,isLoading:c||p}}},29494:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(96124),o=n(76271),i=n(6833),a=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n={headers:{Accept:"application/json","Content-Type":"application/json"},method:i.f2.GET,url:"".concat(o.h.getState().config.endpoints.userStores,"/").concat(e)},a=(0,r.Z)(t?n:null);return{data:a.data,error:a.error,isLoading:a.isLoading,isValidating:a.isValidating,mutate:a.mutate,response:a.response}}},58628:(e,t,n)=>{n.d(t,{r:()=>m});var r,o,i,a,l,s,u=n(44194),c=["title","titleId"];function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d.apply(null,arguments)}var f=function(e,t){var n=e.title,f=e.titleId,m=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,c);return u.createElement("svg",d({id:"report-icon",className:"icon",width:14,height:14,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 512 512",xmlSpace:"preserve",ref:t,"aria-labelledby":f},m),n?u.createElement("title",{id:f},n):null,r||(r=u.createElement("g",null,u.createElement("g",null,u.createElement("path",{className:"path primary",d:"M502,208.749h-64c-5.523,0-10,4.478-10,10v50.5c0,5.522,4.477,10,10,10s10-4.478,10-10v-40.5h44V492h-22h-22V344.249 c0-5.522-4.477-10-10-10s-10,4.478-10,10V492h-20V285c0-5.522-4.477-10-10-10h-64c-5.523,0-10,4.478-10,10v207h-20V355 c0-5.522-4.477-10-10-10h-64c-5.523,0-10,4.478-10,10v137h-20v-79.625c0-5.522-4.477-10-10-10h-64c-5.523,0-10,4.478-10,10V492H30 c-5.514,0-10-4.486-10-10V30c0-5.514,4.486-10,10-10h257.975v66.003c0,16.542,13.458,30,30,30h66V239c0,5.522,4.477,10,10,10 s10-4.478,10-10V106.003c0-2.652-1.054-5.195-2.929-7.071l-96-96.003C303.17,1.054,300.627,0,297.975,0H30C13.458,0,0,13.458,0,30 v452c0,16.542,13.458,30,30,30h472c5.523,0,10-4.478,10-10V218.749C512,213.227,507.523,208.749,502,208.749z M307.975,34.143 l61.859,61.86h-51.859c-5.515,0-10-4.486-10-10V34.143z M180,492h-44v-69.625h44V492z M284,492h-44V365h44V492z M388,492h-44V295 h44V492z"})))),o||(o=u.createElement("g",null,u.createElement("g",null,u.createElement("path",{className:"path secondary",d:"M445.07,297.82c-1.86-1.869-4.44-2.93-7.07-2.93s-5.21,1.061-7.07,2.93c-1.86,1.86-2.93,4.44-2.93,7.07 s1.07,5.21,2.93,7.07c1.86,1.859,4.44,2.93,7.07,2.93s5.21-1.07,7.07-2.93s2.93-4.44,2.93-7.07S446.93,299.68,445.07,297.82z"})))),i||(i=u.createElement("g",null,u.createElement("g",null,u.createElement("path",{className:"path primary",d:"M145.577,54.729c-5.523,0-10,4.478-10,10v17.989c-46.031,4.997-81.975,44.097-81.975,91.435 c0,50.715,41.26,91.975,91.975,91.975c47.338,0,86.438-35.943,91.435-81.975H255c5.523,0,10-4.478,10-10 C265,108.302,211.427,54.729,145.577,54.729z M145.577,246.127c-39.687,0-71.975-32.288-71.975-71.975 c0-36.293,27.005-66.399,61.975-71.282v71.282c0,5.522,4.477,10,10,10h71.282C211.976,219.122,181.87,246.127,145.577,246.127z  M155.577,164.153v-0.001V75.228c46.852,4.702,84.222,42.073,88.924,88.925H155.577z"})))),a||(a=u.createElement("g",null,u.createElement("g",null,u.createElement("path",{className:"path secondary",d:"M255,294.25H64c-5.523,0-10,4.478-10,10c0,5.522,4.477,10,10,10h191c5.523,0,10-4.478,10-10 C265,298.728,260.523,294.25,255,294.25z"})))),l||(l=u.createElement("g",null,u.createElement("g",null,u.createElement("path",{className:"path primary",d:"M128,342.5H64c-5.523,0-10,4.478-10,10c0,5.522,4.477,10,10,10h64c5.523,0,10-4.478,10-10 C138,346.978,133.523,342.5,128,342.5z"})))),s||(s=u.createElement("g",null,u.createElement("g",null,u.createElement("path",{className:"path secondary",d:"M185.15,345.43c-1.86-1.86-4.44-2.93-7.07-2.93c-2.64,0-5.21,1.069-7.07,2.93c-1.87,1.86-2.93,4.44-2.93,7.07 s1.06,5.21,2.93,7.069c1.86,1.86,4.43,2.931,7.07,2.931c2.63,0,5.21-1.07,7.07-2.931c1.86-1.859,2.93-4.439,2.93-7.069 S187.01,347.29,185.15,345.43z"})))))},m=(0,u.forwardRef)(f);n.p}}]);