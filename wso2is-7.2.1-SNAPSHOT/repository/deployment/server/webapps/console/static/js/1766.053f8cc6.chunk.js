"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[1766],{31766:(t,e,n)=>{n.r(e),n.d(e,{GovernanceConnectorsPage:()=>B,default:()=>G});var o=n(60486),r=n(90302),i=n(40838),c=n(51021),s=n(86105),a=n(6833),l=n(82406),u=n(16590),d=n(20494),p=n(44194),f=n(10479),h=n(47245),g=n(41206),m=n(89141),v=n(25340),y=n(14517),C=n(68049),R=n(36374),k=n(18413),T=n(6892);function E(t){var e=t.attached,n=t.children,o=t.className,r=t.close,i=t.content,c=t.dividing,s=t.internal,a=t.position,l=t.size,u=(0,y.Z)("ui",a,l,(0,C.lG)(e,"attached"),(0,C.lG)(c,"dividing"),(0,C.lG)(s,"internal"),(0,C.sU)(r,"close"),"rail",o),d=(0,R.Z)(E,t),f=(0,k.Z)(E,t);return p.createElement(f,(0,v.Z)({},d,{className:u}),T.kK(n)?i:n)}E.handledProps=["as","attached","children","className","close","content","dividing","internal","position","size"],E.propTypes={};const b=E;var S=n(26509),x=n(9692),A=n(31010),w=n(10402),Z=n(22599),L=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))||this).state={active:!0,sticky:!1},e.stickyRef=(0,p.createRef)(),e.triggerRef=(0,p.createRef)(),e.addListeners=function(t){var n=(0,A.I)(t)?t.current:t;n&&(w.Z.sub("resize",e.handleUpdate,{target:n}),w.Z.sub("scroll",e.handleUpdate,{target:n}))},e.removeListeners=function(t){var n=(0,A.I)(t)?t.current:t;n&&(w.Z.unsub("resize",e.handleUpdate,{target:n}),w.Z.unsub("scroll",e.handleUpdate,{target:n}))},e.update=function(t){var n=e.state.pushing;if(e.ticking=!1,e.assignRects(),n)return e.didReachStartingPoint()?e.stickToContextTop(t):e.didTouchScreenBottom()?e.stickToScreenBottom(t):e.stickToContextBottom(t);if(e.isOversized()){if(e.contextRect.top>0)return e.stickToContextTop(t);if(e.contextRect.bottom<window.innerHeight)return e.stickToContextBottom(t)}return e.didTouchScreenTop()?e.didReachContextBottom()?e.stickToContextBottom(t):e.stickToScreenTop(t):e.stickToContextTop(t)},e.handleUpdate=function(t){e.ticking||(e.ticking=!0,e.frameId=requestAnimationFrame((function(){return e.update(t)})))},e.assignRects=function(){var t=e.props.context,n=(0,A.I)(t)?t.current:t||document.body;e.triggerRect=e.triggerRef.current.getBoundingClientRect(),e.contextRect=n.getBoundingClientRect(),e.stickyRect=e.stickyRef.current.getBoundingClientRect()},e.didReachContextBottom=function(){var t=e.props.offset;return e.stickyRect.height+t>=e.contextRect.bottom},e.didReachStartingPoint=function(){return e.stickyRect.top<=e.triggerRect.top},e.didTouchScreenTop=function(){return e.triggerRect.top<e.props.offset},e.didTouchScreenBottom=function(){var t=e.props.bottomOffset;return e.contextRect.bottom+t>window.innerHeight},e.isOversized=function(){return e.stickyRect.height>window.innerHeight},e.pushing=function(t){e.props.pushing&&e.setState({pushing:t})},e.stick=function(t,n){e.setState({bound:n,sticky:!0}),(0,x.Z)(e.props,"onStick",t,e.props)},e.unstick=function(t,n){e.setState({bound:n,sticky:!1}),(0,x.Z)(e.props,"onUnstick",t,e.props)},e.stickToContextBottom=function(t){(0,x.Z)(e.props,"onBottom",t,e.props),e.stick(t,!0),e.pushing(!0)},e.stickToContextTop=function(t){(0,x.Z)(e.props,"onTop",t,e.props),e.unstick(t,!1),e.pushing(!1)},e.stickToScreenBottom=function(t){var n=e.props.bottomOffset;e.stick(t,!1),e.setState({bottom:n,top:null})},e.stickToScreenTop=function(t){var n=e.props.offset;e.stick(t,!1),e.setState({top:n,bottom:null})},e}(0,S.Z)(e,t);var n=e.prototype;return n.componentDidMount=function(){(0,Z.Z)()&&(this.state.active&&(this.handleUpdate(),this.addListeners(this.props.scrollContext)))},e.getDerivedStateFromProps=function(t,e){return e.active===t.active||t.active?{active:t.active}:{active:t.active,sticky:!1}},n.componentDidUpdate=function(t,e){if(e.active!==this.state.active)return this.state.active?(this.handleUpdate(),void this.addListeners(this.props.scrollContext)):void this.removeListeners(t.scrollContext);t.scrollContext!==this.props.scrollContext&&(this.removeListeners(t.scrollContext),this.addListeners(this.props.scrollContext))},n.componentWillUnmount=function(){(0,Z.Z)()&&(this.state.active&&(this.removeListeners(this.props.scrollContext),cancelAnimationFrame(this.frameId)))},n.computeStyle=function(){var t=this.props.styleElement,e=this.state,n=e.bottom,o=e.bound,r=e.sticky,i=e.top;return r?(0,v.Z)({bottom:o?0:n,top:o?void 0:i,width:this.triggerRect.width},t):t},n.render=function(){var t=this.props,n=t.children,o=t.className,r=this.state,i=r.bottom,c=r.bound,s=r.sticky,a=(0,R.Z)(e,this.props),l=(0,k.Z)(e,this.props),u=(0,y.Z)(s&&"ui",s&&"stuck-container",s&&(c?"bound-container":"fixed-container"),o),d=(0,y.Z)("ui",s&&(c?"bound bottom":"fixed"),s&&!c&&(null===i?"top":"bottom"),"sticky"),f=s&&this.stickyRect?{height:this.stickyRect.height}:{};return p.createElement(l,(0,v.Z)({},a,{className:u}),p.createElement("div",{ref:this.triggerRef,style:f}),p.createElement("div",{className:d,ref:this.stickyRef,style:this.computeStyle()},n))},e}(p.Component);L.handledProps=["active","as","bottomOffset","children","className","context","offset","onBottom","onStick","onTop","onUnstick","pushing","scrollContext","styleElement"],L.propTypes={},L.defaultProps={active:!0,bottomOffset:0,offset:0,scrollContext:(0,Z.Z)()?window:null};var O=n(71551),_=n(4717),I=n(59314),N=n(47149);function H(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var o,r,i,c,s=[],a=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;a=!1}else for(;!(a=(o=i.call(n)).done)&&(s.push(o.value),s.length!==e);a=!0);}catch(t){l=!0,r=t}finally{try{if(!a&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(l)throw r}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return U(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?U(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}var B=function(t){var e=t["data-testid"],n=(0,h.I0)(),v=(0,p.useRef)(null),y=(0,f.$)().t,C=(0,d.UA)({footerHeight:r.r.DEFAULT_FOOTER_HEIGHT,headerHeight:r.r.DEFAULT_HEADER_HEIGHT,topLoadingBarHeight:r.r.AJAX_TOP_LOADING_BAR_HEIGHT}),R=C.headerHeight,k=C.footerHeight,T=(0,h.v9)((function(t){return t.config.ui.features})),E=(0,h.v9)((function(t){var e;return null==t||null===(e=t.auth)||void 0===e?void 0:e.allowedScopes})),S=H((0,p.useState)({}),2),x=S[0],A=S[1],w=H((0,p.useState)([]),2),Z=w[0],U=w[1],B=H((0,p.useState)(null),2),G=B[0],P=B[1],D=R+r.r.PAGE_SCROLL_TOP_PADDING;(0,p.useEffect)((function(){var t;(0,s.Xr)(null==T?void 0:T.governanceConnectors,null==T||null===(t=T.governanceConnectors)||void 0===t||null===(t=t.scopes)||void 0===t?void 0:t.read,E)&&z()}),[]);var K=i.m.location.pathname.split("/"),F=K.length>0?K[K.length-1]:"",z=function(){(0,_.Qy)(F).then((function(t){t.connectors.map((function(t){t.categoryId=F,t.ref=p.createRef()})),A(t),U(null==t?void 0:t.connectors),!G&&P(t.connectors[0])})).catch((function(t){t.response&&t.response.data&&t.response.data.detail?n((0,l.V_)({description:y("governanceConnectors:notifications.getConnector.error.description",{description:t.response.data.description}),level:a.QU.ERROR,message:y("governanceConnectors:notifications.getConnector.error.message")})):n((0,l.V_)({description:y("governanceConnectors:notifications.getConnector.genericError.description"),level:a.QU.ERROR,message:y("governanceConnectors:notifications.getConnector.genericError.message")}))}))},j=function(t){if(null!=t&&t.connectors)return t.connectors[0].categoryId===N.v.MFA_CONNECTOR_CATEGORY_ID?y("governanceConnectors:connectorCategories.multiFactorAuthenticators.friendlyName"):t.name};return p.createElement(d.Xg,{title:c.KL.showPageHeading&&j(x),pageTitle:c.KL.showPageHeading&&j(x),description:c.KL.showPageHeading&&(null!=x&&x.description?x.description:(null==x?void 0:x.name)&&y("governanceConnectors:connectorSubHeading",{name:F===N.v.OTHER_SETTINGS_CONNECTOR_CATEGORY_ID?x.name.split(" ")[0]:x.name})),backButton:{onClick:function(){i.m.push(o.$.getPaths().get("LOGIN_AND_REGISTRATION"))},text:y("governanceConnectors:goBackLoginAndRegistration")},"data-testid":"".concat(e,"-page-layout")},p.createElement(g.R,{innerRef:v},p.createElement(m.Z,null,p.createElement(m.Z.Row,{columns:2},p.createElement(m.Z.Column,{width:c.KL.showGovernanceConnectorCategories?12:16},p.createElement(m.Z,null,Z&&Array.isArray(Z)&&Z.length>0?Z.map((function(t,n){if(c.KL.connectorsToShow.includes(t.name)||c.KL.connectorsToShow.includes(N.v.ALL)&&!c.KL.connectorsToHide.includes(t.id)){var o=p.createElement(m.Z.Row,{ref:t.ref},p.createElement(I.k,{connector:t,"data-testid":"".concat(e,"-")+(null==t?void 0:t.id),onUpdate:function(){return z()}}));return c.KL.renderConnectorWithinEmphasizedSegment?p.createElement(d.pJ,{key:n,padded:"very"},o):o}})):null),c.KL.showGovernanceConnectorCategories&&p.createElement(b,{className:"non-emphasized",position:"right",close:"very"},p.createElement(L,{context:v,offset:D,bottomOffset:k},Z&&Array.isArray(Z)&&Z.length>0&&p.createElement(p.Fragment,null,p.createElement("h5",null,y("governanceConnectors:categories")),p.createElement(O.Z,{secondary:!0,vertical:!0,className:"governance-connector-categories"},Z.map((function(t,e){return p.createElement(O.Z.Item,{as:"a",key:e,className:(null==G?void 0:G.id)===(null==t?void 0:t.id)?"active":"",onClick:function(){var e;u.CommonUtils.scrollToTarget(null==t||null===(e=t.ref)||void 0===e?void 0:e.current,D),P(t)}},t.friendlyName)})))))))))))};B.defaultProps={"data-testid":"governance-connectors-page"};const G=B}}]);