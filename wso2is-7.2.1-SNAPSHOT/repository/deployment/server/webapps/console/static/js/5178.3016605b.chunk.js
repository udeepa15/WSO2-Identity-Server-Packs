"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[5178],{95178:(e,t,n)=>{n.r(t),n.d(t,{default:()=>D});var l=n(55007),i=n(6894),a=n(13550),c=n(60486),r=n(40838),o=n(51021),m=n(21257),d=n(58613),s=n(6833),u=n(82406),E=n(20494),g=n(44194),p=n(10479),h=n(47245),A=n(41193),f=n(62508),Z=n(12638),I=n(73432),v=n(89141),b=n(26154),C=n(93682),T=n(31302),S=n(12252);function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var l,i,a,c,r=[],o=!0,m=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(l=a.call(n)).done)&&(r.push(l.value),r.length!==t);o=!0);}catch(e){m=!0,i=e}finally{try{if(!o&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(m)throw i}}return r}}(e,t)||function(e,t){if(e){if("string"==typeof e)return M(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?M(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,l=Array(t);n<t;n++)l[n]=e[n];return l}var w=function(e){var t,n,M,w,D,N=e["data-testid"],_=(0,p.$)().t,R=(0,E.fQ)().getLink,U=(0,h.v9)((function(e){return e.config.ui.features})),P=(0,l.EV)(null==U||null===(t=U.attributeDialects)||void 0===t||null===(t=t.scopes)||void 0===t?void 0:t.read),k=(0,l.EV)(null==U||null===(n=U.attributeDialects)||void 0===n||null===(n=n.scopes)||void 0===n?void 0:n.update),L=(0,l.EV)(null==U||null===(M=U.attributeVerification)||void 0===M||null===(M=M.scopes)||void 0===M?void 0:M.read),Q=(0,d.Z)(),G=Q.filterUserStores,O=Q.userStoresList,B=Q.mutateUserStoreList,H=(0,m.z)().isSubOrganization,x=y((0,g.useState)(!1),2),z=x[0],$=x[1],J=y((0,g.useState)(!0),2),j=J[0],V=J[1],X=y((0,g.useState)([]),2),F=X[0],K=X[1],q=y((0,g.useState)([]),2),W=q[0],Y=q[1],ee=y((0,g.useState)([]),2),te=ee[0],ne=ee[1],le=y((0,g.useState)([]),2),ie=le[0],ae=le[1],ce=y((0,g.useState)([]),2),re=ce[0],oe=ce[1],me=(0,h.I0)(),de=(0,h.v9)((function(e){return e.config.ui.listAllAttributeDialects})),se=(0,h.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t?void 0:t.userSchemaURI})),ue=(0,g.useMemo)((function(){var e;return null===(e=G(!1,!1,!0,!0))||void 0===e?void 0:e.length}),[O]),Ee=!k||H()&&ue<1,ge=function(e,t,n,l){V(!0),(0,i.jp)({filter:l,limit:e,offset:t,sort:n}).then((function(e){var t=e.filter((function(e){return de?"local"!==e.id&&e.id!==S.QN.ATTRIBUTE_DIALECT_IDS.get("XML_SOAP")&&e.id!=S.QN.ATTRIBUTE_DIALECT_IDS.get("OPENID_NET"):e.id!=S.QN.ATTRIBUTE_DIALECT_IDS.get("LOCAL")&&e.id!=S.QN.ATTRIBUTE_DIALECT_IDS.get("AXSCHEMA")&&e.id!=S.QN.ATTRIBUTE_DIALECT_IDS.get("EIDAS_LEGAL")&&e.id!=S.QN.ATTRIBUTE_DIALECT_IDS.get("EIDAS_NATURAL")&&e.id!=S.QN.ATTRIBUTE_DIALECT_IDS.get("OPENID_NET")&&e.id!=S.QN.ATTRIBUTE_DIALECT_IDS.get("XML_SOAP")})),n=[],l=[],i=[],a=[],c=[],r=[];t.forEach((function(e){S.QN.OIDC_MAPPING.includes(e.dialectURI)?n.push(e):S.QN.AGENT_SCIM_SCHEMA_MAPPING.includes(e.dialectURI)?c.push(e):Object.values(S.QN.SCIM_TABS).map((function(e){return e.uri})).includes(e.dialectURI)?l.push(e):S.QN.AXSCHEMA_MAPPING===e.dialectURI?i.push(e):Object.values(S.QN.EIDAS_TABS).map((function(e){return e.uri})).includes(e.dialectURI)?a.push(e):o.rk.showCustomDialectInSCIM?e.dialectURI!==se&&r.push(e):r.push(e)})),K(n),Y(l),ne(i),ae(null),oe(r)})).catch((function(e){var t,n;me((0,u.V_)({description:(null==e||null===(t=e.response)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.description)||_("claims:dialects.notifications.fetchDialects.genericError.description"),level:s.QU.ERROR,message:(null==e||null===(n=e.response)||void 0===n||null===(n=n.data)||void 0===n?void 0:n.message)||_("claims:dialects.notifications.fetchDialects.genericError.message")}))})).finally((function(){V(!1)}))};(0,g.useEffect)((function(){ge(),B()}),[]);var pe=function(){return g.createElement(A.Z,null,g.createElement(A.Z.Header,null,g.createElement(A.Z.Line,null)))},he=function(){return g.createElement(E.pJ,null,g.createElement(A.Z,{fluid:!0},g.createElement(A.Z.Header,{image:!0},g.createElement(A.Z.Line,{length:"very short"}),g.createElement(A.Z.Line,null))))};return g.createElement(g.Fragment,null,o.rk.addAttributeMapping&&z&&g.createElement(T.$E,{open:z,onClose:function(){$(!1)},update:ge,"data-testid":"".concat(N,"-add-dialect-wizard")}),g.createElement(E.Xg,{pageTitle:"Attributes",title:_("claims:dialects.pageLayout.list.title"),description:g.createElement(g.Fragment,null,_("claims:dialects.pageLayout.list.description"),g.createElement(E.eb,{link:R("manage.userStores.attributeMappings.learnMore")},_("common:learnMore"))),"data-testid":"".concat(N,"-page-layout")},g.createElement(E.Me,{showTopActionPanel:!1},P&&(j?g.createElement(g.Fragment,null,pe(),g.createElement(f.Z,{hidden:!0}),he()):g.createElement(g.Fragment,null,g.createElement(Z.Z,{as:"h4"},_("claims:dialects.sections.manageAttributes.heading")),g.createElement(f.Z,{hidden:!0}),g.createElement(E.pJ,{onClick:function(){r.m.push(c.$.getPaths().get("LOCAL_CLAIMS"))},className:"clickable","data-testid":"".concat(N,"-local-dialect-container")},g.createElement(I.Z,null,g.createElement(I.Z.Item,null,g.createElement(v.Z,null,g.createElement(v.Z.Row,{columns:2},g.createElement(v.Z.Column,{width:12},g.createElement(E.dn,{verticalAlign:"middle",fill:"primary",transparent:!0,icon:(0,a.Uz)().claims,spaced:"right",size:"mini",floated:"left"}),g.createElement(I.Z.Header,null,_("claims:dialects.sections.manageAttributes.attributes.heading")),g.createElement(I.Z.Description,{"data-testid":"".concat(N,"-local-dialect")},_("claims:dialects.sections.manageAttributes.attributes.description"))),g.createElement(v.Z.Column,{width:4,verticalAlign:"middle",textAlign:"right","data-testid":"".concat(N,"-local-dialect-")+"attributes-edit-icon"},g.createElement(E.GI,{content:_(Ee?"common:view":"common:edit"),trigger:Ee?g.createElement(b.Z,{color:"grey",name:"eye"}):g.createElement(b.Z,{color:"grey",name:"pencil"}),inverted:!0}))))))),!H()&&(null==U||null===(w=U.attributeVerification)||void 0===w?void 0:w.enabled)&&L&&g.createElement(E.pJ,{onClick:function(){r.m.push(c.$.getPaths().get("CLAIM_VERIFICATION_SETTINGS"))},className:"clickable","data-testid":"".concat(N,"-attribute-verification-settings-container")},g.createElement(I.Z,null,g.createElement(I.Z.Item,null,g.createElement(v.Z,null,g.createElement(v.Z.Row,{columns:2},g.createElement(v.Z.Column,{width:12},g.createElement(E.dn,{verticalAlign:"middle",fill:"primary",transparent:!0,icon:(0,a.Uz)().gears,spaced:"right",size:"mini",floated:"left"}),g.createElement(I.Z.Header,null,_("governanceConnectors:connectorCategories.otherSettings.connectors.userClaimUpdate.friendlyName")),g.createElement(I.Z.Description,{"data-testid":"".concat(N,"-attribute-verification")+"-settings"},_("governanceConnectors:connectorCategories.otherSettings.connectors.userClaimUpdate.subTitle"))),g.createElement(v.Z.Column,{width:4,verticalAlign:"middle",textAlign:"right","data-testid":"".concat(N,"-attribute-verification-")+"settings-edit-icon"},g.createElement(E.GI,{content:_(k?"common:configure":"common:view"),trigger:k?g.createElement(b.Z,{color:"grey",name:"pencil"}):g.createElement(b.Z,{color:"grey",name:"eye"}),inverted:!0}))))))))),g.createElement(f.Z,{hidden:!0}),g.createElement(f.Z,{hidden:!0}),g.createElement(f.Z,null),g.createElement(f.Z,{hidden:!0}),g.createElement(v.Z,null,g.createElement(v.Z.Row,{columns:2},g.createElement(v.Z.Column,{width:12,verticalAlign:"middle"},j?pe():g.createElement(Z.Z,{as:"h4"},_("claims:dialects.sections.manageAttributeMappings.heading"))),g.createElement(v.Z.Column,{width:4,verticalAlign:"middle",textAlign:"right"},o.rk.addAttributeMapping&&g.createElement(l.di,{when:null==U||null===(D=U.attributeDialects)||void 0===D||null===(D=D.scopes)||void 0===D?void 0:D.create},g.createElement(E.KM,{disabled:j,loading:j,onClick:function(){$(!0)},"data-testid":"".concat(N,"-list-layout-add-button")},g.createElement(b.Z,{name:"add"}),_("claims:dialects.pageLayout.list.primaryAction")))))),g.createElement(f.Z,{hidden:!0}),j?he():(null==F?void 0:F.length)>0&&g.createElement(E.pJ,{className:"clickable","data-testid":"".concat(N,"-oidc-dialect-container")},g.createElement(I.Z,null,g.createElement(I.Z.Item,{onClick:function(){r.m.push(c.$.getPaths().get("ATTRIBUTE_MAPPINGS").replace(":type",S.QN.OIDC).replace(":customAttributeMappingID",""))}},g.createElement(v.Z,null,g.createElement(v.Z.Row,{columns:2},g.createElement(v.Z.Column,{width:12},g.createElement(E.dn,{transparent:!0,verticalAlign:"middle",rounded:!0,icon:(0,a.r2)().oidc,spaced:"right",size:"mini",floated:"left"}),g.createElement(I.Z.Header,null,_("claims:dialects.sections.manageAttributeMappings.oidc.heading")),g.createElement(I.Z.Description,{"data-testid":"".concat(N,"-local-dialect")},_("claims:attributeMappings.oidc.description"))),g.createElement(v.Z.Column,{width:4,verticalAlign:"middle",textAlign:"right"},g.createElement(E.GI,{content:k&&!H()?_("common:edit"):_("common:view"),trigger:k&&!H()?g.createElement(b.Z,{color:"grey",name:"pencil"}):g.createElement(b.Z,{color:"grey",name:"eye"}),inverted:!0}))))))),j?he():(null==W?void 0:W.length)>0&&g.createElement(E.pJ,{onClick:function(){r.m.push(c.$.getPaths().get("ATTRIBUTE_MAPPINGS").replace(":type",S.QN.SCIM).replace(":customAttributeMappingID",""))},className:"clickable","data-testid":"".concat(N,"-scim-dialect-container")},g.createElement(I.Z,null,g.createElement(I.Z.Item,null,g.createElement(v.Z,null,g.createElement(v.Z.Row,{columns:2},g.createElement(v.Z.Column,{width:12},g.createElement(E.dn,{verticalAlign:"middle",rounded:!0,icon:(0,a.r2)().scim,spaced:"right",size:"mini",floated:"left"}),g.createElement(I.Z.Header,null,_("claims:dialects.sections.manageAttributeMappings.scim.heading")),g.createElement(I.Z.Description,{"data-testid":"".concat(N,"-local-dialect")},_("claims:attributeMappings.scim.description"))),g.createElement(v.Z.Column,{width:4,verticalAlign:"middle",textAlign:"right"},g.createElement(E.GI,{content:k&&o.rk.isSCIMEditable&&!H()?_("common:edit"):_("common:view"),trigger:k&&o.rk.isSCIMEditable&&!H()?g.createElement(b.Z,{color:"grey",name:"pencil"}):g.createElement(b.Z,{color:"grey",name:"eye"}),inverted:!0}))))))),j?he():(null==te?void 0:te.length)>0&&g.createElement(E.pJ,{className:"clickable","data-testid":"".concat(N,"-axschema-dialect-container")},g.createElement(I.Z,null,g.createElement(I.Z.Item,{onClick:function(){r.m.push(c.$.getPaths().get("ATTRIBUTE_MAPPINGS").replace(":type",S.QN.AXSCHEMA).replace(":customAttributeMappingID",""))}},g.createElement(v.Z,null,g.createElement(v.Z.Row,{columns:2},g.createElement(v.Z.Column,{width:12},g.createElement(E.dn,{verticalAlign:"middle",rounded:!0,icon:(0,a.r2)().axschema,spaced:"right",size:"mini",floated:"left"}),g.createElement(I.Z.Header,null,_("claims:attributeMappings.axschema.heading")),g.createElement(I.Z.Description,{"data-testid":"".concat(N,"-local-dialect")},_("claims:attributeMappings.axschema.description"))),g.createElement(v.Z.Column,{width:4,verticalAlign:"middle",textAlign:"right"},g.createElement(E.GI,{content:k&&!H()?_("common:edit"):_("common:view"),trigger:k&&!H()?g.createElement(b.Z,{color:"grey",name:"pencil"}):g.createElement(b.Z,{color:"grey",name:"eye"}),inverted:!0}))))))),j?he():(null==ie?void 0:ie.length)>0&&g.createElement(E.pJ,{className:"clickable","data-testid":"".concat(N,"-eidas-dialect-container")},g.createElement(I.Z,null,g.createElement(I.Z.Item,{onClick:function(){r.m.push(c.$.getPaths().get("ATTRIBUTE_MAPPINGS").replace(":type",S.QN.EIDAS).replace(":customAttributeMappingID",""))}},g.createElement(v.Z,null,g.createElement(v.Z.Row,{columns:2},g.createElement(v.Z.Column,{width:12},g.createElement(E.dn,{transparent:!0,verticalAlign:"middle",rounded:!0,icon:(0,a.r2)().eidas,spaced:"right",size:"mini",floated:"left"}),g.createElement(I.Z.Header,null,_("claims:attributeMappings.eidas.heading")),g.createElement(I.Z.Description,{"data-testid":"".concat(N,"-local-dialect")},_("claims:attributeMappings.eidas.description"))),g.createElement(v.Z.Column,{width:4,verticalAlign:"middle",textAlign:"right"},g.createElement(E.GI,{content:k&&!H()?_("common:edit"):_("common:view"),trigger:k&&!H()?g.createElement(b.Z,{color:"grey",name:"pencil"}):g.createElement(b.Z,{color:"grey",name:"eye"}),inverted:!0}))))))),o.rk.showCustomAttributeMapping&&(j?he():(null==re?void 0:re.length)>0&&re.map((function(e){return g.createElement(E.pJ,{key:e.dialectURI,onClick:function(){r.m.push(c.$.getPaths().get("ATTRIBUTE_MAPPINGS").replace(":type",S.QN.OTHERS).replace(":customAttributeMappingID",e.id))},className:"clickable","data-testid":"".concat(N,"-other-dialect-container")},g.createElement(I.Z,null,g.createElement(I.Z.Item,null,g.createElement(v.Z,null,g.createElement(v.Z.Row,{columns:2},g.createElement(v.Z.Column,{width:12},g.createElement(C.Z,{floated:"left",verticalAlign:"middle",rounded:!0,centered:!0,size:"mini"},g.createElement(E.Xo,null),g.createElement("span",{className:"claims-letter"},e.dialectURI.charAt(0).toUpperCase())),g.createElement(I.Z.Header,null,e.dialectURI),g.createElement(I.Z.Description,{"data-testid":"".concat(N,"-local-dialect")},_("claims:attributeMappings.custom.description"))),g.createElement(v.Z.Column,{width:4,verticalAlign:"middle",textAlign:"right"},g.createElement(E.GI,{content:k&&!H()?_("common:edit"):_("common:view"),trigger:g.createElement(b.Z,{color:"grey",name:k&&!H()?"pencil":"eye"}),inverted:!0})))))))}))))))};w.defaultProps={"data-testid":"attribute-dialects"};const D=w}}]);