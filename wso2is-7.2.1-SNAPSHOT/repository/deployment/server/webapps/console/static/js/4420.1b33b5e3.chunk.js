"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[4420],{80854:(e,n,t)=>{t.d(n,{H8:()=>O,dE:()=>C,xR:()=>m});var r,o=t(2292),i=t(22100),a=t(96124),s=t(43939),c=t(6833),l=t(60507);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function d(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,g(r.key),r)}}function E(e,n,t){return n&&d(e.prototype,n),t&&d(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function f(e,n,t){return(n=g(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function g(e){var n=function(e,n){if("object"!=u(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==u(n)?n:n+""}var _=E((function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e)}));r=_,f(_,"WS_FEDERATION_CONFIG_FETCH_ERROR_CODE","WFC-00001"),f(_,"WS_FEDERATION_CONFIG_FETCH_INVALID_STATUS_CODE_ERROR_CODE","WFC-00002"),f(_,"WS_FEDERATION_CONFIG_UPDATE_ERROR_CODE","WFC-00003"),f(_,"WS_FEDERATION_CONFIG_REVERT_INVALID_STATUS_CODE_ERROR_CODE","WFC-00004"),f(_,"WS_FEDERATION_CONFIG_REVERT_ERROR_CODE","WFC-00005"),f(_,"ErrorMessages",{WS_FEDERATION_CONFIG_FETCH_ERROR_CODE:new l.O(r.WS_FEDERATION_CONFIG_FETCH_ERROR_CODE,"An error occurred while fetching the WS Federation configurations.","Error while fetching the WS Federation configurations",null),WS_FEDERATION_CONFIG_FETCH_INVALID_STATUS_CODE_ERROR_CODE:new l.O(r.WS_FEDERATION_CONFIG_FETCH_INVALID_STATUS_CODE_ERROR_CODE,"Received an invalid status code while fetching the WS Federation configurations.","Invalid Status Code while fetching the WS Federation configurations",null),WS_FEDERATION_CONFIG_REVERT_ERROR_CODE:new l.O(r.WS_FEDERATION_CONFIG_REVERT_ERROR_CODE,"An error occurred while reverting the WS Federation configurations.","Error while reverting the WS Federation configurations",null),WS_FEDERATION_CONFIG_REVERT_INVALID_STATUS_CODE_ERROR_CODE:new l.O(r.WS_FEDERATION_CONFIG_REVERT_INVALID_STATUS_CODE_ERROR_CODE,"Received an invalid status code while reverting the WS Federation configurations.","Invalid Status Code while reverting the WS Federation configurations",null),WS_FEDERATION_CONFIG_UPDATE_ERROR_CODE:new l.O(r.WS_FEDERATION_CONFIG_UPDATE_ERROR_CODE,"An error occurred while updating the WS Federation configurations.","Error while updating the WS Federation configurations",null)});var R=o.AsgardeoSPAClient.getInstance().httpRequest.bind(o.AsgardeoSPAClient.getInstance()),m=function(){var e={headers:{Accept:"application/json","Content-Type":"application/json"},method:c.f2.GET,url:i.D.getServiceResourceEndpoints().passiveStsConfigurations},n=(0,a.Z)(e),t=n.data,r=n.error;return{data:t,error:r,isLoading:!r&&!t,isValidating:n.isValidating,mutate:n.mutate}},C=function(e){var n={data:e,headers:{Accept:"application/json","Content-Type":"application/json"},method:c.f2.PATCH,url:i.D.getServiceResourceEndpoints().passiveStsConfigurations};return R(n).then((function(e){if(200!==e.status&&201!==e.status)throw new s.u(_.ErrorMessages.WS_FEDERATION_CONFIG_FETCH_INVALID_STATUS_CODE_ERROR_CODE.getErrorMessage(),null,e.status,e.request,e,e.config);return Promise.resolve(e.data)})).catch((function(e){var n,t=_.ErrorMessages.WS_FEDERATION_CONFIG_UPDATE_ERROR_CODE.getErrorMessage();throw new s.u(t,e.stack,null===(n=e.response)||void 0===n||null===(n=n.data)||void 0===n?void 0:n.code,e.request,e.response,e.config)}))},O=function(){var e={headers:{Accept:"application/json","Content-Type":"application/json"},method:c.f2.DELETE,url:i.D.getServiceResourceEndpoints().passiveStsConfigurations};return R(e).then((function(e){if(204!==e.status)throw new s.u(_.ErrorMessages.WS_FEDERATION_CONFIG_REVERT_INVALID_STATUS_CODE_ERROR_CODE.getErrorMessage(),null,e.status,e.request,e,e.config);return Promise.resolve()})).catch((function(e){var n,t=_.ErrorMessages.WS_FEDERATION_CONFIG_REVERT_ERROR_CODE.getErrorMessage();throw new s.u(t,e.stack,null===(n=e.response)||void 0===n||null===(n=n.data)||void 0===n?void 0:n.code,e.request,e.response,e.config)}))}},44420:(e,n,t)=>{t.r(n),t.d(n,{WSFederationConfigurationPage:()=>v,default:()=>S});var r=t(60486),o=t(40838),i=t(43939),a=t(86105),s=t(6833),c=t(82406),l=t(79438),u=t(20494),d=t(44194),E=t(10479),f=t(47245),g=t(89141),_=t(41193),R=t(62508),m=t(41206),C=t(80854);function O(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,i,a,s=[],c=!0,l=!1;try{if(i=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;c=!1}else for(;!(c=(r=i.call(t)).done)&&(s.push(r.value),s.length!==n);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,n)||function(e,n){if(e){if("string"==typeof e)return p(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?p(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}var v=function(e){var n=e["data-componentid"],t=(0,d.useRef)(null),p=(0,d.useRef)(null),v=(0,f.v9)((function(e){return e.config.ui.features})),S=(0,f.v9)((function(e){var n;return null==e||null===(n=e.auth)||void 0===n?void 0:n.allowedScopes})),h=(0,d.useMemo)((function(){var e;return!(0,a.Xr)(null==v?void 0:v.server,null==v||null===(e=v.server)||void 0===e||null===(e=e.scopes)||void 0===e?void 0:e.update,S)}),[v,S]),F=(0,f.I0)(),T=(0,E.$)().t,I=O((0,d.useState)(void 0),2),w=I[0],D=I[1],A=(0,C.xR)(),N=A.data,b=A.isLoading,y=A.mutate,W=A.error;(0,d.useEffect)((function(){N instanceof i.u||W?V():N&&D({enableRequestSigning:N.enableRequestSigning})}),[N]);var V=function(){F((0,c.V_)({description:T("wsFederationConfig:notifications.getConfiguration.error.description"),level:s.QU.ERROR,message:T("wsFederationConfig:notifications.getConfiguration.error.message")}))},G=function(e){var n={enableRequestSigning:e};(0,C.dE)(n).then((function(){F((0,c.V_)({description:T("wsFederationConfig:notifications.updateConfiguration.success.description"),level:s.QU.SUCCESS,message:T("wsFederationConfig:notifications.updateConfiguration.success.message")}))})).catch((function(){F((0,c.V_)({description:T("wsFederationConfig:notifications.updateConfiguration.error.description"),level:s.QU.ERROR,message:T("wsFederationConfig:notifications.updateConfiguration.error.message")}))})).finally((function(){y()}))},Z=function(){(0,C.H8)().then((function(){F((0,c.V_)({description:T("wsFederationConfig:notifications.revertConfiguration.success.description"),level:s.QU.SUCCESS,message:T("wsFederationConfig:notifications.revertConfiguration.success.message")}))})).catch((function(){F((0,c.V_)({description:T("wsFederationConfig:notifications.revertConfiguration.error.description"),level:s.QU.ERROR,message:T("wsFederationConfig:notifications.revertConfiguration.error.message")}))})).finally((function(){y()}))};return d.createElement(u.Xg,{title:T("wsFederationConfig:title"),pageTitle:T("wsFederationConfig:title"),description:T("wsFederationConfig:description"),backButton:{onClick:function(){o.m.push(r.$.getPaths().get("LOGIN_AND_REGISTRATION"))},text:T("governanceConnectors:goBackLoginAndRegistration")},bottomMargin:!1,contentTopMargin:!1,pageHeaderMaxWidth:!0,"data-componentid":"".concat(n,"-form-layout")},d.createElement(m.R,{innerRef:t},d.createElement(g.Z,{className:"mt-2"},d.createElement(g.Z.Row,{columns:1},d.createElement(g.Z.Column,{width:16},d.createElement(u.pJ,{className:"form-wrapper",padded:"very"},b?d.createElement(g.Z.Row,{columns:1},d.createElement("div",null,d.createElement("div",{className:"ui card fluid settings-card","data-testid":"".concat(n,"-loading-card")},d.createElement("div",{className:"content no-padding"},d.createElement("div",{className:"header-section"},d.createElement(_.Z,null,d.createElement(_.Z.Header,null,d.createElement(_.Z.Line,{length:"medium"}),d.createElement(_.Z.Line,{length:"full"}))),d.createElement(R.Z,{hidden:!0}))),d.createElement("div",{className:"content extra extra-content"},d.createElement("div",{className:"action-button"},d.createElement(_.Z,null,d.createElement(_.Z.Line,{length:"very short"}))))),d.createElement(R.Z,{hidden:!0}))):d.createElement(d.Fragment,null,d.createElement(l.l0,{id:"wsfederation-configuration-form",uncontrolledForm:!0,onSubmit:null,initialValues:w,enableReinitialize:!0,ref:p,noValidate:!0,autoComplete:"new-password"},d.createElement(g.Z,null,d.createElement(g.Z.Row,{columns:1,key:1},d.createElement(g.Z.Column,{key:"enableRequestSigning"},d.createElement(l.gN.Checkbox,{ariaLabel:"Enable Authentication Requests Signing",name:"enableRequestSigning",label:T("wsFederationConfig:form.enableRequestSigning.label"),readOnly:h,width:16,"data-componentid":"".concat(n,"-enable-request-signing"),toggle:!0,listen:function(e){G(e)}}))))))))),d.createElement(g.Z.Row,{columns:1,className:"mt-6"},d.createElement(g.Z.Column,{width:16},d.createElement(u.v9,{sectionHeader:T("common:dangerZone")},d.createElement(u.cN,{actionTitle:T("governanceConnectors:dangerZone.actionTitle"),header:T("governanceConnectors:dangerZone.heading"),subheader:T("governanceConnectors:dangerZone.subHeading"),onActionClick:function(){return Z()},"data-testid":"".concat(n,"-danger-zone")})))))))};v.defaultProps={"data-componentid":"wsfederation-configuration-page"};const S=v}}]);