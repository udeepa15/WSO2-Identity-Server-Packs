"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[4358],{58951:(e,t,o)=>{o.d(t,{Z:()=>i});var n=o(96124),r=o(76271),a=o(6833);const i=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t={headers:{Accept:"application/json","Content-Type":"application/json"},method:a.f2.GET,url:"".concat(r.h.getState().config.endpoints.webhooksMetadata)},o=(0,n.Z)(e?t:null,{shouldRetryOnError:!1});return{data:o.data,error:o.error,isLoading:o.isLoading,isValidating:o.isValidating,mutate:o.mutate}}},33241:(e,t,o)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function r(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,s(n.key),n)}}function a(e,t,o){return t&&r(e.prototype,t),o&&r(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}function i(e,t,o){return(t=s(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function s(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:t+""}o.d(t,{J:()=>c});var c=a((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}));i(c,"ACTIVATE","activate"),i(c,"DEACTIVATE","deactivate"),i(c,"ACTIVE_STATUS","ACTIVE"),i(c,"INACTIVE_STATUS","INACTIVE"),i(c,"WEBHOOKS_SESSION_EVENT_SCHEMA","https://schemas.identity.wso2.org/events/session"),i(c,"WEBHOOKS_TOKEN_EVENT_SCHEMA","https://schemas.identity.wso2.org/events/token"),i(c,"DEFAULT_EVENT_PROFILE",{name:"WSO2",uri:"https://schemas.identity.wso2.org"}),i(c,"WEBHOOK_NAME_REGEX",/^[a-zA-Z0-9-_][a-zA-Z0-9-_ ]*[a-zA-Z0-9-_]$/),i(c,"WEBHOOK_SECRET_REGEX",/^[ -~]+$/),i(c,"ERROR_MESSAGES",{CREATE_WEBHOOK_INVALID_STATUS_CODE:"Failed to create webhook. Unexpected response status.",DELETE_WEBHOOK_INVALID_STATUS_CODE:"Failed to delete webhook. Unexpected response status.",FETCH_EVENT_PROFILE_INVALID_STATUS_CODE:"Failed to fetch event profile. Unexpected response status.",FETCH_WEBHOOKS_INVALID_STATUS_CODE:"Failed to fetch webhooks. Unexpected response status.",FETCH_WEBHOOK_INVALID_STATUS_CODE:"Failed to fetch webhook. Unexpected response status.",RETRY_WEBHOOK_INVALID_STATUS_CODE:"Failed to resend requests. Unexpected response status.",UPDATE_WEBHOOK_INVALID_STATUS_CODE:"Failed to update webhook. Unexpected response status.",UPDATE_WEBHOOK_METADATA_INVALID_STATUS_CODE:"Failed to update webhook metadata. Unexpected response status.",UPDATE_WEBHOOK_STATUS_INVALID_STATUS_CODE:"Failed to update webhook status. Unexpected response status."}),i(c,"FEATURE_DICTIONARY",(new Map).set("WEBHOOK_SETTINGS","webhooks.settings").set("SESSION_EVENT_HANDLER","webhook.events.session").set("TOKEN_EVENT_HANDLER","webhook.events.token"))},44358:(e,t,o)=>{o.r(t),o.d(t,{WebhookSettingsForm:()=>L,default:()=>M});var n=o(17199),r=o(78079),a=o(79292),i=o(60486),s=o(40838),c=o(6833),l=o(82406),u=o(79438),p=o(20494),d=o(44194),b=o(10479),f=o(47245),g=o(2292),m=o(76271),E=o(43939),h=o(33241),y=g.AsgardeoSPAClient.getInstance().httpRequest.bind(g.AsgardeoSPAClient.getInstance());const _=function(e){var t={data:e,headers:{Accept:"application/json","Content-Type":"application/json"},method:c.f2.PATCH,url:m.h.getState().config.endpoints.webhooksMetadata};return y(t).then((function(e){if(200!==e.status)throw new E.u(h.J.ERROR_MESSAGES.UPDATE_WEBHOOK_METADATA_INVALID_STATUS_CODE,null,e.status,e.request,e,e.config);return Promise.resolve(e.data)})).catch((function(e){var t;throw new E.u(e.message,e.stack,null===(t=e.response)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.code,e.request,e.response,e.config)}))};var S=o(58951),O=function(e){return e.NO_SHARING="NO_SHARING",e.IMMEDIATE_EXISTING_AND_FUTURE_ORGS="IMMEDIATE_EXISTING_AND_FUTURE_ORGS",e}({}),v=o(67071),T=o(51835),A=o.n(T),w=o(27975),k=o.n(w),N=o(55900),I=o.n(N),R=o(21555),D=o.n(R),U=o(3621),C=o.n(U),P=o(5062),x=o.n(P),j=o(74894),V={};V.styleTagTransform=x(),V.setAttributes=D(),V.insert=I().bind(null,"head"),V.domAPI=k(),V.insertStyleElement=C();A()(j.Z,V);j.Z&&j.Z.locals&&j.Z.locals;function H(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var n,r,a,i,s=[],c=!0,l=!1;try{if(a=(o=o.call(e)).next,0===t){if(Object(o)!==o)return;c=!1}else for(;!(c=(n=a.call(o)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(e){l=!0,r=e}finally{try{if(!c&&null!=o.return&&(i=o.return(),Object(i)!==i))return}finally{if(l)throw r}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return W(e,t);var o={}.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?W(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=Array(t);o<t;o++)n[o]=e[o];return n}var Z="webhook-settings",F=[{label:"webhooks:pages.settings.organizationPolicy.radioOptions.currentOrgOnly",value:O.NO_SHARING},{label:"webhooks:pages.settings.organizationPolicy.radioOptions.currentOrgAndImmediateChild",value:O.IMMEDIATE_EXISTING_AND_FUTURE_ORGS}],L=function(e){var t,o=e["data-componentid"],g=void 0===o?"webhook-settings-page":o,m=(0,f.I0)(),E=(0,b.$)().t,h=H((0,d.useState)(!1),2),y=h[0],T=h[1],A=(0,S.Z)(),w=A.data,k=A.isLoading,N=A.error,I=(0,v.F)();(0,d.useEffect)((function(){N&&I(N,"fetchWebhooksMetadata")}),[N,I]);var R=function(e){T(!0);var t={organizationPolicy:{policyName:e.organizationPolicy.policyName}};_(t).then((function(){m((0,l.V_)({description:E("webhooks:notifications.updateWebhookSettings.success.description"),level:c.QU.SUCCESS,message:E("webhooks:notifications.updateWebhookSettings.success.message")}))})).catch((function(e){!function(e){var t;null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(t=t.data)&&void 0!==t&&t.detail?m((0,l.V_)({description:E("webhooks:notifications.updateWebhookSettings.error.description",{description:e.response.data.description}),level:c.QU.ERROR,message:E("webhooks:notifications.updateWebhookSettings.error.message")})):m((0,l.V_)({description:E("webhooks:notifications.updateWebhookSettings.error.genericDescription"),level:c.QU.ERROR,message:E("webhooks:notifications.updateWebhookSettings.error.message")}))}(e)})).finally((function(){T(!1)}))};return d.createElement("div",{className:"webhook-settings-page"},d.createElement(p.Xg,{title:E("webhooks:pages.settings.heading"),description:d.createElement(d.Fragment,null,E("webhooks:pages.settings.subHeading")),backButton:{"data-componentid":"".concat(g,"-page-back-button"),onClick:function(){s.m.push(i.$.getPaths().get("WEBHOOKS"))},text:E("webhooks:pages.settings.backButton")},bottomMargin:!1,contentTopMargin:!0,pageHeaderMaxWidth:!0,"data-componentid":"".concat(g,"-page-layout")},d.createElement(p.pJ,{padded:"very"},k?d.createElement(n.Z,{className:"placeholder-box"},d.createElement(r.Z,{variant:"rectangular",height:21}),d.createElement(r.Z,{variant:"rectangular",height:14}),d.createElement(r.Z,{variant:"rectangular",height:7})):d.createElement(u.l0,{id:Z,uncontrolledForm:!1,onSubmit:function(e){R(e)},initialValues:{organizationPolicy:{policyName:(null==w||null===(t=w.organizationPolicy)||void 0===t?void 0:t.policyName)||O.NO_SHARING}},"data-componentid":"".concat(g,"-form")},d.createElement(a.Z,{variant:"h6",className:"heading-container"},E("webhooks:pages.settings.organizationPolicy.heading")),F.map((function(e){return d.createElement(u.gN.Radio,{key:e.value,ariaLabel:E(e.label),label:E(e.label),name:"organizationPolicy.policyName",type:"radio",value:e.value,"data-componentid":"".concat(g,"-organization-policy-radio-")+"option-".concat(e.value)})})),d.createElement(u.gN.Button,{form:Z,size:"small",buttonType:"primary_btn",ariaLabel:"Update button",name:"update-button","data-testid":"".concat(g,"-submit-button"),disabled:y,loading:y,label:E("common:update")})))))};const M=L},67071:(e,t,o)=>{o.d(t,{F:()=>d,L:()=>p});var n=o(6833),r=o(82406),a=o(10479),i=o(47245);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function c(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function l(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?c(Object(o),!0).forEach((function(t){u(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):c(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function u(e,t,o){return(t=function(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var p=function(){var e=(0,i.I0)(),t=(0,a.$)().t;return function(o,a){var i=a||{};e((0,r.V_)({description:t("webhooks:notifications.".concat(o,".success.description"),i),level:n.QU.SUCCESS,message:t("webhooks:notifications.".concat(o,".success.message"))}))}},d=function(){var e=(0,i.I0)(),t=(0,a.$)().t;return function(o,a,i){var s,c=i||{};null!==(s=o.response)&&void 0!==s&&null!==(s=s.data)&&void 0!==s&&s.description?e((0,r.V_)({description:t("webhooks:notifications.".concat(a,".error.description"),l({description:o.response.data.description},c)),level:n.QU.ERROR,message:t("webhooks:notifications.".concat(a,".error.message"))})):e((0,r.V_)({description:t("webhooks:notifications.".concat(a,".error.genericDescription"),c),level:n.QU.ERROR,message:t("webhooks:notifications.".concat(a,".error.message"))}))}}},17199:(e,t,o)=>{o.d(t,{Z:()=>s});var n=o(92336),r=o(31549),a=o(31958),i=o(14517);const s=(0,o(44194).forwardRef)(((e,t)=>{var{className:o}=e,s=(0,n.__rest)(e,["className"]);return(0,r.jsx)(a.Z,Object.assign({ref:t,className:(0,i.Z)("oxygen-box","OxygenBox-root",o)},s))}))},78079:(e,t,o)=>{o.d(t,{Z:()=>s});var n=o(92336),r=o(31549),a=o(23800),i=o(14517);const s=(0,o(44194).forwardRef)(((e,t)=>{var{className:o}=e,s=(0,n.__rest)(e,["className"]);return(0,r.jsx)(a.Z,Object.assign({ref:t,className:(0,i.Z)("oxygen-skeleton","OxygenSkeleton-root",o)},s))}))},79292:(e,t,o)=>{o.d(t,{Z:()=>s});var n=o(92336),r=o(31549),a=o(66466),i=o(14517);const s=(0,o(44194).forwardRef)(((e,t)=>{var{className:o}=e,s=(0,n.__rest)(e,["className"]);return(0,r.jsx)(a.Z,Object.assign({ref:t,className:(0,i.Z)("oxygen-typography","OxygenTypography-root",o)},s))}))},74894:(e,t,o)=>{o.d(t,{Z:()=>s});var n=o(81611),r=o.n(n),a=o(83948),i=o.n(a)()(r());i.push([e.id,".webhook-settings-page .heading-container{margin-top:20px;font-weight:normal}.webhook-settings-page .placeholder{border-radius:8px;margin-bottom:8px}.webhook-settings-page .placeholder.label{height:20px;max-width:100px}.webhook-settings-page .placeholder.text-field{height:40px}.webhook-settings-page .placeholder-box>*{margin-bottom:8px}",""]);const s=i}}]);