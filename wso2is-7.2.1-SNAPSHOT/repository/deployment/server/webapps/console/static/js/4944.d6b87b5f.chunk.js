"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[4944],{56080:(e,n,t)=>{t.d(n,{h:()=>o});var o=function(e){return e.AUDIT="AUDIT",e.DIAGNOSTICS="DIAGNOSTICS",e}({})},94944:(e,n,t)=>{t.r(n),t.d(n,{default:()=>$});var o=t(60486),a=t(40838),r=t(20494),i=t(44194),s=t(10479),l=t(96124),c=t(76271),g=t(6833);const m=function(){var e,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,o={method:g.f2.GET,url:"".concat(c.h.getState().config.endpoints.remoteLogPublishEndpoint,"/").concat(t)},a=(0,l.Z)(n?o:null),r=a.data,i=a.error,s=a.isLoading,m=a.isValidating,u=a.mutate;return{data:404===(null==i||null===(e=i.response)||void 0===e?void 0:e.status)?{}:r,error:i,isLoading:s,isValidating:m,mutate:u}};var u=t(82160),d=t(18365),f=t(65612),h=t(29585),p=t(82460),v=t(82406),b=t(79438),L=t(34194),C=t(42005),P=t(37065),y=t(47245),E=t(2292),T=E.AsgardeoSPAClient.getInstance().httpRequest.bind(E.AsgardeoSPAClient.getInstance());const S=function(e){var n={headers:{"Content-Type":"application/json"},method:g.f2.DELETE,url:"".concat(c.h.getState().config.endpoints.remoteLogPublishEndpoint,"/").concat(e)};return T(n).then((function(e){return Promise.resolve(e.data)})).catch((function(e){throw e}))};var I=E.AsgardeoSPAClient.getInstance().httpRequest.bind(E.AsgardeoSPAClient.getInstance());const Z=function(e){var n={data:e,headers:{"Content-Type":"application/json"},method:arguments.length>1&&void 0!==arguments[1]&&arguments[1]?g.f2.POST:g.f2.PUT,url:c.h.getState().config.endpoints.remoteLogPublishEndpoint};return I(n).then((function(e){return Promise.resolve(e.data)})).catch((function(e){throw e}))};const A=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=arguments.length>1?arguments[1]:void 0,t={method:g.f2.GET,url:"".concat(c.h.getState().config.endpoints.remoteLogPublishEndpoint,"/").concat(n,"/test")},o=(0,l.Z)(e?t:null);return{data:o.data,error:o.error,isLoading:o.isLoading,isValidating:o.isValidating,mutate:o.mutate}};var x=t(51835),w=t.n(x),k=t(27975),U=t.n(k),V=t(55900),N=t.n(V),R=t(21555),O=t.n(R),M=t(3621),D=t.n(M),q=t(5062),j=t.n(q),_=t(32184),G={};G.styleTagTransform=j(),G.setAttributes=O(),G.insert=N().bind(null,"head"),G.domAPI=U(),G.insertStyleElement=D();w()(_.Z,G);_.Z&&_.Z.locals&&_.Z.locals;function H(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var o,a,r,i,s=[],l=!0,c=!1;try{if(r=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;l=!1}else for(;!(l=(o=r.call(t)).done)&&(s.push(o.value),s.length!==n);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=t.return&&(i=t.return(),Object(i)!==i))return}finally{if(c)throw a}}return s}}(e,n)||function(e,n){if(e){if("string"==typeof e)return B(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?B(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,o=Array(n);t<n;t++)o[t]=e[t];return o}const F=function(e){var n=e.logType,t=e.initialData,o=e.mutateRemoteLoggingRequest,a=e.isLoading,l=e["data-componentid"],c=void 0===l?"remote-logging-config-form":l,m=H((0,i.useState)(!1),2),E=m[0],T=m[1],I=(0,y.I0)(),x=(0,s.$)().t,w=H((0,i.useState)(!1),2),k=w[0],U=w[1],V=A(k,n),N=V.isLoading,R=V.mutate,O=function(){U(!0),R()};return a?i.createElement(d.Z,{className:"remote-logging-content"},i.createElement("div",{className:"remote-logging-form"},i.createElement(p.Z,{direction:"column",spacing:2},i.createElement(h.Z,{variant:"rectangular",height:7,width:"30%"}),i.createElement(h.Z,{variant:"rectangular",height:28}),i.createElement(h.Z,{variant:"rectangular",height:7,width:"90%"}),i.createElement(h.Z,{variant:"rectangular",height:7})))):i.createElement(i.Fragment,null,i.createElement(d.Z,{className:"remote-logging-content"},i.createElement("div",{className:"remote-logging-form"},i.createElement(f.Z,{xs:12,md:8,lg:4},i.createElement(b.vy,{onSubmit:function(e){return(a=e).connectTimeoutMillis||(a.connectTimeoutMillis=1e3),a.logType=n,void Z(a,!t||0===Object.keys(t).length).then((function(){o(),I((0,v.V_)({description:x("console:manage.features.serverConfigs.remoteLogPublishing.notification.success.description"),level:g.QU.SUCCESS,message:x("console:manage.features.serverConfigs.remoteLogPublishing.notification.success.message")}))})).catch((function(e){I((0,v.V_)({description:x("console:manage.features.serverConfigs.remoteLogPublishing.notification.error.updateError.description"),level:g.QU.ERROR,message:x("console:manage.features.serverConfigs.remoteLogPublishing.notification.error.updateError.message")}))}));var a},"data-componentid":"".concat(c,"-").concat(n),initialValues:t,validate:function(e){var n={};return e.url?L.I.url(e.url.toString())||(n.url=x("console:manage.features.serverConfigs.remoteLogPublishing.fields.remoteURL.error.invalid")):n.url=x("console:manage.features.serverConfigs.remoteLogPublishing.fields.remoteURL.error.required"),e.publishInterval?parseInt(e.publishInterval.toString())<15&&(n.publishInterval=x("console:manage.features.serverConfigs.remoteLogPublishing.fields.publishInterval.error.invalid")):n.publishInterval=x("console:manage.features.serverConfigs.remoteLogPublishing.fields.publishInterval.error.required"),e.connectTimeoutMillis&&(parseInt(e.connectTimeoutMillis.toString())<1e3||parseInt(e.connectTimeoutMillis.toString())>6e4)&&(n.connectTimeoutMillis=x("console:manage.features.serverConfigs.remoteLogPublishing.fields.advanced.connectionTimeout.error.invalid")),n},render:function(e){var n=e.handleSubmit;return i.createElement("form",{onSubmit:n},i.createElement(b.SE,{key:"url",FormControlProps:{margin:"dense"},width:16,className:"text-field-container",ariaLabel:"url",required:!0,"data-componentid":"".concat(c,"-url"),name:"url",type:"text",label:x("console:manage.features.serverConfigs.remoteLogPublishing.fields.remoteURL.label"),placeholder:x("console:manage.features.serverConfigs.remoteLogPublishing.fields.remoteURL.placeholder"),component:b.xh,maxLength:100,minLength:0}),i.createElement(b.SE,{key:"publishInterval",width:16,className:"text-field-container form-field-margin-top",ariaLabel:"publishInterval",required:!0,"data-componentid":"".concat(c,"-publishInterval"),name:"publishInterval",type:"number",label:x("console:manage.features.serverConfigs.remoteLogPublishing.fields.publishInterval.label"),placeholder:x("console:manage.features.serverConfigs.remoteLogPublishing.fields.publishInterval.placeholder"),component:b.xh,maxLength:100,minLength:0,minValue:15,maxValue:1440}),i.createElement(b.SE,{key:"connectTimeoutMillis",width:16,className:"text-field-container form-field-margin-top",ariaLabel:"connectTimeoutMillis","data-componentid":"".concat(c,"-connectTimeoutMillis"),name:"connectTimeoutMillis",type:"number",label:x("console:manage.features.serverConfigs.remoteLogPublishing.fields.advanced.connectionTimeout.label"),placeholder:x("console:manage.features.serverConfigs.remoteLogPublishing.fields.advanced.connectionTimeout.placeholder"),component:b.xh,maxLength:100,minLength:0,minValue:1e3,maxValue:6e4}),i.createElement(b.SE,{"data-componentid":"".concat(c,"-verifyHostname"),name:"verifyHostname",label:x("console:manage.features.serverConfigs.remoteLogPublishing.fields.advanced.verifyHostname.label"),component:b.ur}),i.createElement(r.X6,{as:"h5",bold:"500"},x("console:manage.features.serverConfigs.remoteLogPublishing.fields.advanced.basicAuthConfig.title")),i.createElement(b.SE,{key:"username",FormControlProps:{margin:"dense"},width:16,className:"text-field-container form-field-margin-top",ariaLabel:"username",required:!1,"data-componentid":"".concat(c,"-username"),name:"username",type:"text",label:x("console:manage.features.serverConfigs.remoteLogPublishing.fields.advanced.basicAuthConfig.serverUsername.label"),placeholder:x("console:manage.features.serverConfigs.remoteLogPublishing.fields.advanced.basicAuthConfig.serverUsername.placeholder"),component:b.xh,maxLength:100,minLength:0}),i.createElement(b.SE,{key:"password",FormControlProps:{margin:"dense"},width:16,className:"text-field-container form-field-margin-top",ariaLabel:"password",required:!1,"data-componentid":"".concat(c,"-password"),name:"password",type:"password",label:x("console:manage.features.serverConfigs.remoteLogPublishing.fields.advanced.basicAuthConfig.serverPassword.label"),placeholder:x("console:manage.features.serverConfigs.remoteLogPublishing.fields.advanced.basicAuthConfig.serverPassword.placeholder"),component:b.xh,maxLength:100,minLength:0}),i.createElement(u.Z,{size:"medium",variant:"contained",onClick:n,className:"button-container form-field-margin-top","data-componentid":"".concat(c,"-submit-button"),loading:a},x("common:update")),i.createElement(u.Z,{size:"medium",variant:"contained",onClick:O,className:"button-container form-field-margin-top form-field-margin-left","data-componentid":"".concat(c,"-test-button"),loading:N,disabled:!t||0===Object.keys(t).length},x("console:manage.features.serverConfigs.remoteLogPublishing.testButtonText")))}})))),i.createElement(r.v9,{sectionHeader:x("applications:dangerZoneGroup.header")},i.createElement(r.cN,{isButtonDisabled:!t||0===Object.keys(t).length,"data-componentid":"".concat(c,"-danger-zone"),actionTitle:x("console:manage.features.serverConfigs.remoteLogPublishing.dangerZone.title",{logType:(0,C.Z)((0,P.Z)(n))}),buttonText:x("console:manage.features.serverConfigs.remoteLogPublishing.dangerZone.button"),header:x("console:manage.features.serverConfigs.remoteLogPublishing.dangerZone.header",{logType:(0,C.Z)((0,P.Z)(n))}),subheader:x("console:manage.features.serverConfigs.remoteLogPublishing.dangerZone.subheader",{logType:(0,P.Z)(n)}),onActionClick:function(){T(!0)}})),i.createElement(r.cV,{onClose:function(){return T(!1)},type:"negative",open:E,assertionHint:x("console:manage.features.serverConfigs.remoteLogPublishing.dangerZone.confirmation.hint"),assertionType:"checkbox",primaryAction:x("common:confirm"),secondaryAction:x("common:cancel"),onSecondaryActionClick:function(){T(!1)},onPrimaryActionClick:function(){S(n).then((function(){T(!1),o(),I((0,v.V_)({description:x("console:manage.features.serverConfigs.remoteLogPublishing.notification.success.description"),level:g.QU.SUCCESS,message:x("console:manage.features.serverConfigs.remoteLogPublishing.notification.success.message")}))})).catch((function(e){I((0,v.V_)({description:x("console:manage.features.serverConfigs.remoteLogPublishing.notification.error.updateError.description"),level:g.QU.ERROR,message:x("console:manage.features.serverConfigs.remoteLogPublishing.notification.error.updateError.message")}))}))},"data-componentid":"remote-logging-delete-confirmation-modal",closeOnDimmerClick:!1},i.createElement(r.cV.Header,{"data-componentid":"remote-logging-delete-confirmation-modal-header"},x("console:manage.features.serverConfigs.remoteLogPublishing.dangerZone.confirmation.header")),i.createElement(r.cV.Message,{attached:!0,negative:!0,"data-componentid":"remote-logging-delete-confirmation-modal-message"},x("console:manage.features.serverConfigs.remoteLogPublishing.dangerZone.confirmation.message",{logType:(0,P.Z)(n)})),i.createElement(r.cV.Content,{"data-componentid":"remote-logging-delete-confirmation-modal-content"},x("console:manage.features.serverConfigs.remoteLogPublishing.dangerZone.confirmation.content",{logType:(0,P.Z)(n)}))))};var Q=t(56080);const $=function(e){var n=e["data-componentid"],t=void 0===n?"logs-settings-configuration-page":n,l=(0,s.$)().t,c=(0,i.useMemo)((function(){var e=a.m.location.pathname.split("/"),n=e[e.length-1];return"audit"===n?Q.h.AUDIT:"diagnostics"===n?Q.h.DIAGNOSTICS:Q.h.AUDIT}),[a.m.location.pathname]),g=m(!0,c),u=g.data,d=g.isLoading,f=g.mutate;return i.createElement(r.Xg,{title:l("console:manage.features.serverConfigs.remoteLogPublishing.title"),pageTitle:l("console:manage.features.serverConfigs.remoteLogPublishing.pageTitle"),description:l("console:manage.features.serverConfigs.remoteLogPublishing.descriptionWithLogType",{logType:c.toLowerCase()}),backButton:{"data-componentid":"".concat(t,"-").concat(c,"-page-back-button"),onClick:function(){a.m.push(o.$.getPaths().get("LOG_SETTINGS"))},text:l("console:manage.features.serverConfigs.remoteLogPublishing.backButtonText")},"data-componentid":"".concat(t,"-layout")},i.createElement(F,{logType:c,initialData:u,mutateRemoteLoggingRequest:f,isLoading:d}))}},32184:(e,n,t)=>{t.d(n,{Z:()=>s});var o=t(81611),a=t.n(o),r=t(83948),i=t.n(r)()(a());i.push([e.id,".remote-logging-content{padding:var(--oxygen-spacing-5) var(--oxygen-spacing-6);margin-bottom:var(--oxygen-spacing-4)}.remote-logging-content .remote-logging-form{max-width:var(--wso2is-admin-form-max-width)}.remote-logging-content .remote-logging-form .form-field-margin-top{margin-top:.75rem}.remote-logging-content .remote-logging-form .form-field-margin-left{margin-left:.75rem}",""]);const s=i},37065:(e,n,t)=>{t.d(n,{Z:()=>a});var o=t(30601);const a=function(e){return(0,o.Z)(e).toLowerCase()}}}]);