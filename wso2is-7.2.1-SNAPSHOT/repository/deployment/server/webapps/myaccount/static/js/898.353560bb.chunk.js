"use strict";(self.webpackChunk_wso2is_myaccount=self.webpackChunk_wso2is_myaccount||[]).push([[898],{2898:(e,t,n)=>{n.r(t),n.d(t,{App:()=>ee,default:()=>te});var r=n(2292),o=n(68109),i=n(93427),a=n(36940),c=n(86105),u=n(60502),l=n(16590),s=n(61444),f=n(397),m=n(45634),y=n.n(m),p=n(50699),g=n(44194),d=n(59673),b=n(31126),h=n(82690),v=n(9768),S=n(33881),O=n(27944),E=n(4278),w=n(73496),A=n(16507),j=n(64704),P=n(95223),I=(0,g.createContext)(null);I.displayName="RuntimeConfigContext";const T=I;function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){L(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function L(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=x(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=x(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==x(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return k(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?k(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const M=function(e){var t=e.children,n=e.initialRuntimeConfig,r=N((0,g.useState)(null),2),o=r[0],i=r[1];(0,g.useEffect)((function(){var e=window.__WSO2_IS_RUNTIME_CONFIG__||n||{};i(e)}),[n]);var a=function(){return o||{}};return g.createElement(T.Provider,{value:D({getAllRuntimeConfig:a,getRuntimeConfig:function(e){return(0,j.Z)(o,e,null)},setRuntimeConfig:function(e){var t=(0,P.Z)({},o,e);i(t),window.__WSO2_IS_RUNTIME_CONFIG__=t}},a())},t)};var C=n(69221);function R(e){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R(e)}function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){Z(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Z(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=R(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=R(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==R(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return B(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?B(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var G="user-preferences";const F=function(e){var t=e.children,n=e.storageStrategy,r=void 0===n?"localstorage":n,o=e.userId,i=$((0,g.useState)(null),2),a=i[0],c=i[1];(0,g.useEffect)((function(){var e=function(){switch(r){case"localstorage":return localStorage.getItem(G);case"sessionstorage":return sessionStorage.getItem(G);default:return null}}();if(e){var t=JSON.parse(e);c(t)}}),[r]);var u;return g.createElement(C.Z.Provider,{value:U({getPreferences:function(e,t){var n,r=null!=t?t:o;return null!==(n=(0,j.Z)(a,r,{})[e])&&void 0!==n?n:null},setPreferences:function(e,t){var n=(0,P.Z)({},a,Z({},null!=t?t:o,U({},e)));switch(c(n),r){case"localstorage":localStorage.setItem(G,JSON.stringify(n));break;case"sessionstorage":sessionStorage.setItem(G,JSON.stringify(n))}}},(0,j.Z)(a,null!=u?u:o,{}))},t)};const J=function(e){var t=e.children,n=(0,b.v9)((function(e){return e.authenticationInformation.profileInfo.id}));return g.createElement(M,null,g.createElement(F,{userId:n},t))};var H=n(87461),W=n(88403);function V(e){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V(e)}function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){Q(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Q(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=V(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=V(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==V(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return X(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?X(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var ee=function(){var e,t=(0,b.v9)((function(e){return e.authenticationInformation.username})),n=(0,b.v9)((function(e){return e.config})),m=(0,b.v9)((function(e){return e.authenticationInformation.loginInit})),j=(0,b.v9)((function(e){var t;return null==e||null===(t=e.authenticationInformation)||void 0===t?void 0:t.scope})),P=(0,b.v9)((function(e){return e.authenticationInformation.profileInfo.id})),I=z((0,g.useState)((0,w.ju)()),2),T=I[0],x=I[1],_=W.lD.getInstance(),D=(0,r.useAuthContext)(),L=D.signOut,N=D.trySignInSilently,k=(0,g.useContext)(i.G).themePreference,M=(0,o.tv)().setMode;(0,g.useEffect)((function(){var e,t,n=null!==(e=null==k||null===(t=k.preference)||void 0===t||null===(t=t.theme)||void 0===t?void 0:t.activeTheme.toLowerCase())&&void 0!==e?e:"light";M(n)}),[k]),(0,g.useEffect)((function(){C()}),[]),(0,g.useEffect)((function(){y().locale(s.I18n.instance.language)}),[s.I18n.instance.language]),(0,g.useEffect)((function(){x((0,w.ju)())}),[A.$x.getTenantQualifiedAppBasename()]),(0,g.useEffect)((function(){var e,t;null!=n&&null!==(e=n.ui)&&void 0!==e&&e.features&&m&&((0,c.jY)(null==n||null===(t=n.ui)||void 0===t?void 0:t.features,j)||H.m8.push(A.$x.getPaths().get("UNAUTHORIZED")))}),[m,j,n]),(0,g.useEffect)((function(){var e;if(t||""!==t){var r=null==n||null===(e=n.deployment)||void 0===e?void 0:e.tenant,o=JSON.parse(l.LocalStorageUtils.getValueFromLocalStorage(r)),i={};if(i[t]=(0,u.D0)(),o){if(null===c.EN.lookupKey(o,t)){var a=Y(Y({},o),{},Q({},t,(0,u.D0)()));l.LocalStorageUtils.setValueInLocalStorage(r,JSON.stringify(a))}}else l.LocalStorageUtils.setValueInLocalStorage(r,JSON.stringify(i))}}),[null==n||null===(e=n.deployment)||void 0===e?void 0:e.tenant,t]),(0,g.useEffect)((function(){P&&_.publish("page-visit-myaccount-landing-page")}),[P]);var C=function(){try{sessionStorage||location.pathname===A.$x.getPaths().get("STORING_DATA_DISABLED")||H.m8.push(A.$x.getPaths().get("STORING_DATA_DISABLED"))}catch(e){location.pathname!==A.$x.getPaths().get("STORING_DATA_DISABLED")&&H.m8.push(A.$x.getPaths().get("STORING_DATA_DISABLED"))}};return(0,p.Z)(null==n?void 0:n.deployment)||(0,p.Z)(null==n?void 0:n.endpoints)?g.createElement(E.xq,null):g.createElement(h.Z,{history:H.m8},g.createElement(J,null,g.createElement("div",{className:"container-fluid"},g.createElement(g.Suspense,{fallback:g.createElement(E.xq,null)},g.createElement(f.C1,null,g.createElement(f.Vb,{onSessionTimeoutAbort:function(e){H.m8.push({pathname:e.pathname,search:e.search})},onSessionLogout:function(){H.m8.push(A.$x.getAppLogoutPath())},onLoginAgain:function(){N().then((function(e){if(!1===e)H.m8.push(A.$x.getAppLogoutPath());else{var t=[a.F$.SESSION_TIMEOUT_WARNING_URL_SEARCH_PARAM_KEY],n=new URL(window.location.href);t.forEach((function(e){n.searchParams.delete(e)}));var r=n.hash;if(r&&r.startsWith("#")){var o=new URLSearchParams(r.substring(1));[].forEach((function(e){o.delete(e)})),r=o.toString()?"#".concat(o.toString()):""}var i="".concat(n.pathname).concat(n.search).concat(r);window.history.replaceState(window.history.state,null,i)}})).catch((function(){H.m8.push(A.$x.getAppLogoutPath())}))},modalOptions:{description:g.createElement(d.c,{i18nKey:"myAccount:common.modals.sessionTimeoutModal.description"},"When you click on the ",g.createElement(f.EK,null,"Go back")," button, we will try to recover the session if it exists. If you don't have an active session, you will be redirected to the login page"),headingI18nKey:"myAccount:common.modals.sessionTimeoutModal.heading",loginAgainButtonText:g.createElement(d.c,{i18nKey:"myAccount:common.modals.sessionTimeoutModal.loginAgainButton"},"Login again"),primaryButtonText:g.createElement(d.c,{i18nKey:"myAccount:common.modals.sessionTimeoutModal.primaryButton"},"Go back"),secondaryButtonText:g.createElement(d.c,{i18nKey:"myAccount:common.modals.sessionTimeoutModal.secondaryButton"},"Logout"),sessionTimedOutDescription:g.createElement(d.c,{i18nKey:"myAccount:common.modals.sessionTimeoutModal.sessionTimedOutDescription"},"Please log in again to continue from where you left off."),sessionTimedOutHeadingI18nKey:"myAccount:common.modals.sessionTimeoutModal.sessionTimedOutHeading"},type:f.h5.DEFAULT},g.createElement(g.Fragment,null,g.createElement(f.T6,{heading:g.createElement(d.c,{i18nKey:"common:networkErrorMessage.heading"},"Your session has expired"),description:g.createElement(d.c,{i18nKey:"common:networkErrorMessage.description"},"Please try signing in again."),primaryActionText:g.createElement(d.c,{i18nKey:"common:networkErrorMessage.primaryActionText"},"Sign In"),primaryAction:L}),g.createElement(f.dC,{heading:g.createElement(d.c,{i18nKey:"common:chunkLoadErrorMessage.heading"},"Something went wrong"),description:g.createElement(d.c,{i18nKey:"common:chunkLoadErrorMessage.description"},"An error occurred when serving the requested application. Please try reloading the app."),primaryActionText:g.createElement(d.c,{i18nKey:"common:chunkLoadErrorMessage.primaryActionText"},"Reload the App")}),g.createElement(v.Z,null,g.createElement(S.Z,{exact:!0,from:"/",to:A.$x.getAppHomePath()}),n?(0,W.Oo)(T,n).map((function(e,t){return e.redirectTo?g.createElement(S.Z,{to:e.redirectTo,path:e.path}):e.protected?g.createElement(E.i1,{component:e.component,path:e.path,key:t,route:e,exact:e.exact}):g.createElement(O.Z,{path:e.path,render:function(t){return g.createElement(e.component,t)},key:t,exact:e.exact})})):null))))))))};const te=ee}}]);