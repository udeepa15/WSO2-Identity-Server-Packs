"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[3174],{63174:(e,t,n)=>{n.r(t),n.d(t,{AuthenticatorEditPage:()=>O,default:()=>P});var i=n(55007),o=n(51314),a=n(60486),r=n(40838),l=n(63264),u=n(57095),c=n(54484),d=n(6833),s=n(82406),p=n(20494),f=n(44194),v=n(10479),m=n(47245),g=n(37077),h=n(23750),E=n(46448),T=n(61067),b=n(18148),A=n(82925),y=n(50250);function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,o,a,r,l=[],u=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(i=a.call(n)).done)&&(l.push(i.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(r=n.return(),Object(r)!==r))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return S(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}var O=function(e){var t,n,S=e.location,O=e["data-componentid"],P=void 0===O?"authenticator-edit-page":O,I=e["data-testid"],_=void 0===I?"authenticator-edit-page":I,R=(0,m.I0)(),N=(0,f.useRef)(null),D=b.f.CONNECTION_TEMPLATE_IDS,U=C((0,f.useState)(void 0),2),k=U[0],w=U[1],M=C((0,f.useState)(void 0),2),F=M[0],H=M[1],L=C((0,f.useState)(),2),x=L[0],z=L[1],j=C((0,f.useState)(!1),2),V=j[0],W=j[1],$=C((0,f.useState)(!1),2),Q=$[0],B=$[1],G=C((0,f.useState)(void 0),2),Z=G[0],q=G[1],J=(0,p.fQ)().getLink,Y=(0,v.$)().t,K=(0,m.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t||null===(t=t.features)||void 0===t?void 0:t.applications})),X=(0,m.v9)((function(e){return e.config.ui.features})),ee=(0,m.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t?void 0:t.productName})),te=!(0,i.EV)(null==X||null===(t=X.identityProviders)||void 0===t||null===(t=t.scopes)||void 0===t?void 0:t.update),ne=(0,i.EV)(null==K||null===(n=K.scopes)||void 0===n?void 0:n.read),ie=(0,E.b4)(Z,Q).data;(0,f.useEffect)((function(){k&&q(ae(k))}),[k]),(0,f.useEffect)((function(){Z&&B(!0)}),[Z]),(0,f.useEffect)((function(){oe()}),[]),(0,f.useEffect)((function(){if(l.rD){var e=S.pathname.split("/"),t=e[e.length-1];re(t)}}),[l.rD]);var oe=function(){var e=arguments.length>1?arguments[1]:void 0;(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&(e=null==S?void 0:S.state),void 0!==e&&(W(!0),z(e))},ae=function(e){return((null==e?void 0:e.tags)||[]).some((function(e){return e.toUpperCase()===y.Yn.SECOND_FACTOR}))?D.TWO_FACTOR_CUSTOM_AUTHENTICATOR:D.INTERNAL_CUSTOM_AUTHENTICATOR},re=function(e){H(!0),(0,h.hc)(e).then((function(e){w(e)})).catch((function(e){e.response&&e.response.data&&e.response.data.description?R((0,s.V_)({description:Y("authenticationProvider:notifications.getIDP.error.description",{description:e.response.data.description}),level:d.QU.ERROR,message:Y("authenticationProvider:notifications.getIDP.error.message")})):R((0,s.V_)({description:Y("authenticationProvider:notifications.getIDP.genericError.description"),level:d.QU.ERROR,message:Y("authenticationProvider:notifications.getIDP.genericError.message")}))})).finally((function(){H(!1)}))};return f.createElement(c.Z,{shouldFetch:ne,resourceType:u.P.APPLICATIONS,categories:o.z.SUPPORTED_CATEGORIES_INFO},f.createElement(p.O9,{pageTitle:"Edit Connection",isLoading:F,loadingStateOptions:{count:5,imageType:"square"},title:function(e){return e?f.createElement(f.Fragment,null,e.displayName,!1===F&&e.name&&function(e){return e?null!=e&&e.isEnabled?f.createElement(p._x,{popupHeader:Y("authenticationProvider:popups.appStatus.enabled.header"),popupSubHeader:Y("authenticationProvider:popups.appStatus.enabled.content"),labelColor:"green"}):f.createElement(p._x,{popupHeader:Y("authenticationProvider:popups.appStatus.disabled.header"),popupSubHeader:Y("authenticationProvider:popups.appStatus.disabled.content"),labelColor:"grey"}):null}(e)):null}(k),contentTopMargin:!0,description:function(e){var t,n;return e?f.createElement("div",{className:"with-label ellipsis",ref:N},function(e){return f.createElement(g.Z,{size:"small"},ae(e)===D.TWO_FACTOR_CUSTOM_AUTHENTICATOR?Y("customAuthenticator:fields.createWizard.authenticationTypeStep.twoFactorAuthenticationCard.header"):Y("customAuthenticator:fields.createWizard.authenticationTypeStep.internalUserAuthenticationCard.header"))}(e),null!=e&&e.description?f.createElement(p.GI,{content:null==e||null===(t=e.description)||void 0===t?void 0:t.replaceAll("{{productName}}",ee),trigger:f.createElement("span",null,null==e||null===(n=e.description)||void 0===n?void 0:n.replaceAll("{{productName}}",ee))}):A.C.getAuthenticatorDescription(null==e?void 0:e.id),f.createElement(p.eb,{link:J("develop.connections.newConnection.\n                    ".concat(null==e?void 0:e.name,".learnMore"))},Y("common:learnMore"))):null}(k),image:function(e){if(e)return f.createElement(p.JT,{hoverable:!1,name:null==e?void 0:e.displayName,image:(null==e?void 0:e.image)||A.C.getCustomAuthenticatorIcon(),size:"tiny"})}(k),backButton:{"data-componentid":"".concat(P,"-back-button"),onClick:function(){r.m.push(a.$.getPaths().get("IDP"))},text:Y("console:develop.pages.authenticationProviderTemplate.backButton")},titleTextAlign:"left",bottomMargin:!1,"data-componentid":"".concat(P,"-page-layout")},f.createElement(T.n,{identityProvider:k,isLoading:F,onDelete:function(){r.m.push(a.$.getPaths().get("IDP"))},onUpdate:function(e,t){re(e),oe(!1,t)},"data-componentid":P,"data-testid":_,template:ie,type:Z,isReadOnly:te,isAutomaticTabRedirectionEnabled:V,setIsAutomaticTabRedirectionEnabled:W,tabIdentifier:x})))};const P=O}}]);