"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[9249],{78852:(e,n,t)=>{t.d(n,{c:()=>u});var o,i=t(60507);function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function a(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,l(o.key),o)}}function s(e,n,t){return n&&a(e.prototype,n),t&&a(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e,n,t){return(n=l(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e){var n=function(e,n){if("object"!=r(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var o=t.call(e,n||"default");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==r(n)?n:n+""}var u=s((function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e)}));o=u,c(u,"IMPERSONATION_CONFIG_FETCH_ERROR_CODE","IC-00001"),c(u,"IMPERSONATION_CONFIG_FETCH_INVALID_STATUS_CODE_ERROR_CODE","IC-00002"),c(u,"IMPERSONATION_CONFIG_UPDATE_ERROR_CODE","IC-00003"),c(u,"IMPERSONATION_CONFIG_REVERT_INVALID_STATUS_CODE_ERROR_CODE","IC-00004"),c(u,"IMPERSONATION_CONFIG_REVERT_ERROR_CODE","IC-00005"),c(u,"DEFAULT_SUBJECT_TOKEN_EXPIRY_TIME",180),c(u,"ErrorMessages",{IMPERSONATION_CONFIG_FETCH_ERROR_CODE:new i.O(o.IMPERSONATION_CONFIG_FETCH_ERROR_CODE,"An error occurred while fetching the Impersonation configurations.","Error while fetching the Impersonation configurations",null),IMPERSONATION_CONFIG_FETCH_INVALID_STATUS_CODE_ERROR_CODE:new i.O(o.IMPERSONATION_CONFIG_FETCH_INVALID_STATUS_CODE_ERROR_CODE,"Received an invalid status code while fetching the Impersonation configurations.","Invalid Status Code while fetching the Impersonation configurations",null),IMPERSONATION_CONFIG_REVERT_ERROR_CODE:new i.O(o.IMPERSONATION_CONFIG_REVERT_ERROR_CODE,"An error occurred while reverting the impersonation configurations.","Error while reverting the impersonation configurations",null),IMPERSONATION_CONFIG_REVERT_INVALID_STATUS_CODE_ERROR_CODE:new i.O(o.IMPERSONATION_CONFIG_REVERT_INVALID_STATUS_CODE_ERROR_CODE,"Received an invalid status code while reverting the impersonation configurations.","Invalid Status Code while reverting the impersonation configurations.",null),IMPERSONATION_CONFIG_UPDATE_ERROR_CODE:new i.O(o.IMPERSONATION_CONFIG_UPDATE_ERROR_CODE,"An error occurred while updating the Impersonation configurations.","Error while updating the Impersonation configurations",null)})},19249:(e,n,t)=>{t.r(n),t.d(n,{ImpersonationConfigurationPage:()=>v,default:()=>T});var o=t(55007),i=t(60486),r=t(40838),a=t(43939),s=t(6833),c=t(82406),l=t(79438),u=t(20494),E=t(44194),f=t(10479),m=t(47245),O=t(41206),p=t(89141),R=t(2292),d=t(22100),g=t(96124),_=t(78852),C=R.AsgardeoSPAClient.getInstance().httpRequest.bind(R.AsgardeoSPAClient.getInstance());function I(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var o,i,r,a,s=[],c=!0,l=!1;try{if(r=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;c=!1}else for(;!(c=(o=r.call(t)).done)&&(s.push(o.value),s.length!==n);c=!0);}catch(e){l=!0,i=e}finally{try{if(!c&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(e,n)||function(e,n){if(e){if("string"==typeof e)return N(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?N(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,o=Array(n);t<n;t++)o[t]=e[t];return o}var v=function(e){var n,t,R,N,v,T=e["data-componentid"],h=(0,E.useRef)(null),S=(0,E.useRef)(null),A=(0,m.v9)((function(e){return e.config.ui.features})),b=!(0,o.EV)(null==A||null===(n=A.server)||void 0===n||null===(n=n.scopes)||void 0===n?void 0:n.update),y=(0,m.I0)(),D=(0,f.$)().t,w=I((0,E.useState)(void 0),2),P=w[0],M=w[1],F=I((0,E.useState)(!1),2),V=F[0],G=F[1],U=(t={headers:{Accept:"application/json","Content-Type":"application/json"},method:s.f2.GET,url:d.D.getServiceResourceEndpoints().impersonationConfigurations},R=(0,g.Z)(t),N=R.data,v=R.error,{data:N,error:v,isLoading:!v&&!N,isValidating:R.isValidating,mutate:R.mutate}),L=U.data,j=U.isLoading,k=U.mutate,Z=U.error;(0,E.useEffect)((function(){L instanceof a.u||Z?y((0,c.V_)({description:D("impersonation:notifications.getConfiguration.error.description"),level:s.QU.ERROR,message:D("impersonation:notifications.getConfiguration.error.message")})):L&&M({enableEmailNotification:L.enableEmailNotification})}),[L]);var H=function(e){var n=[{operation:"REPLACE",path:"/enableEmailNotification",value:e}];G(!0),function(e){var n={data:e,headers:{Accept:"application/json","Content-Type":"application/json"},method:s.f2.PATCH,url:d.D.getServiceResourceEndpoints().impersonationConfigurations};return C(n).then((function(e){if(200!==e.status&&201!==e.status)throw new a.u(_.c.ErrorMessages.IMPERSONATION_CONFIG_FETCH_INVALID_STATUS_CODE_ERROR_CODE.getErrorMessage(),null,e.status,e.request,e,e.config);return Promise.resolve(e.data)})).catch((function(e){var n,t=_.c.ErrorMessages.IMPERSONATION_CONFIG_UPDATE_ERROR_CODE.getErrorMessage();throw new a.u(t,e.stack,null===(n=e.response)||void 0===n||null===(n=n.data)||void 0===n?void 0:n.code,e.request,e.response,e.config)}))}(n).then((function(){y((0,c.V_)({description:D("impersonation:notifications.updateConfiguration.success.description"),level:s.QU.SUCCESS,message:D("impersonation:notifications.updateConfiguration.success.message")}))})).catch((function(){G(!0),y((0,c.V_)({description:D("impersonation:notifications.updateConfiguration.error.description"),level:s.QU.ERROR,message:D("impersonation:notifications.updateConfiguration.error.message")}))})).finally((function(){G(!1),k()}))},q=function(){G(!0),function(){var e={headers:{Accept:"application/json","Content-Type":"application/json"},method:s.f2.DELETE,url:d.D.getServiceResourceEndpoints().impersonationConfigurations};return C(e).then((function(e){if(204!==e.status)throw new a.u(_.c.ErrorMessages.IMPERSONATION_CONFIG_REVERT_INVALID_STATUS_CODE_ERROR_CODE.getErrorMessage(),null,e.status,e.request,e,e.config);return Promise.resolve()})).catch((function(e){var n,t=_.c.ErrorMessages.IMPERSONATION_CONFIG_REVERT_ERROR_CODE.getErrorMessage();throw new a.u(t,e.stack,null===(n=e.response)||void 0===n||null===(n=n.data)||void 0===n?void 0:n.code,e.request,e.response,e.config)}))}().then((function(){y((0,c.V_)({description:D("impersonation:notifications.revertConfiguration.success.description"),level:s.QU.SUCCESS,message:D("impersonation:notifications.revertConfiguration.success.message")}))})).catch((function(){y((0,c.V_)({description:D("impersonation:notifications.revertConfiguration.error.description"),level:s.QU.ERROR,message:D("impersonation:notifications.revertConfiguration.error.message")}))})).finally((function(){G(!1),k()}))};return E.createElement(u.Xg,{title:D("impersonation:title"),pageTitle:D("impersonation:title"),description:D("impersonation:description"),backButton:{onClick:function(){r.m.push(i.$.getPaths().get("LOGIN_AND_REGISTRATION"))},text:D("governanceConnectors:goBackLoginAndRegistration")},bottomMargin:!1,contentTopMargin:!1,pageHeaderMaxWidth:!0,"data-componentid":"".concat(T,"-form-layout")},E.createElement(O.R,{innerRef:h},E.createElement(p.Z,{className:"mt-2"},E.createElement(p.Z.Row,{columns:1},E.createElement(p.Z.Column,{width:16},E.createElement(u.pJ,{className:"form-wrapper",padded:"very"},j?E.createElement(u.pO,null):E.createElement(E.Fragment,null,E.createElement(l.l0,{id:"impersonation-configuration-form",uncontrolledForm:!0,onSubmit:null,initialValues:P,enableReinitialize:!0,ref:S,noValidate:!0},E.createElement(p.Z,null,E.createElement(p.Z.Row,{columns:1,key:1},E.createElement(p.Z.Column,{key:"enableEmailNotification"},E.createElement(l.gN.Checkbox,{ariaLabel:"Enable Email Notification",name:"enableEmailNotification",hint:D("impersonation:form.enableEmailNotification.hint"),label:D("impersonation:form.enableEmailNotification.label"),readOnly:b||!b&&V,width:16,"data-componentid":"".concat(T,"-enable-email-notification"),toggle:!0,listen:function(e){H(e)}}))))))))),E.createElement(p.Z.Row,{columns:1},E.createElement(p.Z.Column,{width:16},E.createElement(u.v9,{sectionHeader:D("common:dangerZone")},E.createElement(u.cN,{actionTitle:D("governanceConnectors:dangerZone.actionTitle"),header:D("governanceConnectors:dangerZone.heading"),subheader:D("governanceConnectors:dangerZone.subHeading"),onActionClick:function(){return q()},"data-testid":"".concat(T,"-danger-zone")})))))))};v.defaultProps={"data-componentid":"impersonation-configuration-page"};const T=v}}]);