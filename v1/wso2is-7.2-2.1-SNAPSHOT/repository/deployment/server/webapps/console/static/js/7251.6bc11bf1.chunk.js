"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[7251],{46949:(e,t,i)=>{i.r(t),i.d(t,{default:()=>F});var n=i(91970),r=i(86989),a=i(82160),o=i(97434),l=i(7603),c=i(60486),s=i(40838),d=i(6833),p=i(82406),u=i(20494),m=i(50699),y=i(44194),f=i(10479),g=i(51835),h=i.n(g),b=i(27975),v=i.n(b),A=i(55900),S=i.n(A),I=i(21555),x=i.n(I),E=i(3621),O=i.n(E),Z=i(5062),w=i.n(Z),C=i(59047),N={};N.styleTagTransform=w(),N.setAttributes=x(),N.insert=S().bind(null,"head"),N.domAPI=v(),N.insertStyleElement=O();h()(C.Z,N);C.Z&&C.Z.locals&&C.Z.locals;var L=i(47245),T=i(61159),j=i(96124),k=i(76271),R=i(82630),P=i(96274);function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,r,a,o,l=[],c=!0,s=!1;try{if(a=(i=i.call(e)).next,0===t){if(Object(i)!==i)return;c=!1}else for(;!(c=(n=a.call(i)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,r=e}finally{try{if(!c&&null!=i.return&&(o=i.return(),Object(o)!==o))return}finally{if(s)throw r}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return D(e,t);var i={}.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?D(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=Array(t);i<t;i++)n[i]=e[i];return n}const F=function(e){var t=e.match,i=e["data-componentid"],g=void 0===i?"policy-edit-page":i,h=t.params.id,b=(0,L.I0)(),v=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i={headers:{Accept:"application/json","Content-Type":"application/json"},method:d.f2.GET,url:"".concat(k.h.getState().config.endpoints.entitlementPoliciesApi,"/").concat(e)},n=(0,j.Z)(t?i:null,{shouldRetryOnError:!1}),r=n.data,a=n.error,o=n.isValidating,l=n.mutate;return{data:r,error:a,isLoading:n.isLoading,isValidating:o,mutate:l}}(h,!(0,m.Z)(h)),A=v.data,S=v.isLoading,I=v.error,x=v.mutate,E=_((0,y.useState)(),2),O=E[0],Z=E[1],w=_((0,y.useState)(null==A?void 0:A.policyOrder),2),C=w[0],N=w[1];(0,y.useEffect)((function(){N(null==A?void 0:A.policyOrder)}),[A]);var D=(0,f.$)().t;return y.createElement(u.Xg,{title:S?"":null==A?void 0:A.policyId,backButton:{"data-componentid":"".concat(g,"-edit-policy-page-back-button"),onClick:function(){s.m.push(c.$.getPaths().get("POLICY_ADMINISTRATION"))},text:D("policyAdministration:editPolicy.backBtn")},"data-componentid":g},S&&y.createElement(r.Z,{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},y.createElement(o.Z,null)),I&&y.createElement(n.Z,{severity:"error",title:D("policyAdministration:editPolicy.errorTitle")},D("policyAdministration:editPolicy.errorDescription")),!S&&!I&&A&&y.createElement(r.Z,{mb:2},y.createElement("label",{htmlFor:"policy-order"},D("policyAdministration:editPolicy.fields.policyOrder.label")),y.createElement(l.Z,{id:"policy-order",type:"number",value:C,onChange:function(e){var t=e.target.value;N(""===t?void 0:Number(t))},variant:"outlined",size:"small",inputProps:{min:0}}),y.createElement(u.kW,{className:"hint-text"},D("policyAdministration:editPolicy.fields.policyOrder.hint"))),!S&&!I&&A&&y.createElement(r.Z,{className:"script-editor"},y.createElement(R.Z,{policyScript:O||A.policy,"data-componentid":"".concat(g,"-policy-editor"),onScriptChange:function(e){return Z(e)}})),!S&&!I&&A&&y.createElement(a.Z,{className:"edit-policy-btn",color:"primary",variant:"contained",onClick:function(){if(A){var e={active:A.active,attributeDTOs:[],policy:(0,P.$)(O||A.policy),policyEditorData:A.policyEditorData,policyId:A.policyId,policyIdReferences:A.policyIdReferences,policyOrder:null!=C?C:A.policyOrder,policySetIdReferences:A.policySetIdReferences,promote:A.promote};(0,T.i5)(e).then((function(){x(),b((0,p.V_)({description:D("policyAdministration:alerts.updateSuccess.description"),level:d.QU.SUCCESS,message:D("policyAdministration:alerts.updateSuccess.message")}))})).catch((function(){b((0,p.V_)({description:D("policyAdministration:alerts.updateFailure.description"),level:d.QU.ERROR,message:D("policyAdministration:alerts.updateFailure.message")}))}))}}},D("common:update")))}},70988:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(92336),r=i(31549),a=i(69673),o=i(14517),l=i(44194),c=i(78801);const s=(0,l.forwardRef)(((e,t)=>{var{className:i,InputLabelProps:l={disableAnimation:!0,focused:!1,shrink:!1},label:s,name:d,required:p}=e,u=(0,n.__rest)(e,["className","InputLabelProps","label","name","required"]);const m=Object.assign({disableAnimation:!0,focused:!1,required:p,shrink:!1},l);return(0,r.jsxs)(r.Fragment,{children:[s&&(0,r.jsx)(c.Z,Object.assign({id:d,htmlFor:d},m,{className:(0,o.Z)("oxygen-select-static-label",null==l?void 0:l.className)},{children:s})),(0,r.jsx)(a.Z,Object.assign({ref:t,labelId:d,className:(0,o.Z)("oxygen-select","OxygenSelect-root",i)},u))]})}));var d,p,u;d='/**\n * Copyright (c) 2023, WSO2 LLC. (https://www.wso2.com).\n *\n * WSO2 LLC. licenses this file to you under the Apache License,\n * Version 2.0 (the "License"); you may not use this file except\n * in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied. See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n.oxygen-select-static-label {\n  margin-top: -40px;\n  margin-left: -14px;\n}',p=document.getElementsByTagName("head")[0],(u=document.createElement("style")).setAttribute("type","text/css"),u.appendChild(document.createTextNode(d)),p.appendChild(u)},59047:(e,t,i)=>{i.d(t,{Z:()=>l});var n=i(81611),r=i.n(n),a=i(83948),o=i.n(a)()(r());o.push([e.id,".script-editor{border:1px solid var(--oxygen-palette-divider);padding-right:0;background:#f7f7f7;border-radius:8px;margin-bottom:10px}.script-editor .script-editor-toolbar-container{padding-left:10px;padding-right:10px}.edit-policy-btn{margin-top:10px;margin-left:20px}",""]);const l=o}}]);