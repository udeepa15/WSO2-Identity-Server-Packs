"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[6402],{27777:(e,t,n)=>{n.d(t,{x:()=>i});var r=n(96124),o=n(76271),a=n(6833),i=function(e,t,n,i,l){var s=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],c={headers:{Accept:"application/json","Content-Type":"application/json"},method:a.f2.GET,params:{filter:n,limit:e,offset:t,requiredAttributes:l,sort:i},url:o.h.getState().config.endpoints.userStores},u=(0,r.Z)(s?c:null);return{data:u.data,error:u.error,isLoading:u.isLoading,isValidating:u.isValidating,mutate:u.mutate,response:u.response}}},86402:(e,t,n)=>{n.r(t),n.d(t,{default:()=>V});var r=n(55007),o=n(25134),a=n(60486),i=n(90302),l=n(40838),s=n(50102),c=n(79408),u=n(48704),d=n(12754),m=n(6833),f=n(82406),p=n(96334),h=n(20494),g=n(44194),v=n(10479),E=n(47245),y=n(26154),S=n(47625),R=n(27777),b=n(13550),T=n(51021),A=n(36940),C=n(12638),O=n(20342),L=n(31687),w=n(10319);function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return U(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?U(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var P=function(e){var t,n,o,s=e.advancedSearch,c=e.defaultListItemLimit,u=e.isLoading,d=e.featureConfig,p=e.list,S=e.onEmptyListPlaceholderActionClick,R=e.onSearchQueryClear,U=e.searchQuery,P=e.selection,_=e.showListItemActions,k=e.update,M=e["data-testid"],x=I((0,g.useState)(!1),2),V=x[0],j=x[1],D=I((0,g.useState)(null),2),Z=D[0],F=D[1],N=I((0,g.useState)(""),2),Q=N[0],$=N[1],z=(0,E.v9)((function(e){return e.auth.isPrivilegedUser})),G=(0,E.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t||null===(t=t.features)||void 0===t||null===(t=t.userStores)||void 0===t?void 0:t.disabledFeatures})),q=(0,r.EV)(null==d||null===(t=d.userStores)||void 0===t||null===(t=t.scopes)||void 0===t?void 0:t.create),H=(0,r.EV)(null==d||null===(n=d.userStores)||void 0===n||null===(n=n.scopes)||void 0===n?void 0:n.update),J=(0,r.EV)(null==d||null===(o=d.userStores)||void 0===o||null===(o=o.scopes)||void 0===o?void 0:o.delete),K=(0,E.I0)(),Y=(0,v.$)().t,X=function(){j(!1),$(""),F(null)},W=function(){return U?g.createElement(h.$J,{action:g.createElement(h.Qj,{onClick:R},Y("console:manage.placeholders.emptySearchResult.action")),image:(0,b.jF)().emptySearch,imageSize:"tiny",title:Y("console:manage.placeholders.emptySearchResult.title"),subtitle:[Y("console:manage.placeholders.emptySearchResult.subtitles.0",{query:U}),Y("console:manage.placeholders.emptySearchResult.subtitles.1")],"data-testid":"".concat(M,"-empty-search-placeholder")}):0===(null==p?void 0:p.length)?q?T.wO.userstoreList.renderEmptyPlaceholder(S)?T.wO.userstoreList.renderEmptyPlaceholder(S):g.createElement(h.$J,{action:(null==G?void 0:G.includes(w.u4.FEATURE_DICTIONARY.get("USER_STORE_REMOTE")))&&g.createElement(h.KM,{onClick:S},g.createElement(y.Z,{name:"add"}),Y("userstores:placeholders.emptyList.action")),image:(0,b.jF)().newList,imageSize:"tiny",title:Y("userstores:placeholders.emptyList.title"),subtitle:[Y("userstores:placeholders.emptyList.subtitles")],"data-testid":"".concat(M,"-empty-placeholder")}):g.createElement(h.$J,{image:(0,b.jF)().newList,imageSize:"tiny",title:Y("userstores:placeholders.emptyListReadOnly.title"),subtitle:[Y("userstores:placeholders.emptyListReadOnly.subtitles")],"data-testid":"".concat(M,"-empty-placeholder")}):null},B=function(e,t){T.wO.onUserstoreEdit(e)&&t!==w.Qf?l.m.push(a.$.getPaths().get("USERSTORES_EDIT").replace(":id",e)):l.m.push(a.$.getPaths().get("USERSTORES_EDIT").replace(":id",e).replace("edit-user-store",T.wO.userstoreEdit.remoteUserStoreEditPath))};return g.createElement(g.Fragment,null,V&&g.createElement(h.cV,{onClose:X,type:"negative",open:V,assertion:Q,assertionHint:Y("userstores:confirmation.hint"),assertionType:"checkbox",primaryAction:Y("common:confirm"),secondaryAction:Y("common:cancel"),onSecondaryActionClick:X,onPrimaryActionClick:function(){(0,O.oA)(Z).then((function(){K((0,f.V_)({description:Y("userstores:notifications.deleteUserstore.success.description"),level:m.QU.SUCCESS,message:Y("userstores:notifications.deleteUserstore.success.message")})),K((0,f.V_)({description:Y("userstores:notifications.delay.description"),level:m.QU.WARNING,message:Y("userstores:notifications.delay.message")})),k()})).catch((function(e){var t,n;K((0,f.V_)({description:null!==(t=null==e?void 0:e.description)&&void 0!==t?t:Y("userstores:notifications.deleteUserstore.genericError.description"),level:m.QU.ERROR,message:null!==(n=null==e?void 0:e.message)&&void 0!==n?n:Y("userstores:notifications.deleteUserstore.genericError.message")}))})).finally((function(){X()}))},"data-testid":"".concat(M,"-delete-confirmation-modal"),closeOnDimmerClick:!1},g.createElement(h.cV.Header,{"data-testid":"".concat(M,"-delete-confirmation-modal-header")},Y("userstores:confirmation.header")),g.createElement(h.cV.Message,{attached:!0,negative:!0,"data-testid":"".concat(M,"-delete-confirmation-modal-message")},Y("userstores:confirmation.message")),g.createElement(h.cV.Content,{"data-testid":"".concat(M,"-delete-confirmation-modal-content")},Y("userstores:confirmation.content"))),g.createElement(h.wQ,{className:"userstores-table",externalSearch:s,isLoading:u,loadingStateOptions:{count:null!=c?c:i.r.DEFAULT_RESOURCE_LIST_ITEM_LIMIT,imageType:"square"},actions:_?[{icon:function(){return H?"pencil alternate":"eye"},onClick:function(e,t){return B(null==t?void 0:t.id,null==t?void 0:t.typeName)},popupText:function(){return Y(H?"common:edit":"common:view")},renderer:"semantic-icon"},{hidden:function(e){return!J||e.id==w.kL||z},icon:function(){return"trash alternate"},onClick:function(e,t){return n=null==t?void 0:t.id,r=null==t?void 0:t.name,F(n),$(r),void j(!0);var n,r},popupText:function(){return Y("common:delete")},renderer:"semantic-icon"}]:[],columns:[{allowToggleVisibility:!1,dataIndex:"name",id:"name",key:"name",render:function(e){return g.createElement(C.Z,{image:!0,as:"h6",className:"header-with-icon","data-testid":"".concat(M,"-item-heading")},g.createElement(h.dn,{defaultIcon:!0,relaxed:"very",size:"micro",shape:"rounded",spaced:"right",hoverable:!1,icon:(0,L.oy)().header.default}),g.createElement(C.Z.Content,null,e.enabled?g.createElement(h.GI,{trigger:g.createElement(y.Z,{className:"mr-2 ml-0 vertical-aligned-baseline",size:"small",name:"circle",color:"green"}),content:Y("common:enabled"),inverted:!0}):g.createElement(h.GI,{trigger:g.createElement(y.Z,{className:"mr-2 ml-0 vertical-aligned-baseline",size:"small",name:"circle",color:"orange"}),content:Y("common:disabled"),inverted:!0})),g.createElement(C.Z.Content,null,(null==e?void 0:e.name)===w.XS?A.ss.CUSTOMER_USER_STORE_MAPPING:null==e?void 0:e.name,g.createElement(C.Z.Subheader,null,e.description)))},title:Y("common:name")},{allowToggleVisibility:!1,dataIndex:"action",id:"actions",key:"actions",textAlign:"right",title:Y("common:actions")}],data:p,onRowClick:function(e,t){B(null==t?void 0:t.id,null==t?void 0:t.typeName)},placeholders:W(),selectable:P,showHeader:!1,transparent:!u&&null!==W(),"data-testid":M}))};function _(){return _=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_.apply(null,arguments)}function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return M(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?M(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}P.defaultProps={"data-testid":"userstores-list",selection:!0,showListItemActions:!0};var x=function(e){var t,n=e["data-testid"],b=(0,v.$)().t,T=[{key:0,text:b("common:name"),value:"name"},{key:1,text:b("common:description"),value:"description"}],A=(0,E.v9)((function(e){return e.config.ui.features})),C=k((0,g.useState)([]),2),O=C[0],L=C[1],I=k((0,g.useState)(0),2),U=I[0],M=I[1],x=k((0,g.useState)(i.r.DEFAULT_RESOURCE_LIST_ITEM_LIMIT),2),V=x[0],j=x[1],D=k((0,g.useState)([]),2),Z=D[0],F=D[1],N=k((0,g.useState)(T[0]),2),Q=N[0],$=N[1],z=k((0,g.useState)(!0),2),G=z[0],q=z[1],H=k((0,g.useState)(""),2),J=H[0],K=H[1],Y=k((0,g.useState)(!1),2),X=Y[0],W=Y[1],B=(0,E.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t||null===(t=t.features)||void 0===t||null===(t=t.userStores)||void 0===t?void 0:t.disabledFeatures})),ee=(0,E.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t?void 0:t.systemReservedUserStores})),te=(0,E.I0)(),ne=k((0,p.cC)(),2),re=ne[0],oe=ne[1],ae=(0,R.x)(null,null,null,null),ie=ae.data,le=ae.isLoading,se=ae.error,ce=ae.mutate;(0,g.useEffect)((function(){if((null==ie?void 0:ie.length)>0){var e=ie.filter((function(e){return!(null!=ee&&ee.includes(null==e?void 0:e.name))}));L(e),F(e)}}),[ie]),(0,g.useEffect)((function(){se&&te((0,f.V_)({description:(null==se?void 0:se.name)||b("userstores:notifications.fetchUserstores.genericError.description"),level:m.QU.ERROR,message:(null==se?void 0:se.message)||b("userstores:notifications.fetchUserstores.genericError.message")}))}),[se]),(0,g.useEffect)((function(){F((0,c.f)(Z,Q.value,G))}),[Q,G]);var ue,de=function(e){F((0,s.g)(O,e,"name",!0)),K(e),M(0),oe()},me=g.createElement(h.KM,{"data-componentid":"".concat(n,"-add-user-store-button"),"data-testid":"".concat(n,"-add-user-store-button")},g.createElement(y.Z,{name:"add"}),b("userstores:pageLayout.list.primaryAction"),g.createElement(y.Z,{name:"dropdown",className:"ml-3 mr-0"}));return g.createElement(h.Xg,{action:(le||!(!J&&(null==Z?void 0:Z.length)<=0&&null!=B&&B.includes(w.u4.FEATURE_DICTIONARY.get("USER_STORE_REMOTE"))))&&u.w.userstoreList.allowAddingUserstores&&g.createElement(r.di,{when:null==A||null===(t=A.userStores)||void 0===t||null===(t=t.scopes)||void 0===t?void 0:t.create},null!=B&&B.includes(w.u4.FEATURE_DICTIONARY.get("USER_STORE_REMOTE"))?g.createElement(h.KM,{onClick:function(){l.m.push(a.$.getPaths().get("USERSTORE_TEMPLATES"))},"data-testid":"".concat(n,"-list-layout-add-button")},g.createElement(y.Z,{name:"add"}),b("userstores:pageLayout.list.primaryAction")):g.createElement(S.Z,{"data-componentid":"".concat(n,"-add-user-store-dropdown"),direction:"left",floating:!0,icon:null,trigger:me},g.createElement(S.Z.Menu,null,(ue=[],ue.push({"data-componentid":"".concat(n,"-add-user-store-dropdown-item"),key:1,text:b("userstores:pageLayout.list.newUserStoreDropdown.connectDirectly"),value:w.oR.DIRECT}),ue.push({"data-componentid":"".concat(n,"-user-store-dropdown-item"),"data-testid":"".concat(n,"-user-store-dropdown-item"),key:2,text:b("userstores:pageLayout.list.newUserStoreDropdown.connectRemotely"),value:w.oR.REMOTE}),ue).map((function(e){return g.createElement(S.Z.Item,_({key:e.value.toString(),onClick:function(){return function(e){switch(e){case w.oR.DIRECT:l.m.push(a.$.getPaths().get("USERSTORE_TEMPLATES"));break;case w.oR.REMOTE:l.m.push(d.x$.getPaths().get("REMOTE_USER_STORE_CREATE"))}}(e.value)}},e))}))))),isLoading:le,title:b("userstores:pageLayout.list.title"),pageTitle:b("userstores:pageLayout.list.title"),description:b("userstores:pageLayout.list.description"),"data-testid":"".concat(n,"-page-layout")},g.createElement(h.PS,{advancedSearch:g.createElement(o.n,{onFilter:de,filterAttributeOptions:[{key:0,text:b("common:name"),value:"name"},{key:1,text:b("common:description"),value:"description"}],filterAttributePlaceholder:b("userstores:advancedSearch.form.inputs.filterAttribute.placeholder"),filterConditionsPlaceholder:b("userstores:advancedSearch.form.inputs.filterCondition.placeholder"),filterValuePlaceholder:b("userstores:advancedSearch.form.inputs.filterValue.placeholder"),placeholder:b("userstores:advancedSearch.placeholder"),defaultSearchAttribute:"name",defaultSearchOperator:"co",triggerClearQuery:X,"data-testid":"".concat(n,"-advanced-search")}),currentListSize:V,listItemLimit:V,onItemsPerPageDropdownChange:function(e,t){j(t.value)},onPageChange:function(e,t){M((t.activePage-1)*V)},onSortStrategyChange:function(e,t){$(T.filter((function(e){return e.value===t.value}))[0])},onSortOrderChange:function(e){q(e)},resetPagination:re,leftActionPanel:null,showPagination:!0,sortOptions:T,sortStrategy:Q,showTopActionPanel:le||!(!J&&(null==Z?void 0:Z.length)<=0),totalPages:Math.ceil((null==Z?void 0:Z.length)/V),totalListSize:null==Z?void 0:Z.length,isLoading:le,"data-testid":"".concat(n,"-list-layout")},g.createElement(P,{advancedSearch:g.createElement(o.n,{onFilter:de,filterAttributeOptions:[{key:0,text:b("common:name"),value:"name"},{key:1,text:b("common:description"),value:"description"}],filterAttributePlaceholder:b("userstores:advancedSearch.form.inputs.filterAttribute.placeholder"),filterConditionsPlaceholder:b("userstores:advancedSearch.form.inputs.filterCondition.placeholder"),filterValuePlaceholder:b("userstores:advancedSearch.form.inputs.filterValue.placeholder"),placeholder:b("userstores:advancedSearch.placeholder"),defaultSearchAttribute:"name",defaultSearchOperator:"co",triggerClearQuery:X,"data-testid":"".concat(n,"-advanced-search")}),list:function(e,t,n){return null==e?void 0:e.slice(n,n+t)}(Z,V,U),onEmptyListPlaceholderActionClick:function(){return l.m.push(a.$.getPaths().get("USERSTORE_TEMPLATES"))},onSearchQueryClear:function(){W(!X),K(""),F(O)},searchQuery:J,update:ce,featureConfig:A,"data-testid":"".concat(n,"-list")})))};x.defaultProps={"data-testid":"userstores"};const V=x}}]);