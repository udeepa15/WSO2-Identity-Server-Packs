"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[4624],{64624:(e,n,t)=>{t.r(n),t.d(n,{SessionManagementSettingsPage:()=>W,default:()=>K});var i,o=t(55007),r=t(60486),a=t(40838),s=t(21257),l=t(43939),c=t(6833),m=t(82406),u=t(79438),d=t(20494),E=t(34194),g=t(44194),f=t(10479),_=t(47245),S=t(89141),p=t(41193),N=t(62508),M=t(41206),O=t(37077),T=t(2292),I=t(22100),v=t(96124),A=t(60507);function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function b(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,P(i.key),i)}}function C(e,n,t){return n&&b(e.prototype,n),t&&b(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function R(e,n,t){return(n=P(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function P(e){var n=function(e,n){if("object"!=h(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var i=t.call(e,n||"default");if("object"!=h(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==h(n)?n:n+""}var y=C((function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e)}));i=y,R(y,"IDLE_SESSION_TIMEOUT_PATH","/idleSessionTimeoutPeriod"),R(y,"REMEMBER_ME_PERIOD_PATH","/rememberMePeriod"),R(y,"REPLACE_OPERATION","REPLACE"),R(y,"REMOVE_OPERATION","REMOVE"),R(y,"SESSION_MANAGEMENT_CONFIG_FETCH_ERROR_CODE","SMC-00001"),R(y,"SESSION_MANAGEMENT_CONFIG_FETCH_INVALID_STATUS_CODE_ERROR_CODE","SMC-00002"),R(y,"SESSION_MANAGEMENT_CONFIG_UPDATE_ERROR_CODE","SMC-00003"),R(y,"SESSION_MANAGEMENT_CONFIG_FIELD_MIN_LENGTH",0),R(y,"SESSION_MANAGEMENT_CONFIG_FIELD_MAX_LENGTH",100),R(y,"ErrorMessages",{SESSION_MANAGEMENT_CONFIG_FETCH_ERROR_CODE:new A.O(i.SESSION_MANAGEMENT_CONFIG_FETCH_ERROR_CODE,"An error occurred while fetching the session management configurations.","Error while fetching the session management configurations",null),SESSION_MANAGEMENT_CONFIG_FETCH_INVALID_STATUS_CODE_ERROR_CODE:new A.O(i.SESSION_MANAGEMENT_CONFIG_FETCH_INVALID_STATUS_CODE_ERROR_CODE,"Received an invalid status code while fetching the session management configurations.","Invalid Status Code while fetching the session management configurations",null),SESSION_MANAGEMENT_CONFIG_UPDATE_ERROR_CODE:new A.O(i.SESSION_MANAGEMENT_CONFIG_UPDATE_ERROR_CODE,"An error occurred while updating the session management configurations.","Error while updating the session management configurations",null)});var G=T.AsgardeoSPAClient.getInstance().httpRequest.bind(T.AsgardeoSPAClient.getInstance()),D=function(e){var n={data:e,headers:{Accept:"application/json","Content-Type":"application/json"},method:c.f2.PATCH,url:I.D.getServiceResourceEndpoints().serverConfigurations};return G(n).then((function(e){if(200!==e.status&&201!==e.status)throw new l.u(y.ErrorMessages.SESSION_MANAGEMENT_CONFIG_FETCH_INVALID_STATUS_CODE_ERROR_CODE.getErrorMessage(),null,e.status,e.request,e,e.config);return Promise.resolve(e.data)})).catch((function(e){var n,t=y.ErrorMessages.SESSION_MANAGEMENT_CONFIG_UPDATE_ERROR_CODE.getErrorMessage();throw new l.u(t,e.stack,null===(n=e.response)||void 0===n||null===(n=n.data)||void 0===n?void 0:n.code,e.request,e.response,e.config)}))},L=t(51835),w=t.n(L),F=t(27975),Z=t.n(F),H=t(55900),U=t.n(H),V=t(21555),j=t.n(V),k=t(3621),x=t.n(k),B=t(5062),q=t.n(B),z=t(27350),Q={};Q.styleTagTransform=q(),Q.setAttributes=j(),Q.insert=U().bind(null,"head"),Q.domAPI=Z(),Q.insertStyleElement=x();w()(z.Z,Q);z.Z&&z.Z.locals&&z.Z.locals;function $(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var i,o,r,a,s=[],l=!0,c=!1;try{if(r=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;l=!1}else for(;!(l=(i=r.call(t)).done)&&(s.push(i.value),s.length!==n);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(e,n)||function(e,n){if(e){if("string"==typeof e)return X(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?X(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,i=Array(n);t<n;t++)i[t]=e[t];return i}var J="session-management-config-form",W=function(e){var n,t,i,T,A,h=e["data-componentid"],b=(0,g.useRef)(null),C=(0,g.useRef)(null),R=(0,_.v9)((function(e){return e.config.ui.features})),P=(0,o.EV)(null===(n=R.governanceConnectors.scopes)||void 0===n?void 0:n.update),G=(0,_.I0)(),L=(0,f.$)().t,w=$((0,g.useState)(!1),2),F=w[0],Z=w[1],H=$((0,g.useState)(void 0),2),U=H[0],V=H[1],j=(0,s.z)().isSubOrganization,k=(t={headers:{Accept:"application/json","Content-Type":"application/json"},method:c.f2.GET,url:I.D.getServiceResourceEndpoints().serverConfigurations},i=(0,v.Z)(t),T=i.data,A=i.error,{data:T,error:A,isLoading:!A&&!T,isValidating:i.isValidating,mutate:i.mutate}),x=k.data,B=k.isLoading,q=k.mutate,z=k.error;(0,g.useEffect)((function(){x instanceof l.u||z?Q():x&&x.idleSessionTimeoutPeriod&&x.rememberMePeriod&&V({idleSessionTimeout:parseInt(x.idleSessionTimeoutPeriod),rememberMePeriod:parseInt(x.rememberMePeriod)})}),[x]);var Q=function(){G((0,m.V_)({description:L("sessionManagement:notifications.getConfiguration.error.description"),level:c.QU.ERROR,message:L("sessionManagement:notifications.getConfiguration.error.message")}))},X=function(){Z(!0);var e=[{operation:y.REMOVE_OPERATION,path:y.IDLE_SESSION_TIMEOUT_PATH},{operation:y.REMOVE_OPERATION,path:y.REMEMBER_ME_PERIOD_PATH}];D(e).then((function(){G((0,m.V_)({description:L("sessionManagement:notifications.revertConfiguration.success.description"),level:c.QU.SUCCESS,message:L("sessionManagement:notifications.revertConfiguration.success.message")})),q()})).catch((function(){G((0,m.V_)({description:L("sessionManagement:notifications.revertConfiguration.error.description"),level:c.QU.ERROR,message:L("sessionManagement:notifications.revertConfiguration.error.message")}))})).finally((function(){Z(!1)}))};return g.createElement(d.Xg,{title:L("sessionManagement:title"),pageTitle:L("sessionManagement:title"),description:L("sessionManagement:description"),backButton:{onClick:function(){a.m.push(r.$.getPaths().get("LOGIN_AND_REGISTRATION"))},text:L("governanceConnectors:goBackLoginAndRegistration")},bottomMargin:!1,contentTopMargin:!1,pageHeaderMaxWidth:!0,"data-componentid":"".concat(h,"-form-layout")},g.createElement(M.R,{innerRef:b},g.createElement(S.Z,{className:"mt-3"},g.createElement(S.Z.Row,{columns:1},g.createElement(S.Z.Column,{width:16},g.createElement(d.pJ,{className:"form-wrapper",padded:"very"},B?g.createElement(S.Z.Row,{columns:1},g.createElement("div",null,g.createElement("div",{className:"ui card fluid settings-card","data-testid":"".concat(h,"-loading-card")},g.createElement("div",{className:"content no-padding"},g.createElement("div",{className:"header-section"},g.createElement(p.Z,null,g.createElement(p.Z.Header,null,g.createElement(p.Z.Line,{length:"medium"}),g.createElement(p.Z.Line,{length:"full"}))),g.createElement(N.Z,{hidden:!0}))),g.createElement("div",{className:"content extra extra-content"},g.createElement("div",{className:"action-button"},g.createElement(p.Z,null,g.createElement(p.Z.Line,{length:"very short"}))))),g.createElement(N.Z,{hidden:!0}))):g.createElement("div",{className:"session-mgt-form-container"},g.createElement(u.l0,{id:J,uncontrolledForm:!1,onSubmit:function(e){Z(!0);var n=[{operation:y.REPLACE_OPERATION,path:y.IDLE_SESSION_TIMEOUT_PATH,value:e.idleSessionTimeout.toString()},{operation:y.REPLACE_OPERATION,path:y.REMEMBER_ME_PERIOD_PATH,value:e.rememberMePeriod.toString()}];D(n).then((function(){G((0,m.V_)({description:L("sessionManagement:notifications.updateConfiguration.success.description"),level:c.QU.SUCCESS,message:L("sessionManagement:notifications.updateConfiguration.success.message")})),q()})).catch((function(){G((0,m.V_)({description:L("sessionManagement:notifications.updateConfiguration.error.description"),level:c.QU.ERROR,message:L("sessionManagement:notifications.updateConfiguration.error.message")}))})).finally((function(){Z(!1)}))},initialValues:U,enableReinitialize:!0,ref:C,noValidate:!0,validate:function(e){var n={idleSessionTimeout:void 0,rememberMePeriod:void 0};return null!=e&&e.idleSessionTimeout&&(!E.I.isInteger(e.idleSessionTimeout)||e.idleSessionTimeout<0)&&(n.idleSessionTimeout=L("sessionManagement:form.validation.idleSessionTimeout")),null!=e&&e.rememberMePeriod&&(!E.I.isInteger(e.rememberMePeriod)||e.rememberMePeriod<0)&&(n.rememberMePeriod=L("sessionManagement:form.validation.rememberMePeriod")),n}},g.createElement(u.gN.Input,{min:y.SESSION_MANAGEMENT_CONFIG_FIELD_MIN_LENGTH,ariaLabel:"Idle Session Timeout Field",inputType:"number",name:"idleSessionTimeout",label:L("sessionManagement:form.idleSessionTimeout.label"),placeholder:L("sessionManagement:form.idleSessionTimeout.placeholder"),hint:L("sessionManagement:form.idleSessionTimeout.hint"),required:!0,value:null==U?void 0:U.idleSessionTimeout,readOnly:j()||!P,maxLength:null,minLength:y.SESSION_MANAGEMENT_CONFIG_FIELD_MIN_LENGTH,width:"100%","data-componentid":"".concat(h,"-idle-session-timeout"),labelPosition:"right"},g.createElement("input",null),g.createElement(O.Z,null,L("common:minutes"))),g.createElement(u.gN.Input,{min:y.SESSION_MANAGEMENT_CONFIG_FIELD_MIN_LENGTH,ariaLabel:"Remember Me Period Field",inputType:"number",name:"rememberMePeriod",label:L("sessionManagement:form.rememberMePeriod.label"),placeholder:L("sessionManagement:form.rememberMePeriod.placeholder"),hint:L("sessionManagement:form.rememberMePeriod.hint"),required:!0,value:null==U?void 0:U.rememberMePeriod,readOnly:j()||!P,maxLength:null,minLength:y.SESSION_MANAGEMENT_CONFIG_FIELD_MIN_LENGTH,width:"100%","data-componentid":"".concat(h,"-remember-me-period"),labelPosition:"right"},g.createElement("input",null),g.createElement(O.Z,null,L("common:minutes"))),!j()&&P&&g.createElement(u.gN.Button,{form:J,size:"small",buttonType:"primary_btn",name:"update-button","data-componentid":"".concat(h,"-update-button"),loading:F,onClick:function(){var e;null==C||null===(e=C.current)||void 0===e||e.triggerSubmit()},ariaLabel:"Session management form update button",label:L("common:update")})))))),!j()&&g.createElement(S.Z.Row,{columns:1},g.createElement(S.Z.Column,{width:16},g.createElement(d.v9,{sectionHeader:L("common:dangerZone")},g.createElement(d.cN,{actionTitle:L("governanceConnectors:dangerZone.actionTitle"),header:L("governanceConnectors:dangerZone.heading"),subheader:L("governanceConnectors:dangerZone.subHeading"),onActionClick:function(){return X()},"data-componentid":"".concat(h,"-danger-zone")})))))))};W.defaultProps={"data-componentid":"session-management-settings-page"};const K=W},27350:(e,n,t)=>{t.d(n,{Z:()=>s});var i=t(81611),o=t.n(i),r=t(83948),a=t.n(r)()(o());a.push([e.id,".session-mgt-form-container .ui.grid{display:grid;grid-template-columns:repeat(2, 1fr);column-gap:50px}@media(max-width: 768px){.session-mgt-form-container .ui.grid{grid-template-columns:1fr}}",""]);const s=a}}]);