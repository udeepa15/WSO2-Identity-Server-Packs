"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[4646],{73567:(e,t,n)=>{n.d(t,{M:()=>o});var r=n(96124),a=n(76271),i=n(6833),o=function(e,t,n){var o,l=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s={headers:{Accept:"application/json","Content-Type":"application/json"},method:i.f2.GET,params:{filter:n,limit:e,offset:t},url:null===(o=a.h.getState())||void 0===o||null===(o=o.config)||void 0===o||null===(o=o.endpoints)||void 0===o?void 0:o.workflowAssociations},u=(0,r.Z)(l?s:null);return{data:u.data,error:u.error,isLoading:u.isLoading,isValidating:u.isValidating,mutate:u.mutate,response:u.response}}},30229:(e,t,n)=>{n.d(t,{y:()=>r});var r=function(e){return e.EMAIL_OTP="emailOTP",e.EMAIL_LINK="emailLink",e.SMS_OTP="smsOTP",e}({})},69005:(e,t,n)=>{n.d(t,{Px:()=>r,YV:()=>a,jI:()=>i});var r=function(e){return e.EVERYONE="everyone",e.SYSTEM="system",e.SELFSIGNUP="selfsignup",e}({}),a=function(e){return e.SUCCESS="Successful",e.FAIL="Failed",e}({}),i=function(e){return e.ERROR_CODE_USER_NOT_FOUND="OUI-10011",e.ERROR_CODE_ACTIVE_INVITATION_EXISTS="OUI-10018",e.ERROR_CODE_INVITED_USER_EMAIL_NOT_FOUND="OUI-10030",e.ERROR_CODE_USER_ALREADY_EXISTS_INVITED_ORGANIZATION="OUI-10032",e}({})},81908:(e,t,n)=>{n.d(t,{G:()=>En});var r=n(73567),a=n(51021),i=n(46666),o=n(41355),l=n(48704),s=n(39203),u=n(21257),d=n(4717),c=n(47149),m=n(58613),f=n(33839),p=n(86105),v=n(6833),E=n(82406),g=n(96334),h=n(20494),b=n(47513),y=n(1651),S=n(50699),C=n(47130),I=n(4438),A=n(44194),_=n(10479),w=n(47245),U=n(47018),R=n(89141),N=n(26154),x=n(62782),L=n(94709),M=n(65612),O=n(78801),T=n(6470),P=n(5184),Z=n(29585),D=n(12380),k=n(12252),F=n(917),V=n(54274),j=n(63264),B=n(74411),q=n(29494),Y=n(10319),H=n(36940);function W(e){return function(e){if(Array.isArray(e))return K(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||z(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,l=[],s=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,a=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}(e,t)||z(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){if(e){if("string"==typeof e)return K(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?K(e,t):void 0}}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Q=function(e,t,n,r,a){var i=function(e,t,n,r){var a=(0,b.Z)(e),i=H.Cb.SCIM2_SYSTEM_USER_SCHEMA;i in a||(a[i]={});for(var o=H.Cb.SCIM2_SCHEMA_DICTIONARY.get("EMAILS"),l=H.Cb.SCIM2_SCHEMA_DICTIONARY.get("EMAIL_ADDRESSES"),s=H.Cb.SCIM2_SCHEMA_DICTIONARY.get("VERIFIED_EMAIL_ADDRESSES"),u=H.Cb.SCIM2_SCHEMA_DICTIONARY.get("EMAIL_VERIFIED"),d=H.Cb.SCIM2_SCHEMA_DICTIONARY.get("PHONE_NUMBERS"),c=H.Cb.SCIM2_SCHEMA_DICTIONARY.get("MOBILE_NUMBERS"),m=H.Cb.SCIM2_SCHEMA_DICTIONARY.get("VERIFIED_MOBILE_NUMBERS"),f=H.Cb.SCIM2_SCHEMA_DICTIONARY.get("PHONE_VERIFIED"),p=0,v=Object.entries(e);p<v.length;p++){var E=G(v[p],2),g=E[0],h=E[1];if(g===o){var y;if((0,S.Z)(h)){a[o]=[];continue}var C,I=null===(y=a[i])||void 0===y?void 0:y[l],A=Array.isArray(I)?I:[],_=(Array.isArray(h)?h:[]).find((function(e){return"string"==typeof e}));if(t&&(0,S.Z)(A)&&_&&(a[i][l]=[_]),t&&n&&(null===(C=a[i])||void 0===C?void 0:C[u])){var w,U=null===(w=a[i])||void 0===w?void 0:w[s],R=Array.isArray(U)?U:[];R.includes(_)||(a[i][s]=[].concat(W(R),[_]))}}else if(g===d&&!(0,S.Z)(h)){var N,x,L,M=null===(N=a[i])||void 0===N?void 0:N[c],O=Array.isArray(M)?M:[],T=null===(x=(Array.isArray(h)?h:[]).find((function(e){return"mobile"===e.type})))||void 0===x?void 0:x.value;if(t&&(0,S.Z)(O)&&T&&(a[i][c]=[T]),t&&r&&(null===(L=a[i])||void 0===L?void 0:L[f])){var P,Z=null===(P=a[i])||void 0===P?void 0:P[m],D=Array.isArray(Z)?Z:[];D.includes(T)||(a[i][m]=[].concat(W(D),[T]))}}}return a}(e,n,r,a),o={};i.id&&(o.id=i.id);var l,s=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=z(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw i}}}}(t);try{var u=function(){var e=l.value,t=e.schemaId,n=null==t?void 0:t.replace(/\./g,"__DOT__");t===H.Cb.SCIM2_CORE_USER_SCHEMA||Object.hasOwn(o,n)||(o[n]={});var r,a=e.name.split(".");if(e.extended||a[0]!==H.Cb.SCIM2_SCHEMA_DICTIONARY.get("EMAILS")&&a[0]!==H.Cb.SCIM2_SCHEMA_DICTIONARY.get("PHONE_NUMBERS"))if(e.extended||a[0]!==H.Cb.SCIM2_SCHEMA_DICTIONARY.get("ADDRESSES"))if(!e.extended&&a[0].startsWith("".concat(H.Cb.SCIM2_SCHEMA_DICTIONARY.get("ADDRESSES"),"#"))){var s,u=a[0].split("#"),d=a[1];o[e.name]=null===(s=i[u[0]])||void 0===s||null===(s=s.find((function(e){return e.type===u[1]})))||void 0===s?void 0:s[d]}else if(a.length>1){var c=a[0].split("#");if(c.length>1){var m,f,p=void 0;if(e.extended)p=null===(f=i[n])||void 0===f?void 0:f[c[0]];else p=i[c[0]];var v=null===(m=p.find((function(e){return e.type===c[1]})))||void 0===m?void 0:m.value;e.extended?o[n][e.name]=v:o[e.name]=v}else{var E,g,h;if(e.extended)if(e.schemaId===H.Cb.SCIM2_CORE_SCHEMA)o[e.name]=null===(E=i[a[0]])||void 0===E?void 0:E[a[1]];else o[n][e.name]=null===(g=i[e.schemaId])||void 0===g||null===(g=g[a[0]])||void 0===g?void 0:g[a[1]];else o[e.name]=null===(h=i[a[0]])||void 0===h?void 0:h[a[1]]}}else{var b;if(e.extended)o[n][e.name]=null===(b=i[e.schemaId])||void 0===b?void 0:b[a[0]];else o[e.name]=i[a[0]]}else{var y;o[e.name]=null===(y=i[a[0]])||void 0===y||null===(y=y.find((function(e){return e.type===a[1]})))||void 0===y?void 0:y.formatted}else if(1===a.length){if(a[0]===H.Cb.SCIM2_SCHEMA_DICTIONARY.get("EMAILS")){var S,C=null===(S=i[a[0]])||void 0===S?void 0:S.find((function(e){return"string"==typeof e}));o[a[0]]=C}}else o[e.name]=null===(r=i[a[0]])||void 0===r||null===(r=r.find((function(e){return e.type===a[1]})))||void 0===r?void 0:r.value};for(s.s();!(l=s.n()).done;)u()}catch(m){s.e(m)}finally{s.f()}Object.hasOwn(o,H.Cb.SCIM2_SYSTEM_USER_SCHEMA)||(o[H.Cb.SCIM2_SYSTEM_USER_SCHEMA]={}),o[H.Cb.SCIM2_SYSTEM_USER_SCHEMA][H.Cb.SCIM2_SCHEMA_DICTIONARY.get("EMAIL_VERIFIED")]=i[H.Cb.SCIM2_SYSTEM_USER_SCHEMA][H.Cb.SCIM2_SCHEMA_DICTIONARY.get("EMAIL_VERIFIED")],o[H.Cb.SCIM2_SYSTEM_USER_SCHEMA][H.Cb.SCIM2_SCHEMA_DICTIONARY.get("PHONE_VERIFIED")]=i[H.Cb.SCIM2_SYSTEM_USER_SCHEMA][H.Cb.SCIM2_SCHEMA_DICTIONARY.get("PHONE_VERIFIED")];var d=H.Cb.SCIM2_SCHEMA_DICTIONARY.get("PENDING_EMAILS");o[H.Cb.SCIM2_SYSTEM_USER_SCHEMA][d]=i[H.Cb.SCIM2_SYSTEM_USER_SCHEMA][d];var c=H.Cb.SCIM2_SCHEMA_DICTIONARY.get("PENDING_MOBILE");return o[H.Cb.SCIM2_SYSTEM_USER_SCHEMA][c]=i[H.Cb.SCIM2_SYSTEM_USER_SCHEMA][c],o},$=n(16590),X=n(79438),J=n(70104),ee=n(60486),te=n(40838),ne=n(30229),re=n(59673),ae=n(71551),ie=n(82555),oe=n(22669);const le=function(e){var t=e.profileSchema,n=e.isInviteUserToSetPasswordEnabled,r=e.isEmailRequired,a=e.isEmailFilled,i=e.isValidEmail,o=e.selectedAskPasswordOption,l=e.onAskPasswordOptionChange,s=e.connectorProperties,u=e.isAttributeProfileForUserCreationEnabled,d=e.isMultipleEmailAndMobileNumberEnabled,m=e.isDistinctAttributeProfilesDisabled,f=e.localClaims,p=e.hasWorkflowAssociations,v=void 0!==p&&p,E=e["data-componentid"],g=void 0===E?"ask-password-option":E,b=(0,_.$)().t,y=(0,w.v9)((function(e){var t;return null===(t=e.config.ui)||void 0===t||null===(t=t.flowExecution)||void 0===t?void 0:t.enableLegacyFlows})),S=(0,A.useMemo)((function(){if(s){var e=s.find((function(e){return e.name===c.v.ASK_PASSWORD_SMS_OTP}));if("true"===(null==e?void 0:e.value))return ne.y.SMS_OTP;var t=s.find((function(e){return e.name===c.v.ASK_PASSWORD_EMAIL_OTP}));return"true"===(null==t?void 0:t.value)?ne.y.EMAIL_OTP:ne.y.EMAIL_LINK}}),[s]),C=function(){if(!u||!t)return!1;var e=null==t?void 0:t.find((function(e){return e.name===H.Cb.SCIM2_SCHEMA_DICTIONARY.get("MOBILE_NUMBERS")})),n=null==t?void 0:t.find((function(e){return e.name===H.Cb.SCIM2_SCHEMA_DICTIONARY.get("MOBILE")}));return!!(d&&e&&(0,oe._g)(e,m))||!!(0,oe._g)(n,m)},I=function(){switch(S){case ne.y.SMS_OTP:return b("user:modals.addUserWizard.askPassword.inviteViaSMS");case ne.y.EMAIL_OTP:case ne.y.EMAIL_LINK:default:return b("user:modals.addUserWizard.askPassword.inviteViaEmail")}};return A.createElement("div",{className:"mt-4 mb-4 ml-4","data-componentid":g},A.createElement(ae.Z,{compact:!0,size:"small",className:"mb-4"},n&&(S!==ne.y.EMAIL_OTP&&S!==ne.y.EMAIL_LINK||r||i)&&(S!==ne.y.SMS_OTP||C())?A.createElement(ae.Z.Item,{name:I(),active:o===ie.mt.EMAIL,onClick:function(){return l(ie.mt.EMAIL)}}):A.createElement(h.GI,{basic:!0,inverted:!0,position:"top center",content:function(){if(!n)return A.createElement(A.Fragment,null,y?A.createElement(re.c,{i18nKey:"user:modals.addUserWizard.askPassword.emailVerificationDisabled"},"To invite users to set the password, enable email invitations for user password setup from ",A.createElement(h.rU,{onClick:function(){return te.m.push(ee.$.getPaths().get("GOVERNANCE_CONNECTOR_EDIT").replace(":categoryId",c.v.USER_ONBOARDING_CONNECTOR_ID).replace(":connectorId",c.v.ASK_PASSWORD_CONNECTOR_ID))},external:!1},"Login & Registration settings"),"."):A.createElement(re.c,{i18nKey:"user:modals.addUserWizard.askPassword.emailVerificationDisabledWithFlows"},"To invite users to set the password, enable the invitation flow settings from the ",A.createElement(h.rU,{onClick:function(){return te.m.push(ee.$.getPaths().get("INVITE_USER_PASSWORD_SETUP_FLOW_BUILDER"))},external:!1},"Invited User Registration Flow Builder"),"."));if(S===ne.y.SMS_OTP&&!C()){var e,t=(null==f||null===(e=f.find((function(e){return(null==e?void 0:e[J.QN.CLAIM_URI_ATTRIBUTE_KEY])===J.QN.MOBILE_CLAIM_URI})))||void 0===e?void 0:e.id)||"";return A.createElement(re.c,{i18nKey:"user:modals.addUserWizard.askPassword.mobileNumberAlreadyExists"},"Please enable mobile as required field ",A.createElement(h.rU,{onClick:function(){var e=ee.$.getPaths().get("LOCAL_CLAIMS_EDIT").replace(":id",t);te.m.push(e)},external:!1},"Mobile Attribute Settings"),".")}return a&&i?null:b("user:modals.addUserWizard.askPassword.emailInvalid")}(),hoverable:!0,trigger:A.createElement(ae.Z.Item,{name:I(),disabled:!0})}),v?A.createElement(h.GI,{basic:!0,inverted:!0,position:"top center",content:v?b("user:modals.addUserWizard.askPassword.offlineInviteUnavailableWithWorkflow"):null,hoverable:!0,trigger:A.createElement(ae.Z.Item,{name:b("user:modals.addUserWizard.askPassword.inviteOffline"),disabled:!0})}):A.createElement(ae.Z.Item,{name:b("user:modals.addUserWizard.askPassword.inviteOffline"),active:o===ie.mt.OFFLINE,onClick:function(){return l(ie.mt.OFFLINE)}})),o===ie.mt.EMAIL&&A.createElement(R.Z.Row,{columns:1},A.createElement(R.Z.Column,{mobile:16,computer:10},A.createElement(h.v0,{icon:function(){switch(S){case ne.y.EMAIL_OTP:case ne.y.EMAIL_LINK:return"mail";case ne.y.SMS_OTP:return"mobile";default:return"mail"}}(),content:function(){switch(S){case ne.y.EMAIL_OTP:return b("extensions:manage.features.user.addUser.inviteUserTooltip.emailOTPInviteTooltip");case ne.y.SMS_OTP:return b("extensions:manage.features.user.addUser.inviteUserTooltip.smsOTPInviteTooltip");case ne.y.EMAIL_LINK:default:return b("extensions:manage.features.user.addUser.inviteUserTooltip.emailLinkInviteTooltip")}}(),size:"small"}))),o===ie.mt.OFFLINE&&!v&&A.createElement(R.Z.Row,{columns:1},A.createElement(R.Z.Column,{mobile:16,computer:10},A.createElement(h.v0,{icon:"copy",content:b("extensions:manage.features.user.addUser.inviteUserOfflineTooltip"),size:"small"}))))};var se=n(22764),ue=n(51318),de=n(51835),ce=n.n(de),me=n(27975),fe=n.n(me),pe=n(55900),ve=n.n(pe),Ee=n(21555),ge=n.n(Ee),he=n(3621),be=n.n(he),ye=n(5062),Se=n.n(ye),Ce=n(42025),Ie={};Ie.styleTagTransform=Se(),Ie.setAttributes=ge(),Ie.insert=ve().bind(null,"head"),Ie.domAPI=fe(),Ie.insertStyleElement=be();ce()(Ce.Z,Ie);Ce.Z&&Ce.Z.locals&&Ce.Z.locals;const Ae=function(e){var t=e.initialValue,n=e.passwordConfig,r=e.passwordRegex,a=e["data-componentid"],i=void 0===a?"create-password-option":a,o=(0,_.$)().t,l=(0,se.cI)(),s="newPassword",u="newPasswordValidity";return A.createElement(R.Z.Row,{columns:2,"data-componentid":i},A.createElement(R.Z.Column,{mobile:16,computer:10},A.createElement("div",{className:"generate-password"},A.createElement("div",null,A.createElement(X.SE,{component:X.xh,type:"password",className:"addon-field-wrapper full-width",name:s,initialValue:t,label:o("user:forms.addUserForm.inputs.newPassword.label"),placeholder:o("user:forms.addUserForm.inputs.newPassword.placeholder"),required:!0,validate:function(e){var t;if((0,S.Z)(e))return o("user:forms.addUserForm.inputs.newPassword.validations.empty");var a=null!==(t=l.getState().values[u])&&void 0!==t&&t;return n&&!a?o("extensions:manage.features.user.addUser.validation.error.passwordValidation"):n||V.w.validateInputAgainstRegEx(e,r)?void 0:o("extensions:manage.features.user.addUser.validation.password")},validateFields:[u],"data-testid":"user-mgt-add-user-form-newPassword-input","data-componentid":"user-mgt-add-user-form-newPassword-input"}),A.createElement(X.SE,{component:"input",type:"hidden",validateFields:[s],name:u})),n&&A.createElement(h.zx,{basic:!0,primary:!0,size:"tiny",type:"button",className:"info add-user-step-button",onClick:function(){var e=(0,ue.F2)(Number(n.minLength),Number(n.minLowerCaseCharacters)>0,Number(n.minUpperCaseCharacters)>0,Number(n.minNumbers)>0,Number(n.minSpecialCharacters)>0,Number(n.minLowerCaseCharacters),Number(n.minUpperCaseCharacters),Number(n.minNumbers),Number(n.minSpecialCharacters),Number(n.minUniqueCharacters));l.change(s,e)},"data-testid":"user-mgt-password-generate-button","data-componentid":"user-mgt-password-generate-button"},"Generate")),n&&A.createElement(X.lP,{subscription:{values:!0}},(function(e){var t,r=e.values;return A.createElement(h.Tj,{password:null!==(t=r[s])&&void 0!==t?t:"",minLength:Number(n.minLength),maxLength:Number(n.maxLength),minNumbers:Number(n.minNumbers),minUpperCase:Number(n.minUpperCaseCharacters),minLowerCase:Number(n.minLowerCaseCharacters),minSpecialChr:Number(n.minSpecialCharacters),minUniqueChr:Number(n.minUniqueCharacters),maxConsecutiveChr:Number(n.maxConsecutiveCharacters),onPasswordValidate:function(e){l.change(u,e)},translations:{case:Number(null==n?void 0:n.minUpperCaseCharacters)>0&&Number(null==n?void 0:n.minLowerCaseCharacters)>0?o("extensions:manage.features.user.addUser.validation.passwordCase",{minLowerCase:n.minLowerCaseCharacters,minUpperCase:n.minUpperCaseCharacters}):Number(null==n?void 0:n.minUpperCaseCharacters)>0?o("extensions:manage.features.user.addUser.validation.upperCase",{minUpperCase:n.minUpperCaseCharacters}):o("extensions:manage.features.user.addUser.validation.lowerCase",{minLowerCase:n.minLowerCaseCharacters}),consecutiveChr:o("extensions:manage.features.user.addUser.validation.consecutiveCharacters",{repeatedChr:n.maxConsecutiveCharacters}),length:o("extensions:manage.features.user.addUser.validation.passwordLength",{max:n.maxLength,min:n.minLength}),numbers:o("extensions:manage.features.user.addUser.validation.passwordNumeric",{min:n.minNumbers}),specialChr:o("extensions:manage.features.user.addUser.validation.specialCharacter",{specialChr:n.minSpecialCharacters}),uniqueChr:o("extensions:manage.features.user.addUser.validation.uniqueCharacters",{uniqueChr:n.minUniqueCharacters})}})}))))};var _e=n(45634),we=n.n(_e),Ue=n(22026),Re=n(45941),Ne=n(67194),xe=n(543),Le=n(29651),Me=n(88332),Oe=n(45420),Te=n(44905),Pe=[];const Ze=function(e){var t,n,r,a,i,o=e.schema,l=e.initialValues,s=e.isUpdating,u=e["data-componentid"],d=void 0===u?"profile-form-field-renderer":u,c=(0,_.$)().t,m=c("user:profile.fields."+o.name.replace(".","_"),{defaultValue:o.displayName}),f="".concat(d,"-").concat(o.name),p=o.schemaId.replace(/\./g,"__DOT__"),E=!0,g=null!==(t=o.maxLength)&&void 0!==t?t:H.Cb.CLAIM_VALUE_MAX_LENGTH,h=function(e){return(0,S.Z)(e)?c("user:profile.forms.generic.inputs.validations.required",{fieldName:m}):(0,S.Z)(e)||RegExp(o.regEx).test(e)?void 0:c("users:forms.validation.formatError",{field:m})};if(o.schemaUri===H.Cb.SCIM2_SYSTEM_USER_SCHEMA_ATTRIBUTES.country)return A.createElement(Re.Z,{fieldLabel:m,fieldName:"".concat(p,".").concat(o.name),initialValue:null===(a=l[p])||void 0===a?void 0:a[o.name],isUpdating:s,isRequired:E,validator:h,validateFields:[],"data-componentid":f});if("locale"===o.name)return A.createElement(Le.Z,{fieldLabel:m,fieldName:o.name,initialValue:l[o.name],isUpdating:s,isRequired:E,validator:h,validateFields:[],"data-componentid":f});if(o.name===H.Cb.SCIM2_SCHEMA_DICTIONARY.get("DOB"))return A.createElement(Te.Z,{fieldName:"".concat(p,".").concat(o.name),fieldLabel:m,initialValue:null===(i=l[p])||void 0===i?void 0:i[o.name],validator:h,validateFields:[],placeholder:"YYYY-MM-DD",maxLength:g,isRequired:E,isUpdating:s,"data-componentid":f});var b,y=null!==(n=null===(r=o.inputFormat)||void 0===r?void 0:r.inputType)&&void 0!==n?n:v.wG.TEXT_INPUT,C=o.multiValued,I=o.name,w=null==l?void 0:l[o.name];o.extended&&(w=null==l||null===(b=l[p])||void 0===b?void 0:b[o.name],I="".concat(p,".").concat(o.name));if(C)switch(w=null!=w?w:Pe,y){case v.wG.CHECKBOX_GROUP:return A.createElement(Ue.Z,{schema:o,fieldLabel:m,fieldName:I,initialValue:w,isUpdating:s,isRequired:E,validateFields:[],"data-componentid":f});case v.wG.MULTI_SELECT_DROPDOWN:return A.createElement(xe.Z,{schema:o,fieldLabel:m,fieldName:I,initialValue:w,isUpdating:s,isRequired:E,validateFields:[],"data-componentid":f,isMultiSelect:!0});case v.wG.NUMBER_INPUT:return A.createElement(Me.Z,{schema:o,fieldName:I,fieldLabel:m,initialValue:w,type:"number",isRequired:E,isUpdating:s,maxValueLimit:H.Cb.MAX_MULTI_VALUES_ALLOWED,"data-componentid":f});case v.wG.TEXT_INPUT:default:return A.createElement(Me.Z,{schema:o,fieldName:I,fieldLabel:m,initialValue:w,isRequired:E,isUpdating:s,maxValueLimit:H.Cb.MAX_MULTI_VALUES_ALLOWED,"data-componentid":f})}switch(y){case v.wG.NUMBER_INPUT:return A.createElement(Te.Z,{fieldName:I,fieldLabel:m,initialValue:w,type:"number",validator:h,maxLength:g,isRequired:E,isUpdating:s,"data-componentid":f});case v.wG.CHECKBOX:return A.createElement(X.SE,{component:X.ur,ariaLabel:m,label:m,name:I,initialValue:null!=w&&w,readOnly:s,disabled:s,"data-componentid":f});case v.wG.TOGGLE:return A.createElement(X.SE,{component:X.qx,ariaLabel:m,label:m,name:I,initialValue:null!=w&&w,readOnly:s,disabled:s,"data-componentid":f});case v.wG.DROPDOWN:return A.createElement(xe.Z,{schema:o,fieldLabel:m,fieldName:I,initialValue:w,isUpdating:s,isRequired:E,"data-componentid":f});case v.wG.RADIO_GROUP:return A.createElement(Oe.Z,{schema:o,fieldLabel:m,fieldName:I,initialValue:w,isUpdating:s,isRequired:E,validator:h,"data-componentid":f});case v.wG.DATE_PICKER:var U=we()(w,"YYYY-MM-DD",!0);return(0,S.Z)(w)||U.isValid()?A.createElement(Ne.Z,{schema:o,fieldLabel:m,fieldName:I,initialValue:w,isUpdating:s,isRequired:E,validator:h,"data-componentid":f}):A.createElement(Te.Z,{fieldName:I,fieldLabel:m,initialValue:w,validator:h,maxLength:g,isRequired:E,isUpdating:s,"data-componentid":f});default:return A.createElement(Te.Z,{fieldName:I,fieldLabel:m,initialValue:w,validator:h,maxLength:g,isRequired:E,isUpdating:s,validateFields:[],"data-componentid":f})}};var De=n(27044),ke=n(758),Fe=n(82070),Ve=n(76647),je=n(43800),Be=n(20839),qe=n(24383),Ye=n(1227),He=n(4358),We=n(7603),Ge=n(17901),ze=n(55495),Ke=n(52507),Qe={};Qe.styleTagTransform=Se(),Qe.setAttributes=ge(),Qe.insert=ve().bind(null,"head"),Qe.domAPI=fe(),Qe.insertStyleElement=be();ce()(Ke.Z,Qe);Ke.Z&&Ke.Z.locals&&Ke.Z.locals;function $e(e){return function(e){if(Array.isArray(e))return et(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Je(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,l=[],s=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,a=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}(e,t)||Je(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Je(e,t){if(e){if("string"==typeof e)return et(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?et(e,t):void 0}}function et(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const tt=function(e){var t,n,r,a,i=e.schema,o=e.primaryEmailSchema,l=e.primaryEmailAddress,s=e.emailAddressesList,u=e.fieldLabel,d=e.maxValueLimit,c=e["data-componentid"],m=void 0===c?"email-field":c,f=(0,_.$)().t,p=(0,se.cI)(),v=(0,A.useRef)(null),E="".concat(i.name,"-add-field"),g="".concat(i.schemaId,".").concat(i.name),b="".concat(H.Cb.SCIM2_SCHEMA_DICTIONARY.get("EMAILS"),".primary"),y=(0,se.U$)(g,{subscription:{error:!0,touched:!0,value:!0}}),C=y.input.value,I=y.meta,w=I.error,U=I.touched,R=(0,se.U$)(b,{subscription:{error:!0,touched:!0,value:!0}}),N=R.input.value,x=R.meta,L=x.error,O=x.touched,T=null!==(t=null==o||null===(n=o.profiles)||void 0===n||null===(n=n.console)||void 0===n?void 0:n.required)&&void 0!==t?t:null==o?void 0:o.required,P=null!==(r=null==i||null===(a=i.profiles)||void 0===a||null===(a=a.console)||void 0===a?void 0:a.required)&&void 0!==r?r:null==i?void 0:i.required,Z=Xe((0,A.useState)(),2),D=Z[0],k=Z[1],F=function(e,t){return t===e};(0,A.useEffect)((function(){p.batch((function(){p.change(g,s),p.change(b,l),p.initialize(p.getState().values)}))}),[]),(0,A.useEffect)((function(){var e,t=null===(e=v.current)||void 0===e?void 0:e.form;if(t){var n=function(){var e,t=null==v||null===(e=v.current)||void 0===e?void 0:e.value,n=(null!=t?t:"").trim();n&&(j(n)||q(n))};return t.addEventListener("submit",n,!0),function(){t.removeEventListener("submit",n,!0)}}}),[N,C,E,p]);var V=(0,A.useMemo)((function(){var e,t=[],n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Je(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw i}}}}($e(C||[]));try{for(n.s();!(e=n.n()).done;){var r=e.value,a={isPrimary:F(r,N),value:r};a.isPrimary?t.unshift(a):t.push(a)}}catch(i){n.e(i)}finally{n.f()}return t}),[C,N]),j=(0,A.useCallback)((function(e){return null!=C&&C.includes(e)?f("users:forms.validation.duplicateError",{field:u}):RegExp(null==o?void 0:o.regEx).test(e)?void 0:f("users:forms.validation.formatError",{field:u})}),[C]),B=(0,A.useCallback)((0,ze.Z)((function(e){k(j(e))}),500),[C]),q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if((0,S.Z)(e)){var t;if(e=null==v||null===(t=v.current)||void 0===t?void 0:t.value,(0,S.Z)(e))return;var n=j(e);if(!(0,S.Z)(n))return}var r=null!=C?C:[];p.batch((function(){p.change(g,[].concat($e(r),[e])),0===r.length&&p.change(b,e)})),v.current.value=""};return A.createElement(M.Z,{container:!0},A.createElement(M.Z,{xs:12},A.createElement(We.Z,{inputRef:v,name:"".concat(i.name,"-add-field"),type:"text",label:u,margin:"dense",placeholder:f("user:forms.addUserForm.inputs.generic.placeholder",{label:u}),InputProps:{endAdornment:A.createElement(Ve.Z,{position:"end"},A.createElement(h.GI,{size:"tiny",trigger:A.createElement(Fe.Z,{"data-componentid":"".concat(m,"-multivalue-add-icon"),size:"large",disabled:!(0,S.Z)(D)||V.length>=d,onClick:function(){return q()}},A.createElement(Ge.pO,null)),header:f("common:add"),inverted:!0}))},InputLabelProps:{required:T||P},error:!(0,S.Z)(D)||U&&w||O&&L,helperText:D||U&&w||O&&L,onChange:function(e){B(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),q())},"data-componentid":"".concat(m,"-input"),"data-testid":"".concat(m,"-input"),fullWidth:!0}),A.createElement(X.SE,{name:g,component:"input",type:"hidden",validate:function(e){if(P&&(0,S.Z)(e))return f("user:profile.forms.generic.inputs.validations.required",{fieldName:u})}}),A.createElement(X.SE,{name:b,component:"input",type:"hidden",validate:function(e){if(T&&(0,S.Z)(e))return f("user:profile.forms.email.primaryEmail.validations.empty")}})),A.createElement(M.Z,{xs:12},A.createElement(De.Z,{component:je.Z,elevation:0},A.createElement(Be.Z,{className:"multi-value-table",size:"small","aria-label":"multi-attribute value table"},A.createElement(qe.Z,null,V.map((function(e,t){var n=e.value,r=e.isPrimary;return A.createElement(He.Z,{key:t,className:"multi-value-table-data-row"},A.createElement(Ye.Z,{align:"left"},A.createElement(M.Z,{direction:"row",gap:1,container:!0,justifyContent:"flex-start",alignItems:"center"},A.createElement("label",{"data-componentid":"".concat(m,"-value-").concat(t),className:"multi-value-table-label truncate"},n),r&&A.createElement("div",{"data-componentid":"".concat(m,"-primary-icon-").concat(t)},A.createElement(ke.Z,{label:f("common:primary"),size:"medium"})))),A.createElement(Ye.Z,{align:"right"},A.createElement(M.Z,{direction:"row",gap:1,justifyContent:"flex-end",container:!0},!r&&A.createElement(h.GI,{size:"tiny",trigger:A.createElement(Fe.Z,{size:"small",onClick:function(){return e=n,void p.change(b,e);var e},"data-componentid":"".concat(m,"-make-primary-button-").concat(t),disabled:r&&T},A.createElement(Ge.r7,null)),header:f("common:makePrimary"),inverted:!0}),A.createElement(h.GI,{size:"tiny",trigger:A.createElement(Fe.Z,{size:"small",onClick:function(){return e=n,t=null==C?void 0:C.filter((function(t){return t!==e})),void p.batch((function(){p.change(g,t),e===N&&p.change(b,"")}));var e,t},"data-componentid":"".concat(m,"-delete-button-").concat(t),disabled:r&&T},A.createElement(Ge.XH,null)),header:f("common:delete"),inverted:!0}))))})))))))};var nt=n(73061);function rt(e){return function(e){if(Array.isArray(e))return ot(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||it(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function at(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,l=[],s=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,a=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}(e,t)||it(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function it(e,t){if(e){if("string"==typeof e)return ot(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ot(e,t):void 0}}function ot(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const lt=function(e){var t,n,r,a,i=e.schema,o=e.primarySchema,l=e.primaryMobileNumber,s=e.mobileNumbersList,u=e.isUpdating,d=e.fieldLabel,c=e.maxValueLimit,m=e["data-componentid"],f=void 0===m?"mobile-numbers-field":m,p=(0,_.$)().t,v=(0,se.cI)(),E=(0,A.useRef)(null),g="".concat(i.name,"-add-field"),b="".concat(i.schemaId,".").concat(i.name),y=H.Cb.SCIM2_SCHEMA_DICTIONARY.get("MOBILE"),C=(0,se.U$)(b,{subscription:{error:!0,touched:!0,value:!0}}),I=C.input.value,w=C.meta,U=w.error,R=w.touched,N=(0,se.U$)(y,{subscription:{error:!0,touched:!0,value:!0}}),x=N.input.value,L=N.meta,O=L.error,T=L.touched,P=null!==(t=null==o||null===(n=o.profiles)||void 0===n||null===(n=n.console)||void 0===n?void 0:n.required)&&void 0!==t?t:null==o?void 0:o.required,Z=null!==(r=null==i||null===(a=i.profiles)||void 0===a||null===(a=a.console)||void 0===a?void 0:a.required)&&void 0!==r?r:null==i?void 0:i.required,D=at((0,A.useState)([]),2),k=D[0],F=D[1],V=at((0,A.useState)(),2),j=V[0],B=V[1],q=function(e,t){return t===e};(0,A.useEffect)((function(){v.batch((function(){v.change(b,s),v.change(y,l),v.initialize(v.getState().values)}))}),[]),(0,A.useEffect)((function(){var e,t=[],n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=it(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw i}}}}(rt(I||[]));try{for(n.s();!(e=n.n()).done;){var r=e.value,a={isPrimary:q(r,x),value:r};a.isPrimary?t.unshift(a):t.push(a)}}catch(i){n.e(i)}finally{n.f()}F(t)}),[I,x]),(0,A.useEffect)((function(){var e,t=null===(e=E.current)||void 0===e?void 0:e.form;if(t){var n=function(){var e,t=null==E||null===(e=E.current)||void 0===e?void 0:e.value,n=(null!=t?t:"").trim();n&&(Y(n)||G(n))};return t.addEventListener("submit",n,!0),function(){t.removeEventListener("submit",n,!0)}}}),[x,I,g,v]);var Y=(0,A.useCallback)((function(e){return null!=I&&I.includes(e)?p("users:forms.validation.duplicateError",{field:o.displayName}):RegExp(null==o?void 0:o.regEx).test(e)?void 0:p("users:forms.validation.formatError",{field:o.displayName})}),[I]),W=(0,A.useCallback)((0,ze.Z)((function(e){B(Y(e))}),500),[I]),G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e;if((0,S.Z)(e)){var n;if(t=null==E||null===(n=E.current)||void 0===n?void 0:n.value,(0,S.Z)(t))return;var r=Y(t);if(!(0,S.Z)(r))return}v.batch((function(){v.change(b,[].concat(rt(null!=I?I:[]),[t])),(0,S.Z)(I)&&v.change(y,t)})),E.current.value=""};return A.createElement(M.Z,{container:!0},A.createElement(M.Z,{xs:12},A.createElement(We.Z,{inputRef:E,name:"".concat(i.name,"-add-field"),type:"text",label:d,margin:"dense",placeholder:p("user:profile.forms.generic.inputs.placeholder",{fieldName:d}),InputProps:{endAdornment:A.createElement(Ve.Z,{position:"end"},A.createElement(nt.Z,{title:"Add"},A.createElement(Fe.Z,{"data-componentid":"".concat(f,"-multivalue-add-icon"),size:"large",disabled:u||!(0,S.Z)(j)||k.length>=c,onClick:function(){return G()}},A.createElement(Ge.pO,null)))),readOnly:u},InputLabelProps:{required:P||Z},error:!(0,S.Z)(j)||R&&U||T&&O,helperText:j||R&&U||T&&O,onChange:function(e){W(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),G())},"data-componentid":"".concat(f,"-input"),"data-testid":"".concat(f,"-input"),fullWidth:!0}),A.createElement(X.SE,{name:b,component:"input",type:"hidden",validate:function(e){if(Z&&(0,S.Z)(e))return p("user:profile.forms.generic.inputs.validations.required",{fieldName:d})}}),A.createElement(X.SE,{name:y,component:"input",type:"hidden",validate:function(e){if(Z&&(0,S.Z)(e))return p("user:profile.forms.mobile.primaryMobile.validations.empty")}})),A.createElement(M.Z,{xs:12},A.createElement(De.Z,{component:je.Z,elevation:0},A.createElement(Be.Z,{className:"multi-value-table",size:"small","aria-label":"multi-attribute value table"},A.createElement(qe.Z,null,k.map((function(e,t){var n=e.value,r=e.isPrimary;return A.createElement(He.Z,{key:t,className:"multi-value-table-data-row"},A.createElement(Ye.Z,{align:"left"},A.createElement(M.Z,{direction:"row",gap:1,container:!0,justifyContent:"flex-start",alignItems:"center"},A.createElement("label",{"data-componentid":"".concat(f,"-value-").concat(t),className:"multi-value-table-label"},n),r&&A.createElement("div",{"data-componentid":"".concat(f,"-primary-icon-").concat(t)},A.createElement(ke.Z,{label:p("common:primary"),size:"medium"})))),A.createElement(Ye.Z,{align:"right"},A.createElement(M.Z,{direction:"row",gap:1,justifyContent:"flex-end",container:!0},!r&&A.createElement(h.GI,{size:"tiny",trigger:A.createElement(Fe.Z,{size:"small",onClick:function(){return e=n,void v.change(y,e);var e},"data-componentid":"".concat(f,"-make-primary-button-").concat(t),disabled:u},A.createElement(Ge.r7,null)),header:p("common:makePrimary"),inverted:!0}),A.createElement(h.GI,{size:"tiny",trigger:A.createElement(Fe.Z,{size:"small",onClick:function(){return e=n,t=null==I?void 0:I.filter((function(t){return t!==e})),void v.batch((function(){v.change(b,t),e===x&&v.change(y,"")}));var e,t},"data-componentid":"".concat(f,"-delete-button-").concat(t),disabled:r&&P||u},A.createElement(Ge.XH,null)),header:p("common:delete"),inverted:!0}))))})))))))};var st=n(86329),ut=n(92283),dt=n(6643),ct=n(85513),mt={};mt.styleTagTransform=Se(),mt.setAttributes=ge(),mt.insert=ve().bind(null,"head"),mt.domAPI=fe(),mt.insertStyleElement=be();ce()(ct.Z,mt);ct.Z&&ct.Z.locals&&ct.Z.locals;function ft(e){return ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ft(e)}function pt(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=ft(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ft(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ft(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vt(){vt=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function d(e,t,n,r){var i=t&&t.prototype instanceof g?t:g,o=Object.create(i.prototype),l=new x(r||[]);return a(o,"_invoke",{value:w(e,n,l)}),o}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var m="suspendedStart",f="suspendedYield",p="executing",v="completed",E={};function g(){}function h(){}function b(){}var y={};u(y,o,(function(){return this}));var S=Object.getPrototypeOf,C=S&&S(S(L([])));C&&C!==n&&r.call(C,o)&&(y=C);var I=b.prototype=g.prototype=Object.create(y);function A(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function n(a,i,o,l){var s=c(e[a],e,i);if("throw"!==s.type){var u=s.arg,d=u.value;return d&&"object"==ft(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,o,l)}),(function(e){n("throw",e,o,l)})):t.resolve(d).then((function(e){u.value=e,o(u)}),(function(e){return n("throw",e,o,l)}))}l(s.arg)}var i;a(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,a){n(e,r,t,a)}))}return i=i?i.then(a,a):a()}})}function w(t,n,r){var a=m;return function(i,o){if(a===p)throw Error("Generator is already running");if(a===v){if("throw"===i)throw o;return{value:e,done:!0}}for(r.method=i,r.arg=o;;){var l=r.delegate;if(l){var s=U(l,r);if(s){if(s===E)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===m)throw a=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=p;var u=c(t,n,r);if("normal"===u.type){if(a=r.done?v:f,u.arg===E)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=v,r.method="throw",r.arg=u.arg)}}}function U(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,U(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),E;var i=c(a,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,E;var o=i.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,E):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,E)}function R(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(R,this),this.reset(!0)}function L(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(ft(t)+" is not iterable")}return h.prototype=b,a(I,"constructor",{value:b,configurable:!0}),a(b,"constructor",{value:h,configurable:!0}),h.displayName=u(b,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,s,"GeneratorFunction")),e.prototype=Object.create(I),e},t.awrap=function(e){return{__await:e}},A(_.prototype),u(_.prototype,l,(function(){return this})),t.AsyncIterator=_,t.async=function(e,n,r,a,i){void 0===i&&(i=Promise);var o=new _(d(e,n,r,a),i);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},A(I),u(I,s,"Generator"),u(I,o,(function(){return this})),u(I,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=L,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return l.type="throw",l.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],l=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,E):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),E},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),E}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;N(n)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:L(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),E}},t}function Et(e,t,n,r,a,i,o){try{var l=e[i](o),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,a)}function gt(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){Et(i,r,a,o,l,"next",e)}function l(e){Et(i,r,a,o,l,"throw",e)}o(void 0)}))}}function ht(e){return function(e){if(Array.isArray(e))return St(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||yt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,l=[],s=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,a=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}(e,t)||yt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yt(e,t){if(e){if("string"==typeof e)return St(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?St(e,t):void 0}}function St(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Ct=function(e){var t,n=e.initialValues,r=e.triggerSubmit,a=e.setTriggerSubmit,i=e.emailVerificationEnabled,o=e.onSubmit,l=e.isUserstoreRequired,s=e.passwordOption,u=e.setUserSummaryEnabled,d=e.setAskPasswordFromUser,c=e.selectedUserStore,f=e.setPasswordOption,g=e.setSelectedUserStore,h=e.setOfflineUser,b=e.setBasicDetailsLoading,y=e.validationConfig,C=e.selectedUserStoreId,I=e.isBasicDetailsLoading,U=e.connectorProperties,N=e.hasWorkflowAssociations,W=void 0!==N&&N,G=e.askPasswordOption,z=e.setAskPasswordOption,K=e["data-componentid"],J=void 0===K?"add-user-basic":K,ee=(0,_.$)().t,te=(0,F.Z)().UIConfig,ne=(0,m.Z)(),re=ne.isUserStoreReadOnly,ae=ne.userStoresList,ie=(0,w.I0)(),oe=(0,A.useRef)(null),se=(0,w.v9)((function(e){return e.profile.profileSchemas})),ue=(0,w.v9)((function(e){return e.config.ui.features})),de=(0,w.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t?void 0:t.systemReservedUserStores})),ce=bt((0,A.useState)(void 0),2),me=ce[0],fe=ce[1],pe=bt((0,A.useState)(void 0),2),ve=pe[0],Ee=pe[1],ge=bt((0,A.useState)(C),2),he=ge[0],be=ge[1],ye=bt((0,A.useState)(!1),2),Se=ye[0],Ce=ye[1],Ie=bt((0,A.useState)(!1),2),_e=Ie[0],we=Ie[1],Ue=bt((0,A.useState)([]),2),Re=Ue[0],Ne=Ue[1],xe=bt((0,A.useState)(!0),2),Le=xe[0],Me=xe[1],Oe=bt((0,A.useState)(!0),2),Te=Oe[0],Pe=Oe[1],De=bt((0,A.useState)(!1),2),ke=De[0],Fe=De[1],Ve=bt((0,A.useState)(),2),je=Ve[0],Be=Ve[1],qe=(0,A.useRef)(r),Ye=null==ue||null===(t=ue.attributeDialects)||void 0===t||null===(t=t.disabledFeatures)||void 0===t?void 0:t.includes(k.QN.DISTINCT_ATTRIBUTE_PROFILES_FEATURE_FLAG),He=(0,p.cr)(null==ue?void 0:ue.users,ut._F.ATTRIBUTE_PROFILES_FOR_USER_CREATION_FEATURE_FLAG),We=(0,p.cr)(null==ue?void 0:ue.users,ut._F.FEATURE_DICTIONARY.get(ut.Oq.UseDefaultLabelsAndOrder)),Ge=null==te?void 0:te.isMultipleEmailsAndMobileNumbersEnabled,ze=H.Cb.SCIM2_SCHEMA_DICTIONARY.get("EMAILS"),Ke=H.Cb.SCIM2_SCHEMA_DICTIONARY.get("MOBILE"),Qe=H.Cb.SCIM2_SCHEMA_DICTIONARY.get("EMAIL_ADDRESSES"),$e=H.Cb.SCIM2_SCHEMA_DICTIONARY.get("MOBILE_NUMBERS"),Xe=H.Cb.SCIM2_SCHEMA_DICTIONARY.get("VERIFIED_MOBILE_NUMBERS"),Je=H.Cb.SCIM2_SCHEMA_DICTIONARY.get("VERIFIED_EMAIL_ADDRESSES"),et=[H.Cb.SCIM2_SCHEMA_DICTIONARY.get("META_VERSION"),H.Cb.SCIM2_SCHEMA_DICTIONARY.get("USERNAME"),H.Cb.SCIM2_SCHEMA_DICTIONARY.get("ROLES_DEFAULT"),H.Cb.SCIM2_SCHEMA_DICTIONARY.get("ACTIVE"),H.Cb.SCIM2_SCHEMA_DICTIONARY.get("GROUPS"),H.Cb.SCIM2_SCHEMA_DICTIONARY.get("PROFILE_URL"),H.Cb.SCIM2_SCHEMA_DICTIONARY.get("ACCOUNT_LOCKED"),H.Cb.SCIM2_SCHEMA_DICTIONARY.get("ACCOUNT_DISABLED"),H.Cb.SCIM2_SCHEMA_DICTIONARY.get("ONETIME_PASSWORD"),H.Cb.SCIM2_SCHEMA_DICTIONARY.get("FIRST_NAME"),H.Cb.SCIM2_SCHEMA_DICTIONARY.get("LAST_NAME")],nt=ee("users:consumerUsers.fields.username.validations.invalid"),rt=ee("users:consumerUsers.fields.username.validations.regExViolation"),at=ee("users:consumerUsers.fields.username.validations.invalidCharacters"),it=ee("extensions:manage.features.user.addUser.validation.usernameSymbols"),ot=ee("extensions:manage.features.user.addUser.validation.usernameSpecialCharSymbols"),ct=ee("extensions:manage.features.user.addUser.validation.usernameLength",{maxLength:null==ve?void 0:ve.maxLength,minLength:null==ve?void 0:ve.minLength}),mt=(0,q.Z)(he),ft=mt.data,Et=mt.isLoading,St=mt.isValidating,Ct=(0,D.Z)({"exclude-identity-claims":!0,filter:null,limit:null,offset:null,sort:null}),It=Ct.data,At=Ct.error,_t=Ct.isLoading;(0,A.useEffect)((function(){At&&ie((0,E.V_)({description:ee("claims:local.notifications.getClaims.genericError.description"),level:v.QU.ERROR,message:ee("claims:local.notifications.getClaims.genericError.message")}))}),[At]);var wt=(0,A.useMemo)((function(){var e;if(ft)return null==ft||null===(e=ft.properties)||void 0===e||null===(e=e.find((function(e){return e.name===Y.y8.UsernameRegEx})))||void 0===e?void 0:e.value}),[ft]),Ut=(0,A.useMemo)((function(){var e;if(ft)return null==ft||null===(e=ft.properties)||void 0===e||null===(e=e.find((function(e){return e.name===Y.y8.PasswordRegEx})))||void 0===e?void 0:e.value}),[ft]),Rt=(0,A.useMemo)((function(){if(It&&!_t){var e=null==It?void 0:It.find((function(e){return(null==e?void 0:e[k.QN.CLAIM_URI_ATTRIBUTE_KEY])===k.QN.EMAIL_CLAIM_URI}));return null==e?void 0:e.regEx}}),[It]),Nt=(0,A.useMemo)((function(){var e;return null==It||null===(e=It.find((function(e){return(null==e?void 0:e[k.QN.CLAIM_URI_ATTRIBUTE_KEY])===k.QN.USER_NAME_CLAIM_URI})))||void 0===e?void 0:e.displayName}),[It]),xt=(0,A.useMemo)((function(){var e;return null==It||null===(e=It.find((function(e){return(null==e?void 0:e[k.QN.CLAIM_URI_ATTRIBUTE_KEY])===k.QN.FIRST_NAME_CLAIM_URI})))||void 0===e?void 0:e.displayName}),[It]),Lt=(0,A.useMemo)((function(){var e;return null==It||null===(e=It.find((function(e){return(null==e?void 0:e[k.QN.CLAIM_URI_ATTRIBUTE_KEY])===k.QN.LAST_NAME_CLAIM_URI})))||void 0===e?void 0:e.displayName}),[It]),Mt=(0,A.useMemo)((function(){var e=[{key:-1,text:j.wO.primaryUserstoreName,value:j.wO.primaryUserstoreId}];return(null==ae?void 0:ae.length)>0&&ae.forEach((function(t,n){var r=re(t.name),a=t.enabled;if(t.name.toUpperCase()!==j.wO.primaryUserstoreName&&!r&&a&&(null==de||!de.includes(t.name.toUpperCase()))){var i={key:n,text:t.name,value:t.id};e.push(i)}})),e}),[ae]);(0,A.useEffect)((function(){Tt()}),[]),(0,A.useEffect)((function(){var e;!qe.current&&r&&(null===(e=oe.current)||void 0===e||e.click());qe.current=r}),[r]),(0,A.useEffect)((function(){if(s===ut.Rd.CREATE_PASSWORD)u(!0),d(!0),h(!1);else{if("offline"===G)return u(!0),d(!1),void h(!0);u(!1),d(!1),h(!1)}}),[s,G]),(0,A.useEffect)((function(){y&&(fe((0,dt.P_)(y)),Ee((0,dt.t$)(y)))}),[y]),(0,A.useEffect)((function(){Pt()?Ce(!1):Ce(!0)}),[ve]),(0,A.useEffect)((function(){if(He){var e=[],t=[],n=$.ProfileUtils.flattenSchemas(ht(se));if(Ge){var r=n.find((function(e){return e.name===ze})),a=n.find((function(e){return e.name===Ke})),i=n.find((function(e){return e.name===Qe})),o=n.find((function(e){return e.name===$e}));(0,dt._g)(i,Ye)&&!(0,dt._g)(r,Ye)&&e.push(r),(0,dt._g)(o,Ye)&&!(0,dt._g)(a,Ye)&&e.push(a)}var l,s=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=yt(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw i}}}}(n);try{for(s.s();!(l=s.n()).done;){var u=l.value;!(0,S.Z)(u)&&(0,dt._g)(u,Ye)&&((Ge||u.name!==Qe&&u.name!==$e)&&(u.extended&&u.multiValued&&u.type!==ut.wi.COMPLEX&&t.push(u),e.push(u)))}}catch(d){s.e(d)}finally{s.f()}e.sort((function(e,t){return(0,dt.KZ)(e)-(0,dt.KZ)(t)})),Be(e)}}),[se]);var Ot=(0,A.useMemo)((function(){if(He&&je)return Q(null!=n?n:{},je,Ge,!1,!1)}),[je,n,Ge]);(0,A.useEffect)((function(){W?z(i&&ke?ut.mt.EMAIL:(null===B.x||void 0===B.x?void 0:B.x.defautlAskPasswordOption)!==ut.mt.OFFLINE?null===B.x||void 0===B.x?void 0:B.x.defautlAskPasswordOption:null):B.x.defautlAskPasswordOption!==ut.mt.OFFLINE&&i&&ke?z(ut.mt.EMAIL):z(ut.mt.OFFLINE)}),[ke,i,W]);var Tt=function(){var e,t=[],n=se.find((function(e){return"name"===e.name})),r=se.find((function(e){return"emails"===e.name}));if(r&&(t.push(ut.Wx.EMAIL),Fe(r.required)),(null==n||null===(e=n.subAttributes)||void 0===e?void 0:e.length)>0){var a=n.subAttributes.find((function(e){return"givenName"===e.name})),i=n.subAttributes.find((function(e){return"familyName"===e.name}));a&&i?(Me(a.required),Pe(i.required)):(a&&(t.push(ut.Wx.LASTNAME),Me(a.required)),i&&(t.push(ut.Wx.FIRSTNAME),Pe(i.required)))}else t.push(ut.Wx.FIRSTNAME,ut.Wx.LASTNAME);Ne(t)},Pt=function(){return"true"===(null==ve?void 0:ve.enableValidator)},Zt={"data-testid":"user-mgt-add-user-form-ask-password-option-radio-button",label:ee("user:forms.addUserForm.buttons.radioButton.options.askPassword"),value:ut.Rd.ASK_PASSWORD},Dt={"data-testid":"user-mgt-add-user-form-create-password-option-radio-button",label:ee("user:forms.addUserForm.buttons.radioButton.options.createPassword"),value:ut.Rd.CREATE_PASSWORD},kt=function(e){var t;""===(null===(t=e.get("email"))||void 0===t?void 0:t.toString())?we(!1):we(!0)},Ft=function(){var e="user-mgt-add-user-form-alphanumeric-email-input",t=!(0,S.Z)(je)&&je.find((function(e){return e.name===Qe}));if(He&&Ge&&t&&(0,dt._g)(t,Ye)){var r,a,i=!(0,S.Z)(je)&&je.find((function(e){return e.name===ze}));return A.createElement(tt,{schema:t,primaryEmailSchema:i,primaryEmailAddress:Ot[ze],fieldLabel:ee("user:profile.fields."+t.name.replace(".","_"),{defaultValue:t.displayName}),emailAddressesList:null!==(r=null===(a=Ot[H.Cb.SCIM2_SYSTEM_USER_SCHEMA])||void 0===a?void 0:a[Qe])&&void 0!==r?r:[],maxValueLimit:H.Cb.MAX_EMAIL_ADDRESSES_ALLOWED,"data-componentid":e,"data-testid":e})}return A.createElement(X.SE,{component:X.xh,label:ee("extensions:manage.features.user.addUser.inputLabel.email"),name:"email",initialValue:null==n?void 0:n.email,placeholder:ee("user:forms.addUserForm.inputs.email.placeholder"),required:ke,validate:function(e){b(!0);var t=void 0;return ke&&(0,S.Z)(e)?t=ee("user:forms.addUserForm.inputs.email.validations.empty"):V.w.validateInputAgainstRegEx(e,Rt)||(t=rt),Ce((0,S.Z)(t)),b(!1),t},validateFields:[],maxLength:60,listen:kt,"data-testid":e,"data-componentid":e})};return Et||St||_t?A.createElement(M.Z,{container:!0,spacing:3},Array.from({length:3}).map((function(e,t){return A.createElement(M.Z,{key:t,xs:12},A.createElement(Z.Z,{width:200}),A.createElement(Z.Z,{width:300}))}))):A.createElement(X.vy,{onSubmit:function(e){var t,n,r,a={};for(var i in e){a[i.replace(/__DOT__/g,".")]=e[i]}for(var l in a)if(l===H.Cb.SCIM2_SCHEMA_DICTIONARY.get("EMAILS")){var s=a[l],u=[];for(var d in s)"primary"===d?u.push(s[d]):u.push({type:d,value:s[d]});a[l]=u}else if(l===H.Cb.SCIM2_SCHEMA_DICTIONARY.get("PHONE_NUMBERS")){var c=a[l],m=[];for(var f in c)m.push({type:f,value:c[f]});a[l]=m}else if(l===H.Cb.SCIM2_SCHEMA_DICTIONARY.get("ADDRESSES")){var p=a[l],v=[];for(var E in p)v.push({formatted:p[E],type:E});a[l]=v}else if(l.startsWith("".concat(H.Cb.SCIM2_SCHEMA_DICTIONARY.get("ADDRESSES"),"#"))){var g=l.split("#");a[g[0]]=a[g[0]]||[];for(var h=0,b=Object.entries(e[l]);h<b.length;h++){var y=bt(b[h],2),S=y[0],C=y[1];a[g[0]].push(pt(pt({},S,C),"type",g[1]))}delete a[l]}a.domain=null===(t=Mt.find((function(t){return t.value===e.userstore})))||void 0===t?void 0:t.text,delete a.userstore,delete a.newPasswordValidity,a.userName=null!=te&&te.enableEmailDomain?null===(n=e.email)||void 0===n?void 0:n.toString():null===(r=e.username)||void 0===r?void 0:r.toString(),delete a.username,o(a)},"data-testid":"user-mgt-add-user-form","data-componentid":"user-mgt-add-user-form",render:function(e){var t=e.handleSubmit,r=e.form,o=e.hasValidationErrors;return A.createElement("form",{onSubmit:t},A.createElement(R.Z,null,!Re.includes(ut.Wx.USERSTORE)&&A.createElement(R.Z.Row,null,A.createElement(R.Z.Column,{mobile:16,computer:10},A.createElement(X.SE,{component:X.ZY,label:ee("user:forms.addUserForm.inputs.domain.placeholder"),name:"userstore",initialValue:C,options:null==Mt?void 0:Mt.map((function(e){return{text:e.text,value:e.value}})),required:l,"data-testid":"user-mgt-add-user-form-userstore-dropdown","data-componentid":"user-mgt-add-user-form-userstore-dropdown"}),A.createElement(X.lP,{subscription:{values:!0},onChange:function(e){var t,n,r=e.values;be(null==r||null===(t=r.userstore)||void 0===t?void 0:t.toString());var a=(null==Mt||null===(n=Mt.find((function(e){return e.value===(null==r?void 0:r.userstore)})))||void 0===n||null===(n=n.text)||void 0===n?void 0:n.toString())||"";g(a)}}))),function(){var e,t;if(null!=te&&te.enableEmailDomain){var r=function(){var e=gt(vt().mark((function e(t){var n,r;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b(!0),!(0,S.Z)(t)){e.next=4;break}return b(!1),e.abrupt("return",ee("user:forms.addUserForm.inputs.email.validations.empty"));case 4:if(V.w.validateInputAgainstRegEx(t,wt)&&V.w.validateInputAgainstRegEx(t,Rt)){e.next=7;break}return b(!1),e.abrupt("return",rt);case 7:return e.prev=7,e.next=10,(0,st.Fp)(null,null,"userName eq "+t,null,c);case 10:if(!((null==(n=e.sent)?void 0:n.totalResults)>0)){e.next=14;break}return b(!1),e.abrupt("return",nt);case 14:b(!1),e.next=22;break;case 17:if(e.prev=17,e.t0=e.catch(7),500!==(null===e.t0||void 0===e.t0||null===(r=e.t0.response)||void 0===r?void 0:r.status)){e.next=22;break}return b(!1),e.abrupt("return",at);case 22:return e.abrupt("return",void 0);case 23:case"end":return e.stop()}}),e,null,[[7,17]])})));return function(t){return e.apply(this,arguments)}}();return A.createElement(R.Z.Row,null,A.createElement(R.Z.Column,{mobile:16,computer:10},A.createElement(X.SE,{component:X.xh,initialValue:null==n?void 0:n.email,name:"email",label:ee("extensions:manage.features.user.addUser.inputLabel.emailUsername"),placeholder:ee("user:forms.addUserForm.inputs.email.placeholder"),validate:r,maxLength:60,"data-testid":"user-mgt-add-user-form-email-input","data-componentid":"user-mgt-add-user-form-email-input",required:!0})))}if(!Re.includes(ut.Wx.USERNAME)&&!Pt()){var a=function(){var e=gt(vt().mark((function e(t){var n,r;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b(!0),!(0,S.Z)(t)){e.next=4;break}return b(!1),e.abrupt("return",ee("user:forms.addUserForm.inputs.email.validations.empty"));case 4:if(V.w.validateInputAgainstRegEx(t,wt)&&V.w.validateInputAgainstRegEx(t,Rt)){e.next=7;break}return b(!1),e.abrupt("return",rt);case 7:return e.prev=7,e.next=10,(0,st.Fp)(null,null,"userName eq "+t,null,c);case 10:if(!((null==(n=e.sent)?void 0:n.totalResults)>0)){e.next=14;break}return b(!1),e.abrupt("return",nt);case 14:b(!1),e.next=23;break;case 17:if(e.prev=17,e.t0=e.catch(7),500!==(null===e.t0||void 0===e.t0||null===(r=e.t0.response)||void 0===r?void 0:r.status)){e.next=22;break}return b(!1),e.abrupt("return",at);case 22:b(!1);case 23:return e.abrupt("return",void 0);case 24:case"end":return e.stop()}}),e,null,[[7,17]])})));return function(t){return e.apply(this,arguments)}}();return A.createElement(R.Z.Row,null,A.createElement(R.Z.Column,{mobile:16,computer:10},A.createElement(X.SE,{component:X.xh,initialValue:null==n?void 0:n.email,name:"email",label:ee("extensions:manage.features.user.addUser.inputLabel.emailUsername"),placeholder:ee("user:forms.addUserForm.inputs.email.placeholder"),validate:a,maxLength:60,"data-testid":"user-mgt-add-user-form-email-input","data-componentid":"user-mgt-add-user-form-email-input",required:!0})))}var i=void 0;i=null!==B.x&&void 0!==B.x&&null!==(e=B.x.userNameValidation)&&void 0!==e&&e.validateViaAPI||wt!==(null===B.x||void 0===B.x||null===(t=B.x.userNameValidation)||void 0===t?void 0:t.defaultRegex)?null!=ve&&ve.isAlphanumericOnly?ee("extensions:manage.features.user.addUser.validation.usernameHint",{maxLength:null==ve?void 0:ve.maxLength,minLength:null==ve?void 0:ve.minLength}):ee("extensions:manage.features.user.addUser.validation.usernameSpecialCharHint",{maxLength:null==ve?void 0:ve.maxLength,minLength:null==ve?void 0:ve.minLength}):ee("user:forms.addUserForm.inputs.username.hint.defaultRegex");var o=function(){var e=gt(vt().mark((function e(t){var n,r,a,i,o,l;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=void 0,(0,S.Z)(t)?r=ee("extensions:manage.features.user.addUser.validation.usernameEmpty"):null!==B.x&&void 0!==B.x&&null!==(n=B.x.userNameValidation)&&void 0!==n&&n.validateViaAPI?(a=new RegExp(ut._F.USERNAME_VALIDATION_REGEX),null!=ve&&ve.isAlphanumericOnly||(a=new RegExp(ut._F.USERNAME_VALIDATION_REGEX_WITH_SPECIAL_CHARS)),t.length<Number(ve.minLength)||t.length>Number(ve.maxLength)?r=ct:a.test(t)||(r=null!=ve&&ve.isAlphanumericOnly?it:ot)):(0,S.Z)(wt)||new RegExp(wt).test(t)||(r=wt===(null===B.x||void 0===B.x||null===(i=B.x.userNameValidation)||void 0===i?void 0:i.defaultRegex)?ee("user:forms.addUserForm.inputs.username.validations.defaultRegex"):ee("user:forms.addUserForm.inputs.username.validations.customRegex",{regex:wt})),!(0,S.Z)(r)){e.next=14;break}return e.prev=3,b(!0),e.next=7,(0,st.Fp)(null,null,"userName eq "+t,null,c);case 7:(null==(o=e.sent)?void 0:o.totalResults)>0&&(r=nt),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),500===(null===e.t0||void 0===e.t0||null===(l=e.t0.response)||void 0===l?void 0:l.status)&&(r=at);case 14:return b(!1),e.abrupt("return",r);case 16:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}();return A.createElement(A.Fragment,null,A.createElement(R.Z.Row,null,A.createElement(R.Z.Column,{mobile:16,computer:10},A.createElement(X.SE,{component:X.xh,label:We?ee("extensions:manage.features.user.addUser.inputLabel.alphanumericUsername"):Nt,name:"username",initialValue:null==n?void 0:n.userName,placeholder:ee("extensions:manage.features.user.addUser.inputLabel.alphanumericUsernamePlaceholder"),validate:o,validateFields:[],maxLength:60,helperText:i,"data-testid":"user-mgt-add-user-form-username-input","data-componentid":"user-mgt-add-user-form-username-input",required:!0}))),A.createElement(R.Z.Row,null,A.createElement(R.Z.Column,{mobile:16,computer:10},Ft())))}(),!Re.includes(ut.Wx.FIRSTNAME)&&A.createElement(R.Z.Row,null,A.createElement(R.Z.Column,{mobile:16,computer:10},A.createElement(X.SE,{component:X.xh,label:We?ee("user:forms.addUserForm.inputs.firstName.label"):xt,name:"firstName",initialValue:null==n?void 0:n.firstName,placeholder:ee("user:forms.addUserForm.inputs.firstName.placeholder"),required:Le,maxLength:30,validate:function(e){return Le&&(0,S.Z)(e)?ee("user:forms.addUserForm.inputs.firstName.validations.empty"):null!=e&&e.includes("/")?"First Name cannot contain the forward slash (/) character.":void 0},validateFields:[],"data-testid":"user-mgt-add-user-form-firstName-input","data-componentid":"user-mgt-add-user-form-firstName-input"}))),!Re.includes(ut.Wx.LASTNAME)&&A.createElement(R.Z.Row,null,A.createElement(R.Z.Column,{mobile:16,computer:10},A.createElement(X.SE,{component:X.xh,label:We?ee("user:forms.addUserForm.inputs.lastName.label"):Lt,name:"lastName",initialValue:null==n?void 0:n.lastName,placeholder:ee("user:forms.addUserForm.inputs.lastName.placeholder"),required:Te,maxLength:30,validate:function(e){return Te&&(0,S.Z)(e)?ee("user:forms.addUserForm.inputs.lastName.validations.empty"):null!=e&&e.includes("/")?"Last Name cannot contain the forward slash (/) character.":void 0},validateFields:[],"data-testid":"user-mgt-add-user-form-lastName-input","data-componentid":"user-mgt-add-user-form-lastName-input"}))),He&&je&&function(){var e,t,n=null==je?void 0:je.find((function(e){return e.name===$e})),r=null==je?void 0:je.find((function(e){return e.name===Ke}));if(Ge&&n&&(0,dt._g)(n,Ye))return A.createElement(R.Z.Row,{columns:1},A.createElement(R.Z.Column,{mobile:16,computer:10},A.createElement(lt,{schema:n,primarySchema:r,fieldLabel:ee("user:profile.fields."+n.name.replace(".","_"),{defaultValue:n.displayName}),primaryMobileNumber:Ot[Ke],mobileNumbersList:null!==(e=null===(t=Ot[H.Cb.SCIM2_SYSTEM_USER_SCHEMA])||void 0===t?void 0:t[$e])&&void 0!==e?e:[],maxValueLimit:H.Cb.MAX_EMAIL_ADDRESSES_ALLOWED,isUpdating:I,"data-componentid":"".concat(J,"-").concat(n.name,"-input"),"data-testid":"".concat(J,"-").concat(n.name,"-input")})));if((0,dt._g)(r,Ye)){var a="".concat(J,"-").concat(r.name,"-input"),i=ee("user:profile.fields."+r.name.replace(".","_"),{defaultValue:r.displayName});return A.createElement(R.Z.Row,null,A.createElement(R.Z.Column,{mobile:16,computer:10},A.createElement(X.SE,{component:X.xh,name:r.name,label:i,placeholder:ee("user:forms.addUserForm.inputs.generic.placeholder",{label:i}),initialValue:null==Ot?void 0:Ot[r.name],validate:function(e){return(0,S.Z)(e)?ee("user:forms.addUserForm.inputs.generic.validations.empty",{label:i}):RegExp(r.regEx).test(e)?void 0:ee("users:forms.validation.formatError",{field:i})},maxLength:r.maxLength?r.maxLength:H.Cb.CLAIM_VALUE_MAX_LENGTH,validateFields:[],"data-componentid":a,required:!0})))}return null}(),He&&je&&je.map((function(e,t){return function(e,t){var n=[ze,Qe,Ke,$e,Xe,Je];if(!((0,S.Z)(e)||n.includes(e.name)||et.includes(e.name)))return A.createElement(R.Z.Row,{columns:1,key:t},A.createElement(R.Z.Column,{mobile:16,computer:10},A.createElement(Ze,{schema:e,initialValues:Ot,isUpdating:!1,"data-componentid":"".concat(J,"-profile-form")})))}(e,t)})),!Re.includes(ut.Wx.PASSWORD)&&A.createElement(R.Z.Row,null,A.createElement(R.Z.Column,{mobile:16,computer:10},A.createElement(O.Z,{id:"pw-options-radio-buttons-group-label",htmlFor:"pw-options-radio-buttons-group","data-componentid":"user-mgt-add-user-form-pw-options-radio-buttons-group-label"},ee("user:forms.addUserForm.buttons.radioButton.label")),A.createElement(x.Z,null,A.createElement(P.Z,{id:"pw-options-radio-buttons-group","aria-labelledby":"pw-options-radio-buttons-group-label",name:"handlePasswordGroup",defaultValue:s,onChange:function(e,t){f(t),r.change("passwordOption",t)}},A.createElement(L.Z,{label:Zt.label,value:Zt.value,control:A.createElement(T.Z,null),"data-testid":Zt["data-testid"]}),s===Zt.value&&A.createElement(le,{profileSchema:je,isInviteUserToSetPasswordEnabled:i,isEmailFilled:_e,isEmailRequired:ke,isValidEmail:Se,selectedAskPasswordOption:G,onAskPasswordOptionChange:function(e){z(e)},connectorProperties:U,localClaims:It,isAttributeProfileForUserCreationEnabled:He,isMultipleEmailAndMobileNumberEnabled:Ge,isDistinctAttributeProfilesDisabled:Ye,hasWorkflowAssociations:W}),A.createElement(L.Z,{label:Dt.label,value:Dt.value,control:A.createElement(T.Z,null),"data-testid":Dt["data-testid"]}))),A.createElement(X.SE,{component:"input",type:"hidden",name:"passwordOption",initialValue:s,validateFields:[]}),s===Dt.value&&A.createElement(Ae,{initialValue:null==n?void 0:n.newPassword,passwordConfig:me,passwordRegex:Ut,"data-componentid":"user-mgt-add-user-form-create-password-option"})))),A.createElement("button",{ref:oe,onClick:function(){return function(e){e&&a()}(o)},hidden:!0}))}})};function It(e){return function(e){if(Array.isArray(e))return wt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||_t(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function At(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,l=[],s=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,a=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}(e,t)||_t(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _t(e,t){if(e){if("string"==typeof e)return wt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wt(e,t):void 0}}function wt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Ut=function(e){var t,n,r=e.triggerSubmit,a=e.onSubmit,i=e.selectedUserStore,o=e.selectedGroupsList,l=e.setSelectedGroupList,u=(0,_.$)().t,d=(0,w.I0)(),c=At((0,A.useState)(!1),2)[1],m=At((0,A.useState)(null),2),f=m[0],p=m[1],b=(0,s.Ug)(null,null,f,i,"members"),y=b.data,C=b.error;(0,A.useEffect)((function(){if(C){if(C.response&&C.response.data&&C.response.data.description)return void d((0,E.V_)({description:C.response.data.description,level:v.QU.ERROR,message:u("console:manage.features.roles.edit.groups.notifications.fetchError.message")}));d((0,E.V_)({description:u("console:manage.features.roles.edit.groups.notifications.fetchError.description"),level:v.QU.ERROR,message:u("console:manage.features.roles.edit.groups.notifications.fetchError.message")}))}}),[C]);var I=(0,A.useCallback)((0,ze.Z)((function(e,t){(0,S.Z)(t.trim())?p(null):p("displayName co "+t)}),1e3),[]);return A.createElement(g.Es,{onSubmit:function(){a({groups:o})},submitState:r},A.createElement(h.IX,{selectionComponent:!0,bordered:!1,searchPlaceholder:u("transferList:searchPlaceholder",{type:"Groups"}),handleUnelectedListSearch:function(e,t){var n=t.value;I(e,n)},"data-testid":"user-mgt-add-user-wizard-modal"},A.createElement(h.Jv,{bordered:!0,isListEmpty:!((null==y||null===(t=y.Resources)||void 0===t?void 0:t.length)>0),listType:"unselected",emptyPlaceholderContent:u("transferList:list.emptyPlaceholders.users.roles.unselected",{type:"groups"}),"data-testid":"user-mgt-add-user-wizard-modal-unselected-transfer-list",emptyPlaceholderDefaultContent:u("transferList:list.emptyPlaceholders.default")},null==y||null===(n=y.Resources)||void 0===n?void 0:n.map((function(e,t){var n,r=null===(n=e.displayName)||void 0===n?void 0:n.split("/"),a=r.length>1?r[1]:r[0];return A.createElement(h.qT,{handleItemChange:function(){return function(e){var t,n=(0,S.Z)(o)?[]:It(o),r=n.findIndex((function(t){return t.id===e.id}));-1!==r?n.splice(r,1):n.push(e),l(n),c((null==y||null===(t=y.Resources)||void 0===t?void 0:t.length)===n.length)}(e)},key:t,listItem:a,listItemId:e.id,listItemIndex:t,listItemTypeLabel:null,isItemChecked:-1!==o.findIndex((function(t){return t.id===e.id})),showSecondaryActions:!1,"data-testid":"user-mgt-add-user-wizard-modal-unselected-groups"})})))))},Rt=n(87449),Nt=n(17652),xt=n(38480),Lt=n(53080),Mt=n(43974),Ot=n(34194),Tt=n(72857),Pt=n(77757),Zt=n(47625),Dt=n(719);function kt(){kt=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function d(e,t,n,r){var i=t&&t.prototype instanceof g?t:g,o=Object.create(i.prototype),l=new x(r||[]);return a(o,"_invoke",{value:w(e,n,l)}),o}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var m="suspendedStart",f="suspendedYield",p="executing",v="completed",E={};function g(){}function h(){}function b(){}var y={};u(y,o,(function(){return this}));var S=Object.getPrototypeOf,C=S&&S(S(L([])));C&&C!==n&&r.call(C,o)&&(y=C);var I=b.prototype=g.prototype=Object.create(y);function A(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function n(a,i,o,l){var s=c(e[a],e,i);if("throw"!==s.type){var u=s.arg,d=u.value;return d&&"object"==jt(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,o,l)}),(function(e){n("throw",e,o,l)})):t.resolve(d).then((function(e){u.value=e,o(u)}),(function(e){return n("throw",e,o,l)}))}l(s.arg)}var i;a(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,a){n(e,r,t,a)}))}return i=i?i.then(a,a):a()}})}function w(t,n,r){var a=m;return function(i,o){if(a===p)throw Error("Generator is already running");if(a===v){if("throw"===i)throw o;return{value:e,done:!0}}for(r.method=i,r.arg=o;;){var l=r.delegate;if(l){var s=U(l,r);if(s){if(s===E)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===m)throw a=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=p;var u=c(t,n,r);if("normal"===u.type){if(a=r.done?v:f,u.arg===E)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=v,r.method="throw",r.arg=u.arg)}}}function U(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,U(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),E;var i=c(a,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,E;var o=i.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,E):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,E)}function R(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(R,this),this.reset(!0)}function L(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(jt(t)+" is not iterable")}return h.prototype=b,a(I,"constructor",{value:b,configurable:!0}),a(b,"constructor",{value:h,configurable:!0}),h.displayName=u(b,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,s,"GeneratorFunction")),e.prototype=Object.create(I),e},t.awrap=function(e){return{__await:e}},A(_.prototype),u(_.prototype,l,(function(){return this})),t.AsyncIterator=_,t.async=function(e,n,r,a,i){void 0===i&&(i=Promise);var o=new _(d(e,n,r,a),i);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},A(I),u(I,s,"Generator"),u(I,o,(function(){return this})),u(I,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=L,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return l.type="throw",l.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],l=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,E):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),E},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),E}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;N(n)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:L(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),E}},t}function Ft(e,t,n,r,a,i,o){try{var l=e[i](o),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,a)}function Vt(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){Ft(i,r,a,o,l,"next",e)}function l(e){Ft(i,r,a,o,l,"throw",e)}o(void 0)}))}}function jt(e){return jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jt(e)}function Bt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bt(Object(n),!0).forEach((function(t){Yt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Yt(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=jt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=jt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==jt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ht(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=zt(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw i}}}}function Wt(e){return function(e){if(Array.isArray(e))return Kt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||zt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,l=[],s=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,a=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}(e,t)||zt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zt(e,t){if(e){if("string"==typeof e)return Kt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Kt(e,t):void 0}}function Kt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Qt=function(e){var t,n,r=e.initialValues,a=e.triggerSubmit,i=e.emailVerificationEnabled,o=e.onSubmit,l=e.isUserstoreRequired,s=e.passwordOption,u=e.setUserSummaryEnabled,d=e.setAskPasswordFromUser,f=e.selectedUserStore,b=e.setPasswordOption,y=e.setSelectedUserStore,C=e.setOfflineUser,I=e.isBasicDetailsLoading,U=e.setBasicDetailsLoading,x=e.validationConfig,L=e.selectedUserStoreId,O=e.connectorProperties,T=e["data-componentid"],P=void 0===T?"add-user-basic":T,Z=(0,_.$)().t,W=(0,F.Z)().UIConfig,G=(0,m.Z)(),z=G.isUserStoreReadOnly,K=G.userStoresList,Q=(0,w.I0)(),X=(0,w.v9)((function(e){return e.profile.profileSchemas})),J=(0,w.v9)((function(e){return e.global.supportedI18nLanguages})),ie=(0,w.v9)((function(e){return e.config.ui.features})),oe=(0,w.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t?void 0:t.userSchemaURI})),le=(0,w.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t?void 0:t.systemReservedUserStores})),se=Gt((0,A.useState)(B.x.defautlAskPasswordOption),2),ue=se[0],de=se[1],ce=Gt((0,A.useState)(ne.y.EMAIL_LINK),2),me=ce[0],fe=ce[1],pe=Gt((0,A.useState)(null!==(t=null==r?void 0:r.newPassword)&&void 0!==t?t:""),2),ve=pe[0],Ee=pe[1],ge=Gt((0,A.useState)(void 0),2),he=ge[0],be=ge[1],ye=Gt((0,A.useState)(void 0),2),Se=ye[0],Ce=ye[1],Ie=Gt((0,A.useState)(!0),2),Ae=Ie[0],_e=Ie[1],we=Gt((0,A.useState)(void 0),2),Ue=we[0],Re=we[1],Ne=Gt((0,A.useState)(L),2),xe=Ne[0],Le=Ne[1],Me=Gt((0,A.useState)(!1),2),Oe=Me[0],Te=Me[1],Pe=Gt((0,A.useState)(!1),2),Ze=Pe[0],Ve=Pe[1],Be=Gt((0,A.useState)([]),2),qe=Be[0],Ye=Be[1],He=Gt((0,A.useState)(!0),2),We=He[0],Ge=He[1],ze=Gt((0,A.useState)(!0),2),Ke=ze[0],Qe=ze[1],$e=Gt((0,A.useState)(!1),2),Xe=$e[0],Je=$e[1],et=Gt((0,A.useState)(),2),tt=et[0],nt=et[1],rt=Gt((0,A.useState)({}),2),at=rt[0],it=rt[1],ot=Gt((0,A.useState)({}),2),lt=ot[0],ct=ot[1],mt=Gt((0,A.useState)({}),2),ft=mt[0],pt=mt[1],vt=Gt((0,A.useState)({}),2),Et=vt[0],gt=vt[1],ht=Gt((0,A.useState)(),2),bt=ht[0],yt=ht[1],St=Gt((0,A.useState)(new Map),2),Ct=St[0],It=St[1],At=(0,A.useRef)(),_t=(0,A.useRef)(),wt=(0,A.useCallback)((function(e){null!==e&&(e.children[0].children[1].children[0].role="presentation")}),[]),Ut=null==ie||null===(n=ie.attributeDialects)||void 0===n||null===(n=n.disabledFeatures)||void 0===n?void 0:n.includes(k.QN.DISTINCT_ATTRIBUTE_PROFILES_FEATURE_FLAG),Ft=(0,p.cr)(null==ie?void 0:ie.users,ut._F.ATTRIBUTE_PROFILES_FOR_USER_CREATION_FEATURE_FLAG),Bt=null==W?void 0:W.isMultipleEmailsAndMobileNumbersEnabled,zt=H.Cb.SCIM2_SCHEMA_DICTIONARY.get("EMAILS"),Kt=H.Cb.SCIM2_SCHEMA_DICTIONARY.get("MOBILE"),Qt=H.Cb.SCIM2_SCHEMA_DICTIONARY.get("EMAIL_ADDRESSES"),$t=H.Cb.SCIM2_SCHEMA_DICTIONARY.get("MOBILE_NUMBERS"),Xt=H.Cb.SCIM2_SCHEMA_DICTIONARY.get("VERIFIED_MOBILE_NUMBERS"),Jt=H.Cb.SCIM2_SCHEMA_DICTIONARY.get("VERIFIED_EMAIL_ADDRESSES"),en=[H.Cb.SCIM2_SCHEMA_DICTIONARY.get("META_VERSION"),H.Cb.SCIM2_SCHEMA_DICTIONARY.get("USERNAME"),H.Cb.SCIM2_SCHEMA_DICTIONARY.get("ROLES_DEFAULT"),H.Cb.SCIM2_SCHEMA_DICTIONARY.get("ACTIVE"),H.Cb.SCIM2_SCHEMA_DICTIONARY.get("GROUPS"),H.Cb.SCIM2_SCHEMA_DICTIONARY.get("PROFILE_URL"),H.Cb.SCIM2_SCHEMA_DICTIONARY.get("ACCOUNT_LOCKED"),H.Cb.SCIM2_SCHEMA_DICTIONARY.get("ACCOUNT_DISABLED"),H.Cb.SCIM2_SCHEMA_DICTIONARY.get("ONETIME_PASSWORD"),H.Cb.SCIM2_SCHEMA_DICTIONARY.get("FIRST_NAME"),H.Cb.SCIM2_SCHEMA_DICTIONARY.get("LAST_NAME")],tn=Z("users:consumerUsers.fields.username.validations.invalid"),nn=Z("users:consumerUsers.fields.username.validations.regExViolation"),rn=Z("users:consumerUsers.fields.username.validations.invalidCharacters"),an=Z("extensions:manage.features.user.addUser.validation.usernameSymbols"),on=Z("extensions:manage.features.user.addUser.validation.usernameSpecialCharSymbols"),ln=Z("extensions:manage.features.user.addUser.validation.usernameLength",{maxLength:null==Se?void 0:Se.maxLength,minLength:null==Se?void 0:Se.minLength}),sn=Mt.l.getInstance(),un=(0,q.Z)(xe).data,dn=(0,D.Z)({"exclude-identity-claims":!0,filter:null,limit:null,offset:null,sort:null}),cn=dn.data,mn=dn.error,fn=dn.isLoading;(0,A.useEffect)((function(){mn&&Q((0,E.V_)({description:Z("claims:local.notifications.getClaims.genericError.description"),level:v.QU.ERROR,message:Z("claims:local.notifications.getClaims.genericError.message")}))}),[mn]);var pn=(0,A.useMemo)((function(){return $.CommonUtils.getCountryList()}),[]),vn=(0,A.useMemo)((function(){var e;if(un)return null==un||null===(e=un.properties)||void 0===e||null===(e=e.find((function(e){return e.name===Y.y8.UsernameRegEx})))||void 0===e?void 0:e.value}),[un]),En=(0,A.useMemo)((function(){var e;if(un)return null==un||null===(e=un.properties)||void 0===e||null===(e=e.find((function(e){return e.name===Y.y8.PasswordRegEx})))||void 0===e?void 0:e.value}),[un]),gn=(0,A.useMemo)((function(){if(cn&&!fn){var e=null==cn?void 0:cn.find((function(e){return(null==e?void 0:e[k.QN.CLAIM_URI_ATTRIBUTE_KEY])===k.QN.EMAIL_CLAIM_URI}));return null==e?void 0:e.regEx}}),[cn]),hn=(0,A.useMemo)((function(){var e=[{key:-1,text:j.wO.primaryUserstoreName,value:j.wO.primaryUserstoreId}];return(null==K?void 0:K.length)>0&&K.forEach((function(t,n){var r=z(t.name),a=t.enabled;if(t.name.toUpperCase()!==j.wO.primaryUserstoreName&&!r&&a&&(null==le||!le.includes(t.name.toUpperCase()))){var i={key:n,text:t.name,value:t.id};e.push(i)}})),e}),[K]);(0,A.useEffect)((function(){bn()}),[]),(0,A.useEffect)((function(){if(O){var e=O.find((function(e){return e.name===c.v.ASK_PASSWORD_EMAIL_OTP})),t=O.find((function(e){return e.name===c.v.ASK_PASSWORD_SMS_OTP}));"true"===(null==t?void 0:t.value)?fe(ne.y.SMS_OTP):"true"===(null==e?void 0:e.value)?fe(ne.y.EMAIL_OTP):fe(ne.y.EMAIL_LINK)}}),[O]),(0,A.useEffect)((function(){if(s===ut.Rd.CREATE_PASSWORD)u(!0),d(!0),C(!1);else{if("offline"===ue)return u(!0),d(!1),void C(!0);u(!1),d(!1),C(!1)}}),[s,ue]),(0,A.useEffect)((function(){x&&(be((0,dt.P_)(x)),Ce((0,dt.t$)(x)))}),[x]),(0,A.useEffect)((function(){In()?Te(!1):Te(!0)}),[Se]),(0,A.useEffect)((function(){if(Ft){var e=[],t=[],n=$.ProfileUtils.flattenSchemas(Wt(X));if(Bt){var r=n.find((function(e){return e.name===zt})),a=n.find((function(e){return e.name===Kt})),i=n.find((function(e){return e.name===Qt})),o=n.find((function(e){return e.name===$t}));(0,dt._g)(i,Ut)&&!(0,dt._g)(r,Ut)&&e.push(r),(0,dt._g)(o,Ut)&&!(0,dt._g)(a,Ut)&&e.push(a)}var l,s=Ht(n);try{for(s.s();!(l=s.n()).done;){var u=l.value;!(0,S.Z)(u)&&(0,dt._g)(u,Ut)&&((Bt||u.name!==Qt&&u.name!==$t)&&(u.extended&&u.multiValued&&u.type!==ut.wi.COMPLEX&&t.push(u),e.push(u)))}}catch(d){s.e(d)}finally{s.f()}e.sort((function(e,t){return(0,dt.KZ)(e)-(0,dt.KZ)(t)})),nt(e),yt(t)}}),[X]),(0,A.useEffect)((function(){Ft&&Dn(tt,r)}),[tt,r]),(0,A.useEffect)((function(){Ft&&kn(Ct)}),[Ct]),(0,A.useEffect)((function(){de(i&&Xe?B.x.defautlAskPasswordOption:ut.mt.OFFLINE)}),[Xe]);var bn=function(){var e,t=[],n=X.find((function(e){return"name"===e.name})),r=X.find((function(e){return"emails"===e.name}));if(r&&(t.push(ut.Wx.EMAIL),Je(r.required)),(null==n||null===(e=n.subAttributes)||void 0===e?void 0:e.length)>0){var a=n.subAttributes.find((function(e){return"givenName"===e.name})),i=n.subAttributes.find((function(e){return"familyName"===e.name}));a&&i?(Ge(a.required),Qe(i.required)):(a&&(t.push(ut.Wx.LASTNAME),Ge(a.required)),i&&(t.push(ut.Wx.FIRSTNAME),Qe(i.required)))}else t.push(ut.Wx.FIRSTNAME,ut.Wx.LASTNAME);Ye(t)},yn=function(){switch(me){case ne.y.EMAIL_OTP:case ne.y.EMAIL_LINK:return"mail";case ne.y.SMS_OTP:return"mobile";default:return"mail"}},Sn=function(){switch(me){case ne.y.EMAIL_OTP:return Z("extensions:manage.features.user.addUser.inviteUserTooltip.emailOTPInviteTooltip");case ne.y.SMS_OTP:return Z("extensions:manage.features.user.addUser.inviteUserTooltip.smsOTPInviteTooltip");case ne.y.EMAIL_LINK:default:return Z("extensions:manage.features.user.addUser.inviteUserTooltip.emailLinkInviteTooltip")}},Cn=function(){switch(me){case ne.y.SMS_OTP:return Z("user:modals.addUserWizard.askPassword.inviteViaSMS");case ne.y.EMAIL_OTP:case ne.y.EMAIL_LINK:default:return Z("user:modals.addUserWizard.askPassword.inviteViaEmail")}},In=function(){return"true"===(null==Se?void 0:Se.enableValidator)},An=function(e){_e(e)},_n={"data-testid":"user-mgt-add-user-form-ask-password-option-radio-button",label:Z("user:forms.addUserForm.buttons.radioButton.options.askPassword"),value:ut.Rd.ASK_PASSWORD},wn={"data-testid":"user-mgt-add-user-form-create-password-option-radio-button",label:Z("user:forms.addUserForm.buttons.radioButton.options.createPassword"),value:ut.Rd.CREATE_PASSWORD},Un=function(e){var t=e.get("newPassword").toString();Ee(t)},Rn=function(e){var t;""===(null===(t=e.get("email"))||void 0===t?void 0:t.toString())?Ve(!1):Ve(!0)},Nn=function(e){var t,n,r,a,i;sn.publish("manage-users-customer-password-option",{type:s});var o,l={domain:f,email:null===(t=e.get("email"))||void 0===t?void 0:t.toString(),firstName:null===(n=e.get("firstName"))||void 0===n?void 0:n.toString(),lastName:null===(r=e.get("lastName"))||void 0===r?void 0:r.toString(),newPassword:e.get("newPassword")&&void 0!==e.get("newPassword")?e.get("newPassword").toString():"",passwordOption:s,userName:null!=W&&W.enableEmailDomain?null===(a=e.get("email"))||void 0===a?void 0:a.toString():null===(i=e.get("username"))||void 0===i?void 0:i.toString()};me===ne.y.SMS_OTP&&ue===ut.mt.EMAIL&&e.get("mobile")&&(l=qt(qt({},l),{},{phoneNumbers:[{type:"mobile",value:null===(o=e.get("mobile"))||void 0===o?void 0:o.toString()}]}));return Ft&&(l=qt(qt({},l),xn(e))),l},xn=function(e){var t={};return Bt&&function(e){var t,n=ft[Kt],r=at[$t];null!=n&&e.set(Kt,n),(0,S.Z)(n)&&!(0,S.Z)(r)&&e.set(Kt,r);var a=null!==(t=ft[zt])&&void 0!==t?t:"",i=at[Qt];null!=a&&e.set(zt,a),(0,S.Z)(a)&&!(0,S.Z)(i)&&e.set(zt,i)}(e),tt.forEach((function(n){var r={},a=n.name.split(".");if("roles.default"!==n.name&&void 0!==e.get(n.name)&&void 0!==e.get(n.name).toString())if($.ProfileUtils.isMultiValuedSchemaAttribute(tt,a[0])||"phoneNumbers"===a[0]){var i=[],o=new Map;if(1===a.length||2===a.length)if(n.extended)r=Yt({},n.schemaId,(0,dt.CU)(n.name,lt[n.name],at[n.name]));else{var l,s=Ht(e.keys());try{for(s.s();!(l=s.n()).done;){var u=l.value;u.split(".")[0]===a[0]&&o.set(u,e.get(u))}}catch(R){s.e(R)}finally{s.f()}var d,c=Ht(o);try{for(c.s();!(d=c.n()).done;){var m=Gt(d.value,2),f=m[0],p=m[1],v=f.split(".");p&&""!==p&&(1===v.length?i.push(p):i.push({type:v[1],value:p}))}}catch(R){c.e(R)}finally{c.f()}r=Yt({},a[0],i)}}else if(1===a.length)if(n.extended){var E,g=null!=n&&n.schemaId?n.schemaId:B.x.userProfileSchema;if("externalId"===n.name)r=Yt({},a[0],e.get(a[0]));else r=Yt({},g,Yt({},a[0],"BOOLEAN"===n.type.toUpperCase()?!(null===(E=e.get(n.name))||void 0===E||!E.includes(n.name)):e.get(a[0])))}else r=a[0]===ut._F.SCIM2_SCHEMA_DICTIONARY.get("EMAILS")?{emails:[e.get(n.name)]}:a[0]===ut._F.SCIM2_SCHEMA_DICTIONARY.get("LOCALE")?Yt({},a[0],(0,dt.Dy)(e.get(a[0]),ut.lJ.UNDERSCORE,!1,J)):Yt({},a[0],e.get(a[0]));else if(n.extended&&n.multiValued)r=Yt({},n.schemaId,Yt({},a[0],(0,dt.CU)(a[1],lt[n.name],at[n.name])));else if(n.extended){var h,b;r=Yt({},null!==(h=null==n?void 0:n.schemaId)&&void 0!==h?h:B.x.userProfileSchema,Yt({},a[0],Yt({},a[1],"BOOLEAN"===n.type.toUpperCase()?!(null===(b=e.get(n.name))||void 0===b||!b.includes(n.name)):e.get(n.name))))}else if(a[0]===ut._F.SCIM2_SCHEMA_DICTIONARY.get("NAME"))(0,S.Z)(e.get(n.name))||(r={name:Yt({},a[1],e.get(n.name))});else{var y,C;if(a[0].includes("addresses"))if(a[0].split("#").length>1)r=Yt({},null===(y=a[0])||void 0===y?void 0:y.split("#")[0],[Yt({type:null===(C=a[0])||void 0===C?void 0:C.split("#")[1]},a[1],e.get(n.name))]);else r=Yt({},a[0],[{formatted:e.get(n.name),type:a[1]}]);else if("emails"!==a[0]&&"phoneNumbers"!==a[0]){var I;r=Yt({},a[0],[{type:a[1],value:"BOOLEAN"===n.type.toUpperCase()?!(null===(I=e.get(n.name))||void 0===I||!I.includes(n.name)):e.get(n.name)}])}}if(!(0,S.Z)(r)){var A=function(e){return"object"===jt(e)&&null!==e&&!Array.isArray(e)};for(var _ in r)if(t[_]){var w=t[_],U=r[_];Array.isArray(w)&&Array.isArray(U)?t[_]=[].concat(Wt(w),Wt(U)):A(w)&&A(U)?t[_]=qt(qt({},w),U):t[_]=U}else t[_]=r[_]}})),t},Ln=function(e){var t={behavior:"smooth",block:"center"};switch(e){case"email":_t.current.scrollIntoView(t);break;case"formBottom":At.current.scrollIntoView(t)}},Mn=function(){var e=Vt(kt().mark((function e(t){return kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!he){e.next=2;break}return e.abrupt("return",Ae);case 2:return e.abrupt("return",V.w.validateInputAgainstRegEx(t,En));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),On=function(){var e=Vt(kt().mark((function e(t,n){return kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mn(t);case 2:if(e.sent){e.next=5;break}n.isValid=!1,n.errorMessages.push(Z(he?"extensions:manage.features.user.addUser.validation.error.passwordValidation":"extensions:manage.features.user.addUser.validation.password"));case 5:Ln("formBottom");case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Tn=function(){return ue===ut.mt.EMAIL?A.createElement(R.Z.Row,{columns:1},A.createElement(R.Z.Column,{mobile:16,tablet:16,computer:10},A.createElement(Tt.Z,{icon:yn(),content:Sn(),size:"small"}))):ue===ut.mt.OFFLINE?A.createElement(R.Z.Row,{columns:1},A.createElement(R.Z.Column,{mobile:16,tablet:16,computer:10},A.createElement(Tt.Z,{icon:"copy",content:Z("extensions:manage.features.user.addUser.inviteUserOfflineTooltip"),size:"small"}))):null},Pn=function(){var e="user-mgt-add-user-form-alphanumeric-email-input",t=!(0,S.Z)(tt)&&tt.find((function(e){return e.name===Qt}));if(Ft&&Bt&&t&&(0,dt._g)(t,Ut)){var n=Z("user:profile.fields."+t.name.replace(".","_"),{defaultValue:t.displayName});return Fn(t,n,(0,dt.KZ)(t),e)}return A.createElement(g.gN,{"data-testid":e,"data-componentid":e,loading:fn,label:"Email",name:"email",placeholder:Z("user:forms.addUserForm.inputs.email.placeholder"),required:Xe,requiredErrorMessage:Z("user:forms.addUserForm.inputs.email.validations.empty"),validation:function(){var e=Vt(kt().mark((function e(t,n){return kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:U(!0),t&&!V.w.validateInputAgainstRegEx(t,gn)?(n.isValid=!1,n.errorMessages.push(nn),Ln("email"),Te(!1)):Te(!0),U(!1);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),type:"email",value:r&&r.email,tabIndex:1,maxLength:60,listen:Rn})},Zn=function(e,t){var n="".concat(P,"-").concat(e.name,"-input"),r=Z("user:profile.fields."+e.name.replace(".","_"),{defaultValue:e.displayName});return null!=e&&e.extended&&null!=e&&e.multiValued?Fn(e,r,t):"BOOLEAN"===e.type.toUpperCase()?A.createElement(g.gN,{"data-componentid":n,name:e.name,required:!0,requiredErrorMessage:r+" is required",type:"checkbox",value:Ct.get(e.name)?[e.name]:[],children:[{label:r,value:e.name}],key:t}):"country"===e.name?A.createElement(g.gN,{ref:wt,"data-componentid":n,name:e.name,label:r,required:!0,requiredErrorMessage:r+" is required",placeholder:"Select your "+r,type:"dropdown",value:Ct.get(e.name),children:[{"data-componentid":"".concat(P,"-country-dropdown-empty"),key:"empty-country",text:"Select your country",value:""}].concat(pn?pn.map((function(e){return{"data-componentid":"".concat(P,"-country-dropdown-")+e.value,flag:e.flag,key:e.key,text:e.text,value:e.value}})):[]),key:t,clearable:!1,search:!0,selection:!0,fluid:!0}):"locale"===(null==e?void 0:e.name)?A.createElement(g.gN,{"data-componentid":n,name:null==e?void 0:e.name,label:r,required:!0,requiredErrorMessage:Z("user:profile.forms.generic.inputs.validations.empty",{fieldName:r}),placeholder:Z("user:profile.forms.generic.inputs.dropdownPlaceholder",{fieldName:r}),type:"dropdown",value:(0,dt.Dy)(Ct.get(null==e?void 0:e.name),ut.lJ.HYPHEN,!0,J),children:[{"data-componentid":"".concat(P,"-locale-dropdown-empty"),key:"empty-locale",text:Z("user:profile.forms.generic.inputs.dropdownPlaceholder",{fieldName:r}),value:""}].concat(J?Object.keys(J).map((function(e){var t;return{"data-componentid":"".concat(P,"-locale-dropdown-")+J[e].code,flag:null!==(t=J[e].flag)&&void 0!==t?t:ut._F.GLOBE,key:J[e].code,text:J[e].name===ut._F.GLOBE?J[e].code:"".concat(J[e].name,",\n                                            ").concat(J[e].code),value:J[e].code}})):[]),key:t,clearable:!1,search:!0,selection:!0,fluid:!0}):"dateOfBirth"===(null==e?void 0:e.name)?A.createElement(g.gN,{"data-componentid":n,name:e.name,label:r,required:!0,requiredErrorMessage:r+" is required",placeholder:"YYYY-MM-DD",type:"text",value:Ct.get(e.name),key:t,validation:function(t,n){RegExp(e.regEx).test(t)||(n.isValid=!1,n.errorMessages.push(Z("users:forms.validation.dateFormatError",{field:r})))},maxLength:e.maxLength?e.maxLength:H.Cb.CLAIM_VALUE_MAX_LENGTH}):A.createElement(g.gN,{"data-componentid":n,name:e.name,label:"profileUrl"===e.name?"Profile Image URL":r,required:!0,requiredErrorMessage:r+" is required",placeholder:"Enter your "+r,type:"text",value:Ct.get(e.name),key:t,validation:function(t,n){RegExp(e.regEx).test(t)||(n.isValid=!1,n.errorMessages.push(Z("users:forms.validation.formatError",{field:r})))},maxLength:r.toLowerCase().includes("uri")||r.toLowerCase().includes("url")?H.Cb.URI_CLAIM_VALUE_MAX_LENGTH:e.maxLength?e.maxLength:H.Cb.CLAIM_VALUE_MAX_LENGTH})},Dn=function(e,t){if(!(0,S.Z)(e)&&!(0,S.Z)(t)){var n=new Map;e.forEach((function(e){var r=e.name.split(".");if(1===r.length)if("emails"===r[0]){var a=r[0];if($.ProfileUtils.isStringArray(t[a])){var i=t[a].find((function(e){return"string"==typeof e}));n.set(e.name,i)}}else{var o,l,s,u=r[0];if(e.extended&&null!==(o=t[B.x.userProfileSchema])&&void 0!==o&&o[r[0]]){if(ut._F.MULTI_VALUED_ATTRIBUTES.includes(r[0])){var d,c=null===(d=t[B.x.userProfileSchema])||void 0===d?void 0:d[r[0]],m=Array.isArray(c)?c.join(","):"";return void n.set(e.name,m)}return void n.set(e.name,t[B.x.userProfileSchema][r[0]])}if(e.extended&&null!==(l=t[H.Cb.SCIM2_ENT_USER_SCHEMA])&&void 0!==l&&l[r[0]]){if(e.multiValued){var f,p=null===(f=t[H.Cb.SCIM2_ENT_USER_SCHEMA])||void 0===f?void 0:f[r[0]],v=Array.isArray(p)?p.join(","):"";return void n.set(e.name,v)}return void n.set(e.name,t[H.Cb.SCIM2_ENT_USER_SCHEMA][r[0]])}if(e.extended&&null!=t&&null!==(s=t[oe])&&void 0!==s&&s[r[0]]){if(e.multiValued){var E,g=null===(E=t[oe])||void 0===E?void 0:E[r[0]],h=Array.isArray(g)?g.join(","):"";return void n.set(e.name,h)}return void n.set(e.name,t[oe][r[0]])}n.set(e.name,t[u])}else if("name"===r[0]){var b=r[0],y=r[1];y&&t[b]&&t[b][y]&&n.set(e.name,t[b][y])}else{var S,C,I,A=r[0],_=r[1],w=null==t||null===(S=t[B.x.userProfileSchema])||void 0===S||null===(S=S[A])||void 0===S?void 0:S[_],U=null==t||null===(C=t[H.Cb.SCIM2_ENT_USER_SCHEMA])||void 0===C||null===(C=C[A])||void 0===C?void 0:C[_],R=null==t||null===(I=t[oe])||void 0===I||null===(I=I[A])||void 0===I?void 0:I[_];if(e.extended&&(w||U||R))w?n.set(e.name,w):U&&e.multiValued?n.set(e.name,Array.isArray(U)?U.join(","):""):U?n.set(e.name,U):R&&e.multiValued?n.set(e.name,Array.isArray(R)?R.join(","):""):R&&n.set(e.name,R);else{var N=t[A]&&Array.isArray(t[A])&&t[A].find((function(e){return e.type===_}));if(A.includes("addresses")){var x,L=null==e||null===(x=e.name)||void 0===x?void 0:x.split(".")[1],M=null==A?void 0:A.split("#");if(M.length>1){var O=M[0],T=M[1],P=t[O]&&Array.isArray(t[O])&&t[O].find((function(e){return e.type===T}));n.set(e.name,P&&P[L]?P[L]:"")}else n.set(e.name,N?N.formatted:"")}else n.set(e.name,N?N.value:"")}}})),It(n)}},kn=function(e){var t={},n={};if(null==bt||bt.forEach((function(n){var r=null==e?void 0:e.get(n.name);t[n.name]=r?r.split(","):[]})),Bt){var r=null==e?void 0:e.get(zt),a=null==e?void 0:e.get(Kt);if(!(0,S.Z)(r)){var i,o,l=null!==(i=null===(o=t[Qt])||void 0===o?void 0:o.filter((function(e){return!(0,S.Z)(e)&&e!==r})))&&void 0!==i?i:[];l.unshift(r),t[Qt]=l}if(!(0,S.Z)(a)){var s,u,d=null!==(s=null===(u=t[$t])||void 0===u?void 0:u.filter((function(e){return!(0,S.Z)(e)&&e!==a})))&&void 0!==s?s:[];d.unshift(a),t[$t]=d}n[zt]=r,n[Kt]=a}ct(t),pt(n)},Fn=function(e,t,n,r){var a,i,o,l,s="",u=0,d=null!=r?r:"".concat(P,"-").concat(e.name,"-input"),c="profileUrl"===e.name?"Profile Image URL":t;e.name===Qt?(s=ft[zt],l=tt.find((function(e){return e.name===zt})),u=H.Cb.MAX_EMAIL_ADDRESSES_ALLOWED):e.name===$t?(s=ft[Kt],l=tt.find((function(e){return e.name===Kt})),u=H.Cb.MAX_MOBILE_NUMBERS_ALLOWED):(l=tt.find((function(t){return t.name===e.name})),u=H.Cb.MAX_MULTI_VALUES_ALLOWED);return A.createElement("div",{key:n},A.createElement("div",{className:"multi-attribute-label required field"},A.createElement("label",null,c)),A.createElement(g.gN,{className:"multi-attribute-field",action:{icon:"plus",onClick:function(t){var n;t.preventDefault();var r=at[e.name];Et[e.name]||(0,S.Z)(r)||null!==(n=lt[e.name])&&void 0!==n&&n.includes(r)||(!function(e,t){if(!(0,S.Z)(t)){ct((function(n){return qt(qt({},n),{},Yt({},e.name,[].concat(Wt(n[e.name]||[]),[t])))}));var n=function(e){(0,S.Z)(ft[e])&&pt((function(n){return qt(qt({},n),{},Yt({},e,t))}))};e.name===Qt?n(zt):e.name===$t&&n(Kt)}}(e,r),it(qt(qt({},at),{},Yt({},e.name,""))))}},disabled:(null===(a=lt[null==e?void 0:e.name])||void 0===a?void 0:a.length)>=u,"data-componentid":d,name:e.name,placeholder:"Enter your "+t,type:"text",value:at[e.name],required:(0,S.Z)(lt[null==e?void 0:e.name]),requiredErrorMessage:Z("user:profile.forms.generic.inputs.validations.empty",{fieldName:t}),validation:function(n,r){var a;(0,S.Z)(n)&&(0,S.Z)(lt[null==e?void 0:e.name])&&(gt(qt(qt({},Et),{},Yt({},e.name,!0))),r.isValid=!1,r.errorMessages.push(Z("user:profile.forms.generic.inputs.validations.empty",{fieldName:t}))),RegExp(null===(a=l)||void 0===a?void 0:a.regEx).test(n)?gt(qt(qt({},Et),{},Yt({},e.name,!1))):(gt(qt(qt({},Et),{},Yt({},e.name,!0))),r.isValid=!1,r.errorMessages.push(Z("users:forms.validation.formatError",{field:t})))},displayErrorOn:"blur",listen:function(t){it(qt(qt({},at),{},Yt({},e.name,t.get(e.name))))},maxLength:t.toLowerCase().includes("uri")||t.toLowerCase().includes("url")?H.Cb.URI_CLAIM_VALUE_MAX_LENGTH:e.maxLength?e.maxLength:H.Cb.CLAIM_VALUE_MAX_LENGTH,controlled:!0}),A.createElement("div",{hidden:0===(null===(i=lt[null==e?void 0:e.name])||void 0===i?void 0:i.length)},A.createElement(De.Z,{component:je.Z,elevation:0,"data-componentid":"".concat(P,"-").concat(e.name,"-accordion")},A.createElement(Rt.Z,{className:"multi-value-table",size:"small","aria-label":"multi-attribute value table"},A.createElement(Nt.Z,null,null===(o=lt[null==e?void 0:e.name])||void 0===o?void 0:o.map((function(t,n){return A.createElement(Lt.Z,{key:n,className:"multi-value-table-data-row"},A.createElement(xt.Z,{align:"left",padding:"none"},A.createElement(M.Z,{container:!0,flexDirection:"row",justifyContent:"flex-start",spacing:1},A.createElement(M.Z,null,A.createElement("label",{"data-componentid":"".concat(P,"-").concat(e.name)+"-value-".concat(n),className:"truncate"},t)),A.createElement(M.Z,null,function(e){return!(0,S.Z)(s)&&e===s}(t)&&A.createElement("div",{"data-componentid":"".concat(P,"-").concat(e.name)+"-primary-icon-".concat(n)},A.createElement(ke.Z,{label:Z("common:primary"),size:"medium"}))))),A.createElement(xt.Z,{align:"right"},A.createElement(M.Z,{container:!0,flexDirection:"row",justifyContent:"flex-end",wrap:"nowrap"},A.createElement(M.Z,null,function(e){return!(0,S.Z)(s)&&e!==s}(t)&&A.createElement(Fe.Z,{size:"small",onClick:function(){var e,n,r;return n=null===(e=l)||void 0===e?void 0:e.name,r=t,void pt((function(e){return qt(qt({},e),{},Yt({},n,r))}))},"data-componentid":"".concat(P,"-").concat(e.name)+"-make-primary-button-".concat(n)},A.createElement(h.GI,{trigger:A.createElement(N.Z,{name:"star"}),header:Z("common:makePrimary"),size:"tiny",inverted:!0}))),A.createElement(M.Z,null,A.createElement(Fe.Z,{size:"small",onClick:function(){!function(e,t){var n,r=(null===(n=lt[null==e?void 0:e.name])||void 0===n?void 0:n.filter((function(e){return e!==t})))||[];ct((function(t){return qt(qt({},t),{},Yt({},e.name,r))})),e.name===Qt?ft[zt]===t&&pt((function(e){return qt(qt({},e),{},Yt({},zt,""))})):e.name===$t&&ft[Kt]===t&&pt((function(e){return qt(qt({},e),{},Yt({},Kt,""))}))}(e,t)},"data-componentid":"".concat(P,"-").concat(e.name,"-delete-button-").concat(n)},A.createElement(h.GI,{trigger:A.createElement(N.Z,{name:"trash alternate"}),header:Z("common:delete"),size:"tiny",inverted:!0}))))))})))))))};return A.createElement(g.Es,{"data-testid":"user-mgt-add-user-form",onSubmit:function(){var e=Vt(kt().mark((function e(t){return kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s!==ut.Rd.CREATE_PASSWORD){e.next=7;break}return e.next=3,Mn(t.get("newPassword")?t.get("newPassword").toString():"");case 3:if(!e.sent){e.next=5;break}o(Nn(t));case 5:e.next=8;break;case 7:o(Nn(t));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),submitState:a},A.createElement(R.Z,null,!qe.includes(ut.Wx.USERSTORE)&&A.createElement(R.Z.Row,null,A.createElement(R.Z.Column,{mobile:16,tablet:16,computer:10},A.createElement("div",{ref:_t}),A.createElement(Pt.Z.Field,{required:l},A.createElement("label",null,Z("user:forms.addUserForm.inputs.domain.placeholder")),A.createElement(Zt.Z,{fluid:!0,selection:!0,labeled:!0,options:hn,"data-testid":"user-mgt-add-user-form-userstore-dropdown",name:"userstore",disabled:!1,value:xe,onChange:function(e,t){var n;Le(t.value.toString()),y(null==hn||null===(n=hn.find((function(e){return e.value===t.value})))||void 0===n||null===(n=n.text)||void 0===n?void 0:n.toString())},tabIndex:1,maxLength:60})))),function(){var e,t;if(null!=W&&W.enableEmailDomain)return A.createElement(R.Z.Row,null,A.createElement(R.Z.Column,{mobile:16,tablet:16,computer:10},A.createElement("div",{ref:_t}),A.createElement(g.gN,{loading:I&&fn,"data-testid":"user-mgt-add-user-form-email-input",label:Z("extensions:manage.features.user.addUser.inputLabel.emailUsername"),name:"email",placeholder:Z("user:forms.addUserForm.inputs.email.placeholder"),required:!0,requiredErrorMessage:Z("user:forms.addUserForm.inputs.email.validations.empty"),validation:function(){var e=Vt(kt().mark((function e(t,n){var r,a;return kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(U(!0),!t||V.w.validateInputAgainstRegEx(t,vn)&&V.w.validateInputAgainstRegEx(t,gn)||(n.isValid=!1,n.errorMessages.push(nn),Ln("email"),U(!1)),e.prev=2,!t||!0!==n.isValid){e.next=9;break}return e.next=6,(0,st.Fp)(null,null,"userName eq "+t,null,f);case 6:(null==(r=e.sent)?void 0:r.totalResults)>0&&(n.isValid=!1,n.errorMessages.push(tn),Ln("email")),U(!1);case 9:e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),500===(null===e.t0||void 0===e.t0||null===(a=e.t0.response)||void 0===a?void 0:a.status)&&(n.isValid=!1,n.errorMessages.push(rn),Ln("email")),U(!1);case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t,n){return e.apply(this,arguments)}}(),type:"email",value:r&&r.email,tabIndex:1,maxLength:60})));if(!qe.includes(ut.Wx.USERNAME)&&!In())return A.createElement(R.Z.Row,null,A.createElement(R.Z.Column,{mobile:16,tablet:16,computer:10},A.createElement("div",{ref:_t}),A.createElement(g.gN,{loading:I,"data-testid":"user-mgt-add-user-form-email-input",label:Z("extensions:manage.features.user.addUser.inputLabel.emailUsername"),name:"email",placeholder:Z("user:forms.addUserForm.inputs.email.placeholder"),required:!0,requiredErrorMessage:Z("user:forms.addUserForm.inputs.email.validations.empty"),validation:function(){var e=Vt(kt().mark((function e(t,n){var r,a;return kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(U(!0),!t||V.w.validateInputAgainstRegEx(t,vn)&&V.w.validateInputAgainstRegEx(t,gn)||(n.isValid=!1,n.errorMessages.push(nn),Ln("email"),U(!1)),e.prev=2,!t||!0!==n.isValid){e.next=9;break}return e.next=6,(0,st.Fp)(null,null,"userName eq "+t,null,f);case 6:(null==(r=e.sent)?void 0:r.totalResults)>0&&(n.isValid=!1,n.errorMessages.push(tn),Ln("email")),U(!1);case 9:e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),500===(null===e.t0||void 0===e.t0||null===(a=e.t0.response)||void 0===a?void 0:a.status)&&(n.isValid=!1,n.errorMessages.push(rn),Ln("email")),U(!1);case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t,n){return e.apply(this,arguments)}}(),type:"email",value:r&&r.email,tabIndex:1,maxLength:60})));var n,a;return A.createElement(R.Z.Row,null,A.createElement(R.Z.Column,{mobile:16,tablet:16,computer:10},A.createElement("div",{ref:_t}),A.createElement(g.gN,{loading:I,"data-testid":"user-mgt-add-user-form-username-input",label:Z("extensions:manage.features.user.addUser.inputLabel.alphanumericUsername"),name:"username",placeholder:Z("extensions:manage.features.user.addUser.inputLabel.alphanumericUsernamePlaceholder"),required:!0,requiredErrorMessage:Z("extensions:manage.features.user.addUser.validation.usernameEmpty"),validation:function(){var e=Vt(kt().mark((function e(t,n){var r,a,i,o,l;return kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==B.x&&void 0!==B.x&&null!==(r=B.x.userNameValidation)&&void 0!==r&&r.validateViaAPI?(a=new RegExp(ut._F.USERNAME_VALIDATION_REGEX),null!=Se&&Se.isAlphanumericOnly||(a=new RegExp(ut._F.USERNAME_VALIDATION_REGEX_WITH_SPECIAL_CHARS)),t.length<Number(Se.minLength)||t.length>Number(Se.maxLength)?(n.isValid=!1,n.errorMessages.push(ln),Ln("email")):a.test(t)||(n.isValid=!1,null!=Se&&Se.isAlphanumericOnly?n.errorMessages.push(an):n.errorMessages.push(on),Ln("email"))):(0,S.Z)(vn)||new RegExp(vn).test(t)||(n.isValid=!1,vn===(null===B.x||void 0===B.x||null===(i=B.x.userNameValidation)||void 0===i?void 0:i.defaultRegex)?n.errorMessages.push(Z("user:forms.addUserForm.inputs.username.validations.defaultRegex")):n.errorMessages.push(Z("user:forms.addUserForm.inputs.username.validations.customRegex",{regex:vn})),Ln("email")),e.prev=1,U(!0),!t||!0!==n.isValid){e.next=8;break}return e.next=6,(0,st.Fp)(null,null,"userName eq "+t,null,f);case 6:(null==(o=e.sent)?void 0:o.totalResults)>0&&(n.isValid=!1,n.errorMessages.push(tn),Ln("email"));case 8:U(!1),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),500===(null===e.t0||void 0===e.t0||null===(l=e.t0.response)||void 0===l?void 0:l.status)&&(n.isValid=!1,n.errorMessages.push(rn),Ln("email")),U(!1);case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,n){return e.apply(this,arguments)}}(),type:"text",value:r&&r.userName,tabIndex:1,maxLength:60}),((null===B.x||void 0===B.x||null===(e=B.x.userNameValidation)||void 0===e?void 0:e.validateViaAPI)||vn===(null===B.x||void 0===B.x||null===(t=B.x.userNameValidation)||void 0===t?void 0:t.defaultRegex))&&A.createElement(h.kW,null,null!==B.x&&void 0!==B.x&&null!==(n=B.x.userNameValidation)&&void 0!==n&&n.validateViaAPI||vn!==(null===B.x||void 0===B.x||null===(a=B.x.userNameValidation)||void 0===a?void 0:a.defaultRegex)?null!=Se&&Se.isAlphanumericOnly?Z("extensions:manage.features.user.addUser.validation.usernameHint",{maxLength:null==Se?void 0:Se.maxLength,minLength:null==Se?void 0:Se.minLength}):Z("extensions:manage.features.user.addUser.validation.usernameSpecialCharHint",{maxLength:null==Se?void 0:Se.maxLength,minLength:null==Se?void 0:Se.minLength}):Z("user:forms.addUserForm.inputs.username.hint.defaultRegex")),Pn()))}(),!qe.includes(ut.Wx.FIRSTNAME)&&A.createElement(R.Z.Row,null,A.createElement(R.Z.Column,{mobile:16,tablet:16,computer:10},A.createElement(g.gN,{"data-testid":"user-mgt-add-user-form-firstName-input",label:Z("user:forms.addUserForm.inputs.firstName.label"),name:"firstName",placeholder:Z("user:forms.addUserForm.inputs.firstName.placeholder"),required:We,requiredErrorMessage:Z("user:forms.addUserForm.inputs.firstName.validations.empty"),type:"text",value:r&&r.firstName,tabIndex:2,maxLength:30,validation:function(){var e=Vt(kt().mark((function e(t,n){return kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.includes("/")&&(n.isValid=!1,n.errorMessages.push("First Name cannot contain the forward slash (/) character."));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}))),!qe.includes(ut.Wx.LASTNAME)&&A.createElement(R.Z.Row,null,A.createElement(R.Z.Column,{mobile:16,tablet:16,computer:10},A.createElement(g.gN,{"data-testid":"user-mgt-add-user-form-lastName-input",label:Z("user:forms.addUserForm.inputs.lastName.label"),name:"lastName",placeholder:Z("user:forms.addUserForm.inputs.lastName.placeholder"),required:Ke,requiredErrorMessage:Z("user:forms.addUserForm.inputs.lastName.validations.empty"),type:"text",value:r&&r.lastName,tabIndex:3,maxLength:30,validation:function(){var e=Vt(kt().mark((function e(t,n){return kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.includes("/")&&(n.isValid=!1,n.errorMessages.push("Last Name cannot contain the forward slash (/) character."));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}))),Ft&&tt&&function(){var e=null==tt?void 0:tt.find((function(e){return e.name===$t})),t=null==tt?void 0:tt.find((function(e){return e.name===Kt}));if(Bt&&e&&(0,dt._g)(e,Ut)){var n=Z("user:profile.fields."+e.name.replace(".","_"),{defaultValue:e.displayName});return A.createElement(R.Z.Row,{columns:1,key:(0,dt.KZ)(e)},A.createElement(R.Z.Column,{mobile:16,tablet:16,computer:10},Fn(e,n,(0,dt.KZ)(e))))}if((0,dt._g)(t,Ut)){var a="".concat(P,"-").concat(t.name,"-input"),i=Z("user:profile.fields."+t.name.replace(".","_"),{defaultValue:t.displayName});return A.createElement(R.Z.Row,null,A.createElement(R.Z.Column,{mobile:16,tablet:16,computer:10},A.createElement(g.gN,{"data-componentid":a,name:t.name,label:i,required:!0,requiredErrorMessage:i+" is required",placeholder:"Enter your "+i,type:"text",value:Ct.get(null==t?void 0:t.name),key:(0,dt.KZ)(t),validation:function(e,n){RegExp(t.regEx).test(e)||(n.isValid=!1,n.errorMessages.push(Z("users:forms.validation.formatError",{field:i})))},maxLength:t.maxLength?t.maxLength:H.Cb.CLAIM_VALUE_MAX_LENGTH})))}return me===ne.y.SMS_OTP&&ue===ut.mt.EMAIL?A.createElement(R.Z.Row,null,A.createElement(R.Z.Column,{mobile:16,tablet:16,computer:10},A.createElement(g.gN,{"data-componentid":"user-mgt-add-user-form-mobile-input",name:"mobile",label:Z("user:forms.addUserForm.inputs.mobile.label",{defaultValue:"Mobile Number"}),required:!0,requiredErrorMessage:Z("user:forms.addUserForm.inputs.mobile.validations.empty",{defaultValue:"Mobile number is required for SMS verification"}),placeholder:Z("user:forms.addUserForm.inputs.mobile.placeholder",{defaultValue:"Enter mobile number"}),type:"text",value:Ct.get("mobile")||(null==r?void 0:r.mobile),validation:function(e,t){Ot.I.mobileNumber(e)||(t.isValid=!1,t.errorMessages.push(Z("user:forms.addUserForm.inputs.mobile.validations.invalid",{defaultValue:"Please enter a valid mobile number"})))},maxLength:15}))):null}(),Ft&&tt&&tt.map((function(e,t){return function(e,t){var n=[zt,Qt,Kt,$t,Xt,Jt];if(!((0,S.Z)(e)||n.includes(e.name)||en.includes(e.name)))return A.createElement(R.Z.Row,{columns:1,key:t},A.createElement(R.Z.Column,{mobile:16,tablet:16,computer:10},Zn(e,t)))}(e,t)})),qe.includes(ut.Wx.PASSWORD)?null:A.createElement(R.Z.Row,{columns:1},A.createElement(R.Z.Column,{mobile:16,tablet:16,computer:10},A.createElement(Pt.Z.Field,null,A.createElement("label",{className:"mb-3"},Z("user:forms.addUserForm.buttons.radioButton.label")),A.createElement(Dt.Z,{label:_n.label,"data-testId":_n["data-testid"],name:"handlePasswordGroup",value:_n.value,checked:s===_n.value,onChange:function(e,t){return b(null==t?void 0:t.value)}})),s===_n.value?A.createElement("div",{className:"mt-4 mb-4 ml-4"},A.createElement(ae.Z,{compact:!0,size:"small",className:"mb-4"},i&&(Xe||Oe)?A.createElement(ae.Z.Item,{name:Cn(),active:ue===ut.mt.EMAIL,onClick:function(){return de(ut.mt.EMAIL)}}):A.createElement(h.GI,{basic:!0,inverted:!0,position:"top center",content:i?Ze&&Oe?null:Z("user:modals.addUserWizard.askPassword.emailInvalid"):A.createElement(re.c,{i18nKey:"user:modals.addUserWizard.askPassword.emailVerificationDisabled"},"To invite users to set the password, enable email invitations for user password setup from ",A.createElement(h.rU,{onClick:function(){return te.m.push(ee.$.getPaths().get("GOVERNANCE_CONNECTOR_EDIT").replace(":categoryId",c.v.USER_ONBOARDING_CONNECTOR_ID).replace(":connectorId",c.v.ASK_PASSWORD_CONNECTOR_ID))},external:!1},"Login & Registration settings"),"."),hoverable:!0,trigger:A.createElement(ae.Z.Item,{name:Cn(),disabled:!0})}),A.createElement(ae.Z.Item,{name:Z("user:modals.addUserWizard.askPassword.inviteOffline"),active:ue===ut.mt.OFFLINE,onClick:function(){return de(ut.mt.OFFLINE)}})),Tn()):null,A.createElement(Pt.Z.Field,null,A.createElement(Dt.Z,{label:wn.label,"data-testId":wn["data-testid"],name:"handlePasswordGroup",value:wn.value,checked:s===wn.value,onChange:function(e,t){return b(null==t?void 0:t.value)}})),s===wn.value?A.createElement(A.Fragment,null,A.createElement(R.Z.Row,{columns:2},A.createElement(R.Z.Column,{mobile:16,tablet:16,computer:10},A.createElement("div",{className:"generate-password"},A.createElement(g.gN,{"data-testid":"user-mgt-add-user-form-newPassword-input",className:"addon-field-wrapper full-width",hidePassword:Z("common:hidePassword"),label:Z("user:forms.addUserForm.inputs.newPassword.label"),name:"newPassword",placeholder:Z("user:forms.addUserForm.inputs.newPassword.placeholder"),required:!0,requiredErrorMessage:Z("user:forms.addUserForm.inputs.newPassword.validations.empty"),showPassword:Z("common:showPassword"),type:"password",value:Ue||(null==r?void 0:r.newPassword),validation:On,tabIndex:5,enableReinitialize:!0,listen:Un,maxWidth:60}),he&&A.createElement(h.zx,{basic:!0,primary:!0,size:"tiny","data-testid":"user-mgt-password-generate-button",type:"button",className:"info add-user-step-button",onClick:function(){var e=(0,dt.F2)(Number(he.minLength),Number(he.minLowerCaseCharacters)>0,Number(he.minUpperCaseCharacters)>0,Number(he.minNumbers)>0,Number(he.minSpecialCharacters)>0,Number(he.minLowerCaseCharacters),Number(he.minUpperCaseCharacters),Number(he.minNumbers),Number(he.minSpecialCharacters),Number(he.minUniqueCharacters));Re(e),Ee(e)}},"Generate")),he&&A.createElement(h.Tj,{password:ve,minLength:Number(he.minLength),maxLength:Number(he.maxLength),minNumbers:Number(he.minNumbers),minUpperCase:Number(he.minUpperCaseCharacters),minLowerCase:Number(he.minLowerCaseCharacters),minSpecialChr:Number(he.minSpecialCharacters),minUniqueChr:Number(he.minUniqueCharacters),maxConsecutiveChr:Number(he.maxConsecutiveCharacters),onPasswordValidate:An,translations:{case:Number(null==he?void 0:he.minUpperCaseCharacters)>0&&Number(null==he?void 0:he.minLowerCaseCharacters)>0?Z("extensions:manage.features.user.addUser.validation.passwordCase",{minLowerCase:he.minLowerCaseCharacters,minUpperCase:he.minUpperCaseCharacters}):Number(null==he?void 0:he.minUpperCaseCharacters)>0?Z("extensions:manage.features.user.addUser.validation.upperCase",{minUpperCase:he.minUpperCaseCharacters}):Z("extensions:manage.features.user.addUser.validation.lowerCase",{minLowerCase:he.minLowerCaseCharacters}),consecutiveChr:Z("extensions:manage.features.user.addUser.validation.consecutiveCharacters",{repeatedChr:he.maxConsecutiveCharacters}),length:Z("extensions:manage.features.user.addUser.validation.passwordLength",{max:he.maxLength,min:he.minLength}),numbers:Z("extensions:manage.features.user.addUser.validation.passwordNumeric",{min:he.minNumbers}),specialChr:Z("extensions:manage.features.user.addUser.validation.specialCharacter",{specialChr:he.minSpecialCharacters}),uniqueChr:Z("extensions:manage.features.user.addUser.validation.uniqueCharacters",{uniqueChr:he.minUniqueCharacters})}}))),A.createElement("div",{ref:At})):null))))},$t=n(87029),Xt=n(62508),Jt=n(10909),en=n(92e3);function tn(e){return tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tn(e)}function nn(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=tn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=tn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==tn(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,l=[],s=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,a=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return an(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?an(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function an(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var on=function(e){var t=e.selectedUserStore,n=e.username,r=e.password,a=e.isPasswordBased,i=e.hasWorkflowAssociations,o=void 0!==i&&i,l=e["data-componentid"],s=(0,_.$)().t,u=(0,w.I0)(),d=(0,w.v9)((function(e){return e.auth.tenantDomain})),c=(0,w.v9)((function(e){var t;return null==e||null===(t=e.organization)||void 0===t?void 0:t.organizationType})),m=(0,w.v9)((function(e){var t;return null==e||null===(t=e.organization)||void 0===t?void 0:t.organization})),f=rn((0,A.useState)(""),2),p=f[0],g=f[1],b=rn((0,A.useState)(!0),2),y=b[0],S=b[1],C=(0,A.useMemo)((function(){return c===$t.$B.SUBORGANIZATION?null==m?void 0:m.name:d}),[d,m]);(0,A.useEffect)((function(){!a&&!o&&I()}),[]);var I=function(){(0,en.mK)(n,t).then((function(e){g(e)})).catch((function(e){var t;e.response&&401!==e.response.status?null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(t=t.data)&&void 0!==t&&t.detail?u((0,E.V_)({description:s("extensions:manage.features.user.addUser.inviteLink.error.description",{description:e.response.data.detail}),level:v.QU.ERROR,message:s("extensions:manage.features.user.addUser.inviteLink.error.message")})):u((0,E.V_)({description:s("extensions:manage.features.user.addUser.inviteLink.genericError.description"),level:v.QU.ERROR,message:s("extensions:manage.features.user.addUser.inviteLink.genericError.message")})):u((0,E.V_)({description:s("extensions:manage.features.user.addUser.inviteLink.error.description"),level:v.QU.ERROR,message:s("extensions:manage.features.user.addUser.inviteLink.error.message")}))})).finally((function(){S(!1)}))},U=function(){if(a){var e=s("extensions:manage.features.user.addUser.summary.invitationBody.hi")+"\n\n"+s("extensions:manage.features.user.addUser.summary.invitationPasswordBodyCopy.accountHasBeenCreated").replace("$tenantname",C)+"\n\n"+s("extensions:manage.features.user.addUser.summary.username")+": ".concat(n,"\n")+s("extensions:manage.features.user.addUser.summary.password")+": ".concat(r,"\n\n")+s("extensions:manage.features.user.addUser.summary.invitationBody.thanks")+",\n"+s("extensions:manage.features.user.addUser.summary.invitationBodyCopy.team").replace("$tenantname",C);$.CommonUtils.copyTextToClipboard(e)}else{var t=s("extensions:manage.features.user.addUser.summary.invitationBody.hi")+"\n\n"+s("extensions:manage.features.user.addUser.summary.invitationBodyCopy.accountHasBeenCreated").replace("$username",n).replace("$tenantname",C)+"\n\n"+s("extensions:manage.features.user.addUser.summary.invitationBody.pleaseFollowTheLink")+"\n\n"+s("extensions:manage.features.user.addUser.summary.invitationLink")+":\n"+"".concat(p,"\n\n")+s("extensions:manage.features.user.addUser.summary.invitationBody.thanks")+",\n"+s("extensions:manage.features.user.addUser.summary.invitationBodyCopy.team").replace("$tenantname",C);$.CommonUtils.copyTextToClipboard(t)}};return a?A.createElement(R.Z,{className:"wizard-summary"},A.createElement(R.Z.Row,null,A.createElement(R.Z.Column,{mobile:16,tablet:16,computer:16},A.createElement(h.v0,{className:"mb-5",warning:!0},A.createElement(R.Z,null,A.createElement(R.Z.Column,{width:1,className:"pt-0 pb-0"},A.createElement(N.Z,{name:"info circle",size:"large"})),A.createElement(R.Z.Column,{width:15,className:"pt-0 pb-0"},s(o?"extensions:manage.features.user.addUser.summary.passwordWarningMessageWithWorkFlow":"extensions:manage.features.user.addUser.summary.passwordWarningMessage")))),A.createElement("label",null,s("extensions:manage.features.user.addUser.summary.password")),A.createElement(h.OR,{className:"mt-2",value:r,"data-componentid":"".concat(l,"-user-password-field"),secret:!0}),A.createElement(Xt.Z,{horizontal:!0,section:!0},"Or"),A.createElement("label",null,s("extensions:manage.features.user.addUser.summary.invitation")),A.createElement(R.Z,{className:"segment mt-2"},A.createElement(R.Z.Column,{width:14},s("extensions:manage.features.user.addUser.summary.invitationBody.hi"),A.createElement("br",null),A.createElement("br",null),A.createElement(re.c,{i18nKey:"extensions:manage.features.user.addUser.summary.invitationPasswordBody.accountHasBeenCreated",tOptions:{tenantname:C}},"An account has been created for you in the ",C," organization. Your credentials are as follows."),A.createElement("br",null),A.createElement("br",null),s("extensions:manage.features.user.addUser.summary.username"),": ",n,A.createElement("br",null),s("extensions:manage.features.user.addUser.summary.password"),": ",r,A.createElement("br",null),A.createElement("br",null),s("extensions:manage.features.user.addUser.summary.invitationBody.thanks"),",",A.createElement("br",null),A.createElement(re.c,{i18nKey:"extensions:manage.features.user.addUser.summary.invitationBody.team",tOptions:{tenantname:C}},C," team")),A.createElement(R.Z.Column,{width:2},A.createElement(h.GI,{content:"Copy to clipboard",position:"top center",trigger:A.createElement(Jt.Z,{icon:"copy",floated:"right",onClick:function(){return U()}}),inverted:!0,popper:A.createElement("div",{style:{filter:"none"}})})))))):y?A.createElement(h.pO,null):A.createElement(R.Z,{className:"wizard-summary"},A.createElement(R.Z.Row,null,A.createElement(R.Z.Column,{mobile:16,tablet:16,computer:16},A.createElement(h.v0,{className:"mb-5",warning:!0},A.createElement(R.Z,null,A.createElement(R.Z.Column,{width:1,className:"pt-0 pb-0"},A.createElement(N.Z,{name:"info circle",size:"large"})),A.createElement(R.Z.Column,{width:15,className:"pt-0 pb-0"},s("extensions:manage.features.user.addUser.summary.inviteWarningMessage")))),A.createElement("label",null,s("extensions:manage.features.user.addUser.summary.invitationLink")),A.createElement(h.OR,{className:"mt-2",value:p,"data-componentid":"".concat(l,"-invitation-link")}),A.createElement(Xt.Z,{horizontal:!0,section:!0},"Or"),A.createElement("label",null,s("extensions:manage.features.user.addUser.summary.invitation")),A.createElement(R.Z,{className:"segment mt-2"},A.createElement(R.Z.Column,{width:14},s("extensions:manage.features.user.addUser.summary.invitationBody.hi"),A.createElement("br",null),A.createElement("br",null),A.createElement(re.c,{i18nKey:"extensions:manage.features.user.addUser.summary.invitationBody.accountHasBeenCreated",tOptions:{tenantname:C,username:n}},"An account has been created for the username,",n," in the ",C," organization."),A.createElement("br",null),A.createElement("br",null),s("extensions:manage.features.user.addUser.summary.invitationBody.pleaseFollowTheLink"),A.createElement("br",null),A.createElement("br",null),s("extensions:manage.features.user.addUser.summary.invitationLink"),":",A.createElement("br",null),A.createElement("p",{className:"line-break-anywhere"},p),A.createElement("br",null),A.createElement("br",null),s("extensions:manage.features.user.addUser.summary.invitationBody.thanks"),",",A.createElement("br",null),A.createElement(re.c,{i18nKey:"extensions:manage.features.user.addUser.summary.invitationBody.team",tOptions:{tenantname:C}},C," team")),A.createElement(R.Z.Column,{width:2},A.createElement(h.GI,{content:"Copy to clipboard",position:"top center",trigger:A.createElement(Jt.Z,{icon:"copy",floated:"right",onClick:function(){return U()}}),inverted:!0,popper:A.createElement("div",{style:{filter:"none"}})}))))))};on.defaultProps=nn(nn({},"data-componentid","add-user-wizard-summary"),"isPasswordBased",!1);var ln=n(91749);function sn(e){return sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sn(e)}function un(e){return function(e){if(Array.isArray(e))return vn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||pn(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dn(Object(n),!0).forEach((function(t){mn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function mn(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=sn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=sn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==sn(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,l=[],s=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,a=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}(e,t)||pn(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pn(e,t){if(e){if("string"==typeof e)return vn(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vn(e,t):void 0}}function vn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var En=function(e){var t,n,x=e.closeWizard,L=e.currentStep,M=e.defaultUserTypeSelection,O=e.emailVerificationEnabled,T=e.onSuccessfulUserAddition,P=e.userStore,Z=e.requiredSteps,D=e["data-testid"],k=e["data-componentid"],F=(0,_.$)().t,V=(0,w.I0)(),j=fn((0,h.IK)(),3),B=j[0],q=j[1],Y=j[2],H=(0,u.z)().isSubOrganization,W=(0,m.Z)().userStoresList,G=fn((0,g.cC)(),2),z=G[0],K=G[1],Q=fn((0,g.cC)(),2),$=Q[0],X=Q[1],J=fn((0,g.cC)(),2),ee=J[0],te=J[1],ne=(0,w.v9)((function(e){return e.config.ui.features.users})),re=fn((0,A.useState)(void 0),2),ae=re[0],ie=re[1],oe=fn((0,A.useState)(L),2),le=oe[0],se=oe[1],ue=fn((0,A.useState)(void 0),2),de=ue[0],ce=ue[1],me=fn((0,A.useState)(!1),2),fe=me[0],pe=me[1],ve=fn((0,A.useState)(!1),2),Ee=ve[0],ge=ve[1],he=fn((0,A.useState)(!1),2),be=he[0],ye=he[1],Se=fn((0,A.useState)(!0),2),Ce=Se[0],Ie=Se[1],Ae=fn((0,A.useState)(a.x8.defaultPasswordOption),2),_e=Ae[0],we=Ae[1],Ue=fn((0,A.useState)(a.x8.defautlAskPasswordOption),2),Re=Ue[0],Ne=Ue[1],xe=fn((0,A.useState)(!1),2),Le=xe[0],Me=xe[1],Oe=fn((0,A.useState)([]),2),Te=Oe[0],Pe=Oe[1],Ze=fn((0,A.useState)(null!=P?P:l.w.primaryUserstoreName),2),De=Ze[0],ke=Ze[1],Fe=fn((0,A.useState)(!0),2),Ve=Fe[0],je=Fe[1],Be=fn((0,A.useState)(""),2),qe=Be[0],Ye=Be[1],He=fn((0,A.useState)(void 0),2),We=He[0],Ge=He[1],ze=fn((0,A.useState)([]),2),Ke=ze[0],Qe=ze[1],$e=(0,p.cr)(ne,ut._F.FEATURE_DICTIONARY.get(ut.Oq.UserLegacyAddUser)),Xe=(0,p.cr)(ne,ut._F.ATTRIBUTE_PROFILES_FOR_USER_CREATION_FEATURE_FLAG),Je=(0,f.Wf)().data,et=(0,d.P5)(c.v.USER_ONBOARDING_CONNECTOR_ID,c.v.ASK_PASSWORD_CONNECTOR_ID).data,tt=(0,r.M)(null,null,"operation eq ADD_USER"),nt=tt.data,rt=tt.isLoading,at=tt.error,it=!rt&&!at&&(null!==(t=null==nt?void 0:nt.totalResults)&&void 0!==t?t:0)>0,ot=(0,s.Ug)(null,null,null,De,"members",!it),lt=ot.data,st=ot.error,ct=(0,A.useMemo)((function(){return null!=lt&&lt.Resources?lt.Resources:[]}),[lt]),mt=(0,A.useMemo)((function(){var e;return"true"===(null===(e=(0,dt.t$)(Je))||void 0===e?void 0:e.enableValidator)}),[Je]);(0,A.useEffect)((function(){M&&ce(cn(cn({},de),{},mn({},ut.lP.USER_TYPE,{userType:M})))}),[M]),(0,A.useEffect)((function(){void 0!==ae&&(se(le-1),ie(void 0))}),[ae]),(0,A.useEffect)((function(){var e,t;de&&null!==(e=de[ut.lP.BASIC_DETAILS])&&void 0!==e&&e.domain&&ke(de&&(null===(t=de[ut.lP.BASIC_DETAILS])||void 0===t?void 0:t.domain))}),[de&&(null===(n=de[ut.lP.BASIC_DETAILS])||void 0===n?void 0:n.domain)]),(0,A.useEffect)((function(){if(de&&ct&&(H()||W)&&!rt){var e=[];e.push.apply(e,un(ht([ut.lP.BASIC_DETAILS]))),Ge(ut.lP.BASIC_DETAILS),(null==ct?void 0:ct.length)>0&&(e.push.apply(e,un(ht([ut.lP.GROUP_LIST]))),Ge(ut.lP.GROUP_LIST)),Ve&&e.push.apply(e,un(ht([ut.lP.USER_SUMMARY]))),Pe(e),ye(!0)}}),[ct,Ve,rt,de]),(0,A.useEffect)((function(){st&&(st.response&&st.response.data&&st.response.data.description?V((0,E.V_)({description:st.response.data.description,level:v.QU.ERROR,message:F("console:manage.features.groups.notifications.fetchGroups.error.message")})):V((0,E.V_)({description:F("console:manage.features.groups.notifications.fetchGroups.genericError.description"),level:v.QU.ERROR,message:F("console:manage.features.groups.notifications.fetchGroups.genericError.message")})))}),[st]),(0,A.useEffect)((function(){at&&V((0,E.V_)({description:F("approvalWorkflows:notifications.fetchWorkflowAssociations.genericError.description"),level:v.QU.ERROR,message:F("approvalWorkflows:notifications.fetchWorkflowAssociations.genericError.message")}))}),[at]);var ft,pt,vt,Et,gt=function(){var e=l.w.primaryUserstoreId;if(De){var t=null==W?void 0:W.find((function(e){return e.name===De}));t&&(e=t.id)}return e},ht=function(e){var t=function(e){var t=[];return e.forEach((function(e){e===ut.lP.BASIC_DETAILS?t.push(Rt()):e===ut.lP.GROUP_LIST?t.push(Nt()):e===ut.lP.USER_SUMMARY&&t.push(xt())})),t};return t(Z?(0,y.Z)(e,Z):e)},bt=function(){var e,t,n,r;(null===(e=Te[le])||void 0===e?void 0:e.name)===ut.lP.USER_MODE&&At(de[ut.lP.USER_MODE],ut.lP.USER_MODE),(null===(t=Te[le])||void 0===t?void 0:t.name)===ut.lP.BASIC_DETAILS&&K(),(null===(n=Te[le])||void 0===n?void 0:n.name)===ut.lP.GROUP_LIST&&X(),(null===(r=Te[le])||void 0===r?void 0:r.name)===ut.lP.USER_SUMMARY&&(te(),T(qe),x())},yt=function(){ie(le)},St=function(e,t){var n=[],r={Operations:[{op:"add",value:{members:[{display:e.userName,value:e.id}]}}],schemas:["urn:ietf:params:scim:api:messages:2.0:PatchOp"]};if(t.length>0){t.map((function(e){n.push(e.id)}));var a,i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=pn(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw i}}}}(n);try{for(i.s();!(a=i.n()).done;){var o=a.value;(0,s.fF)(o,r).catch((function(e){e.response&&401!==e.response.status?e.response&&e.response.data&&e.response.data.detail?q({description:F("users:notifications.addUser.error.description",{description:e.response.data.detail}),level:v.QU.ERROR,message:F("users:notifications.addUser.error.message")}):q({description:F("users:notifications.addUser.genericError.description"),level:v.QU.ERROR,message:F("users:notifications.addUser.genericError.message")}):q({description:F("users:notifications.addUser.error.description"),level:v.QU.ERROR,message:F("users:notifications.addUser.error.message")})}))}}catch(l){i.e(l)}finally{i.f()}}},It=function(e){var t="";t=mt?e.domain+"/"+e.userName:e.domain+"/"+e.email;var n,r={emails:[{primary:!0,value:e.email}],name:{familyName:e.lastName,givenName:e.firstName},profileUrl:e.profileUrl,userName:t},a=e.newPassword;if(Ce?r.password=a:Le?r.password=void 0===(n=(0,dt.P_)(Je))?(0,dt.F2)(10,!0,!0,!0,!0,1,1,1,1):(0,dt.F2)(Number(n.minLength),Number(n.minLowerCaseCharacters)>0,Number(n.minUpperCaseCharacters)>0,Number(n.minNumbers)>0,Number(n.minSpecialCharacters)>0,Number(n.minLowerCaseCharacters),Number(n.minUpperCaseCharacters),Number(n.minNumbers),Number(n.minSpecialCharacters),Number(n.minUniqueCharacters)):r[o.k.scim.systemSchema]={askPassword:"true"},Xe){var i,l=cn(cn({},r[o.k.scim.systemSchema]),e[o.k.scim.systemSchema]),s=(0,I.Z)(cn(cn(cn({},e),r),{},mn({},o.k.scim.systemSchema,l)),"passwordOption","newPassword","userType","domain","firstName","lastName");if((0,S.Z)(null==e?void 0:e.email)&&(null==e||null===(i=e.emails)||void 0===i?void 0:i.length)>0){delete s.email;var u=e.emails.find((function(e){return"string"==typeof e}));if(!u)return void V((0,E.V_)({description:F("users:notifications.addUser.genericError.description"),level:v.QU.ERROR,message:F("users:notifications.addUser.genericError.message")}));s.emails=[{primary:!0,value:u}].concat(un(null==e?void 0:e.emails))}r=cn({},s)}pe(!0),(0,en.cn)(r).then((function(t){var n,r;(202===t.status?V((0,E.V_)({description:F("users:notifications.addUserPendingApproval.success.description"),level:v.QU.WARNING,message:F("users:notifications.addUserPendingApproval.success.message")})):V((0,E.V_)({description:F("users:notifications.addUser.success.description"),level:v.QU.SUCCESS,message:F("users:notifications.addUser.success.message")})),null!=e&&e.groups&&St(t.data,null==e?void 0:e.groups),Ye(null===(n=t.data)||void 0===n?void 0:n.id),Ve)?se(le+1):(x(),T(null===(r=t.data)||void 0===r?void 0:r.id))})).catch((function(e){e.response&&401!==e.response.status?e.response&&400===e.response.status&&e.response.data&&e.response.data.detail?(x(),V((0,E.V_)({description:F("users:notifications.addUser.badRequestError.description",{description:e.response.data.detail}),level:v.QU.ERROR,message:F("users:notifications.addUser.badRequestError.message")}))):e.response&&403===e.response.status&&e.response.data&&e.response.data.scimType===ut._F.ERROR_USER_LIMIT_REACHED?(x(),V((0,E.V_)({description:F("extensions:manage.users.notifications.addUser.customerUser.limitReachError.description"),level:v.QU.ERROR,message:F("extensions:manage.users.notifications.addUser.customerUser.limitReachError.message")}))):e.response&&e.response.data&&e.response.data.detail?(x(),V((0,E.V_)({description:F("users:notifications.addUser.error.description",{description:e.response.data.detail}),level:v.QU.ERROR,message:F("users:notifications.addUser.error.message")}))):(x(),V((0,E.V_)({description:F("users:notifications.addUser.genericError.description"),level:v.QU.ERROR,message:F("users:notifications.addUser.genericError.message")}))):(x(),V((0,E.V_)({description:F("users:notifications.addUser.error.description"),level:v.QU.ERROR,message:F("users:notifications.addUser.error.message")})))})).finally((function(){pe(!1)}))},At=function(e,t){!Ve||t!==ut.lP.BASIC_DETAILS&&t!==ut.lP.GROUP_LIST||ce(cn(cn({},de),{},mn({},t,e))),We!==t?(se(le+1),ce(cn(cn({},de),{},mn({},t,e)))):wt(_t(e))},_t=function(e){if(de){var t=cn({},de),n={};e&&(n=cn({},e));for(var r=0,a=Object.values(t);r<a.length;r++){var i=a[r];n=cn(cn({},n),i)}return(0,C.Z)((0,b.Z)(n))}},wt=function(e){It(e)},Rt=function(){var e,t;return $e?{content:A.createElement(Qt,{triggerSubmit:z,initialValues:de&&de[ut.lP.BASIC_DETAILS],emailVerificationEnabled:O,onSubmit:function(e){return At(e,ut.lP.BASIC_DETAILS)},requestedPasswordOption:de&&(null===(t=de[ut.lP.BASIC_DETAILS])||void 0===t?void 0:t.passwordOption),isUserstoreRequired:!1,passwordOption:_e,setPasswordOption:we,setUserSummaryEnabled:je,setAskPasswordFromUser:Ie,setOfflineUser:Me,selectedUserStore:De,setSelectedUserStore:ke,isBasicDetailsLoading:Ee,setBasicDetailsLoading:ge,validationConfig:Je,selectedUserStoreId:gt(),connectorProperties:null==et?void 0:et.properties}),icon:(0,ln.J)().general,name:ut.lP.BASIC_DETAILS,title:F("user:modals.addUserWizard.steps.basicDetails")}:{content:A.createElement(Ct,{triggerSubmit:z,setTriggerSubmit:K,initialValues:de&&de[ut.lP.BASIC_DETAILS],emailVerificationEnabled:O,onSubmit:function(e){return At(e,ut.lP.BASIC_DETAILS)},requestedPasswordOption:de&&(null===(e=de[ut.lP.BASIC_DETAILS])||void 0===e?void 0:e.passwordOption),isUserstoreRequired:!1,passwordOption:_e,setPasswordOption:we,setUserSummaryEnabled:je,setAskPasswordFromUser:Ie,setOfflineUser:Me,selectedUserStore:De,setSelectedUserStore:ke,isBasicDetailsLoading:Ee,setBasicDetailsLoading:ge,validationConfig:Je,selectedUserStoreId:gt(),connectorProperties:null==et?void 0:et.properties,hasWorkflowAssociations:it,askPasswordOption:Re,setAskPasswordOption:Ne}),icon:(0,ln.J)().general,name:ut.lP.BASIC_DETAILS,title:F("user:modals.addUserWizard.steps.basicDetails")}},Nt=function(){return{content:A.createElement(Ut,{triggerSubmit:$,onSubmit:function(e){return At(e,ut.lP.GROUP_LIST)},selectedGroupsList:Ke,setSelectedGroupList:Qe,selectedUserStore:De}),icon:(0,ln.J)().groups,name:ut.lP.GROUP_LIST,title:F("user:modals.addUserWizard.steps.groups")}},xt=function(){var e,t,n;return{content:A.createElement(on,{triggerSubmit:ee,selectedUserStore:De,username:mt?de&&(null===(e=de[ut.lP.BASIC_DETAILS])||void 0===e?void 0:e.userName):de&&(null===(t=de[ut.lP.BASIC_DETAILS])||void 0===t?void 0:t.email),password:de&&(null===(n=de[ut.lP.BASIC_DETAILS])||void 0===n?void 0:n.newPassword),isPasswordBased:Ce,hasWorkflowAssociations:it}),icon:(0,ln.J)().summary,name:ut.lP.USER_SUMMARY,title:F("user:modals.addUserWizard.steps.invitation")}};return Te&&be?A.createElement(U.Z,{"data-testid":D,"data-componentid":k,open:!0,className:"wizard application-create-wizard",dimmer:"blurring",size:"small",onClose:x,closeOnDimmerClick:!1,closeOnEscape:!0},A.createElement(U.Z.Header,{className:"wizard-header"},function(){var e,t,n=F("extensions:manage.users.wizard.addUser.title");de&&null!==(e=de[ut.lP.BASIC_DETAILS])&&void 0!==e&&e.firstName?n+=" - "+(null===(t=de[ut.lP.BASIC_DETAILS])||void 0===t?void 0:t.firstName):n+="";return n}(),A.createElement(h.X6,{as:"h6"},F("extensions:manage.users.wizard.addUser.subtitle"))),A.createElement(A.Fragment,null,A.createElement(U.Z.Content,{className:"steps-container"},A.createElement(h.Rg.Group,{current:le},Te.map((function(e,t){return A.createElement(h.Rg.Step,{key:t,icon:e.icon,title:e.title})})))),A.createElement(U.Z.Content,{className:"content-container",scrolling:!0},B&&Y,function(){var e,t,n,r;switch(null===(e=Te[le])||void 0===e?void 0:e.name){case ut.lP.BASIC_DETAILS:return null===(t=Rt())||void 0===t?void 0:t.content;case ut.lP.GROUP_LIST:return null===(n=Nt())||void 0===n?void 0:n.content;case ut.lP.USER_SUMMARY:return null===(r=xt())||void 0===r?void 0:r.content}}())),A.createElement(U.Z.Actions,null,A.createElement(R.Z,null,A.createElement(R.Z.Row,{column:1},A.createElement(R.Z.Column,{mobile:8,tablet:8,computer:8},(null===(ft=Te[le])||void 0===ft?void 0:ft.name)!==ut.lP.USER_SUMMARY&&A.createElement(h.Qj,{"data-testid":"".concat(D,"-cancel-button"),"data-componentid":"".concat(k,"-cancel-button"),floated:"left",onClick:function(){x()}},F("common:cancel"))),A.createElement(R.Z.Column,{mobile:8,tablet:8,computer:8},le<Te.length-1&&A.createElement(h.KM,{"data-testid":"".concat(D,"-next-button"),"data-componentid":"".concat(k,"-next-button"),floated:"right",onClick:bt,loading:Ee,disabled:Ee},le===Te.length-2?F("user:modals.addUserWizard.buttons.saveAndContinue"):F("user:modals.addUserWizard.buttons.next"),A.createElement(N.Z,{name:"arrow right"})),le===Te.length-1&&A.createElement(h.KM,{"data-testid":"".concat(D,"-finish-button"),"data-componentid":"".concat(k,"-finish-button"),floated:"right",onClick:bt,loading:fe,disabled:fe||!(null!==_e&&(_e!==ut.Rd.ASK_PASSWORD||null!==Re))},de?((null===(vt=de[ut.lP.USER_TYPE])||void 0===vt?void 0:vt.userType)===i.$.adminRoleName&&F("extensions:manage.features.user.addUser.add"),(null===(Et=Te[le])||void 0===Et?void 0:Et.name)===ut.lP.USER_SUMMARY?F("extensions:manage.features.user.addUser.close"):F("extensions:manage.features.user.addUser.finish")):null),(null==Te?void 0:Te.length)>1&&le>0&&(null===(pt=Te[le])||void 0===pt?void 0:pt.name)!==ut.lP.USER_SUMMARY&&A.createElement(h.Qj,{"data-testid":"".concat(D,"-previous-button"),"data-componentid":"".concat(k,"-previous-button"),floated:"right",onClick:yt},A.createElement(N.Z,{name:"arrow left"}),F("user:modals.addUserWizard.buttons.previous"))))))):null};En.defaultProps={compact:!1,conditionallyShowStepper:!1,currentStep:0,emailVerificationEnabled:!1,showStepper:!0}},85513:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(81611),a=n.n(r),i=n(83948),o=n.n(i)()(a());o.push([e.id,".multi-value-table-data-row .truncate{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:200px;display:inline-block;vertical-align:bottom}.ui.form .multi-attribute-label{margin:0 0 .28571429rem 0}.ui.form .multi-attribute-field{margin-bottom:0}",""]);const l=o},42025:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(81611),a=n.n(r),i=n(83948),o=n.n(i)()(a());o.push([e.id,".generate-password{display:flex;align-items:flex-start}.generate-password .add-user-step-button.info{margin-top:25px}",""]);const l=o},52507:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(81611),a=n.n(r),i=n(83948),o=n.n(i)()(a());o.push([e.id,".multi-value-table-label{padding:5px}.text-btn{padding:0px 10px}.MuiTooltip-tooltip{z-index:9999999 !important}",""]);const l=o}}]);