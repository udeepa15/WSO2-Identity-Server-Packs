"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[1257],{61257:(e,t,n)=>{n.r(t),n.d(t,{default:()=>U});var i=n(55007),l=n(6894),a=n(13550),c=n(60486),r=n(40838),o=n(51021),d=n(96124),s=n(76271),m=n(6833);const u=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t={headers:{Accept:"application/json","Content-Type":"application/json"},method:m.f2.GET,url:"".concat(s.h.getState().config.endpoints.organizations,"/organizations/self")},n=(0,d.Z)(e?t:null);return{data:n.data,error:n.error,isLoading:n.isLoading,isValidating:n.isValidating,mutate:n.mutate}};var g=n(21257),E=n(58613),p=n(82406),h=n(16590),A=n(20494),f=n(44194),v=n(10479),Z=n(47245),I=n(41193),b=n(62508),C=n(12638),T=n(73432),S=n(89141),y=n(26154),M=n(93682),w=n(31302),D=n(12252);function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,l,a,c,r=[],o=!0,d=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(i=a.call(n)).done)&&(r.push(i.value),r.length!==t);o=!0);}catch(e){d=!0,l=e}finally{try{if(!o&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(d)throw l}}return r}}(e,t)||function(e,t){if(e){if("string"==typeof e)return _(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}var R=function(e){var t,n,d,s,_,R,U=e["data-testid"],L=(0,v.$)().t,P=(0,A.fQ)().getLink,k=(0,Z.v9)((function(e){return e.config.ui.features})),Q=(0,i.EV)(null==k||null===(t=k.attributeDialects)||void 0===t||null===(t=t.scopes)||void 0===t?void 0:t.read),G=(0,i.EV)(null==k||null===(n=k.attributeDialects)||void 0===n||null===(n=n.scopes)||void 0===n?void 0:n.update),O=(0,i.EV)(null==k||null===(d=k.attributeVerification)||void 0===d||null===(d=d.scopes)||void 0===d?void 0:d.read),z=(0,E.Z)(),B=z.filterUserStores,H=z.userStoresList,x=z.mutateUserStoreList,V=(0,g.z)().isSubOrganization,$=N((0,f.useState)(!1),2),j=$[0],J=$[1],X=N((0,f.useState)(!0),2),F=X[0],K=X[1],q=N((0,f.useState)([]),2),W=q[0],Y=q[1],ee=N((0,f.useState)([]),2),te=ee[0],ne=ee[1],ie=N((0,f.useState)([]),2),le=ie[0],ae=ie[1],ce=N((0,f.useState)([]),2),re=ce[0],oe=ce[1],de=N((0,f.useState)([]),2),se=de[0],me=de[1],ue=(0,Z.I0)(),ge=(0,Z.v9)((function(e){return e.config.ui.listAllAttributeDialects})),Ee=(0,Z.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t?void 0:t.userSchemaURI})),pe=(0,f.useMemo)((function(){var e;return null===(e=B(!1,!1,!0,!0))||void 0===e?void 0:e.length}),[H]),he=!G||V()&&pe<1,Ae=(0,Z.v9)((function(e){return e.config.ui.routes})),fe=(0,Z.v9)((function(e){var t;return null==e||null===(t=e.auth)||void 0===t?void 0:t.isAuthenticated})),ve=u(fe),Ze=ve.data,Ie=ve.isLoading,be=h.RouteUtils.getOrganizationEnabledRoutes(null!==(s=null==Ae?void 0:Ae.organizationEnabledRoutes)&&void 0!==s?s:{},null==Ze?void 0:Ze.version).includes("attributeUpdateVerificationSettings"),Ce=function(e,t,n,i){K(!0),(0,l.jp)({filter:i,limit:e,offset:t,sort:n}).then((function(e){var t=e.filter((function(e){return ge?"local"!==e.id&&e.id!==D.QN.ATTRIBUTE_DIALECT_IDS.get("XML_SOAP")&&e.id!=D.QN.ATTRIBUTE_DIALECT_IDS.get("OPENID_NET"):e.id!=D.QN.ATTRIBUTE_DIALECT_IDS.get("LOCAL")&&e.id!=D.QN.ATTRIBUTE_DIALECT_IDS.get("AXSCHEMA")&&e.id!=D.QN.ATTRIBUTE_DIALECT_IDS.get("EIDAS_LEGAL")&&e.id!=D.QN.ATTRIBUTE_DIALECT_IDS.get("EIDAS_NATURAL")&&e.id!=D.QN.ATTRIBUTE_DIALECT_IDS.get("OPENID_NET")&&e.id!=D.QN.ATTRIBUTE_DIALECT_IDS.get("XML_SOAP")})),n=[],i=[],l=[],a=[],c=[],r=[];t.forEach((function(e){D.QN.OIDC_MAPPING.includes(e.dialectURI)?n.push(e):D.QN.AGENT_SCIM_SCHEMA_MAPPING.includes(e.dialectURI)?c.push(e):Object.values(D.QN.SCIM_TABS).map((function(e){return e.uri})).includes(e.dialectURI)?i.push(e):D.QN.AXSCHEMA_MAPPING===e.dialectURI?l.push(e):Object.values(D.QN.EIDAS_TABS).map((function(e){return e.uri})).includes(e.dialectURI)?a.push(e):o.rk.showCustomDialectInSCIM?e.dialectURI!==Ee&&r.push(e):r.push(e)})),Y(n),ne(i),ae(l),oe(null),me(r)})).catch((function(e){var t,n;ue((0,p.V_)({description:(null==e||null===(t=e.response)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.description)||L("claims:dialects.notifications.fetchDialects.genericError.description"),level:m.QU.ERROR,message:(null==e||null===(n=e.response)||void 0===n||null===(n=n.data)||void 0===n?void 0:n.message)||L("claims:dialects.notifications.fetchDialects.genericError.message")}))})).finally((function(){K(!1)}))};(0,f.useEffect)((function(){Ce(),x()}),[]);var Te=function(){return f.createElement(I.Z,null,f.createElement(I.Z.Header,null,f.createElement(I.Z.Line,null)))},Se=function(){return f.createElement(A.pJ,null,f.createElement(I.Z,{fluid:!0},f.createElement(I.Z.Header,{image:!0},f.createElement(I.Z.Line,{length:"very short"}),f.createElement(I.Z.Line,null))))};return f.createElement(f.Fragment,null,o.rk.addAttributeMapping&&j&&f.createElement(w.$E,{open:j,onClose:function(){J(!1)},update:Ce,"data-testid":"".concat(U,"-add-dialect-wizard")}),f.createElement(A.Xg,{pageTitle:"Attributes",title:L("claims:dialects.pageLayout.list.title"),description:f.createElement(f.Fragment,null,L("claims:dialects.pageLayout.list.description"),f.createElement(A.eb,{link:P("manage.userStores.attributeMappings.learnMore")},L("common:learnMore"))),"data-testid":"".concat(U,"-page-layout")},f.createElement(A.Me,{showTopActionPanel:!1},Q&&(F?f.createElement(f.Fragment,null,Te(),f.createElement(b.Z,{hidden:!0}),Se()):f.createElement(f.Fragment,null,f.createElement(C.Z,{as:"h4"},L("claims:dialects.sections.manageAttributes.heading")),f.createElement(b.Z,{hidden:!0}),f.createElement(A.pJ,{onClick:function(){r.m.push(c.$.getPaths().get("LOCAL_CLAIMS"))},className:"clickable","data-testid":"".concat(U,"-local-dialect-container")},f.createElement(T.Z,null,f.createElement(T.Z.Item,null,f.createElement(S.Z,null,f.createElement(S.Z.Row,{columns:2},f.createElement(S.Z.Column,{width:12},f.createElement(A.dn,{verticalAlign:"middle",fill:"primary",transparent:!0,icon:(0,a.Uz)().claims,spaced:"right",size:"mini",floated:"left"}),f.createElement(T.Z.Header,null,L("claims:dialects.sections.manageAttributes.attributes.heading")),f.createElement(T.Z.Description,{"data-testid":"".concat(U,"-local-dialect")},L("claims:dialects.sections.manageAttributes.attributes.description"))),f.createElement(S.Z.Column,{width:4,verticalAlign:"middle",textAlign:"right","data-testid":"".concat(U,"-local-dialect-")+"attributes-edit-icon"},f.createElement(A.GI,{content:L(he?"common:view":"common:edit"),trigger:he?f.createElement(y.Z,{color:"grey",name:"eye"}):f.createElement(y.Z,{color:"grey",name:"pencil"}),inverted:!0}))))))),(V()&&!Ie&&be||!V()&&(null==k||null===(_=k.attributeVerification)||void 0===_?void 0:_.enabled)&&O)&&f.createElement(A.pJ,{onClick:function(){r.m.push(c.$.getPaths().get("CLAIM_VERIFICATION_SETTINGS"))},className:"clickable","data-testid":"".concat(U,"-attribute-verification-settings-container")},f.createElement(T.Z,null,f.createElement(T.Z.Item,null,f.createElement(S.Z,null,f.createElement(S.Z.Row,{columns:2},f.createElement(S.Z.Column,{width:12},f.createElement(A.dn,{verticalAlign:"middle",fill:"primary",transparent:!0,icon:(0,a.Uz)().gears,spaced:"right",size:"mini",floated:"left"}),f.createElement(T.Z.Header,null,L("governanceConnectors:connectorCategories.otherSettings.connectors.userClaimUpdate.friendlyName")),f.createElement(T.Z.Description,{"data-testid":"".concat(U,"-attribute-verification")+"-settings"},L("governanceConnectors:connectorCategories.otherSettings.connectors.userClaimUpdate.subTitle"))),f.createElement(S.Z.Column,{width:4,verticalAlign:"middle",textAlign:"right","data-testid":"".concat(U,"-attribute-verification-")+"settings-edit-icon"},f.createElement(A.GI,{content:L(G?"common:configure":"common:view"),trigger:G?f.createElement(y.Z,{color:"grey",name:"pencil"}):f.createElement(y.Z,{color:"grey",name:"eye"}),inverted:!0}))))))))),f.createElement(b.Z,{hidden:!0}),f.createElement(b.Z,{hidden:!0}),f.createElement(b.Z,null),f.createElement(b.Z,{hidden:!0}),f.createElement(S.Z,null,f.createElement(S.Z.Row,{columns:2},f.createElement(S.Z.Column,{width:12,verticalAlign:"middle"},F?Te():f.createElement(C.Z,{as:"h4"},L("claims:dialects.sections.manageAttributeMappings.heading"))),f.createElement(S.Z.Column,{width:4,verticalAlign:"middle",textAlign:"right"},o.rk.addAttributeMapping&&f.createElement(i.di,{when:null==k||null===(R=k.attributeDialects)||void 0===R||null===(R=R.scopes)||void 0===R?void 0:R.create},f.createElement(A.KM,{disabled:F,loading:F,onClick:function(){J(!0)},"data-testid":"".concat(U,"-list-layout-add-button")},f.createElement(y.Z,{name:"add"}),L("claims:dialects.pageLayout.list.primaryAction")))))),f.createElement(b.Z,{hidden:!0}),F?Se():(null==W?void 0:W.length)>0&&f.createElement(A.pJ,{className:"clickable","data-testid":"".concat(U,"-oidc-dialect-container")},f.createElement(T.Z,null,f.createElement(T.Z.Item,{onClick:function(){r.m.push(c.$.getPaths().get("ATTRIBUTE_MAPPINGS").replace(":type",D.QN.OIDC).replace(":customAttributeMappingID",""))}},f.createElement(S.Z,null,f.createElement(S.Z.Row,{columns:2},f.createElement(S.Z.Column,{width:12},f.createElement(A.dn,{transparent:!0,verticalAlign:"middle",rounded:!0,icon:(0,a.r2)().oidc,spaced:"right",size:"mini",floated:"left"}),f.createElement(T.Z.Header,null,L("claims:dialects.sections.manageAttributeMappings.oidc.heading")),f.createElement(T.Z.Description,{"data-testid":"".concat(U,"-local-dialect")},L("claims:attributeMappings.oidc.description"))),f.createElement(S.Z.Column,{width:4,verticalAlign:"middle",textAlign:"right"},f.createElement(A.GI,{content:G&&!V()?L("common:edit"):L("common:view"),trigger:G&&!V()?f.createElement(y.Z,{color:"grey",name:"pencil"}):f.createElement(y.Z,{color:"grey",name:"eye"}),inverted:!0}))))))),F?Se():(null==te?void 0:te.length)>0&&f.createElement(A.pJ,{onClick:function(){r.m.push(c.$.getPaths().get("ATTRIBUTE_MAPPINGS").replace(":type",D.QN.SCIM).replace(":customAttributeMappingID",""))},className:"clickable","data-testid":"".concat(U,"-scim-dialect-container")},f.createElement(T.Z,null,f.createElement(T.Z.Item,null,f.createElement(S.Z,null,f.createElement(S.Z.Row,{columns:2},f.createElement(S.Z.Column,{width:12},f.createElement(A.dn,{verticalAlign:"middle",rounded:!0,icon:(0,a.r2)().scim,spaced:"right",size:"mini",floated:"left"}),f.createElement(T.Z.Header,null,L("claims:dialects.sections.manageAttributeMappings.scim.heading")),f.createElement(T.Z.Description,{"data-testid":"".concat(U,"-local-dialect")},L("claims:attributeMappings.scim.description"))),f.createElement(S.Z.Column,{width:4,verticalAlign:"middle",textAlign:"right"},f.createElement(A.GI,{content:G&&o.rk.isSCIMEditable&&!V()?L("common:edit"):L("common:view"),trigger:G&&o.rk.isSCIMEditable&&!V()?f.createElement(y.Z,{color:"grey",name:"pencil"}):f.createElement(y.Z,{color:"grey",name:"eye"}),inverted:!0}))))))),F?Se():(null==le?void 0:le.length)>0&&f.createElement(A.pJ,{className:"clickable","data-testid":"".concat(U,"-axschema-dialect-container")},f.createElement(T.Z,null,f.createElement(T.Z.Item,{onClick:function(){r.m.push(c.$.getPaths().get("ATTRIBUTE_MAPPINGS").replace(":type",D.QN.AXSCHEMA).replace(":customAttributeMappingID",""))}},f.createElement(S.Z,null,f.createElement(S.Z.Row,{columns:2},f.createElement(S.Z.Column,{width:12},f.createElement(A.dn,{verticalAlign:"middle",rounded:!0,icon:(0,a.r2)().axschema,spaced:"right",size:"mini",floated:"left"}),f.createElement(T.Z.Header,null,L("claims:attributeMappings.axschema.heading")),f.createElement(T.Z.Description,{"data-testid":"".concat(U,"-local-dialect")},L("claims:attributeMappings.axschema.description"))),f.createElement(S.Z.Column,{width:4,verticalAlign:"middle",textAlign:"right"},f.createElement(A.GI,{content:G&&!V()?L("common:edit"):L("common:view"),trigger:G&&!V()?f.createElement(y.Z,{color:"grey",name:"pencil"}):f.createElement(y.Z,{color:"grey",name:"eye"}),inverted:!0}))))))),F?Se():(null==re?void 0:re.length)>0&&f.createElement(A.pJ,{className:"clickable","data-testid":"".concat(U,"-eidas-dialect-container")},f.createElement(T.Z,null,f.createElement(T.Z.Item,{onClick:function(){r.m.push(c.$.getPaths().get("ATTRIBUTE_MAPPINGS").replace(":type",D.QN.EIDAS).replace(":customAttributeMappingID",""))}},f.createElement(S.Z,null,f.createElement(S.Z.Row,{columns:2},f.createElement(S.Z.Column,{width:12},f.createElement(A.dn,{transparent:!0,verticalAlign:"middle",rounded:!0,icon:(0,a.r2)().eidas,spaced:"right",size:"mini",floated:"left"}),f.createElement(T.Z.Header,null,L("claims:attributeMappings.eidas.heading")),f.createElement(T.Z.Description,{"data-testid":"".concat(U,"-local-dialect")},L("claims:attributeMappings.eidas.description"))),f.createElement(S.Z.Column,{width:4,verticalAlign:"middle",textAlign:"right"},f.createElement(A.GI,{content:G&&!V()?L("common:edit"):L("common:view"),trigger:G&&!V()?f.createElement(y.Z,{color:"grey",name:"pencil"}):f.createElement(y.Z,{color:"grey",name:"eye"}),inverted:!0}))))))),o.rk.showCustomAttributeMapping&&(F?Se():(null==se?void 0:se.length)>0&&se.map((function(e){return f.createElement(A.pJ,{key:e.dialectURI,onClick:function(){r.m.push(c.$.getPaths().get("ATTRIBUTE_MAPPINGS").replace(":type",D.QN.OTHERS).replace(":customAttributeMappingID",e.id))},className:"clickable","data-testid":"".concat(U,"-other-dialect-container")},f.createElement(T.Z,null,f.createElement(T.Z.Item,null,f.createElement(S.Z,null,f.createElement(S.Z.Row,{columns:2},f.createElement(S.Z.Column,{width:12},f.createElement(M.Z,{floated:"left",verticalAlign:"middle",rounded:!0,centered:!0,size:"mini"},f.createElement(A.Xo,null),f.createElement("span",{className:"claims-letter"},e.dialectURI.charAt(0).toUpperCase())),f.createElement(T.Z.Header,null,e.dialectURI),f.createElement(T.Z.Description,{"data-testid":"".concat(U,"-local-dialect")},L("claims:attributeMappings.custom.description"))),f.createElement(S.Z.Column,{width:4,verticalAlign:"middle",textAlign:"right"},f.createElement(A.GI,{content:G&&!V()?L("common:edit"):L("common:view"),trigger:f.createElement(y.Z,{color:"grey",name:G&&!V()?"pencil":"eye"}),inverted:!0})))))))}))))))};R.defaultProps={"data-testid":"attribute-dialects"};const U=R}}]);