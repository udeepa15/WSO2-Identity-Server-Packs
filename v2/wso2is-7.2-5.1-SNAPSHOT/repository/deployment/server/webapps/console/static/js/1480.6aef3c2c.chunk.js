"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[1480],{64707:(e,t,n)=>{n.d(t,{FR:()=>s,Ud:()=>c,jp:()=>o,zu:()=>d});var i=n(2292),a=n(76271),r=n(6833),l=i.AsgardeoSPAClient.getInstance().httpRequest.bind(i.AsgardeoSPAClient.getInstance()),o=function(e){var t={data:e,headers:{"Content-Type":"application/json"},method:r.f2.POST,url:a.h.getState().config.endpoints.vcTemplates};return l(t).then((function(e){return Promise.resolve(null==e?void 0:e.data)})).catch((function(e){return Promise.reject(e)}))},c=function(e,t){var n={data:t,headers:{"Content-Type":"application/json"},method:r.f2.PUT,url:"".concat(a.h.getState().config.endpoints.vcTemplates,"/").concat(e)};return l(n).then((function(e){return Promise.resolve(null==e?void 0:e.data)})).catch((function(e){return Promise.reject(e)}))},s=function(e){var t={headers:{"Content-Type":"application/json"},method:r.f2.DELETE,url:"".concat(a.h.getState().config.endpoints.vcTemplates,"/").concat(e)};return l(t).then((function(e){return Promise.resolve(e)})).catch((function(e){return Promise.reject(e)}))},d=function(e){var t={headers:{"Content-Type":"application/json"},method:r.f2.POST,url:"".concat(a.h.getState().config.endpoints.vcTemplates,"/").concat(e,"/offer")};return l(t).then((function(e){return Promise.resolve(null==e?void 0:e.data)})).catch((function(e){return Promise.reject(e)}))}},1480:(e,t,n)=>{n.r(t),n.d(t,{default:()=>$});var i=n(25134),a=n(90302),r=n(6833),l=n(82406),o=n(20494),c=n(44194),s=n(10479),d=n(47245),u=n(26154),f=n(64961),m=n(60486),p=n(40838),v=n(12638),h=n(64707);function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,r,l,o=[],c=!0,s=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=r.call(n)).done)&&(o.push(i.value),o.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(s)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return g(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}var y=function(e){var t=e.advancedSearch,n=e.isLoading,i=e.list,a=e.mutateTemplateList,g=(e.onSearchQueryClear,e.searchQuery,e.setShowAddTemplateWizard),y=e["data-componentid"],C=(0,d.I0)(),S=(0,s.$)().t,E=b((0,c.useState)(!1),2),T=E[0],w=E[1],A=b((0,c.useState)(),2),P=A[0],I=A[1],k=function(){return i&&0!==(null==i?void 0:i.length)?null:c.createElement(o.$J,{className:"list-placeholder mr-0",action:c.createElement(o.KM,{"data-componentid":"".concat(y,"-empty-placeholder-add-button"),onClick:function(){return g()}},c.createElement(u.Z,{name:"add"}),S("verifiableCredentials:buttons.addTemplate")),image:(0,f.jF)().newList,imageSize:"tiny",subtitle:[S("verifiableCredentials:placeholders.emptyList.subtitle")],"data-componentid":"".concat(y,"-empty-placeholder")})};return c.createElement(c.Fragment,null,c.createElement(o.wQ,{className:"vc-templates-table",externalSearch:t,isLoading:n,actions:[{"data-componentid":"".concat(y,"-item-edit-button"),hidden:function(){return!1},icon:function(){return"pencil alternate"},onClick:function(e,t){return p.m.push(m.$.getPaths().get("VC_TEMPLATE_EDIT").replace(":id",t.id))},popupText:function(){return S("common:edit")},renderer:"semantic-icon"},{"data-componentid":"".concat(y,"-item-delete-button"),hidden:function(){return!1},icon:function(){return"trash alternate"},onClick:function(e,t){I(t),w(!0)},popupText:function(){return S("common:delete")},renderer:"semantic-icon"}],columns:[{allowToggleVisibility:!1,dataIndex:"displayName",id:"displayName",key:"displayName",render:function(e){return c.createElement(v.Z,{image:!0,as:"h6",className:"header-with-icon","data-componentid":"".concat(y,"-item-heading")},c.createElement(o.JT,{image:c.createElement(o.Xo,{name:e.displayName,size:"mini","data-componentid":"".concat(y,"-item-avatar")}),size:"mini",spaced:"right","data-componentid":"".concat(y,"-item-image")}),c.createElement(v.Z.Content,null,null==e?void 0:e.displayName))},title:S("verifiableCredentials:list.columns.name")},{allowToggleVisibility:!1,dataIndex:"identifier",id:"identifier",key:"identifier",render:function(e){return c.createElement("div",null,null==e?void 0:e.identifier)},title:S("verifiableCredentials:list.columns.identifier")},{allowToggleVisibility:!1,dataIndex:"action",id:"actions",key:"actions",textAlign:"right",title:S("verifiableCredentials:list.columns.actions")}],data:i,onRowClick:function(e,t){p.m.push(m.$.getPaths().get("VC_TEMPLATE_EDIT").replace(":id",t.id))},placeholders:k(),selectable:!0,showHeader:!1,transparent:!n&&null!==k(),"data-componentid":y}),T&&c.createElement(o.cV,{"data-componentid":"".concat(y,"-delete-confirmation-modal"),onClose:function(){return w(!1)},type:"negative",open:T,assertionHint:S("verifiableCredentials:list.confirmations.deleteItem.assertionHint"),assertionType:"checkbox",primaryAction:S("common:confirm"),secondaryAction:S("common:cancel"),onSecondaryActionClick:function(){return w(!1)},onPrimaryActionClick:function(){var e;e=P,(0,h.FR)(e.id).then((function(){C((0,l.V_)({description:S("verifiableCredentials:notifications.deleteTemplate.success.description"),level:r.QU.SUCCESS,message:S("verifiableCredentials:notifications.deleteTemplate.success.message")})),a()})).catch((function(){C((0,l.V_)({description:S("verifiableCredentials:notifications.deleteTemplate.error.description"),level:r.QU.ERROR,message:S("verifiableCredentials:notifications.deleteTemplate.error.message")}))})),w(!1)},closeOnDimmerClick:!1},c.createElement(o.cV.Header,null,S("verifiableCredentials:list.confirmations.deleteItem.header")),c.createElement(o.cV.Message,{attached:!0,negative:!0},S("verifiableCredentials:list.confirmations.deleteItem.message")),c.createElement(o.cV.Content,null,S("verifiableCredentials:list.confirmations.deleteItem.content"))))},C=n(79438),S=n(47018);function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,r,l,o=[],c=!0,s=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=r.call(n)).done)&&(o.push(i.value),o.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(s)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return T(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?T(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function w(e){var t=e.closeWizard,n=e.onSuccess,i=e["data-componentid"],a=void 0===i?"add-vc-template-wizard":i,u=(0,s.$)().t,f=(0,d.I0)(),m=E((0,c.useState)(!1),2),p=m[0],v=m[1];return c.createElement(S.Z,{"data-testid":a,"data-componentid":a,open:!0,className:"wizard",dimmer:"blurring",size:"tiny",onClose:t,closeOnDimmerClick:!1,closeOnEscape:!0},c.createElement(S.Z.Header,null,u("verifiableCredentials:wizard.title")),c.createElement(S.Z.Content,null,c.createElement(C.vy,{onSubmit:function(e){if(null!=e&&e.identifier&&!function(e){if(e&&null!==e.match(/\s/))return u("verifiableCredentials:wizard.form.identifier.validation")}(e.identifier)){v(!0);var i={claims:[],displayName:e.displayName||e.identifier,expiresIn:31536e3,format:"jwt_vc_json",identifier:e.identifier};(0,h.jp)(i).then((function(e){f((0,l.V_)({description:u("verifiableCredentials:notifications.createTemplate.success.description"),level:r.QU.SUCCESS,message:u("verifiableCredentials:notifications.createTemplate.success.message")})),null==n||n(),t()})).catch((function(e){var t;409===(null==e||null===(t=e.response)||void 0===t?void 0:t.status)?f((0,l.V_)({description:u("verifiableCredentials:notifications.createTemplate.duplicateError.description"),level:r.QU.ERROR,message:u("verifiableCredentials:notifications.createTemplate.duplicateError.message")})):f((0,l.V_)({description:u("verifiableCredentials:notifications.createTemplate.error.description"),level:r.QU.ERROR,message:u("verifiableCredentials:notifications.createTemplate.error.message")}))})).finally((function(){v(!1)}))}},render:function(e){var t=e.handleSubmit;return c.createElement("form",{id:"addVCTemplateForm",onSubmit:t},c.createElement(C.SE,{name:"identifier",label:u("verifiableCredentials:wizard.form.identifier.label"),placeholder:u("verifiableCredentials:wizard.form.identifier.placeholder"),required:!0,autoComplete:"new-password",component:C.xh,helperText:u("verifiableCredentials:wizard.form.identifier.hint")}),c.createElement(C.SE,{label:u("verifiableCredentials:wizard.form.displayName.label"),name:"displayName",placeholder:u("verifiableCredentials:wizard.form.displayName.placeholder"),className:"mt-3",autoComplete:"new-password",component:C.xh,helperText:u("verifiableCredentials:wizard.form.displayName.hint")}))}})),c.createElement(S.Z.Actions,null,c.createElement(o.zx,{className:"link-button",basic:!0,primary:!0,onClick:t,"data-testid":"".concat(a,"-cancel-button")},u("common:cancel")),c.createElement(o.zx,{primary:!0,type:"submit",disabled:p,loading:p,onClick:function(){document.getElementById("addVCTemplateForm").dispatchEvent(new Event("submit",{bubbles:!0,cancelable:!0}))},"data-testid":"".concat(a,"-create-button")},u("verifiableCredentials:wizard.form.submitButton"))))}var A=n(96124),P=n(76271),I=n(51835),k=n.n(I),V=n(27975),j=n.n(V),x=n(55900),z=n.n(x),O=n(21555),L=n.n(O),N=n(3621),R=n.n(N),_=n(5062),M=n.n(_),U=n(90434),Q={};Q.styleTagTransform=M(),Q.setAttributes=L(),Q.insert=z().bind(null,"head"),Q.domAPI=j(),Q.insertStyleElement=R();k()(U.Z,Q);U.Z&&U.Z.locals&&U.Z.locals;function Z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,r,l,o=[],c=!0,s=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=r.call(n)).done)&&(o.push(i.value),o.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(s)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return F(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?F(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}const $=function(e){var t,n,f,m,p,v,h,b=e["data-componentid"],g=void 0===b?"verifiable-credentials":b,C=(0,s.$)().t,S=(0,o.fQ)().getLink,E=(0,d.I0)(),T=Z((0,c.useState)(1),2),I=T[0],k=T[1],V=Z((0,c.useState)(null),2),j=V[0],x=V[1],z=Z((0,c.useState)(void 0),2),O=z[0],L=z[1],N=Z((0,c.useState)(void 0),2),R=N[0],_=N[1],M=Z((0,c.useState)(void 0),2),U=M[0],Q=M[1],F=Z((0,c.useState)(void 0),2),$=F[0],D=F[1],W=Z((0,c.useState)(!1),2),H=W[0],B=W[1],q=Z((0,c.useState)(a.r.DEFAULT_RESOURCE_LIST_ITEM_LIMIT),2),J=q[0],K=q[1],X=Z((0,c.useState)(!1),2),G=X[0],Y=X[1],ee=function(e,t,n,i,a){var l=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],o={};e&&(o.limit=e),t&&(o.before=t),n&&(o.after=n),i&&(o.filter=i),a&&(o.attributes=a);var c={headers:{"Content-Type":"application/json"},method:r.f2.GET,params:o,url:P.h.getState().config.endpoints.vcTemplates},s=(0,A.Z)(l?c:null);return{data:s.data,error:s.error,isLoading:s.isLoading,isValidating:s.isValidating,mutate:s.mutate}}(J,R,O,j,null,!0),te=ee.data,ne=ee.isLoading,ie=ee.error,ae=ee.mutate;(0,c.useEffect)((function(){te&&(Q(void 0),D(void 0),te.links&&te.links.length>0&&te.links.forEach((function(e){if("next"===e.rel||"after"===e.rel){var t=e.href.match(/after=([^&]*)/);t&&Q(t[1])}else if("previous"===e.rel||"before"===e.rel){var n=e.href.match(/before=([^&]*)/);n&&D(n[1])}})))}),[te]),(0,c.useEffect)((function(){ie&&E((0,l.V_)({description:C("verifiableCredentials:notifications.fetchTemplates.error.description"),level:r.QU.ERROR,message:C("verifiableCredentials:notifications.fetchTemplates.error.message")}))}),[ie]),(0,c.useEffect)((function(){H&&(ae(),B(!1))}),[H]);var re=function(e){x(e),L(void 0),_(void 0),k(1)},le=function(){L(void 0),_(void 0),B(!0)};return c.createElement(o.Xg,{pageTitle:C("verifiableCredentials:page.title"),title:C("verifiableCredentials:page.heading"),description:c.createElement(c.Fragment,null,C("verifiableCredentials:page.description"),c.createElement(o.eb,{link:S("develop.verifiableCredentials.learnMore"),showEmptyLink:!1},C("common:learnMore"))),"data-componentid":"".concat(g,"-page-layout"),bottomMargin:!1,contentTopMargin:!0,pageHeaderMaxWidth:!1,action:(null==te||null===(t=te.VCTemplates)||void 0===t?void 0:t.length)>0&&!ne&&c.createElement(o.KM,{onClick:function(){Y(!0)},"data-componentid":"".concat(g,"-add-button")},c.createElement(u.Z,{name:"add"}),C("verifiableCredentials:buttons.addTemplate"))},c.createElement(o.PS,{advancedSearch:c.createElement(i.n,{onFilter:re,filterAttributeOptions:[{key:0,text:C("verifiableCredentials:list.search.attributes.identifier"),value:"identifier"},{key:1,text:C("verifiableCredentials:list.search.attributes.displayName"),value:"displayName"}],filterAttributePlaceholder:C("verifiableCredentials:list.search.filterAttributePlaceholder"),filterConditionsPlaceholder:C("verifiableCredentials:list.search.filterConditionsPlaceholder"),filterValuePlaceholder:C("verifiableCredentials:list.search.filterValuePlaceholder"),placeholder:C("verifiableCredentials:list.search.placeholder"),style:{minWidth:"425px"},defaultSearchAttribute:"identifier",defaultSearchOperator:"co",triggerClearQuery:!1,"data-componentid":"".concat(g,"-list-advanced-search")}),currentListSize:null!==(n=null==te||null===(f=te.VCTemplates)||void 0===f?void 0:f.length)&&void 0!==n?n:0,isLoading:ne,listItemLimit:J,onItemsPerPageDropdownChange:function(e,t){K(t.value),L(void 0),_(void 0),k(1)},onPageChange:function(e,t){var n=parseInt(null==t?void 0:t.activePage);n>I?(L(U),_(void 0)):n<I&&(_($),L(void 0)),k(n)},onSortStrategyChange:function(){},showPagination:!0,showTopActionPanel:ne||(null==te||null===(m=te.VCTemplates)||void 0===m?void 0:m.length)>0||null!==j,sortOptions:null,sortStrategy:null,totalPages:Math.ceil((null!==(p=null==te?void 0:te.totalResults)&&void 0!==p?p:0)/J)||1,totalListSize:null!==(v=null==te?void 0:te.totalResults)&&void 0!==v?v:0,paginationOptions:{disableNextButton:!U,disablePreviousButton:!$},activePage:I,"data-componentid":"".concat(g,"-list-layout")},c.createElement(y,{advancedSearch:c.createElement(i.n,{onFilter:re,filterAttributeOptions:[{key:0,text:C("verifiableCredentials:list.search.attributes.identifier"),value:"identifier"}],filterAttributePlaceholder:C("verifiableCredentials:list.search.filterAttributePlaceholder"),filterConditionsPlaceholder:C("verifiableCredentials:list.search.filterConditionsPlaceholder"),filterValuePlaceholder:C("verifiableCredentials:list.search.filterValuePlaceholder"),placeholder:C("verifiableCredentials:list.search.placeholder"),style:{minWidth:"425px"},defaultSearchAttribute:"identifier",defaultSearchOperator:"co",triggerClearQuery:!1,"data-componentid":"".concat(g,"-list-advanced-search-inner")}),mutateTemplateList:le,isLoading:ne,list:null!==(h=null==te?void 0:te.VCTemplates)&&void 0!==h?h:[],onSearchQueryClear:function(){x(null),L(void 0),_(void 0),k(1)},searchQuery:j,setShowAddTemplateWizard:function(){Y(!0)},"data-componentid":"".concat(g,"-list")})),G&&c.createElement(w,{closeWizard:function(){return Y(!1)},onSuccess:le,"data-componentid":"".concat(g,"-add-wizard")}))}},90434:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(81611),a=n.n(i),r=n(83948),l=n.n(r)()(a());l.push([e.id,".verifiable-credentials.ui.segment{padding:0}",""]);const o=l}}]);