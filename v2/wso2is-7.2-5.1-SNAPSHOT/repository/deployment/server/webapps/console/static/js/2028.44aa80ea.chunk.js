"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[2028],{92028:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ce});var r=n(55007),o=n(60486),a=n(40838),i=n(36940),l=n(6833),s=n(82406),u=n(20494),c=n(50699),d=n(44194),m=n(10479),p=n(47245),f=n(96124),v=n(76271),g=n(20342),h=n(51021),E=n(96334),y=n(89141),b=n(26154),q=n(62508),S=n(10319),w=n(16824),C=n(64961),A=n(50988),L=n(19980),N=n(58934),Z=n(71551);function M(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],s=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return I(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?I(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var k=function(e){var t=e.onChange,n=e.properties,r=e.readOnly,o=e.values,a=e["data-testid"],i=M((0,d.useState)(!0),2),l=i[0],s=i[1],c=M((0,d.useState)(-1),2),p=c[0],f=c[1],v=M((0,d.useState)(""),2),g=v[0],h=v[1],E=M((0,d.useState)(""),2),y=E[0],q=E[1],S=M((0,d.useState)(""),2),w=S[0],I=S[1],k=M((0,d.useState)(!0),2),R=k[0],P=k[1],U=M((0,d.useState)(!1),2),x=U[0],O=U[1],V=(0,d.useRef)(null),T=(0,d.useRef)(null),j=(0,m.$)().t;(0,d.useEffect)((function(){var e,t="100%";l&&(t="calc(100% - ".concat(null==V||null===(e=V.current)||void 0===e||null===(e=e.ref)||void 0===e||null===(e=e.current)||void 0===e?void 0:e.clientWidth,"px)"));T.current.style.width=t}),[l]);return d.createElement("div",{className:"script-editor-with-template-panel"},d.createElement(A.Z.Pushable,{className:"script-editor-section"},!r&&d.createElement(A.Z,{as:L.Z,className:"script-templates-panel",animation:"overlay",icon:"labeled",direction:"left",vertical:!0,secondary:!0,visible:l,ref:V,"data-testid":"".concat(a,"-sidebar")},d.createElement(u.X6,{as:"h6",bold:!0},"SQL Query Types"),n&&d.createElement(N.Z,{as:Z.Z,className:"template-category-menu",fluid:!0,secondary:!0,vertical:!0,"data-testid":"".concat(a,"-query-types-accordion")},n.insert.length>0&&d.createElement(Z.Z.Item,null,d.createElement(N.Z.Title,{active:0===p,className:"category-name",content:j("userstores:sqlEditor.create"),index:p,icon:d.createElement(b.Z,{className:"angle right caret-icon"}),onClick:function(){return f(0===p?-1:0)},"data-testid":"".concat(a,"-insert-query-accordion-title")}),d.createElement(N.Z.Content,{className:"template-list",active:0===p,"data-testid":"".concat(a,"-insert-query-accordion-content")},n.insert.map((function(e,t){return d.createElement(Z.Z.Item,{key:t,onClick:function(){h(e.name),I(o.get(e.name)),q(o.get(e.name))},active:e.name===g,"data-testid":"".concat(a,"-insert-query")},d.createElement(u.GI,{trigger:d.createElement("div",{className:"template-name"},e.name),position:"top center",content:e.name,inverted:!0}))})))),n.select.length>0&&d.createElement(Z.Z.Item,null,d.createElement(N.Z.Title,{active:1===p,className:"category-name",content:j("userstores:sqlEditor.read"),index:p,icon:d.createElement(b.Z,{className:"angle right caret-icon"}),onClick:function(){return f(1===p?-1:1)},"data-testid":"".concat(a,"-select-query-accordion-title")}),d.createElement(N.Z.Content,{className:"template-list",active:1===p,"data-testid":"".concat(a,"-select-query-accordion-content")},n.select.map((function(e,t){return d.createElement(Z.Z.Item,{key:t,onClick:function(){h(e.name),I(o.get(e.name)),q(o.get(e.name))},active:e.name===g,"data-testid":"".concat(a,"-select-query")},d.createElement(u.GI,{trigger:d.createElement("div",{className:"template-name"},e.name),position:"top center",content:e.name,inverted:!0}))})))),n.update.length>0&&d.createElement(Z.Z.Item,null,d.createElement(N.Z.Title,{active:2===p,className:"category-name",content:j("userstores:sqlEditor.update"),index:p,icon:d.createElement(b.Z,{className:"angle right caret-icon"}),onClick:function(){return f(2===p?-1:2)},"data-testid":"".concat(a,"-update-query-accordion-title")}),d.createElement(N.Z.Content,{className:"template-list",active:2===p,"data-testid":"".concat(a,"-update-query-accordion-content")},n.update.map((function(e,t){return d.createElement(Z.Z.Item,{key:t,onClick:function(){h(e.name),I(o.get(e.name)),q(o.get(e.name))},active:e.name===g,"data-testid":"".concat(a,"-update-query")},d.createElement(u.GI,{trigger:d.createElement("div",{className:"template-name"},e.name),position:"top center",content:e.name,inverted:!0}))})))),n.delete.length>0&&d.createElement(Z.Z.Item,null,d.createElement(N.Z.Title,{active:3===p,className:"category-name",content:j("userstores:sqlEditor.delete"),index:p,icon:d.createElement(b.Z,{className:"angle right caret-icon"}),onClick:function(){return f(3===p?-1:3)},"data-testid":"".concat(a,"-delete-query-accordion-title")}),d.createElement(N.Z.Content,{className:"template-list",active:3===p,"data-testid":"".concat(a,"-delete-query-accordion-content")},n.delete.map((function(e,t){return d.createElement(Z.Z.Item,{key:t,onClick:function(){h(e.name),I(o.get(e.name)),q(o.get(e.name))},active:e.name===g,"data-testid":"".concat(a,"-delete-query")},d.createElement(u.GI,{trigger:d.createElement("div",{className:"template-name"},e.name),position:"top center",content:e.name,inverted:!0}))})))))),d.createElement(A.Z.Pusher,null,d.createElement("div",{className:"script-editor-container",ref:T},d.createElement(Z.Z,{attached:"top",className:"action-panel",secondary:!0},!r&&d.createElement(Z.Z.Menu,{position:"left"},d.createElement(Z.Z.Item,{onClick:function(){return s(!l)},className:"action hamburger ml-3","data-testid":"".concat(a,"-sidebar-toggle")},d.createElement(b.Z,{name:"bars"}))),d.createElement(Z.Z.Item,{className:"action mr-3",position:"right"},d.createElement(u.u,{compact:!0,trigger:d.createElement("div",null,d.createElement(u.dn,{hoverable:!0,defaultIcon:!0,transparent:!0,size:"micro",hoverType:"rounded",icon:R?(0,C.YT)().lightMode:(0,C.YT)().darkMode,onClick:function(){return P(!R)},"data-testid":"".concat(a,"-code-editor-theme-toggle")})),content:j(R?"common:lightMode":"common:darkMode"),size:"mini"}))),d.createElement("div",{className:"code-editor-wrapper"},d.createElement(u.pq,{lint:!0,sourceCode:y,options:{lineWrapping:!0,mode:"text/x-sql"},showLineNumbers:!1,onChange:function(e,t,n){I(n),O(n!==y)},theme:R?"dark":"light","data-testid":"".concat(a,"-code-editor"),readOnly:r})),!r&&d.createElement(Z.Z,{attached:"bottom",className:"action-panel",secondary:!0},d.createElement(Z.Z.Item,{position:"right"},d.createElement(u.Qj,{type:"button",disabled:!x,onClick:function(){I(y);var e=y;q(""),setTimeout((function(){q(e),O(!1)}),1)},"data-testid":"".concat(a,"-reset-button")},j("userstores:sqlEditor.reset")),d.createElement(u.KM,{type:"button",onClick:function(){t(g,w)},"data-testid":"".concat(a,"-save-button")},j("common:save"))))))))};function R(e){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R(e)}function P(){P=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var a=t&&t.prototype instanceof h?t:h,i=Object.create(a.prototype),l=new I(r||[]);return o(i,"_invoke",{value:L(e,n,l)}),i}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var m="suspendedStart",p="suspendedYield",f="executing",v="completed",g={};function h(){}function E(){}function y(){}var b={};u(b,i,(function(){return this}));var q=Object.getPrototypeOf,S=q&&q(q(k([])));S&&S!==n&&r.call(S,i)&&(b=S);var w=y.prototype=h.prototype=Object.create(b);function C(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){function n(o,a,i,l){var s=d(e[o],e,a);if("throw"!==s.type){var u=s.arg,c=u.value;return c&&"object"==R(c)&&r.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):t.resolve(c).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,l)}))}l(s.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function L(t,n,r){var o=m;return function(a,i){if(o===f)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var l=r.delegate;if(l){var s=N(l,r);if(s){if(s===g)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===m)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=f;var u=d(t,n,r);if("normal"===u.type){if(o=r.done?v:p,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=v,r.method="throw",r.arg=u.arg)}}}function N(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,N(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var a=d(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,g;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function Z(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function M(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(Z,this),this.reset(!0)}function k(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(R(t)+" is not iterable")}return E.prototype=y,o(w,"constructor",{value:y,configurable:!0}),o(y,"constructor",{value:E,configurable:!0}),E.displayName=u(y,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===E||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,s,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},C(A.prototype),u(A.prototype,l,(function(){return this})),t.AsyncIterator=A,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new A(c(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},C(w),u(w,s,"Generator"),u(w,i,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=k,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(M),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return l.type="throw",l.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),M(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;M(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:k(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function U(e,t,n,r,o,a,i){try{var l=e[a](i),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function x(e){return function(e){if(Array.isArray(e))return T(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||V(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],s=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||V(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){if(e){if("string"==typeof e)return T(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?T(e,t):void 0}}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}k.defaultProps={"data-testid":"sql-editor"};var j=function(e){var t,n,r,c=e.userStore,f=e.id,v=e.properties,C=e.readOnly,A=e.update,L=e["data-testid"],N=O((0,d.useState)(null),2),Z=N[0],M=N[1],I=O((0,d.useState)(!1),2),R=I[0],V=I[1],T=O((0,d.useState)(!1),2),j=T[0],_=T[1],G=O((0,d.useState)(void 0),2),Q=G[0],D=G[1],$=O((0,d.useState)(!1),2),F=$[0],X=$[1],z=(0,m.$)().t,W=(0,p.I0)();(0,d.useEffect)((function(){if(v){var e=new Map;v.optional.sql.delete.forEach((function(t){var n;e.set(t.name,null!==(n=t.value)&&void 0!==n?n:t.defaultValue)})),v.optional.sql.insert.forEach((function(t){var n;e.set(t.name,null!==(n=t.value)&&void 0!==n?n:t.defaultValue)})),v.optional.sql.select.forEach((function(t){var n;e.set(t.name,null!==(n=t.value)&&void 0!==n?n:t.defaultValue)})),v.optional.sql.update.forEach((function(t){var n;e.set(t.name,null!==(n=t.value)&&void 0!==n?n:t.defaultValue)})),M(e)}}),[v]);return d.createElement(d.Fragment,null,j&&d.createElement(u.cV,{onClose:function(){return _(!1)},type:"negative",open:j,assertion:null==c?void 0:c.name,assertionHint:z("userstores:confirmation.hint"),assertionType:"checkbox",primaryAction:z("userstores:confirmation.confirm"),secondaryAction:z("common:cancel"),onSecondaryActionClick:function(){return _(!1)},onPrimaryActionClick:function(){(0,g.oA)(f).then((function(){W((0,s.V_)({description:z("userstores:notifications.deleteUserstore.success.description"),level:l.QU.SUCCESS,message:z("userstores:notifications.deleteUserstore.success.message")})),W((0,s.V_)({description:z("userstores:notifications.delay.description"),level:l.QU.WARNING,message:z("userstores:notifications.delay.message")})),a.m.push(o.$.getPaths().get("USERSTORES"))})).catch((function(e){var t,n;W((0,s.V_)({description:null!==(t=null==e?void 0:e.description)&&void 0!==t?t:z("userstores:notifications.deleteUserstore.genericError.description"),level:l.QU.ERROR,message:null!==(n=null==e?void 0:e.message)&&void 0!==n?n:z("userstores:notifications.deleteUserstore.genericError.message")}))})).finally((function(){_(!1)}))},"data-testid":"".concat(L,"-delete-confirmation-modal"),closeOnDimmerClick:!1},d.createElement(u.cV.Header,{"data-testid":"".concat(L,"-delete-confirmation-modal-header")},z("userstores:confirmation.header")),d.createElement(u.cV.Message,{attached:!0,negative:!0,"data-testid":"".concat(L,"-delete-confirmation-modal-message")},z("userstores:confirmation.message")),d.createElement(u.cV.Content,{"data-testid":"".concat(L,"-delete-confirmation-modal-content")},z("userstores:confirmation.content"))),d.createElement(u.pJ,{padded:"very"},d.createElement(E.Es,{onSubmit:function(e){var t,n={operation:"REPLACE",path:"/description",value:null===(t=e.get("description"))||void 0===t?void 0:t.toString()},r=null==v?void 0:v.required.map((function(t){var n;if(t.name!==S.rr)return{operation:"REPLACE",path:"/properties/".concat(t.name),value:null===(n=e.get(t.name))||void 0===n?void 0:n.toString()}})).filter(Boolean);r.push(n);var o=R?null==v?void 0:v.optional.nonSql.map((function(t){var n;return{operation:"REPLACE",path:"/properties/".concat(t.name),value:null===(n=e.get(t.name))||void 0===n?void 0:n.toString()}})):null,a=R?null==v?void 0:v.optional.sql.insert.map((function(e){var t;return{operation:"REPLACE",path:"/properties/".concat(e.name),value:null===(t=Z.get(e.name))||void 0===t?void 0:t.toString()}})):null,i=R?null==v?void 0:v.optional.sql.update.map((function(e){var t;return{operation:"REPLACE",path:"/properties/".concat(e.name),value:null===(t=Z.get(e.name))||void 0===t?void 0:t.toString()}})):null,u=R?null==v?void 0:v.optional.sql.delete.map((function(e){var t;return{operation:"REPLACE",path:"/properties/".concat(e.name),value:null===(t=Z.get(e.name))||void 0===t?void 0:t.toString()}})):null,c=R?null==v?void 0:v.optional.sql.select.map((function(e){var t;return{operation:"REPLACE",path:"/properties/".concat(e.name),value:null===(t=Z.get(e.name))||void 0===t?void 0:t.toString()}})):null,d=R?[].concat(x(r),x(o),x(u),x(a),x(i),x(c)):r;X(!0),(0,g.Xv)(f,d).then((function(){W((0,s.V_)({description:z("userstores:notifications.updateUserstore.success.description"),level:l.QU.SUCCESS,message:z("userstores:notifications.updateUserstore.success.message")})),W((0,s.V_)({description:z("userstores:notifications.updateDelay.description"),level:l.QU.WARNING,message:z("userstores:notifications.updateDelay.message")})),A()})).catch((function(e){W((0,s.V_)({description:(null==e?void 0:e.description)||z("userstores:notifications.updateUserstore.genericError.description"),level:l.QU.ERROR,message:(null==e?void 0:e.message)||z("userstores:notifications.updateUserstore.genericError.message")}))})).finally((function(){X(!1)}))}},d.createElement(y.Z,null,d.createElement(y.Z.Row,{columns:1},d.createElement(y.Z.Column,{width:8},d.createElement(E.gN,{label:z("userstores:forms.general.name.label"),name:"name",type:"text",required:!1,requiredErrorMessage:z("userstores:forms.general.name.requiredErrorMessage"),placeholder:z("userstores:forms.general.name.placeholder"),value:(null==c?void 0:c.name)===S.XS?i.ss.CUSTOMER_USER_STORE_MAPPING:null==c?void 0:c.name,disabled:!0,"data-testid":"".concat(L,"-form-name-input")}),h.wO.userstoreEdit.basicDetails.showType&&f!==S.kL&&d.createElement(E.gN,{label:z("userstores:forms.general.type.label"),name:"type",type:"text",disabled:!0,required:!1,requiredErrorMessage:z("userstores:forms.general.type.requiredErrorMessage"),value:null==c?void 0:c.typeName,"data-testid":"".concat(L,"-form-type-input")}),d.createElement(E.gN,{label:z("userstores:forms.general.description.label"),name:"description",disabled:f==S.kL||C,type:"textarea",required:!1,requiredErrorMessage:"",placeholder:z("userstores:forms.general.description.placeholder"),value:null==c?void 0:c.description,"data-testid":"".concat(L,"-form-description-textarea"),validation:function(){var e,t=(e=P().mark((function e(t,n){var r,o;return P().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"true"===(r=(0,w.u)(t,S.o3.xssEscapeRegEx)).get("isMatch").toString()&&(n.isValid=!1,o=r.get("invalidStringValue").toString(),n.errorMessages.push(z("userstores:forms.general.description.validationErrorMessages.invalidInputErrorMessage",{invalidString:o})));case 3:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){U(a,r,o,i,l,"next",e)}function l(e){U(a,r,o,i,l,"throw",e)}i(void 0)}))});return function(e,n){return t.apply(this,arguments)}}()}))),d.createElement(y.Z.Row,{columns:1},d.createElement(y.Z.Column,{width:8},f!==S.kL?null==v||null===(t=v.required)||void 0===t?void 0:t.map((function(e,t){var n,r,o;if(!(e.description.split("#")[0]===S.rr)){var a=e.description.split("#")[0],i="password"===e.attributes.find((function(e){return"type"===e.name})).value,l="boolean"===(null===(n=e.attributes.find((function(e){return"type"===e.name})))||void 0===n?void 0:n.value);return i?d.createElement(E.gN,{name:e.name,type:"password",key:t,required:!0,label:a,requiredErrorMessage:z("userstores:forms.custom.requiredErrorMessage",{name:e.description.split("#")[0]}),placeholder:z("userstores:forms.custom.placeholder",{name:e.description.split("#")[0]}),showPassword:z("common:showPassword"),hidePassword:z("common:hidePassword"),"data-testid":"".concat(L,"-form-password-input-").concat(e.name),disabled:C}):l?d.createElement(E.gN,{name:e.name,value:null!==(r=e.value)&&void 0!==r?r:e.defaultValue,type:"toggle",key:t,required:!1,label:e.description.split("#")[0],requiredErrorMessage:z("userstores:forms.custom.requiredErrorMessage",{name:e.description.split("#")[0]}),placeholder:z("userstores:forms.custom.placeholder",{name:e.description.split("#")[0]}),toggle:!0,"data-testid":"".concat(L,"-form-toggle-").concat(e.name),disabled:C}):d.createElement(E.gN,{name:e.name,value:null!==(o=e.value)&&void 0!==o?o:e.defaultValue,type:"text",key:t,required:!0,label:e.description.split("#")[0],requiredErrorMessage:z("userstores:forms.custom.requiredErrorMessage",{name:e.description.split("#")[0]}),placeholder:z("userstores:forms.custom.placeholder",{name:e.description.split("#")[0]}),"data-testid":"".concat(L,"-form-text-input-").concat(e.name),disabled:C})}})):null)),(null==v?void 0:v.optional.nonSql.length)>0||(null==v?void 0:v.optional.sql.delete.length)>0||(null==v?void 0:v.optional.sql.insert.length)>0||(null==v?void 0:v.optional.sql.select.length)>0||(null==v?void 0:v.optional.sql.update.length)>0&&d.createElement(y.Z.Row,{columns:1},d.createElement(y.Z.Column,{width:8,textAlign:"center"},d.createElement(u.Qj,{type:"button",onClick:function(){V(!R)},"data-testid":"".concat(L,"-show-more-button")},d.createElement(b.Z,{name:R?"chevron up":"chevron down"}),z(R?"common:showLess":"common:showMore")))),R&&(null==v?void 0:v.optional.nonSql.length)>0&&d.createElement(y.Z,null,d.createElement(y.Z.Row,{columns:1},d.createElement(y.Z.Column,{width:8},null==v||null===(n=v.optional)||void 0===n?void 0:n.nonSql.map((function(e,t){var n,r,o,a=e.description.split("#")[0],i="password"===e.attributes.find((function(e){return"type"===e.name})).value,l="boolean"===(null===(n=e.attributes.find((function(e){return"type"===e.name})))||void 0===n?void 0:n.value);return i?d.createElement(E.gN,{name:e.name,type:"password",key:t,required:!1,label:a,requiredErrorMessage:z("userstores:forms.custom.requiredErrorMessage",{name:e.description.split("#")[0]}),placeholder:z("userstores:forms.custom.placeholder",{name:e.description.split("#")[0]}),showPassword:z("common:showPassword"),hidePassword:z("common:hidePassword"),"data-testid":"".concat(L,"-form-non-sql-password-input-").concat(e.name),disabled:C}):l?d.createElement(E.gN,{name:e.name,value:null!==(r=e.value)&&void 0!==r?r:e.defaultValue,type:"toggle",key:t,required:!1,label:e.description.split("#")[0],requiredErrorMessage:z("userstores:forms.custom.requiredErrorMessage",{name:e.description.split("#")[0]}),placeholder:z("userstores:forms.custom.placeholder",{name:e.description.split("#")[0]}),toggle:!0,"data-testid":"".concat(L,"-form-non-sql-toggle-").concat(e.name),disabled:C}):d.createElement(E.gN,{name:e.name,value:null!==(o=e.value)&&void 0!==o?o:e.defaultValue,type:"text",key:t,required:!1,label:e.description.split("#")[0],requiredErrorMessage:z("userstores:forms.custom.requiredErrorMessage",{name:e.description.split("#")[0]}),placeholder:z("userstores:forms.custom.placeholder",{name:e.description.split("#")[0]}),"data-testid":"".concat(L,"-form-non-sql-text-input-").concat(e.name),disabled:C})}))))),(null==v?void 0:v.optional.sql.delete.length)>0||(null==v?void 0:v.optional.sql.insert.length)>0||(null==v?void 0:v.optional.sql.select.length)>0||(null==v?void 0:v.optional.sql.update.length)>0&&d.createElement(y.Z,{columns:1},d.createElement(y.Z.Column,{width:16},d.createElement(k,{onChange:function(e,t){var n=new Map(Z);n.set(e,t),M(n)},properties:null==v?void 0:v.optional.sql,values:Z,"data-testid":"".concat(L,"-sql-editor"),readOnly:C}))),d.createElement(y.Z.Row,{columns:1},d.createElement(y.Z.Column,{width:8},!C&&d.createElement(u.KM,{"data-testid":"".concat(L,"-form-submit-button"),loading:F,disabled:F},z("common:update"))))))),d.createElement(q.Z,{hidden:!0}),f!==S.kL&&!C&&d.createElement(y.Z,{columns:1},d.createElement(y.Z.Column,{width:16},d.createElement(u.v9,{sectionHeader:z("common:dangerZone"),"ata-testid":"".concat(L,"-danger-zone-group")},d.createElement(u.cN,{actionTitle:z("userstores:dangerZone.disable.actionTitle"),header:z("userstores:dangerZone.disable.header"),subheader:z("userstores:dangerZone.disable.subheader"),onActionClick:void 0,"data-testid":"".concat(L,"-delete-danger-zone"),toggle:{checked:void 0!==Q?Q:"false"===(null==v||null===(r=v.required)||void 0===r||null===(r=r.find((function(e){return(null==e?void 0:e.name)===S.rr})))||void 0===r?void 0:r.value),onChange:function(e,t){var n,r=null==v||null===(n=v.required)||void 0===n||null===(n=n.find((function(e){return(null==e?void 0:e.name)===S.rr})))||void 0===n?void 0:n.name,o={operation:"REPLACE",path:"/properties/".concat(r),value:t.checked?"false":"true"};(0,g.Xv)(f,[o]).then((function(){D(t.checked),W((0,s.V_)({description:z("userstores:notifications.updateUserstore.success.description"),level:l.QU.SUCCESS,message:z("userstores:notifications.updateUserstore.success.message")})),W((0,s.V_)({description:z("userstores:notifications.updateDelay.description"),level:l.QU.WARNING,message:z("userstores:notifications.updateDelay.message")})),A()})).catch((function(e){W((0,s.V_)({description:(null==e?void 0:e.description)||z("userstores:notifications.updateUserstore.genericError.description"),level:l.QU.ERROR,message:(null==e?void 0:e.message)||z("userstores:notifications.updateUserstore.genericError.message")}))}))}}}),d.createElement(u.cN,{actionTitle:z("userstores:dangerZone.delete.actionTitle"),header:z("userstores:dangerZone.delete.header"),subheader:z("userstores:dangerZone.delete.subheader"),onActionClick:function(){return _(!0)},"data-testid":"".concat(L,"-delete-danger-zone")})))))};j.defaultProps={"data-testid":"userstore-basic-details-edit"};var _=n(86989),G=n(5466),Q=n(10909),D=n(12638);function $(e){return function(e){if(Array.isArray(e))return z(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||X(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],s=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||X(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(e,t){if(e){if("string"==typeof e)return z(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?z(e,t):void 0}}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var W=function(e){var t,n,r=e.id,o=e.properties,a=e.readOnly,i=e.type,f=e.update,v=e.userStore,h=e["data-testid"],q=F((0,d.useState)(null),2),w=q[0],C=q[1],A=F((0,d.useState)(!1),2),L=A[0],N=A[1],Z=F((0,d.useState)(!1),2),M=Z[0],I=Z[1],R=F((0,d.useState)(!1),2),P=R[0],U=R[1],x=F((0,d.useState)(!1),2),O=x[0],V=x[1],T=F((0,d.useState)(null),2),j=T[0],X=T[1],z=F((0,d.useState)(!1),2),W=z[0],Y=z[1],B=F((0,d.useState)(!1),2),H=B[0],K=B[1],J=(0,p.I0)(),ee=(0,m.$)().t,te=function(e){return e.TESTING="spinner",e.FAILED="remove",e.SUCCESSFUL="check",e.INITIAL="bolt",e}({}),ne=function(e){return e[e.TESTING=0]="TESTING",e[e.INITIAL=1]="INITIAL",e[e.SUCCESSFUL=2]="SUCCESSFUL",e[e.FAILED=3]="FAILED",e}({}),re=function(){return O?ne.TESTING:P?ne.SUCCESSFUL:M?ne.FAILED:ne.INITIAL};(0,d.useEffect)((function(){if(o){var e=new Map;o.optional.sql.delete.forEach((function(t){var n;e.set(t.name,null!==(n=t.value)&&void 0!==n?n:t.defaultValue)})),o.optional.sql.insert.forEach((function(t){var n;e.set(t.name,null!==(n=t.value)&&void 0!==n?n:t.defaultValue)})),o.optional.sql.select.forEach((function(t){var n;e.set(t.name,null!==(n=t.value)&&void 0!==n?n:t.defaultValue)})),o.optional.sql.update.forEach((function(t){var n;e.set(t.name,null!==(n=t.value)&&void 0!==n?n:t.defaultValue)})),X(e)}}),[o]);var oe=function(e){var t,n;return H?null!=e?e:null==o||null===(t=o.required.find((function(e){return"password"===e.name})))||void 0===t?void 0:t.value:(0,c.Z)(e)?null==o||null===(n=o.required.find((function(e){return"password"===e.name})))||void 0===n?void 0:n.value:e};return d.createElement(u.pJ,{padded:"very"},d.createElement(E.Es,{onChange:function(e,t){C(t)},onSubmit:function(e){var t=null==o?void 0:o.required.reduce((function(t,n){var r=e.get(n.name);return"ConnectionPassword"!==n.name||H?(r&&t.push({operation:"REPLACE",path:"/properties/".concat(n.name),value:r.toString()}),t):t}),[]),n=L?null==o?void 0:o.optional.nonSql.map((function(t){return{operation:"REPLACE",path:"/properties/".concat(t.name),value:e.get(t.name).toString()}})):null,a=L?null==o?void 0:o.optional.sql.insert.map((function(e){return{operation:"REPLACE",path:"/properties/".concat(e.name),value:j.get(e.name).toString()}})):null,i=L?null==o?void 0:o.optional.sql.update.map((function(e){return{operation:"REPLACE",path:"/properties/".concat(e.name),value:j.get(e.name).toString()}})):null,u=L?null==o?void 0:o.optional.sql.delete.map((function(e){return{operation:"REPLACE",path:"/properties/".concat(e.name),value:j.get(e.name).toString()}})):null,c=L?null==o?void 0:o.optional.sql.select.map((function(e){return{operation:"REPLACE",path:"/properties/".concat(e.name),value:j.get(e.name).toString()}})):null,d=L?[].concat($(t),$(n),$(u),$(a),$(i),$(c)):t;Y(!0),(0,g.Xv)(r,d).then((function(){J((0,s.V_)({description:ee("userstores:notifications.updateUserstore.success.description"),level:l.QU.SUCCESS,message:ee("userstores:notifications.updateUserstore.success.message")})),J((0,s.V_)({description:ee("userstores:notifications.updateDelay.description"),level:l.QU.WARNING,message:ee("userstores:notifications.updateDelay.message")})),f()})).catch((function(e){J((0,s.V_)({description:(null==e?void 0:e.description)||ee("userstores:notifications.updateUserstore.genericError.description"),level:l.QU.ERROR,message:(null==e?void 0:e.message)||ee("userstores:notifications.updateUserstore.genericError.message")}))})).finally((function(){Y(!1)}))}},d.createElement(y.Z,null,d.createElement(y.Z.Row,{columns:1},d.createElement(y.Z.Column,{width:8},null==o||null===(t=o.required)||void 0===t?void 0:t.map((function(e,t){var n,r,o,i=e.description.split("#")[0],l="password"===e.attributes.find((function(e){return"type"===e.name})).value,s="boolean"===(null===(n=e.attributes.find((function(e){return"type"===e.name})))||void 0===n?void 0:n.value);return l?d.createElement(d.Fragment,null,d.createElement(_.Z,{display:"flex",flexDirection:"row"},d.createElement(G.Z,{sx:{pb:1.4,pl:0,pr:1,pt:0},onChange:function(e){K(!H)},disabled:a}),d.createElement("p",null,ee("userstores:forms.connection.updatePassword"))),d.createElement(E.gN,{name:e.name,className:"addon-field-wrapper",type:"password",key:t,required:H,label:i,requiredErrorMessage:"".concat(e.description.split("#")[0]," is  required"),showPassword:ee("common:showPassword"),hidePassword:ee("common:hidePassword"),placeholder:ee("userstores:forms.custom.placeholder",{name:e.description.split("#")[0]}),"data-testid":"".concat(h,"-form-password-input-").concat(e.name),disabled:a||!H})):s?d.createElement(E.gN,{name:e.name,value:null!==(r=e.value)&&void 0!==r?r:e.defaultValue,type:"toggle",key:t,required:!1,label:e.description.split("#")[0],requiredErrorMessage:ee("userstores:forms.custom.requiredErrorMessage",{name:e.description.split("#")[0]}),placeholder:ee("userstores:forms.custom.placeholder",{name:e.description.split("#")[0]}),toggle:!0,"data-testid":"".concat(h,"-form-toggle-").concat(e.name),disabled:a}):d.createElement(E.gN,{name:e.name,value:null!==(o=e.value)&&void 0!==o?o:e.defaultValue,type:"text",key:t,required:!0,label:e.description.split("#")[0],requiredErrorMessage:ee("userstores:forms.custom.requiredErrorMessage",{name:e.description.split("#")[0]}),placeholder:ee("userstores:forms.custom.placeholder",{name:e.description.split("#")[0]}),"data-testid":"".concat(h,"-form-text-input-").concat(e.name),disabled:a})})))),(null==i?void 0:i.typeName.includes(S.lH))&&d.createElement(y.Z.Row,{columns:1},d.createElement(y.Z.Column,{width:8},d.createElement(Q.Z,{className:"test-button",basic:!0,type:"button",color:re()===ne.SUCCESSFUL?"green":re()===ne.FAILED?"red":null,onClick:function(){if(V(!0),i.typeName.includes(S.lH)){var e,t,n,r,a,u,c={connectionPassword:oe(null==w?void 0:w.get("password").toString()),connectionURL:null!==(e=null==w?void 0:w.get("url").toString())&&void 0!==e?e:null==o||null===(t=o.required.find((function(e){return"url"===e.name})))||void 0===t?void 0:t.value,domain:v.name,driverName:null!==(n=null==w?void 0:w.get("driverName").toString())&&void 0!==n?n:null==o||null===(r=o.required.find((function(e){return"driverName"===e.name})))||void 0===r?void 0:r.value,username:null!==(a=null==w?void 0:w.get("userName").toString())&&void 0!==a?a:null==o||null===(u=o.required.find((function(e){return"userName"===e.name})))||void 0===u?void 0:u.value};(0,g.M7)(c).then((function(e){V(!1),null!=e&&e.connection?(J((0,s.V_)({description:ee("userstores:notifications.testConnection.success.description"),level:l.QU.SUCCESS,message:ee("userstores:notifications.testConnection.success.message")})),I(!1),U(!0)):(U(!1),I(!0))})).catch((function(e){J((0,s.V_)({description:(null==e?void 0:e.description)||ee("userstores:notifications.testConnection.genericError.description"),level:l.QU.ERROR,message:(null==e?void 0:e.message)||ee("userstores:notifications.testConnection.genericError.message")})),V(!1),U(!1),I(!0)}))}},"data-testid":"".concat(h,"-test-connection-button"),disabled:a},d.createElement(b.Z,{size:"small",loading:O,name:O?te.TESTING:P?te.SUCCESSFUL:M?te.FAILED:te.INITIAL,color:re()===ne.SUCCESSFUL?"green":re()===ne.FAILED?"red":null}),ee("userstores:forms.connection.testButton")),M&&d.createElement(D.Z,{as:"h6",color:"red"},ee("userstores:forms.connection.connectionErrorMessage"))))),((null==o?void 0:o.optional.nonSql.length)>0||(null==o?void 0:o.optional.sql.delete.length)>0||(null==o?void 0:o.optional.sql.insert.length)>0||(null==o?void 0:o.optional.sql.select.length)>0||(null==o?void 0:o.optional.sql.update.length)>0)&&d.createElement(y.Z,{columns:1},d.createElement(y.Z.Column,{width:8,textAlign:"center"},d.createElement(u.Qj,{type:"button",onClick:function(){N(!L)},"data-testid":"".concat(h,"-show-more-button")},d.createElement(b.Z,{name:L?"chevron up":"chevron down"}),ee(L?"common:showLess":"common:showMore")))),L&&(null==o?void 0:o.optional.nonSql.length)>0&&d.createElement(y.Z,null,d.createElement(y.Z.Row,{columns:1},d.createElement(y.Z.Column,{width:8},null==o||null===(n=o.optional.nonSql)||void 0===n?void 0:n.map((function(e,t){var n,r,o,i=e.description.split("#")[0],l="password"===e.attributes.find((function(e){return"type"===e.name})).value,s="boolean"===(null===(n=e.attributes.find((function(e){return"type"===e.name})))||void 0===n?void 0:n.value);return l?d.createElement(E.gN,{name:e.name,type:H?"password":"text",key:t,required:H,label:i,requiredErrorMessage:"".concat(e.description.split("#")[0]," is  required"),icon:d.createElement(b.Z,{name:"eye",link:!0,onClick:function(){K(!H)}}),iconPosition:"right",showPassword:ee("common:showPassword"),hidePassword:ee("common:hidePassword"),placeholder:ee("userstores:forms.custom.placeholder",{name:e.description.split("#")[0]}),"data-testid":"".concat(h,"-form--non-sql-password-input-").concat(e.name),disabled:a}):s?d.createElement(E.gN,{name:e.name,value:null!==(r=e.value)&&void 0!==r?r:e.defaultValue,type:"toggle",key:t,required:!1,label:e.description.split("#")[0],requiredErrorMessage:ee("userstores:forms.custom.requiredErrorMessage",{name:e.description.split("#")[0]}),placeholder:ee("userstores:forms.custom.placeholder",{name:e.description.split("#")[0]}),toggle:!0,"data-testid":"".concat(h,"-form--non-sql-toggle-").concat(e.name),disabled:a}):d.createElement(E.gN,{name:e.name,value:null!==(o=e.value)&&void 0!==o?o:e.defaultValue,type:"text",key:t,required:!1,label:e.description.split("#")[0],requiredErrorMessage:ee("userstores:forms.custom.requiredErrorMessage",{name:e.description.split("#")[0]}),placeholder:ee("userstores:forms.custom.placeholder",{name:e.description.split("#")[0]}),"data-testid":"".concat(h,"-form--non-sql-text-input-").concat(e.name),disabled:a})}))))),L&&((null==o?void 0:o.optional.sql.delete.length)>0||(null==o?void 0:o.optional.sql.insert.length)>0||(null==o?void 0:o.optional.sql.select.length)>0||(null==o?void 0:o.optional.sql.update.length)>0)&&d.createElement(y.Z,{columns:1},d.createElement(y.Z.Column,{width:16},d.createElement(k,{onChange:function(e,t){var n=new Map(j);n.set(e,t),X(n)},properties:null==o?void 0:o.optional.sql,values:j,"data-testid":"".concat(h,"-sql-editor"),readOnly:a}))),d.createElement(y.Z,{columns:1},d.createElement(y.Z.Column,{width:8},!a&&d.createElement(u.KM,{type:"submit","data-testid":"".concat(h,"-form-submit-button"),loading:W,disabled:W},ee("common:update"))))))};function Y(e){return function(e){if(Array.isArray(e))return K(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||H(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],s=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||H(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,t){if(e){if("string"==typeof e)return K(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?K(e,t):void 0}}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}W.defaultProps={"data-testid":"userstore-connection-details-edit"};var J=function(e){var t,n,r=e.id,o=e.properties,a=e.readOnly,i=e.update,c=e["data-testid"],f=B((0,d.useState)(!1),2),v=f[0],q=f[1],w=B((0,d.useState)(!0),2),C=w[0],A=w[1],L=B((0,d.useState)(null),2),N=L[0],Z=L[1],M=B((0,d.useState)(!1),2),I=M[0],R=M[1],P=(0,p.I0)(),U=(0,m.$)().t;(0,d.useEffect)((function(){if(o){var e=new Map;o.optional.sql.delete.forEach((function(t){var n;e.set(t.name,null!==(n=t.value)&&void 0!==n?n:t.defaultValue)})),o.optional.sql.insert.forEach((function(t){var n;e.set(t.name,null!==(n=t.value)&&void 0!==n?n:t.defaultValue)})),o.optional.sql.select.forEach((function(t){var n;e.set(t.name,null!==(n=t.value)&&void 0!==n?n:t.defaultValue)})),o.optional.sql.update.forEach((function(t){var n;e.set(t.name,null!==(n=t.value)&&void 0!==n?n:t.defaultValue)})),Z(e)}}),[o]),(0,d.useEffect)((function(){if(o){var e=null==o?void 0:o.required.find((function(e){return"ReadGroups"===e.name}));A(!("true"===(null==e?void 0:e.value)))}}),[o]);return d.createElement(u.pJ,{padded:"very"},d.createElement(E.Es,{onSubmit:function(e){var t=null==o?void 0:o.required.map((function(t){var n;return{operation:"REPLACE",path:"/properties/".concat(t.name),value:null===(n=e.get(t.name))||void 0===n?void 0:n.toString()}})),n=v?null==o?void 0:o.optional.nonSql.map((function(t){var n;return{operation:"REPLACE",path:"/properties/".concat(t.name),value:null===(n=e.get(t.name))||void 0===n?void 0:n.toString()}})):null,a=v?null==o?void 0:o.optional.sql.insert.map((function(e){var t;return{operation:"REPLACE",path:"/properties/".concat(e.name),value:null===(t=N.get(e.name))||void 0===t?void 0:t.toString()}})):null,u=v?null==o?void 0:o.optional.sql.update.map((function(e){var t;return{operation:"REPLACE",path:"/properties/".concat(e.name),value:null===(t=N.get(e.name))||void 0===t?void 0:t.toString()}})):null,c=v?null==o?void 0:o.optional.sql.delete.map((function(e){var t;return{operation:"REPLACE",path:"/properties/".concat(e.name),value:null===(t=N.get(e.name))||void 0===t?void 0:t.toString()}})):null,d=v?null==o?void 0:o.optional.sql.select.map((function(e){var t;return{operation:"REPLACE",path:"/properties/".concat(e.name),value:null===(t=N.get(e.name))||void 0===t?void 0:t.toString()}})):null,m=v?[].concat(Y(t),Y(n),Y(c),Y(a),Y(u),Y(d)):t;R(!0),(0,g.Xv)(r,m).then((function(){P((0,s.V_)({description:U("userstores:notifications.updateUserstore.success.description"),level:l.QU.SUCCESS,message:U("userstores:notifications.updateUserstore.success.message")})),P((0,s.V_)({description:U("userstores:notifications.updateDelay.description"),level:l.QU.WARNING,message:U("userstores:notifications.updateDelay.message")})),i()})).catch((function(e){P((0,s.V_)({description:(null==e?void 0:e.description)||U("userstores:notifications.updateUserstore.genericError.description"),level:l.QU.ERROR,message:(null==e?void 0:e.message)||U("userstores:notifications.updateUserstore.genericError.message")}))})).finally((function(){R(!1)}))}},d.createElement(y.Z,null,d.createElement(y.Z.Row,{columns:1},d.createElement(y.Z.Column,{width:8},null==o||null===(t=o.required)||void 0===t?void 0:t.map((function(e,t){var n,o,i,l,s=e.description.split("#")[0],u="password"===e.attributes.find((function(e){return"type"===e.name})).value,m="boolean"===(null===(n=e.attributes.find((function(e){return"type"===e.name})))||void 0===n?void 0:n.value),p="ReadGroups"===e.name;return u?d.createElement(E.gN,{name:e.name,type:"password",key:t,required:!0,label:s,requiredErrorMessage:"".concat(e.description.split("#")[0]," is  required"),showPassword:U("common:showPassword"),hidePassword:U("common:hidePassword"),placeholder:U("userstores:forms.custom.placeholder",{name:e.description.split("#")[0]}),"data-testid":"".concat(c,"-form-password-input-").concat(e.name),disabled:a}):m?r!==S.kL&&(p?d.createElement(E.gN,{name:e.name,value:null!==(o=e.value)&&void 0!==o?o:e.defaultValue,type:"toggle",key:t,required:!1,label:e.description.split("#")[0],requiredErrorMessage:U("userstores:forms.custom.requiredErrorMessage",{name:e.description.split("#")[0]}),listen:function(t){A("false"===t.get(e.name).toString())},toggle:!0,placeholder:U("userstores:forms.custom.placeholder",{name:e.description.split("#")[0]}),"data-testid":"".concat(c,"-form-toggle-master-").concat(e.name),disabled:a}):d.createElement(E.gN,{name:e.name,value:null!==(i=e.value)&&void 0!==i?i:e.defaultValue,type:"toggle",key:t,required:!1,label:e.description.split("#")[0],requiredErrorMessage:U("userstores:forms.edit.custom.requiredErrorMessage",{name:e.description.split("#")[0]}),disabled:C||a,toggle:!0,placeholder:U("userstores:forms.custom.placeholder",{name:e.description.split("#")[0]}),"data-testid":"".concat(c,"-form-toggle-").concat(e.name)})):d.createElement(E.gN,{name:e.name,value:null!==(l=e.value)&&void 0!==l?l:e.defaultValue,type:"text",key:t,required:!C,label:e.description.split("#")[0],requiredErrorMessage:U("userstores:forms.edit.custom.requiredErrorMessage",{name:e.description.split("#")[0]}),disabled:a||!(!h.wO.userstoreEdit.groupDetails.showToggles||r===S.kL)&&C,placeholder:U("userstores:forms.custom.placeholder",{name:e.description.split("#")[0]}),"data-testid":"".concat(c,"-form-text-input-").concat(e.name)})}))))),!C&&((null==o?void 0:o.optional.nonSql.length)>0||(null==o?void 0:o.optional.sql.delete.length)>0||(null==o?void 0:o.optional.sql.insert.length)>0||(null==o?void 0:o.optional.sql.select.length)>0||(null==o?void 0:o.optional.sql.update.length)>0)&&r!==S.kL&&d.createElement(y.Z,{columns:1},d.createElement(y.Z.Column,{width:8,textAlign:"center"},d.createElement(u.Qj,{type:"button",onClick:function(){q(!v)},"data-testid":"".concat(c,"-show-more-button")},d.createElement(b.Z,{name:v?"chevron up":"chevron down"}),U(v?"common:showLess":"common:showMore")))),!C&&v&&(null==o?void 0:o.optional.nonSql.length)>0&&d.createElement(y.Z,null,d.createElement(y.Z.Row,{columns:1},d.createElement(y.Z.Column,{width:8},null==o||null===(n=o.optional)||void 0===n?void 0:n.nonSql.map((function(e,t){var n,r,o,i=e.description.split("#")[0],l="password"===e.attributes.find((function(e){return"type"===e.name})).value,s="boolean"===(null===(n=e.attributes.find((function(e){return"type"===e.name})))||void 0===n?void 0:n.value);return l?d.createElement(E.gN,{name:e.name,type:"password",key:t,required:!1,label:i,requiredErrorMessage:U("userstores:forms.edit.custom.requiredErrorMessage",{name:e.description.split("#")[0]}),showPassword:U("common:showPassword"),hidePassword:U("common:hidePassword"),placeholder:U("userstores:forms.custom.placeholder",{name:e.description.split("#")[0]}),"data-testid":"".concat(c,"-form-non-sql-password-input-").concat(e.name),disabled:a}):s?d.createElement(E.gN,{name:e.name,value:null!==(r=e.value)&&void 0!==r?r:e.defaultValue,type:"toggle",key:t,required:!1,label:e.description.split("#")[0],requiredErrorMessage:U("userstores:forms.custom.requiredErrorMessage",{name:e.description.split("#")[0]}),disabled:C||a,toggle:!0,placeholder:U("userstores:forms.custom.placeholder",{name:e.description.split("#")[0]}),"data-testid":"".concat(c,"-form-non-sql-toggle-").concat(e.name)}):d.createElement(E.gN,{name:e.name,value:null!==(o=e.value)&&void 0!==o?o:e.defaultValue,type:"text",key:t,required:!1,label:e.description.split("#")[0],requiredErrorMessage:U("userstores:forms.custom.requiredErrorMessage",{name:e.description.split("#")[0]}),disabled:C||a,placeholder:U("userstores:forms.custom.placeholder",{name:e.description.split("#")[0]}),"data-testid":"".concat(c,"-form-non-sql-text-input-").concat(e.name)})}))))),!C&&v&&((null==o?void 0:o.optional.sql.delete.length)>0||(null==o?void 0:o.optional.sql.insert.length)>0||(null==o?void 0:o.optional.sql.select.length)>0||(null==o?void 0:o.optional.sql.update.length)>0)&&d.createElement(y.Z,{columns:1},d.createElement(y.Z.Column,{width:16},d.createElement(k,{onChange:function(e,t){var n=new Map(N);n.set(e,t),Z(n)},properties:null==o?void 0:o.optional.sql,values:N,"data-testid":"".concat(c,"-sql-editor"),readOnly:a}))),d.createElement(y.Z,{columns:1},d.createElement(y.Z.Column,{width:8},!a&&d.createElement(u.KM,{type:"submit",loading:I,disabled:I||C,"data-testid":"".concat(c,"-form-submit-button")},"Update")))))};J.defaultProps={"data-testid":"userstore-group-details-edit"};var ee=n(48704);function te(e){return function(e){if(Array.isArray(e))return oe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||re(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],s=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||re(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(e,t){if(e){if("string"==typeof e)return oe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?oe(e,t):void 0}}function oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var ae=function(e){var t,n,r,o,a,i,c,f=e.id,v=e.properties,h=e.readOnly,q=e.update,w=e["data-testid"],C=ne((0,d.useState)(!1),2),A=C[0],L=C[1],N=ne((0,d.useState)(null),2),Z=N[0],M=N[1],I=ne((0,d.useState)(!1),2),R=I[0],P=I[1],U=(0,p.I0)(),x=(0,m.$)().t;(0,d.useEffect)((function(){if(v){var e,t,n,r,o=new Map;null==v||null===(e=v.optional)||void 0===e||null===(e=e.sql)||void 0===e||null===(e=e.delete)||void 0===e||e.forEach((function(e){var t;o.set(e.name,null!==(t=e.value)&&void 0!==t?t:e.defaultValue)})),null==v||null===(t=v.optional)||void 0===t||null===(t=t.sql)||void 0===t||null===(t=t.insert)||void 0===t||t.forEach((function(e){var t;o.set(e.name,null!==(t=e.value)&&void 0!==t?t:e.defaultValue)})),null==v||null===(n=v.optional)||void 0===n||null===(n=n.sql)||void 0===n||null===(n=n.select)||void 0===n||n.forEach((function(e){var t;o.set(e.name,null!==(t=e.value)&&void 0!==t?t:e.defaultValue)})),null==v||null===(r=v.optional)||void 0===r||null===(r=r.sql)||void 0===r||null===(r=r.update)||void 0===r||r.forEach((function(e){var t;o.set(e.name,null!==(t=e.value)&&void 0!==t?t:e.defaultValue)})),M(o)}}),[v]);return d.createElement(u.pJ,{padded:"very"},d.createElement(E.Es,{onSubmit:function(e){var t,n=null==v||null===(t=v.required)||void 0===t?void 0:t.filter((function(t){return e.has(t.name)})).map((function(t){return{operation:"REPLACE",path:"/properties/".concat(t.name),value:e.get(t.name).toString()}})),r=A?null==v?void 0:v.optional.nonSql.filter((function(t){return e.has(t.name)})).map((function(t){return{operation:"REPLACE",path:"/properties/".concat(t.name),value:e.get(t.name).toString()}})):null,o=A?null==v?void 0:v.optional.sql.insert.filter((function(e){return Z.has(e.name)&&""!==Z.get(e.name).toString()})).map((function(e){return{operation:"REPLACE",path:"/properties/".concat(e.name),value:Z.get(e.name).toString()}})):null,a=A?null==v?void 0:v.optional.sql.update.filter((function(e){return Z.has(e.name)&&""!==Z.get(e.name).toString()})).map((function(e){return{operation:"REPLACE",path:"/properties/".concat(e.name),value:Z.get(e.name).toString()}})):null,i=A?null==v?void 0:v.optional.sql.delete.filter((function(e){return Z.has(e.name)&&""!==Z.get(e.name).toString()})).map((function(e){return{operation:"REPLACE",path:"/properties/".concat(e.name),value:Z.get(e.name).toString()}})):null,u=A?null==v?void 0:v.optional.sql.select.filter((function(e){return Z.has(e.name)&&""!==Z.get(e.name).toString()})).map((function(e){return{operation:"REPLACE",path:"/properties/".concat(e.name),value:Z.get(e.name).toString()}})):null,c=A?[].concat(te(n),te(r),te(i),te(o),te(a),te(u)):n;P(!0),(0,g.Xv)(f,c).then((function(){U((0,s.V_)({description:x("userstores:notifications.updateUserstore.success.description"),level:l.QU.SUCCESS,message:x("userstores:notifications.updateUserstore.success.message")})),U((0,s.V_)({description:x("userstores:notifications.updateDelay.description"),level:l.QU.WARNING,message:x("userstores:notifications.updateDelay.message")})),q()})).catch((function(e){U((0,s.V_)({description:(null==e?void 0:e.description)||x("userstores:notifications.updateUserstore.genericError.description"),level:l.QU.ERROR,message:(null==e?void 0:e.message)||x("userstores:notifications.updateUserstore.genericError.message")}))})).finally((function(){P(!1)}))}},d.createElement(y.Z,null,d.createElement(y.Z.Row,{columns:1},d.createElement(y.Z.Column,{width:8},null==v||null===(t=v.required)||void 0===t?void 0:t.map((function(e,t){var n,r,o,a,i,l,s,u=null==e||null===(n=e.description)||void 0===n?void 0:n.split("#")[0];u||(u=null==e||null===(s=e.name)||void 0===s?void 0:s.replace(/([a-z])([A-Z])/g,"$1 $2"));var c="password"===(null==e||null===(r=e.attributes)||void 0===r||null===(r=r.find((function(e){return"type"===(null==e?void 0:e.name)})))||void 0===r?void 0:r.value),m="boolean"===(null==e||null===(o=e.attributes)||void 0===o||null===(o=o.find((function(e){return"type"===(null==e?void 0:e.name)})))||void 0===o?void 0:o.value);return c?d.createElement(E.gN,{name:e.name,type:"password",key:t,required:!0,disabled:h||f===S.kL,label:u,requiredErrorMessage:x("userstores:forms.custom.requiredErrorMessage",{name:u}),showPassword:x("common:showPassword"),hidePassword:x("common:hidePassword"),placeholder:x("userstores:forms.custom.placeholder",{name:u}),"data-testid":"".concat(w,"-form-password-input-").concat(e.name)}):m?d.createElement(E.gN,{name:e.name,value:null!==(a=e.value)&&void 0!==a?a:e.defaultValue,type:"toggle",key:t,required:!1,disabled:h||f===S.kL,label:u,requiredErrorMessage:x("userstores:forms.custom.requiredErrorMessage",{name:u}),toggle:!0,placeholder:x("userstores:forms.custom.placeholder",{name:u}),"data-testid":"".concat(w,"-form-toggle-").concat(e.name)}):"DisplayNameAttribute"==e.name?ee.w.userstoreEdit.userDetails.showDisplayName&&f!==S.kL&&d.createElement(E.gN,{name:e.name,value:null!==(i=e.value)&&void 0!==i?i:e.defaultValue,type:"text",key:t,required:!1,label:u,requiredErrorMessage:x("userstores:forms.custom.requiredErrorMessage",{name:u}),placeholder:x("userstores:forms.custom.placeholder",{name:u}),"data-testid":"".concat(w,"-form-text-input-").concat(e.name),disabled:h}):d.createElement(E.gN,{name:null==e?void 0:e.name,value:null!==(l=null==e?void 0:e.value)&&void 0!==l?l:null==e?void 0:e.defaultValue,type:"text",key:t,required:!0,label:u,requiredErrorMessage:x("userstores:forms.custom.requiredErrorMessage",{name:u}),placeholder:x("userstores:forms.custom.placeholder",{name:u}),"data-testid":"".concat(w,"-form-text-input-").concat(null==e?void 0:e.name),disabled:h})}))))),((null==v||null===(n=v.optional)||void 0===n||null===(n=n.nonSql)||void 0===n?void 0:n.length)>0||(null==v||null===(r=v.optional)||void 0===r||null===(r=r.sql)||void 0===r||null===(r=r.delete)||void 0===r?void 0:r.length)>0||(null==v||null===(o=v.optional)||void 0===o||null===(o=o.sql)||void 0===o||null===(o=o.insert)||void 0===o?void 0:o.length)>0||(null==v||null===(a=v.optional)||void 0===a||null===(a=a.sql)||void 0===a||null===(a=a.select)||void 0===a?void 0:a.length)>0||(null==v||null===(i=v.optional)||void 0===i||null===(i=i.sql)||void 0===i||null===(i=i.update)||void 0===i?void 0:i.length)>0)&&f!==S.kL&&d.createElement(y.Z,{columns:1},d.createElement(y.Z.Column,{width:8,textAlign:"center"},d.createElement(u.Qj,{type:"button",onClick:function(){L(!A)},"data-testid":"".concat(w,"-show-more-button")},d.createElement(b.Z,{name:A?"chevron up":"chevron down"}),x(A?"common:showLess":"common:showMore")))),A&&(null==v?void 0:v.optional.nonSql.length)>0&&d.createElement(y.Z,null,d.createElement(y.Z.Row,{columns:1},d.createElement(y.Z.Column,{width:8},null==v||null===(c=v.optional)||void 0===c?void 0:c.nonSql.map((function(e,t){var n,r,o,a,i,l,s,u,c,m,p,v=null==e||null===(n=e.description)||void 0===n?void 0:n.split("#")[0],g="password"===(null==e||null===(r=e.attributes)||void 0===r||null===(r=r.find((function(e){return"type"===(null==e?void 0:e.name)})))||void 0===r?void 0:r.value),y="boolean"===(null==e||null===(o=e.attributes)||void 0===o||null===(o=o.find((function(e){return"type"===(null==e?void 0:e.name)})))||void 0===o?void 0:o.value),b="UniqueID"===(null==e?void 0:e.name);return g?d.createElement(E.gN,{name:e.name,type:"password",key:t,required:!1,disabled:h||f===S.kL,label:v,requiredErrorMessage:x("userstores:forms.custom.requiredErrorMessage",{name:e.description.split("#")[0]}),showPassword:x("common:showPassword"),hidePassword:x("common:hidePassword"),placeholder:x("userstores:forms.custom.placeholder",{name:e.description.split("#")[0]}),"data-testid":"".concat(w,"-form-non-sql-password-input-").concat(null==e?void 0:e.name)}):y?d.createElement(E.gN,{name:e.name,value:e.value?"false"===e.value?"false":"true":e.defaultValue,type:"toggle",key:t,required:!1,disabled:h||f===S.kL,label:e.description.split("#")[0],requiredErrorMessage:x("userstores:forms.edit.connection.custom.requiredErrorMessage",{name:null==e||null===(a=e.description)||void 0===a?void 0:a.split("#")[0]}),toggle:!0,placeholder:x("userstores:forms.custom.placeholder",{name:null==e||null===(i=e.description)||void 0===i?void 0:i.split("#")[0]}),"data-testid":"".concat(w,"-form-non-sql-toggle-").concat(e.name)}):b?d.createElement(E.gN,{name:null==e?void 0:e.name,hidden:!0,value:null!==(l=null==e?void 0:e.value)&&void 0!==l?l:null==e?void 0:e.defaultValue,type:"text",key:t,required:!1,disabled:h||f===S.kL,label:e.description.split("#")[0],requiredErrorMessage:x("userstores:forms.edit.connection.custom.requiredErrorMessage",{name:null==e||null===(s=e.description)||void 0===s?void 0:s.split("#")[0]}),placeholder:x("userstores:forms.custom.placeholder",{name:null==e||null===(u=e.description)||void 0===u?void 0:u.split("#")[0]}),"data-testid":"".concat(w,"-form-non-sql-text-input-").concat(e.name)}):d.createElement(E.gN,{name:null==e?void 0:e.name,value:null!==(c=null==e?void 0:e.value)&&void 0!==c?c:null==e?void 0:e.defaultValue,type:"text",key:t,required:!1,disabled:h||f===S.kL,label:e.description.split("#")[0],requiredErrorMessage:x("userstores:forms.edit.connection.custom.requiredErrorMessage",{name:null==e||null===(m=e.description)||void 0===m?void 0:m.split("#")[0]}),placeholder:x("userstores:forms.custom.placeholder",{name:null==e||null===(p=e.description)||void 0===p?void 0:p.split("#")[0]}),"data-testid":"".concat(w,"-form-non-sql-text-input-").concat(e.name)})}))))),A&&f!==S.kL&&((null==v?void 0:v.optional.sql.delete.length)>0||(null==v?void 0:v.optional.sql.insert.length)>0||(null==v?void 0:v.optional.sql.select.length)>0||(null==v?void 0:v.optional.sql.update.length)>0)&&d.createElement(y.Z,{columns:1},d.createElement(y.Z.Column,{width:16},d.createElement(k,{onChange:function(e,t){var n=new Map(Z);n.set(e,t),M(n)},properties:null==v?void 0:v.optional.sql,values:Z,"data-testid":"".concat(w,"-sql-editor"),readOnly:h}))),d.createElement(y.Z,{columns:1},d.createElement(y.Z.Column,{width:8},!h&&d.createElement(u.KM,{type:"submit","data-testid":"".concat(w,"-form-submit-button"),loading:R,disabled:R},"Update")))))};ae.defaultProps={"data-testid":"userstore-user-details-edit"};var ie=n(31687);function le(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],s=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return se(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?se(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function se(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var ue=function(e){var t,n=e.match,h=e["data-testid"],E=n.params.id,y=le((0,d.useState)(null),2),b=y[0],q=y[1],C=le((0,d.useState)(null),2),A=C[0],L=C[1],N=le((0,d.useState)(null),2),Z=N[0],M=N[1],I=le((0,d.useState)(void 0),2),k=I[0],R=I[1],P=(0,p.I0)(),U=(0,m.$)().t,x=(0,p.v9)((function(e){return e.config.ui.features})),O=(0,r.EV)(null==x||null===(t=x.userStores)||void 0===t||null===(t=t.scopes)||void 0===t?void 0:t.update),V=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r={headers:{Accept:"application/json","Content-Type":"application/json"},method:l.f2.GET,params:t,url:"".concat(v.h.getState().config.endpoints.userStores,"/meta/types/").concat(e)},o=(0,f.Z)(n?r:null);return{data:o.data,error:o.error,isLoading:o.isLoading,isValidating:o.isValidating,mutate:o.mutate,response:o.response}}(null==b?void 0:b.typeId,null,!(0,c.Z)(null==b?void 0:b.typeId)),T=V.data,_=V.isLoading,G=V.error,Q=function(){R(!0),(0,g.YZ)(E).then((function(e){q(e)})).catch((function(e){P((0,s.V_)({description:(null==e?void 0:e.description)||U("userstores:notifications.fetchUserstores.genericError.description"),level:l.QU.ERROR,message:(null==e?void 0:e.message)||U("userstores:notifications.fetchUserstores.genericError.message")}))})).finally((function(){R(!1)}))};(0,d.useEffect)((function(){Q()}),[]),(0,d.useEffect)((function(){!_&&T&&(L(T),M((0,w.Y)(T.properties,b.properties)))}),[_,T]),(0,d.useEffect)((function(){G&&P((0,s.V_)({description:(null==G?void 0:G.name)||U("userstores:notifications.fetchUserstoreMetadata.genericError.description"),level:l.QU.ERROR,message:(null==G?void 0:G.message)||U("userstores:notifications.fetchUserstoreMetadata.genericError.message")}))}),[G]);var D=function(){return!O},$=[{menuItem:U("userstores:pageLayout.edit.tabs.general"),render:function(){return d.createElement(u.M$.Pane,{controlledSegmentation:!0,attached:!1},d.createElement(j,{readOnly:D(),properties:null==Z?void 0:Z.basic,userStore:b,update:Q,id:E,"data-testid":"".concat(h,"-userstore-basic-details-edit")}))}},{menuItem:E===S.kL?null:U("userstores:pageLayout.edit.tabs.connection"),render:function(){return d.createElement(u.M$.Pane,{controlledSegmentation:!0,attached:!1},d.createElement(W,{readOnly:D(),update:Q,type:A,id:E,properties:null==Z?void 0:Z.connection,"data-testid":"".concat(h,"-userstore-connection-details-edit"),userStore:b}))}},{menuItem:U("userstores:pageLayout.edit.tabs.user"),render:function(){return d.createElement(u.M$.Pane,{controlledSegmentation:!0,attached:!1},d.createElement(ae,{readOnly:D(),update:Q,id:E,properties:null==Z?void 0:Z.user,"data-testid":"".concat(h,"-userstore-user-details-edit")}))}},{menuItem:U("userstores:pageLayout.edit.tabs.group"),render:function(){return d.createElement(u.M$.Pane,{controlledSegmentation:!0,attached:!1},d.createElement(J,{readOnly:D(),update:Q,type:A,id:E,properties:null==Z?void 0:Z.group,"data-testid":"".concat(h,"-userstore-group-details-edit")}))}}];return d.createElement(u.O9,{isLoading:k,image:d.createElement(u.dn,{defaultIcon:!0,size:"x60",relaxed:"very",shape:"rounded",hoverable:!1,icon:(0,ie.jw)()}),title:(null==b?void 0:b.name)===S.XS?i.ss.CUSTOMER_USER_STORE_MAPPING:null==b?void 0:b.name,pageTitle:(null==b?void 0:b.name)===S.XS?i.ss.CUSTOMER_USER_STORE_MAPPING:null==b?void 0:b.name,description:U("userstores:pageLayout.edit.description"),backButton:{onClick:function(){a.m.push(o.$.getPaths().get("USERSTORES"))},text:U("userstores:pageLayout.edit.back")},titleTextAlign:"left",bottomMargin:!1,"data-testid":"".concat(h,"-page-layout")},d.createElement(u.M$,{isLoading:k,panes:$,onTabChange:function(){Q()},"data-testid":"".concat(h,"-tabs")}))};ue.defaultProps={"data-testid":"userstores-edit"};const ce=ue},16824:(e,t,n)=>{n.d(t,{Y:()=>i,u:()=>l});var r=function(e){return e.CONNECTION="connection",e.USER="user",e.GROUP="group",e.BASIC="basic",e}({});function o(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var i=function(e,t){var n=[];n.push.apply(n,o(e.Advanced)),n.push.apply(n,o(e.Mandatory)),n.push.apply(n,o(e.Optional));var a=[],i=[],l=[],s=[],u=[],c=[],d=[],m=[],p=[],f=[],v=[],g=[],h=[],E=[],y=[],b=[],q=[],S=[],w=[],C=[],A=[],L=[],N=[],Z=[];return n.forEach((function(e){var n,o,M,I,k,R=null===(n=e.attributes)||void 0===n||null===(n=n.find((function(e){return"category"===e.name})))||void 0===n?void 0:n.value,P="true"===(null===(o=e.attributes)||void 0===o||null===(o=o.find((function(e){return"required"===e.name})))||void 0===o?void 0:o.value),U="sql"===(null===(M=e.attributes)||void 0===M||null===(M=M.find((function(e){return"type"===e.name})))||void 0===M?void 0:M.value),x=e.description.toLowerCase().includes("add"),O=e.description.toLowerCase().includes("delete"),V=e.description.toLowerCase().includes("update");t&&(e.value=null!==(I=null===(k=t.find((function(t){return t.name===e.name})))||void 0===k?void 0:k.value)&&void 0!==I?I:"");switch(R){case r.CONNECTION:P?a.push(e):U?x?l.push(e):O?s.push(e):V?u.push(e):c.push(e):i.push(e);break;case r.GROUP:P?h.push(e):U?x?y.push(e):O?b.push(e):V?q.push(e):S.push(e):E.push(e);break;case r.USER:P?d.push(e):U?x?p.push(e):O?f.push(e):V?v.push(e):g.push(e):m.push(e);break;case r.BASIC:P?w.push(e):U?x?A.push(e):O?L.push(e):V?N.push(e):Z.push(e):C.push(e)}})),{basic:{optional:{nonSql:C,sql:{delete:L,insert:A,select:Z,update:N}},required:w},connection:{optional:{nonSql:i,sql:{delete:s,insert:l,select:c,update:u}},required:a},group:{optional:{nonSql:E,sql:{delete:b,insert:y,select:S,update:q}},required:h},user:{optional:{nonSql:m,sql:{delete:f,insert:p,select:g,update:v}},required:d}}},l=function(e,t){var n=new RegExp(t),r=!1,o=null;n.test(e)&&(r=!0,o=n.exec(e).toString());var a=new Map;return a.set("isMatch",r),a.set("invalidStringValue",o),a}}}]);