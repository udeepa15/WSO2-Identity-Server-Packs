"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[3546],{7345:(e,t,o)=>{o.d(t,{Ch:()=>c,Wt:()=>s,Yz:()=>i});var n=o(2292),a=o(76271),r=o(6833),l=n.AsgardeoSPAClient.getInstance().httpRequest.bind(n.AsgardeoSPAClient.getInstance()),i=function(e){var t,o={headers:{Accept:"application/json","Content-Type":"application/json"},method:r.f2.DELETE,url:(null===(t=a.h.getState())||void 0===t||null===(t=t.config)||void 0===t||null===(t=t.endpoints)||void 0===t?void 0:t.workflows)+"/"+e};return l(o).then((function(e){return Promise.resolve(e)})).catch((function(e){return Promise.reject(e)}))},c=function(e){var t,o={data:e,headers:{Accept:"application/json","Content-Type":"application/json"},method:r.f2.POST,url:null===(t=a.h.getState())||void 0===t||null===(t=t.config)||void 0===t||null===(t=t.endpoints)||void 0===t?void 0:t.workflows};return l(o).then((function(e){return Promise.resolve(e.data)})).catch((function(e){var t;return Promise.reject(null==e||null===(t=e.response)||void 0===t?void 0:t.data)}))},s=function(e,t){var o,n={data:t,headers:{Accept:"application/json","Content-Type":"application/json"},method:r.f2.PUT,url:"".concat(null===(o=a.h.getState())||void 0===o||null===(o=o.config)||void 0===o||null===(o=o.endpoints)||void 0===o?void 0:o.workflows,"/").concat(e)};return l(n).then((function(e){return 200!==e.status?Promise.reject("An error occurred. The server returned ".concat(e.status)):Promise.resolve(e.data)})).catch((function(e){var t;return Promise.reject(null==e||null===(t=e.response)||void 0===t?void 0:t.data)}))}},30808:(e,t,o)=>{o.d(t,{z:()=>l});var n=o(96124),a=o(76271),r=o(6833),l=function(e,t,o){var l,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],c={headers:{Accept:"application/json","Content-Type":"application/json"},method:r.f2.GET,params:{filter:o,limit:e,offset:t},url:null===(l=a.h.getState())||void 0===l||null===(l=l.config)||void 0===l||null===(l=l.endpoints)||void 0===l?void 0:l.workflows},s=(0,n.Z)(i?c:null);return{data:s.data,error:s.error,isLoading:s.isLoading,isValidating:s.isValidating,mutate:s.mutate,response:s.response}}},63546:(e,t,o)=>{o.r(t),o.d(t,{default:()=>T});var n,a=o(55007),r=o(44194),l=["title","titleId"];function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)({}).hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},i.apply(null,arguments)}var c=function(e,t){var o=e.title,a=e.titleId,c=function(e,t){if(null==e)return{};var o,n,a=function(e,t){if(null==e)return{};var o={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;o[n]=e[n]}return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)o=r[n],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(a[o]=e[o])}return a}(e,l);return r.createElement("svg",i({xmlns:"http://www.w3.org/2000/svg",id:"cross-icon",className:"icon",width:14,height:14,viewBox:"0 0 14.001 14",ref:t,"aria-labelledby":a},c),o?r.createElement("title",{id:a},o):null,n||(n=r.createElement("path",{id:"cross-outline",className:"path fill primary",d:"M7,7.424.425,14,0,13.576,6.577,7,0,.424.425,0,7,6.576,13.576,0,14,.425,7.425,7,14,13.576,13.577,14Z",fill:"#464646"})))},s=(0,r.forwardRef)(c);o.p;var p=o(64961),d=o(60486),u=o(40838),f=o(6833),m=o(82406),v=o(20494),h=o(55495),g=o(10479),w=o(47245),y=o(26154),k=o(12950),E=o(10909),b=o(7345),W=o(30808),S=o(90302),A=o(12638);function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var n,a,r,l,i=[],c=!0,s=!1;try{if(r=(o=o.call(e)).next,0===t){if(Object(o)!==o)return;c=!1}else for(;!(c=(n=r.call(o)).done)&&(i.push(n.value),i.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=o.return&&(l=o.return(),Object(l)!==l))return}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return P(e,t);var o={}.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?P(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=Array(t);o<t;o++)n[o]=e[o];return n}const O=function(e){var t,o,n,l=e.isLoading,i=e.approvalWorkflowList,c=e.onSearchQueryClear,s=e.handleApprovalWorkflowDelete,f=e.searchQuery,m=e["data-componentid"],h=void 0===m?"approval-workflow-list":m,k=(0,g.$)(["approvalWorkflows"]).t,E=(0,w.v9)((function(e){return e.config.ui.features})),b=C((0,r.useState)(!1),2),W=b[0],P=b[1],O=C((0,r.useState)(),2),L=O[0],j=O[1],T=(0,w.v9)((function(e){return e.auth.isPrivilegedUser})),I=(0,a.EV)(null==E||null===(t=E.approvalWorkflows)||void 0===t||null===(t=t.scopes)||void 0===t?void 0:t.create),R=(0,a.EV)(null==E||null===(o=E.approvalWorkflows)||void 0===o||null===(o=o.scopes)||void 0===o?void 0:o.update),V=(0,a.EV)(null==E||null===(n=E.approvalWorkflows)||void 0===n||null===(n=n.scopes)||void 0===n?void 0:n.delete),_=function(e){u.m.push(d.$.getPaths().get("APPROVAL_WORKFLOW_EDIT").replace(":id",e))},z=function(){return f?r.createElement(v.$J,{"data-componentid":"".concat(h,"-empty-placeholder-search"),action:r.createElement(v.Qj,{onClick:c},k("approvalWorkflows:form.placeholders.emptySearch.action")),image:(0,p.jF)().emptySearch,imageSize:"tiny",title:k("approvalWorkflows:form.placeholders.emptySearch.title"),subtitle:[k("approvalWorkflows:form.placeholders.emptySearch.subtitles.0",{searchQuery:f})]}):0===(null==i?void 0:i.length)?I?r.createElement(v.$J,{"data-componentid":"".concat(h,"-empty-placeholder-create"),action:r.createElement(a.di,{when:null==E||null===(e=E.approvalWorkflows)||void 0===e||null===(e=e.scopes)||void 0===e?void 0:e.create},r.createElement(v.KM,{onClick:function(){return u.m.push(d.$.getPaths().get("APPROVAL_WORKFLOW_CREATE"))}},r.createElement(y.Z,{name:"add"}),k("approvalWorkflows:form.placeholders.emptyList.action"))),image:(0,p.jF)().newList,imageSize:"tiny",title:k("approvalWorkflows:form.placeholders.emptyList.title"),subtitle:[k("approvalWorkflows:form.placeholders.emptyList.subtitles.0"),k("approvalWorkflows:form.placeholders.emptyList.subtitles.1")]}):r.createElement(v.$J,{"data-componentid":"".concat(h,"-empty-placeholder-readonly"),image:(0,p.jF)().newList,imageSize:"tiny",title:k("approvalWorkflows:form.placeholders.emptyListReadOnly.title"),subtitle:[k("approvalWorkflows:form.placeholders.emptyListReadOnly.subtitles.0")]}):null;var e};return r.createElement(r.Fragment,null,r.createElement(v.wQ,{"data-componentid":"".concat(h,"-list"),className:"workflow-models-table",isLoading:l,loadingStateOptions:{count:S.r.DEFAULT_RESOURCE_LIST_ITEM_LIMIT,imageType:"square"},actions:[{"data-componentid":"".concat(h,"-list-item-edit-button"),icon:function(){return R?"pencil alternate":"eye"},onClick:function(e,t){_(null==t?void 0:t.id)},popupText:function(){return k(R?"common:edit":"common:view")},renderer:"semantic-icon"},{"data-componentid":"".concat(h,"-list-item-delete-button"),hidden:function(){return!V||T},icon:function(){return"trash alternate"},onClick:function(e,t){j(t),P(!0)},popupText:function(){return k("approvalWorkflows:pageLayout.list.popups.delete")},renderer:"semantic-icon"}],columns:[{allowToggleVisibility:!1,dataIndex:"name",id:"name",key:"name",render:function(e){return r.createElement(A.Z,{image:!0,as:"h6",className:"header-with-icon"},r.createElement(v.JT,{image:r.createElement(v.Xo,{name:null==e?void 0:e.name[0],size:"mini","data-componentid":"".concat(h,"-item-image-inner")}),size:"mini",spaced:"right","data-componentid":"".concat(h,"-item-image")}),r.createElement(A.Z.Content,null,e.name,e.description&&r.createElement(A.Z.Subheader,null,e.description.length>90?e.description.slice(0,90)+"...":e.description)))},title:k("approvalWorkflows:list.columns.name")},{allowToggleVisibility:!1,dataIndex:"action",id:"actions",key:"actions",textAlign:"right",title:k("approvalWorkflows:list.columns.actions")}],placeholders:z(),data:i,onRowClick:function(e,t){_(null==t?void 0:t.id)},transparent:!l&&null!==z(),showHeader:!1}),W&&r.createElement(v.cV,{"data-componentid":"".concat(h,"-delete-confirmation-modal"),onClose:function(){return P(!1)},type:"negative",open:W,assertionHint:k("approvalWorkflows:confirmation.hint"),assertionType:"checkbox",primaryAction:"Confirm",secondaryAction:"Cancel",onSecondaryActionClick:function(){return P(!1)},onPrimaryActionClick:function(){s(L),P(!1)},closeOnDimmerClick:!1},r.createElement(v.cV.Header,{"data-componentid":"".concat(h,"-delete-confirmation-modal-header")},k("approvalWorkflows:confirmation.header")),r.createElement(v.cV.Message,{attached:!0,negative:!0,"data-componentid":"".concat(h,"-delete-confirmation-modal-message")},k("approvalWorkflows:confirmation.message")),r.createElement(v.cV.Content,{"data-componentid":"".concat(h,"-delete-confirmation-modal-content")},k("approvalWorkflows:confirmation.content"))))};function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var n,a,r,l,i=[],c=!0,s=!1;try{if(r=(o=o.call(e)).next,0===t){if(Object(o)!==o)return;c=!1}else for(;!(c=(n=r.call(o)).done)&&(i.push(n.value),i.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=o.return&&(l=o.return(),Object(l)!==l))return}finally{if(s)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return j(e,t);var o={}.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?j(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=Array(t);o<t;o++)n[o]=e[o];return n}const T=function(e){var t,o=e["data-componentid"],n=void 0===o?"approval-workflows":o,l=(0,g.$)(["approvalWorkflows"]).t,i=(0,w.v9)((function(e){return e.config.ui.features})),c=L((0,r.useState)([]),2),S=c[0],A=c[1],C=L((0,r.useState)(0),2),P=C[0],j=C[1],T=L((0,r.useState)(10),2),I=T[0],R=T[1],V=L((0,r.useState)(""),2),_=V[0],z=V[1],x=L((0,r.useState)(""),2),$=x[0],Q=x[1],U=L((0,r.useState)(!0),2),Z=U[0],F=U[1],M=L((0,r.useState)(0),2),D=M[0],N=M[1],J=(0,w.I0)(),K=(0,W.z)(I,P,$,!0),H=K.data,q=K.error,B=K.isLoading,G=K.mutate;(0,r.useEffect)((function(){if(H){var e=H.workflows;A(e),F(!1),N(H.totalResults)}}),[H]),(0,r.useEffect)((function(){var e,t,o,n;q&&J((0,m.V_)({description:null!==(e=null==q||null===(t=q.response)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.description)&&void 0!==e?e:l("approvalWorkflows:notifications.fetchApprovalWorkflows.genericError.description"),level:f.QU.ERROR,message:null!==(o=null==q||null===(n=q.response)||void 0===n||null===(n=n.data)||void 0===n?void 0:n.message)&&void 0!==o?o:l("approvalWorkflows:notifications.fetchApprovalWorkflows.genericError.message")}))}),[q]);var X=(0,r.useCallback)((0,h.Z)((function(e){Q(e)}),1e3),[]),Y=function(){z(""),Q("")},ee=function(e){J((0,m.V_)(e))};return r.createElement(v.Xg,{"data-componentid":"".concat(n,"-page-layout"),action:!B&&(null==S?void 0:S.length)>0&&r.createElement(a.di,{when:null==i||null===(t=i.approvalWorkflows)||void 0===t||null===(t=t.scopes)||void 0===t?void 0:t.create},r.createElement(v.KM,{"data-componentid":"".concat(n,"-add-button"),onClick:function(){return u.m.push(d.$.getPaths().get("APPROVAL_WORKFLOW_CREATE"))}},r.createElement(y.Z,{"data-componentid":"".concat(n,"-add-button-icon"),name:"add"}),l("roles:list.buttons.addButton",{type:"Approval Workflow"}))),title:l("pages:approvalWorkflows.title"),pageTitle:l("pages:approvalWorkflows.title"),description:l("pages:approvalWorkflows.subTitle")},r.createElement(v.PS,{"data-componentid":"".concat(n,"-list-layout"),currentListSize:I,listItemLimit:I,onItemsPerPageDropdownChange:function(e,t){R(t.value)},onPageChange:function(e,t){j((t.activePage-1)*I)},showPagination:!0,totalPages:Math.ceil(D/I),totalListSize:D,isLoading:Z,leftActionPanel:r.createElement("div",{className:"advanced-search-wrapper aligned-left fill-default","data-componentid":"".concat(n,"-advanced-search-wrapper")},r.createElement(k.Z,{"data-componentid":"".concat(n,"-search-input"),className:"advanced-search with-add-on",icon:"search",iconPosition:"left",value:_,onChange:function(e){var t=e.target.value;z(t),X(t)},placeholder:l("approvalWorkflows:advancedSearch.placeholder"),floated:"right",size:"small",action:_?r.createElement(v.GI,{"data-componentid":"".concat(n,"-clear-search-popup"),trigger:r.createElement(E.Z,{basic:!0,compact:!0,className:"input-add-on workflows","data-componentid":"".concat(n,"-clear-search-button")},r.createElement(v.dn,{"data-componentid":"".concat(n,"-clear-search-icon"),size:"nano",defaultIcon:!0,transparent:!0,icon:s,onClick:Y})),position:"top center",content:l("console:common.advancedSearch.popups.clear"),inverted:!0}):null}))},q?r.createElement(v.$J,{"data-componentid":"".concat(n,"-empty-placeholder"),subtitle:[l("approvalWorkflows:form.placeholders.ApprovalWorkflowError.subtitles.0"),l("approvalWorkflows:form.placeholders.ApprovalWorkflowError.subtitles.1")],title:l("approvalWorkflows:form.placeholders.ApprovalWorkflowError.title"),image:(0,p.jF)().genericError,imageSize:"tiny"}):r.createElement(O,{"data-componentid":"".concat(n,"-model-list"),isLoading:B,approvalWorkflowList:S,onSearchQueryClear:Y,handleApprovalWorkflowDelete:function(e){(0,b.Yz)(e.id).then((function(){ee({description:l("approvalWorkflows:notifications.deleteApprovalWorkflow.success.description"),level:f.QU.SUCCESS,message:l("approvalWorkflows:notifications.deleteApprovalWorkflow.success.message")}),G()})).catch((function(){ee({description:l("approvalWorkflows:notifications.deleteApprovalWorkflow.genericError.description"),level:f.QU.ERROR,message:l("approvalWorkflows:notifications.deleteApprovalWorkflow.genericError.message")})}))},searchQuery:$})))}}}]);