"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[7843],{2123:(e,t,n)=>{n.d(t,{O:()=>l,h:()=>s});var r=n(2292),a=n(76271),i=n(6833),o=r.AsgardeoSPAClient.getInstance().httpRequest.bind(r.AsgardeoSPAClient.getInstance()),l=function(e){var t={data:e,headers:{"Access-Control-Allow-Origin":a.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:i.f2.POST,url:a.h.getState().config.endpoints.guests};return o(t).then((function(e){return Promise.resolve(e)})).catch((function(e){return Promise.reject(e)}))},s=function(e){var t={headers:{"Access-Control-Allow-Origin":a.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:i.f2.DELETE,url:a.h.getState().config.endpoints.guestsList+"/"+e};return o(t).then((function(e){return Promise.resolve(e)})).catch((function(e){return Promise.reject(e)}))}},17370:(e,t,n)=>{n.d(t,{M:()=>o});var r=n(96124),a=n(76271),i=n(6833),o=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t={headers:{"Content-Type":"application/json"},method:i.f2.GET,url:a.h.getState().config.endpoints.guestsList},n=(0,r.Z)(e?t:null),o=n.data,l=n.error;return{data:o,error:l,isLoading:!l&&!o,isValidating:n.isValidating,mutate:n.mutate}}},27843:(e,t,n)=>{n.r(t),n.d(t,{default:()=>nn});var r=n(758),a=n(17901),i=n(55007),o=n(25134),l=n(64961),s=n(60486),u=n(90302),c=n(40838),d=n(43974),m=n(51021),p=n(63264),f=n(75120),v=n(29314),g=n(77742),h=n(38818),y=n(21257),b=n(4717),E=n(61339),S=n(47149),I=n(10319),w=n(58613),U=n(6833),C=n(82406),O=n(20494),R=n(47513),A=n(44194),k=n(10479),T=n(59673),L=n(47245),N=n(26154),P=n(47625),_=n(37077),x=n(92e3),z=n(37520),M=n(86989),Z=n(5466),j=n(62782),W=n(48934),D=n(22939),F=n(70988),V=n(82555),H=n(51835),Q=n.n(H),G=n(27975),K=n.n(G),B=n(55900),$=n.n(B),X=n(21555),q=n.n(X),Y=n(3621),J=n.n(Y),ee=n(5062),te=n.n(ee),ne=n(10050),re={};re.styleTagTransform=te(),re.setAttributes=q(),re.insert=$().bind(null,"head"),re.domAPI=K(),re.insertStyleElement=J();Q()(ne.Z,re);ne.Z&&ne.Z.locals&&ne.Z.locals;const ae=function(e){var t=e.selectedFilters,n=e.onChange,r=e["data-componentid"],a=void 0===r?"account-status-filter-dropdown":r,i=(0,k.$)().t;return A.createElement(M.Z,{className:"account-status-filter-dropdown","data-componentid":a},A.createElement(j.Z,{fullWidth:!0},A.createElement(F.Z,{className:"account-status-select-input",multiple:!0,value:t,onChange:function(e){var t=e.target.value;n("string"==typeof t?t.split(","):t)},renderValue:function(){return A.createElement(M.Z,{className:"dropdown-label-container","data-componentid":"".concat(a,"-label")},i("users:advancedSearch.accountStatusFilter.label"),t.length>0&&A.createElement(z.Z,{className:"status-count-badge",badgeContent:t.length,"data-componentid":"".concat(a,"-label-badge")}))},"data-componentid":"".concat(a,"-select-input"),displayEmpty:!0},V.i4.map((function(e){return A.createElement(D.Z,{key:e.key,value:e.key,"data-componentid":"".concat(a,"-option-").concat(e.key)},A.createElement(Z.Z,{checked:t.indexOf(e.key.toString())>-1,"data-componentid":"".concat(a,"-checkbox-").concat(e.key)}),A.createElement(W.Z,{primary:i(e.text)}))})))))};var ie=n(17370),oe=n(12638),le=n(51907),se=n(92283),ue=n(66796),ce=n(2123);function de(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,l=[],s=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,a=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return me(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?me(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function me(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var pe=function(e){var t,n,r=e.guestUsersList,a=e.getGuestUsersList,o=e.isGuestUsersRequestLoading,s=e.invitationStatusOption,u=e.searchQuery,c=e.onSearchQueryClear,d=e.userTypeSelection,m=e["data-componentid"],p=(0,k.$)().t,f=(0,L.I0)(),v=de((0,A.useState)(!1),2),g=v[0],h=v[1],y=de((0,A.useState)(void 0),2),b=y[0],E=y[1],S=de((0,A.useState)(!1),2),I=S[0],w=S[1],R=de((0,A.useState)(void 0),2),T=R[0],N=R[1],P=de((0,A.useState)(!1),2),_=P[0],x=P[1],z=(0,L.v9)((function(e){return e.config.ui.features})),M=(0,i.EV)(null==z||null===(t=z.users)||void 0===t||null===(t=t.scopes)||void 0===t?void 0:t.update),Z=function(e){x(!0),d===se.rb.EXTERNAL?function(e){return(0,ce.h)(e).then((function(){f((0,C.V_)({description:p("invite:notifications.deleteInvite.success.description"),level:U.QU.SUCCESS,message:p("invite:notifications.deleteInvite.success.message")})),a()})).catch((function(e){var t,n,r,a,i,o,l;null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(t=t.data)&&void 0!==t&&t.description?f((0,C.V_)({description:null!==(n=null!==(r=null==e||null===(a=e.response)||void 0===a||null===(a=a.data)||void 0===a?void 0:a.description)&&void 0!==r?r:null==e||null===(i=e.response)||void 0===i||null===(i=i.data)||void 0===i?void 0:i.detail)&&void 0!==n?n:p("invite:notifications.deleteInvite.error.description"),level:U.QU.ERROR,message:null!==(o=null==e||null===(l=e.response)||void 0===l||null===(l=l.data)||void 0===l?void 0:l.message)&&void 0!==o?o:p("invite:notifications.deleteInvite.error.message")})):f((0,C.V_)({description:p("invite:notifications.deleteInvite.genericError.description"),level:U.QU.ERROR,message:p("invite:notifications.deleteInvite.genericError.message")}))}))}(e).finally((function(){x(!1),h(!1),a()})):function(e){return(0,le.UF)(e).then((function(){f((0,C.V_)({description:p("invite:notifications.deleteInvite.success.description"),level:U.QU.SUCCESS,message:p("invite:notifications.deleteInvite.success.message")})),a()})).catch((function(e){var t,n,r,a,i,o,l;null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(t=t.data)&&void 0!==t&&t.description?f((0,C.V_)({description:null!==(n=null!==(r=null==e||null===(a=e.response)||void 0===a||null===(a=a.data)||void 0===a?void 0:a.description)&&void 0!==r?r:null==e||null===(i=e.response)||void 0===i||null===(i=i.data)||void 0===i?void 0:i.detail)&&void 0!==n?n:p("invite:notifications.deleteInvite.error.description"),level:U.QU.ERROR,message:null!==(o=null==e||null===(l=e.response)||void 0===l||null===(l=l.data)||void 0===l?void 0:l.message)&&void 0!==o?o:p("invite:notifications.deleteInvite.error.message")})):f((0,C.V_)({description:p("invite:notifications.deleteInvite.genericError.description"),level:U.QU.ERROR,message:p("invite:notifications.deleteInvite.genericError.message")}))}))}(e).finally((function(){x(!1),h(!1),a()}))},j=function(e){x(!0),function(e){return(0,le.c_)(e).then((function(){f((0,C.V_)({description:p("invite:notifications.resendInvite.success.description"),level:U.QU.SUCCESS,message:p("invite:notifications.resendInvite.success.message")}))})).catch((function(e){var t,n,r,a,i,o,l;null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(t=t.data)&&void 0!==t&&t.description?f((0,C.V_)({description:null!==(n=null!==(r=null==e||null===(a=e.response)||void 0===a||null===(a=a.data)||void 0===a?void 0:a.description)&&void 0!==r?r:null==e||null===(i=e.response)||void 0===i||null===(i=i.data)||void 0===i?void 0:i.detail)&&void 0!==n?n:p("invite:notifications.resendInvite.error.description"),level:U.QU.ERROR,message:null!==(o=null==e||null===(l=e.response)||void 0===l||null===(l=l.data)||void 0===l?void 0:l.message)&&void 0!==o?o:p("invite:notifications.resendInvite.error.message")})):f((0,C.V_)({description:p("invite:notifications.resendInvite.genericError.description"),level:U.QU.ERROR,message:p("invite:notifications.resendInvite.genericError.message")}))}))}(e).finally((function(){x(!1),w(!1),a()}))},W=function(){return u&&0===(null==r?void 0:r.length)?A.createElement(O.$J,{action:A.createElement(O.Qj,{onClick:c},p("invite:placeholder.emptySearchResultPlaceholder.clearButton")),image:(0,l.jF)().emptySearch,imageSize:"tiny",title:p("invite:placeholder.emptySearchResultPlaceholder.title"),subtitle:[p("invite:placeholder.emptySearchResultPlaceholder.subTitle.0",{query:u}),p("invite:placeholder.emptySearchResultPlaceholder.subTitle.1")]}):0===(null==r?void 0:r.length)?s===ue.XC.EXPIRED?A.createElement(O.$J,{image:(0,l.jF)().newList,imageSize:"tiny",subtitle:[d===se.rb.EXTERNAL?p("parentOrgInvitations:emptyPlaceholder.noExpiredInvitations"):p("parentOrgInvitations:emptyPlaceholder.noCollaboratorUserInvitations")]}):A.createElement(O.$J,{image:(0,l.jF)().newList,imageSize:"tiny",subtitle:[d===se.rb.EXTERNAL?p("parentOrgInvitations:emptyPlaceholder.noPendingInvitations"):"There are no collaborator users with pending invitations at the moment."]}):A.createElement(O.$J,{image:(0,l.jF)().newList,imageSize:"tiny",subtitle:[p("parentOrgInvitations:emptyPlaceholder.noInvitations")]})};return A.createElement(A.Fragment,null,A.createElement(O.wQ,{showSearch:!0,isLoading:o,loadingStateOptions:{count:5,imageType:"circular"},placeholders:W(),actions:[{hidden:function(){return d===se.rb.EXTERNAL||!M},icon:function(){return"redo alternate"},onClick:function(e,t){N(t),w(!0)},popupText:function(){return"resend"},renderer:"semantic-icon"},{"data-componentid":"".concat(m,"-users-list-item-delete-invitation-button"),hidden:function(){return!M},icon:function(){return"trash alternate"},onClick:function(e,t){E(t),h(!0)},popupText:function(){return"delete"},renderer:"semantic-icon"}],data:r,columns:(n=[{allowToggleVisibility:!1,dataIndex:"email",id:"email",key:0,render:function(e){return A.createElement(oe.Z,{image:!0,as:"h6",className:"header-with-icon","data-componentid":"".concat(m,"-item-image")},A.createElement(O.Yt,{"data-componentid":"".concat(m,"-item-image-inner"),name:e.email,size:"mini",image:e.email,spaced:"right"}),A.createElement(oe.Z.Content,null,d===se.rb.EXTERNAL?null==e?void 0:e.username:null==e?void 0:e.email))},title:"User"},{allowToggleVisibility:!1,dataIndex:"status",id:"status",key:1,render:function(e){var t=e.status;return A.createElement(oe.Z,{as:"h6","data-componentid":"".concat(m,"-invite-status")},A.createElement(oe.Z.Content,null,A.createElement(oe.Z.Subheader,null,t.charAt(0).toUpperCase()+t.slice(1).toLowerCase())))},textAlign:"left",title:"Invitation Status"},{allowToggleVisibility:!1,dataIndex:"action",id:"actions",key:3,textAlign:"right",title:""}],n),onRowClick:function(){return null},showHeader:!1,transparent:!o&&null!==W()}),g&&A.createElement(O.cV,{primaryActionLoading:_,"data-componentid":"".concat(m,"-confirmation-modal"),onClose:function(){return h(!1)},type:"negative",open:g,assertion:b.email,assertionHint:p("invite:confirmationModal.deleteInvite.assertionHint"),assertionType:"checkbox",primaryAction:"Confirm",secondaryAction:"Cancel",onSecondaryActionClick:function(){return h(!1)},onPrimaryActionClick:function(){return Z(b.id)},closeOnDimmerClick:!1},A.createElement(O.cV.Header,{"data-componentid":"".concat(m,"-confirmation-modal-header")},p("invite:confirmationModal.deleteInvite.header")),A.createElement(O.cV.Message,{"data-componentid":"".concat(m,"-confirmation-modal-message"),attached:!0,negative:!0},p("invite:confirmationModal.deleteInvite.message")),A.createElement(O.cV.Content,{"data-componentid":"".concat(m,"-confirmation-modal-content")},p("invite:confirmationModal.deleteInvite.content"))),I&&A.createElement(O.cV,{primaryActionLoading:_,"data-componentid":"".concat(m,"-confirmation-modal"),onClose:function(){return w(!1)},type:"warning",open:I,assertion:T.email,assertionHint:p("invite:confirmationModal.resendInvite.assertionHint"),assertionType:"checkbox",primaryAction:"Confirm",secondaryAction:"Cancel",onSecondaryActionClick:function(){return w(!1)},onPrimaryActionClick:function(){return j(T.id)},closeOnDimmerClick:!1},A.createElement(O.cV.Header,{"data-componentid":"".concat(m,"-confirmation-modal-header")},p("invite:confirmationModal.resendInvite.header")),A.createElement(O.cV.Message,{"data-componentid":"".concat(m,"-confirmation-modal-message"),attached:!0,warning:!0},p("invite:confirmationModal.resendInvite.message")),A.createElement(O.cV.Content,{"data-componentid":"".concat(m,"-confirmation-modal-content")},p("invite:confirmationModal.resendInvite.content"))))},fe=n(41355),ve=n(74411),ge=n(48704),he=n(86105),ye=n(16590),be=n(50699),Ee=n(13932),Se=n(78779),Ie=n(22669);function we(e){return we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},we(e)}function Ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ue(Object(n),!0).forEach((function(t){Oe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Oe(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=we(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=we(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==we(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Re(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,l=[],s=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,a=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}(e,t)||Ae(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ae(e,t){if(e){if("string"==typeof e)return ke(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ke(e,t):void 0}}function ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Te=function(e){var t,n,r,a,o=e.advancedSearch,d=e.defaultListItemLimit,m=e.onUserDelete,p=e.isLoading,f=e.featureConfig,v=e.onColumnSelectionChange,g=e.onListItemClick,h=e.onSearchQueryClear,b=e.searchQuery,E=e.selection,S=e.showListItemActions,I=e.showMetaContent,R=e.userMetaListContent,T=e.usersList,P=e.isReadOnlyUserStore,z=e["data-testid"],M=(0,k.$)().t,Z=(0,L.I0)(),j=(0,y.z)().isSubOrganization,W=(0,w.Z)().readOnlyUserStoreNamesList,D=Re((0,A.useState)(!1),2),F=D[0],V=D[1],H=Re((0,A.useState)(void 0),2),Q=H[0],G=H[1],K=Re((0,A.useState)(!1),2),B=K[0],$=K[1],X=(0,L.v9)((function(e){var t;return null==e||null===(t=e.auth)||void 0===t?void 0:t.providedUsername})),q=(0,L.v9)((function(e){return e.auth.isPrivilegedUser})),Y=!(null!=f&&null!==(t=f.users)&&void 0!==t&&null!==(t=t.disabledFeatures)&&void 0!==t&&t.includes(se._F.FEATURE_DICTIONARY.get("USER_SHARED_PROFILES"))),J=(0,i.EV)(null==f||null===(n=f.users)||void 0===n||null===(n=n.scopes)||void 0===n?void 0:n.update),ee=(0,i.EV)(null==f||null===(r=f.users)||void 0===r||null===(r=r.scopes)||void 0===r?void 0:r.delete),te=function(e){c.m.push(s.$.getPaths().get("USER_EDIT").replace(":id",e))},ne=function(){return b?A.createElement(O.$J,{action:A.createElement(O.Qj,{onClick:h},M("users:usersList.search.emptyResultPlaceholder.clearButton")),image:(0,l.jF)().emptySearch,imageSize:"tiny",title:M("users:usersList.search.emptyResultPlaceholder.title"),subtitle:[M("users:usersList.search.emptyResultPlaceholder.subTitle.2"),M("users:usersList.search.emptyResultPlaceholder.subTitle.1")]}):(0,be.Z)(T)||0===T.totalResults?A.createElement(O.$J,{"data-testid":"".concat(z,"-empty-placeholder"),image:(0,l.jF)().newList,imageSize:"tiny",title:M(P?"users:usersList.list.emptyResultPlaceholder.emptyUsers":"users:usersList.list.emptyResultPlaceholder.title"),subtitle:P?[M("users:usersList.list.emptyResultPlaceholder.subTitle.0")]:[M("users:usersList.list.emptyResultPlaceholder.subTitle.0"),M("users:usersList.list.emptyResultPlaceholder.subTitle.1"),M("users:usersList.list.emptyResultPlaceholder.subTitle.2")]}):null};return A.createElement(A.Fragment,null,A.createElement(O.wQ,{className:"users-table",externalSearch:o,isLoading:p,loadingStateOptions:{count:null!=d?d:u.r.DEFAULT_RESOURCE_LIST_ITEM_LIMIT,imageType:"circular"},actions:function(){if(S){var e=[{"data-componentid":"users-list-item-edit-button","data-testid":"users-list-item-edit-button",hidden:function(){return!(0,he.cr)(null==f?void 0:f.users,se._F.FEATURE_DICTIONARY.get("USER_READ"))},icon:function(e){var t,n,r,a=(null==e||null===(t=e.userName)||void 0===t?void 0:t.split("/").length)>1?null==e||null===(n=e.userName)||void 0===n?void 0:n.split("/")[0]:ge.w.primaryUserstoreName;return!J||!(0,he.cr)(null==f?void 0:f.users,se._F.FEATURE_DICTIONARY.get("USER_UPDATE"))||null!=W&&W.includes(a.toString())||!Y&&null!==(r=e[fe.k.scim.systemSchema])&&void 0!==r&&r.managedOrg?"eye":"pencil alternate"},onClick:function(e,t){return te(null==t?void 0:t.id)},popupText:function(e){var t,n,r,a=(null==e||null===(t=e.userName)||void 0===t?void 0:t.split("/").length)>1?null==e||null===(n=e.userName)||void 0===n?void 0:n.split("/")[0]:ge.w.primaryUserstoreName;return!J||!(0,he.cr)(null==f?void 0:f.users,se._F.FEATURE_DICTIONARY.get("USER_UPDATE"))||null!=W&&W.includes(a.toString())||!Y&&null!==(r=e[fe.k.scim.systemSchema])&&void 0!==r&&r.managedOrg?M("common:view"):M("common:edit")},renderer:"semantic-icon"}];return e.push({"data-componentid":"users-list-item-delete-button","data-testid":"users-list-item-delete-button",hidden:function(e){var t,n,r,a,i,o,l=(null==e||null===(t=e.userName)||void 0===t?void 0:t.split("/").length)>1?null==e||null===(n=e.userName)||void 0===n?void 0:n.split("/")[0]:ge.w.primaryUserstoreName;return!(!j()||null===(r=e[null===fe.k||void 0===fe.k||null===(a=fe.k.scim)||void 0===a?void 0:a.systemSchema])||void 0===r||!r.sharedType||(null===(i=e[null===fe.k||void 0===fe.k||null===(o=fe.k.scim)||void 0===o?void 0:o.systemSchema])||void 0===i?void 0:i.sharedType)===se.P2.INVITED)||(!(0,he.cr)(null==f?void 0:f.users,se._F.FEATURE_DICTIONARY.get("USER_DELETE"))||!ee||(null==W?void 0:W.includes(l.toString()))||X===(0,he.WX)(null==e?void 0:e.userName)&&q)},icon:function(){return"trash alternate"},onClick:function(e,t){V(!0),G(t)},popupText:function(){return M("users:usersList.list.iconPopups.delete")},renderer:"semantic-icon"}),e}}(),columns:function(){var e=[{allowToggleVisibility:!1,dataIndex:"name",id:"name",key:"name",render:function(e){var t,n,r,a,i=(0,he.WX)(null==e?void 0:e.userName),o=Ie.QH.resolveUserListSubheader(e),l=void 0===(null===(t=e.name)||void 0===t?void 0:t.familyName)&&void 0===(null===(n=e.name)||void 0===n?void 0:n.givenName);return A.createElement(oe.Z,{image:!0,as:"h6",className:"header-with-icon","data-componentid":"".concat(z,"-item-heading")},A.createElement(O.Yt,{"data-componentid":"users-list-item-image",name:Ie.QH.resolveAvatarUsername(e),size:"mini",image:e.profileUrl,spaced:"right","data-hj-suppress":""}),function(e){var t,n,r,a,i,o,l="true"===(null===(t=e[ve.x.userProfileSchema])||void 0===t?void 0:t.accountLocked)||!0===(null===(n=e[ve.x.userProfileSchema])||void 0===n?void 0:n.accountLocked),s="true"===(null===(r=e[ve.x.userProfileSchema])||void 0===r?void 0:r.accountDisabled)||!0===(null===(a=e[ve.x.userProfileSchema])||void 0===a?void 0:a.accountDisabled),u=null===(i=e[ve.x.userProfileSchema])||void 0===i?void 0:i.lockedReason,c=null!==(o=se.Dk[u])&&void 0!==o?o:se.Dk.DEFAULT;return s?A.createElement(O.GI,{trigger:A.createElement(N.Z,{className:"disabled-icon",size:"small"},A.createElement(Ee.r,null)),content:M("user:profile.accountDisabled"),inverted:!0}):l?A.createElement(O.GI,{trigger:A.createElement(N.Z,{className:"locked-icon",size:"small"},A.createElement(Se.r,null)),content:M(c),inverted:!0}):null}(e),A.createElement(oe.Z.Content,{className:"pl-0"},A.createElement("div",null,i,(null===ve.x||void 0===ve.x?void 0:ve.x.disableManagedByColumn)&&(null===(r=e[null===fe.k||void 0===fe.k||null===(a=fe.k.scim)||void 0===a?void 0:a.systemSchema])||void 0===r?void 0:r.managedOrg)&&A.createElement(_.Z,{size:"mini",className:"client-id-label"},M("parentOrgInvitations:invitedUserLabel"))),!l&&A.createElement(oe.Z.Subheader,{"data-componentid":"".concat(z,"-item-sub-heading")},o)))},title:"User"}];if(!ve.x.disableManagedByColumn&&e.push({allowToggleVisibility:!1,dataIndex:"idpType",id:"idpType",key:"idpType",render:function(e){return function(e){var t,n,r,a,i;if(null!==(t=e[null===fe.k||void 0===fe.k||null===(n=fe.k.scim)||void 0===n?void 0:n.systemSchema])&&void 0!==t&&t.managedOrg)return se._F.MANAGED_BY_PARENT_TEXT;var o=(null==e||null===(r=e.userName)||void 0===r?void 0:r.split("/").length)>1?null==e||null===(a=e.userName)||void 0===a||null===(a=a.split("/")[0])||void 0===a?void 0:a.toUpperCase():ge.w.primaryUserstoreName,l=null===(i=e[fe.k.scim.systemSchema])||void 0===i?void 0:i.idpType;return l?l.split("/").length>1?null!=W&&W.includes(o.toString())?l.split("/")[1]+"-remote":l.split("/")[1]:l:"N/A"}(e)},title:A.createElement(A.Fragment,null,A.createElement("div",{className:"header-with-popup"},A.createElement("span",null,M("extensions:manage.users.list.columns.idpType")),A.createElement(O.GI,{trigger:A.createElement("div",{className:"inline"},A.createElement(N.Z,{disabled:!0,name:"info circle",className:"link pointing pl-1"})),content:M("extensions:manage.users.list.popups.content.idpTypeContent"),position:"top center",size:"mini",hideOnScroll:!0,inverted:!0})))}),e.push({allowToggleVisibility:!1,dataIndex:"action",id:"actions",key:"actions",textAlign:"right",title:""}),!I||!R)return e;var t,n=[],r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Ae(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw i}}}}(R.entries());try{for(r.s();!(t=r.n()).done;){var a=Re(t.value,2),i=a[0],o=a[1];if("name"!==i&&"emails"!==i&&"profileUrl"!==i&&""!==o){var l={allowToggleVisibility:!0,dataIndex:o,id:i,key:i,title:o};"meta.lastModified"===i&&(l=Ce(Ce({},l),{},{render:function(e){var t;return ye.CommonUtils.humanizeDateDifference(null==e||null===(t=e.meta)||void 0===t?void 0:t.lastModified)}})),"userName"===i&&(l=Ce(Ce({},l),{},{render:function(e){return(0,he.WX)(null==e?void 0:e.userName)}})),n.push(l)}}}catch(s){r.e(s)}finally{r.f()}return n.unshift(e[0]),n.push(e[1]),n}(),data:null==T?void 0:T.Resources,onColumnSelectionChange:v,onRowClick:function(e,t){te(null==t?void 0:t.id),g&&g(e,t)},placeholders:ne(),selectable:E,showHeader:!0,transparent:!p&&null!==ne(),"data-testid":z}),A.createElement(O.cV,{primaryActionLoading:B,"data-testid":"".concat(z,"-confirmation-modal"),"data-componentid":"".concat(z,"-confirmation-modal"),onClose:function(){return V(!1)},type:"negative",open:F,assertionHint:M("user:deleteUser.confirmationModal.assertionHint"),assertionType:"checkbox",primaryAction:"Confirm",secondaryAction:"Cancel",onSecondaryActionClick:function(){V(!1)},onPrimaryActionClick:function(){var e;$(!0),(e=null==Q?void 0:Q.id,(0,x.h8)(e).then((function(e){204===e.status?Z((0,C.V_)({description:M("users:notifications.deleteUser.success.description"),level:U.QU.SUCCESS,message:M("users:notifications.deleteUser.success.message")})):202===e.status&&Z((0,C.V_)({description:M("users:notifications.deleteUserPendingApproval.success.description"),level:U.QU.WARNING,message:M("users:notifications.deleteUserPendingApproval.success.message")})),m()})).catch((function(e){if(e.response&&e.response.data){var t=M("users:notifications.deleteUser.genericError.description");return e.response.data.description?t=e.response.data.description:e.response.data.detail&&(t=e.response.data.detail),void Z((0,C.V_)({description:t,level:U.QU.ERROR,message:M("users:notifications.deleteUser.error.message")}))}}))).finally((function(){$(!1),G(void 0),V(!1)}))},closeOnDimmerClick:!1},A.createElement(O.cV.Header,{"data-testid":"".concat(z,"-confirmation-modal-header"),"data-componentid":"".concat(z,"-confirmation-modal-header")},M("user:deleteUser.confirmationModal.header")),A.createElement(O.cV.Message,{"data-testid":"".concat(z,"-confirmation-modal-message"),attached:!0,negative:!0},M("user:deleteUser.confirmationModal.message")),A.createElement(O.cV.Content,{"data-testid":"".concat(z,"-confirmation-modal-content"),"data-componentid":"".concat(z,"-confirmation-modal-content")},Q&&null!==(a=Q[fe.k.scim.systemSchema])&&void 0!==a&&a.userSourceId?M("user:deleteJITUser.confirmationModal.content"):M("user:deleteUser.confirmationModal.content"))))};Te.defaultProps={selection:!0,showListItemActions:!0,showMetaContent:!0};var Le=n(81908),Ne=n(52514),Pe=n(5315),_e=n(91970),xe=n(21073),ze=n(91501),Me=n(7603),Ze=n(50342),je=n(6894),We=n(12380),De=n(12252),Fe=n(17028),Ve=n(917),He=n(54274),Qe=n(39203),Ge=n(29494),Ke=n(33839),Be=n(76004),$e=n.n(Be),Xe=n(64157),qe=n(89141),Ye=n(10909),Je=n(77757),et=n(78768),tt=n(6643),nt=n(99925),rt=n(75100),at=n(93263);function it(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,l=[],s=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,a=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ot(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ot(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ot(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var lt=function(e){var t=e.responseList,n=e.isLoading,r=e.bulkResponseSummary,a=e.hasError,i=e.successAlert,s=e["data-componentid"],c=it((0,A.useState)(!1),2),d=c[0],m=c[1],p=it((0,A.useState)(""),2),f=p[0],v=p[1],g=it((0,A.useState)(se.IC.ALL),2),h=g[0],y=g[1],b=it((0,A.useState)([]),2),E=b[0],S=b[1],I=it((0,A.useState)(se.tr.USER_CREATION),2),w=I[0],U=I[1],C=it((0,A.useState)(0),2),R=C[0],L=C[1],N=(0,k.$)().t,x=r.failedUserCreation+r.successUserCreation,z=r.failedUserAssignment+r.successUserAssignment,M=u.r.DEFAULT_RESOURCE_LIST_ITEM_LIMIT,Z=[{key:0,text:"All",value:se.IC.ALL},{key:1,text:N("user:modals.bulkImportUserWizard.wizardSummary.tableStatus.success"),value:se.IC.SUCCESS},{key:2,text:N("user:modals.bulkImportUserWizard.wizardSummary.tableStatus.failed"),value:se.IC.FAILED}],j=[{key:0,text:N("user:modals.bulkImportUserWizard.wizardSummary.responseOperationType.userCreation"),value:se.tr.USER_CREATION},{key:1,text:N("user:modals.bulkImportUserWizard.wizardSummary.responseOperationType.roleAssignment"),value:se.tr.ROLE_ASSIGNMENT}];(0,A.useEffect)((function(){W()}),[t]),(0,A.useEffect)((function(){Q(),y(se.IC.ALL),W()}),[w]);var W=function(){var e=t.filter((function(e){return e.operationType===w}));S(e)};(0,A.useEffect)((function(){!function(){var e=null==t?void 0:t.filter((function(e){return(null==e?void 0:e.operationType)===w}));if(f&&""!==f){var n=it(f.split(" "),3),r=n[1],a=n[2];e=e.filter((function(e){var t,n,i;if(h!==se.IC.ALL&&e.statusCode!==h)return!1;switch(r){case"sw":return null===(t=e.resourceIdentifier)||void 0===t?void 0:t.startsWith(a);case"ew":return null===(n=e.resourceIdentifier)||void 0===n?void 0:n.endsWith(a);case"co":return null===(i=e.resourceIdentifier)||void 0===i?void 0:i.includes(a);case"eq":return e.resourceIdentifier===a;default:return!1}}))}h!==se.IC.ALL&&(e=e.filter((function(e){return e.statusCode===h&&e.operationType===w}))),S(e)}()}),[f,h]);var D,F,V,H,Q=function(){m(!d),v("")},G=function(e,t){var n=j.find((function(e){return e.key===t}));n&&(U(n.value),L(t))},K=w===se.tr.USER_CREATION?[{key:0,text:N("users:advancedSearch.form.dropdown.filterAttributeOptions.username"),value:"userName"}]:[{key:1,text:N("user:modals.bulkImportUserWizard.wizardSummary.advanceSearch.roleGroupFilterAttributePlaceHolder"),value:"roleName"}];return A.createElement(A.Fragment,null,A.createElement(qe.Z.Row,{columns:1},A.createElement(qe.Z.Column,{mobile:16,tablet:16,computer:16},n||a?null:0===r.failedUserCreation&&0===r.failedUserAssignment?null!=i?i:A.createElement(_e.Z,{severity:"success","data-componentid":"".concat(s,"-success-alert")},A.createElement(nt.Z,{"data-componentid":"".concat(s,"-success-alert-title")},N("user:modals.bulkImportUserWizard.wizardSummary.alerts.importSuccess.message")),N("user:modals.bulkImportUserWizard.wizardSummary.alerts.importSuccess.description")):A.createElement(_e.Z,{severity:"error","data-componentid":"".concat(s,"-error-alert")},A.createElement(nt.Z,{"data-componentid":"".concat(s,"-error-alert-title")},N("user:modals.bulkImportUserWizard.wizardSummary.alerts.importFailed.message")),0!==r.failedUserCreation&&A.createElement("li",null,A.createElement(T.c,{i18nKey:"user:modals.bulkImportUserWizard.wizardSummary.alerts.importFailed.userCreation",tOptions:{failedUserCreationCount:r.failedUserCreation}},"Issues encountered in",A.createElement("b",null,r.failedUserCreation," user creations"),".")),0!==r.failedUserAssignment&&A.createElement("li",null,A.createElement(T.c,{i18nKey:"user:modals.bulkImportUserWizard.wizardSummary.alerts.importFailed.groupAssignment",tOptions:{failedUserAssignmentCount:r.failedUserAssignment}},"Issues encountered in",A.createElement("b",null,r.failedUserAssignment," group assignments"),". Users in the affected groups were created but not assigned. Please navigate to User Management section to review  and assign groups to the users."))))),A.createElement(qe.Z.Row,{columns:1},A.createElement(qe.Z.Column,{mobile:16,tablet:16,computer:16},A.createElement(at.Z,{value:R,onChange:G,"component-id":"".concat(s,"-operation-type-tab")},j.map((function(e){return A.createElement(rt.Z,{key:e.key,label:A.createElement("div",{className:"beta-feature-tab-item"},A.createElement(Ze.Z,{sx:{fontWeight:500}},e.text)),"data-componentid":"".concat(s,"-").concat(e.value,"-tab")})}))))),A.createElement(qe.Z.Row,{columns:1},A.createElement(qe.Z.Column,{mobile:16,tablet:16,computer:16},A.createElement(O.PS,{advancedSearch:A.createElement(o.n,{onFilter:function(e){v(e),e||W()},filterAttributeOptions:K,filterAttributePlaceholder:w===se.tr.USER_CREATION?N("users:advancedSearch.form.dropdown.filterAttributeOptions.username"):N("user:modals.bulkImportUserWizard.wizardSummary.advanceSearch.roleGroupFilterAttributePlaceHolder"),filterConditionsPlaceholder:N("users:advancedSearch.form.inputs.filterCondition.placeholder"),filterValuePlaceholder:N("users:advancedSearch.form.inputs.filterValue.placeholder"),placeholder:w===se.tr.USER_CREATION?N("user:modals.bulkImportUserWizard.wizardSummary.advanceSearch.searchByUsername"):N("user:modals.bulkImportUserWizard.wizardSummary.advanceSearch.searchByGroup"),defaultSearchAttribute:"resourceName",defaultSearchOperator:"co",triggerClearQuery:d,"data-testid":"".concat(s,"-advanced-search"),"data-componentid":"".concat(s,"-advanced-search")}),rightActionPanel:A.createElement(A.Fragment,null,A.createElement(P.Z,{"data-testid":"".concat(s,"-filter-status-dropdown"),"data-componentid":"".concat(s,"-filter-status-dropdown"),selection:!0,options:Z,onChange:function(e,t){var n=t.value;y(n),m(!d)},value:h,disabled:(D=w===se.tr.USER_CREATION,F=w===se.tr.ROLE_ASSIGNMENT,V=0===r.failedUserCreation||0===r.successUserCreation,H=0===r.failedUserAssignment||0===r.successUserAssignment,D&&V||F&&H)})),showPagination:!1,showTopActionPanel:!0,totalPages:Math.ceil(x/M),totalListSize:x,isLoading:n,listItemLimit:u.r.DEFAULT_RESOURCE_LIST_ITEM_LIMIT,"data-testid":"".concat(s,"-list-layout"),"data-componentid":"".concat(s,"-list-layout"),onPageChange:function(){return null},disableRightActionPanel:!1},A.createElement(Ze.Z,{variant:"body2",style:{textAlign:"right"}},w===se.tr.USER_CREATION?N("user:modals.bulkImportUserWizard.wizardSummary.totalUserCreationCount")+" : "+x:N("user:modals.bulkImportUserWizard.wizardSummary.totalUserAssignmentCount")+" : "+z),A.createElement(O.wQ,{className:"addon-field-wrapper",isLoading:n,actions:[],columns:[{allowToggleVisibility:!1,dataIndex:"resourceIdentifier",id:"resourceIdentifier",key:"resourceIdentifier",render:function(e){return A.createElement(oe.Z,{as:"h6","data-componentid":"".concat(s,"-username-item-heading")},A.createElement(oe.Z.Content,null,e.resourceIdentifier))},title:N("user:modals.bulkImportUserWizard.wizardSummary.tableHeaders.username")},{allowToggleVisibility:!1,dataIndex:"status",id:"status",key:"status",render:function(e){return A.createElement(oe.Z,{as:"h6","data-componentid":"".concat(s,"-status-item-heading")},A.createElement(oe.Z.Content,null,A.createElement(_.Z,{"data-componentid":"".concat(s,"-bulk-label"),content:e.status,size:"small",color:e.statusCode===se.IC.SUCCESS?"green":"red",className:"group-label"})))},title:N("user:modals.bulkImportUserWizard.wizardSummary.tableHeaders.status")},{allowToggleVisibility:!1,dataIndex:"message",id:"message",key:"message",render:function(e){return A.createElement(oe.Z,{as:"h6","data-componentid":"".concat(s,"-status-item-heading")},A.createElement(oe.Z.Content,null,e.message))},title:N("user:modals.bulkImportUserWizard.wizardSummary.tableHeaders.message")}],data:E,onColumnSelectionChange:function(){return null},onRowClick:function(){return null},placeholders:A.createElement(O.$J,{"data-testid":"".concat(s,"-empty-search-result"),"data-componentid":"".concat(s,"-empty-search-result"),action:f?A.createElement(O.Qj,{onClick:Q},N("users:usersList.search.emptyResultPlaceholder.clearButton")):null,image:(0,l.jF)().emptySearch,imageSize:"tiny",title:N("users:usersList.search.emptyResultPlaceholder.title"),subtitle:[N("users:usersList.search.emptyResultPlaceholder.subTitle.0",{query:f||h}),N("users:usersList.search.emptyResultPlaceholder.subTitle.1")]}),transparent:!0,selectable:!1,showHeader:!1,"data-testid":"".concat(s,"-data-table"),"data-componentid":"".concat(s,"-data-table"),loadingStateOptions:{count:u.r.DEFAULT_RESOURCE_LIST_ITEM_LIMIT,imageType:"circular"}})))))};function st(e){return st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},st(e)}function ut(){return ut=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ut.apply(null,arguments)}function ct(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ct(Object(n),!0).forEach((function(t){mt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ct(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function mt(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=st(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=st(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==st(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pt(e){return function(e){if(Array.isArray(e))return Et(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||bt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ft(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=bt(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw i}}}}function vt(){vt=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof h?t:h,o=Object.create(i.prototype),l=new T(r||[]);return a(o,"_invoke",{value:O(e,n,l)}),o}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var m="suspendedStart",p="suspendedYield",f="executing",v="completed",g={};function h(){}function y(){}function b(){}var E={};u(E,o,(function(){return this}));var S=Object.getPrototypeOf,I=S&&S(S(L([])));I&&I!==n&&r.call(I,o)&&(E=I);var w=b.prototype=h.prototype=Object.create(E);function U(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function n(a,i,o,l){var s=d(e[a],e,i);if("throw"!==s.type){var u=s.arg,c=u.value;return c&&"object"==st(c)&&r.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,o,l)}),(function(e){n("throw",e,o,l)})):t.resolve(c).then((function(e){u.value=e,o(u)}),(function(e){return n("throw",e,o,l)}))}l(s.arg)}var i;a(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,a){n(e,r,t,a)}))}return i=i?i.then(a,a):a()}})}function O(t,n,r){var a=m;return function(i,o){if(a===f)throw Error("Generator is already running");if(a===v){if("throw"===i)throw o;return{value:e,done:!0}}for(r.method=i,r.arg=o;;){var l=r.delegate;if(l){var s=R(l,r);if(s){if(s===g)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===m)throw a=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=f;var u=d(t,n,r);if("normal"===u.type){if(a=r.done?v:p,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=v,r.method="throw",r.arg=u.arg)}}}function R(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,R(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var i=d(a,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,g;var o=i.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function L(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(st(t)+" is not iterable")}return y.prototype=b,a(w,"constructor",{value:b,configurable:!0}),a(b,"constructor",{value:y,configurable:!0}),y.displayName=u(b,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,s,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},U(C.prototype),u(C.prototype,l,(function(){return this})),t.AsyncIterator=C,t.async=function(e,n,r,a,i){void 0===i&&(i=Promise);var o=new C(c(e,n,r,a),i);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},U(w),u(w,s,"Generator"),u(w,o,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=L,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return l.type="throw",l.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],l=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;k(n)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:L(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function gt(e,t,n,r,a,i,o){try{var l=e[i](o),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,a)}function ht(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){gt(i,r,a,o,l,"next",e)}function l(e){gt(i,r,a,o,l,"throw",e)}o(void 0)}))}}function yt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,l=[],s=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,a=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}(e,t)||bt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bt(e,t){if(e){if("string"==typeof e)return Et(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Et(e,t):void 0}}function Et(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}lt.defaultProps={isLoading:!1,responseList:[]};var St="identity/askPassword",It="Data validation error",wt="TIMEOUT_ERROR",Ut="addresses#home",Ct="addresses",Ot="bulkId",Rt=function(e){var t=e.closeWizard,n=e.userstore,a=e["data-componentid"],i=(0,k.$)().t,o=(0,y.z)().isSubOrganization,u=(0,Ve.Z)().UIConfig,d=(0,w.Z)(),m=d.isLoading,f=d.isUserStoreReadOnly,v=d.userStoresList,g=(0,L.I0)(),h=yt((0,A.useState)(null),2),b=h[0],E=h[1],S=yt((0,A.useState)(),2),R=S[0],_=S[1],z=yt((0,A.useState)(!1),2),Z=z[0],j=z[1],W=yt((0,A.useState)(!1),2),D=W[0],F=W[1],V=yt((0,A.useState)(!1),2),H=V[0],Q=V[1],G=yt((0,A.useState)([]),2),K=G[0],B=G[1],$=yt((0,A.useState)([]),2),X=$[0],q=$[1],Y=yt((0,A.useState)(!1),2),J=Y[0],ee=Y[1],te=yt((0,A.useState)(!1),2),ne=te[0],re=te[1],ae=yt((0,A.useState)(At),2),ie=ae[0],oe=ae[1],le=yt((0,A.useState)(At),2),ce=le[0],de=le[1],me=yt((0,A.useState)(ue.Wv.MANUAL),2),pe=me[0],fe=me[1],ve=yt((0,A.useState)(),2),ge=ve[0],he=ve[1],ye=yt((0,A.useState)(!1),2),be=ye[0],Ee=ye[1],Se=yt((0,A.useState)(""),2),Ie=Se[0],we=Se[1],Ue=yt((0,A.useState)(),2),Ce=Ue[0],Oe=Ue[1],Re=yt((0,O.IK)({"data-componentid":"".concat(a,"-alert")}),3),Ae=Re[0],ke=Re[1],Te=Re[2],Le=yt((0,O.IK)({"data-componentid":"".concat(a,"-manual-invite-alert")}),3),Be=Le[0],nt=Le[1],rt=Le[2],at=yt((0,A.useState)([]),2),it=at[0],ot=at[1],st=yt((0,A.useState)(null!=n?n:p.wO.primaryUserstoreName),2),ct=st[0],gt=st[1],bt=yt((0,A.useState)(!1),2),Et=bt[0],Rt=bt[1],kt=(0,Ke.Wf)().data,Tt=(0,O.fQ)().getLink,Lt=(0,tt.t$)(kt),Nt="true"===(null==Lt?void 0:Lt.enableValidator),Pt=(0,L.v9)((function(e){return e.config.ui.features.bulkUserImport.fileImportTimeout})),_t=(0,L.v9)((function(e){return e.config.ui.features.bulkUserImport.userLimit})),xt=(0,L.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t?void 0:t.systemReservedUserStores})),zt=(0,A.useMemo)((function(){return new O.Wc(void 0,p.x8.bulkUserImportLimit.fileSize*O.Wc.KILOBYTE,_t||p.x8.bulkUserImportLimit.userCount)}),[_t]),Mt=[],Zt=(0,Qe.Ug)(null,null,null,ct,"members"),jt=Zt.data,Wt=Zt.error,Dt=(0,We.Z)({"exclude-identity-claims":!0,filter:null,limit:null,offset:null,sort:null}),Ft=Dt.data,Vt=Dt.error,Ht=Dt.isLoading;(0,A.useEffect)((function(){Vt&&g((0,C.V_)({description:i("claims:local.notifications.getClaims.genericError.description"),level:U.QU.ERROR,message:i("claims:local.notifications.getClaims.genericError.message")}))}),[Vt]),(0,A.useEffect)((function(){var e,t,n,r,a,o;Wt&&g((0,C.V_)({description:null!==(e=null!==(t=null==Wt||null===(n=Wt.response)||void 0===n||null===(n=n.data)||void 0===n?void 0:n.description)&&void 0!==t?t:null==Wt||null===(r=Wt.response)||void 0===r||null===(r=r.data)||void 0===r?void 0:r.detail)&&void 0!==e?e:i("console:manage.features.groups.notifications.fetchGroups.genericError.description"),level:U.QU.ERROR,message:null!==(a=null==Wt||null===(o=Wt.response)||void 0===o||null===(o=o.data)||void 0===o?void 0:o.message)&&void 0!==a?a:i("console:manage.features.groups.notifications.fetchGroups.genericError.message")}))}),[Wt]),(0,A.useEffect)((function(){var e=[{key:-1,text:p.wO.primaryUserstoreName,value:p.wO.primaryUserstoreName}];(null==v?void 0:v.length)>0&&v.forEach((function(t,n){var r=f(t.name);!t.enabled||r||!Bt(t)||null!=xt&&xt.includes(null==t?void 0:t.name)||e.push({key:n,text:t.name,value:t.name})})),ot(e)}),[m,v]);var Qt=(0,Ge.Z)(n.toLowerCase()).data,Gt=(0,A.useMemo)((function(){var e;if(Qt)return null==Qt||null===(e=Qt.properties)||void 0===e||null===(e=e.find((function(e){return e.name===I.y8.UsernameRegEx})))||void 0===e?void 0:e.value}),[Qt]),Kt=(0,A.useMemo)((function(){if(Ft&&!Ht){var e=null==Ft?void 0:Ft.find((function(e){return(null==e?void 0:e[De.QN.CLAIM_URI_ATTRIBUTE_KEY])===De.QN.EMAIL_CLAIM_URI}));return null==e?void 0:e.regEx}}),[Ft]),Bt=function(e){var t;return!(null!==(t=e.properties)&&void 0!==t&&t.some((function(e){var t,n;return[I.u4.USER_STORE_PROPERTY_BULK_IMPORT_SUPPORTED.toLowerCase(),I.u4.USER_STORE_PROPERTY_IS_BULK_IMPORT_SUPPORTED.toLowerCase()].includes(null==e||null===(t=e.name)||void 0===t?void 0:t.toLowerCase())&&"false"===(null==e||null===(n=e.value)||void 0===n?void 0:n.toLowerCase())})))},$t=function(){return null===p.x8||void 0===p.x8||!p.x8.enableBulkImportSecondaryUserStore||(it?0===(null==it?void 0:it.length)||1===(null==it?void 0:it.length)&&(null===(e=it[0])||void 0===e?void 0:e.value)===n:void 0);var e},Xt=function(){var e=ht(vt().mark((function e(){var t,n,r;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,Qe.hI)(ct);case 3:return n=e.sent,r=null==n||null===(t=n.data)||void 0===t||null===(t=t.Resources)||void 0===t?void 0:t.reduce((function(e,t){return e[null==t?void 0:t.displayName.toLowerCase()]={displayName:null==t?void 0:t.displayName,id:null==t?void 0:t.id,members:[]},e}),{}),e.abrupt("return",r);case 8:e.prev=8,e.t0=e.catch(0),j(!0),g((0,C.V_)({description:i("users:notifications.bulkImportUser.submit.genericError.description"),level:U.QU.ERROR,message:i("users:notifications.bulkImportUser.submit.genericError.message")}));case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();(0,A.useEffect)((function(){fe(Nt&&null!==p.x8&&void 0!==p.x8&&p.x8.enableUsernameValidation?ue.Wv.META_FILE:ue.Wv.MANUAL)}),[Nt]);var qt,Yt=function(){var e=ht(vt().mark((function e(){var t,n,r,a,o,l,s,u,c,d,m;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Q(!0),e.prev=1,e.next=4,(0,je.Pq)();case 4:t=e.sent,n=null==t?void 0:t.Resources,a=ft(n);try{for(a.s();!(o=a.n()).done;)"User"===(null==(l=o.value)?void 0:l.id)&&(s=null==l?void 0:l.schemaExtensions,(r=s.map((function(e){return e.schema}))).push(null==l?void 0:l.schema))}catch(p){a.e(p)}finally{a.f()}return e.next=10,(0,je.jp)({});case 10:return u=e.sent,c=u.filter((function(e){return r.includes(e.dialectURI)})),e.abrupt("return",c);case 15:e.prev=15,e.t0=e.catch(1),j(!0),g((0,C.V_)({description:(null===e.t0||void 0===e.t0||null===(d=e.t0.response)||void 0===d||null===(d=d.data)||void 0===d?void 0:d.description)||i("claims:dialects.notifications.fetchDialects.genericError.description"),level:U.QU.ERROR,message:(null===e.t0||void 0===e.t0||null===(m=e.t0.response)||void 0===m||null===(m=m.data)||void 0===m?void 0:m.message)||i("claims:dialects.notifications.fetchDialects.genericError.message")}));case 19:return e.prev=19,Q(!1),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[1,15,19,22]])})));return function(){return e.apply(this,arguments)}}(),Jt=function(){var e=ht(vt().mark((function e(){var t,n,r,a,o,l;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yt();case 2:return t=e.sent,n=[],t.forEach((function(e){n.push((0,je.gR)(e.id,null))})),e.prev=5,Q(!0),e.next=9,$e().all(n);case 9:return r=e.sent,a=[],r.forEach((function(e){var t=e.map((function(e){return{attributeName:null==e?void 0:e.mappedLocalClaimURI.replace(se._F.WSO2_LOCAL_CLAIM_DIALECT+"/","").toLowerCase(),mappedLocalClaimURI:null==e?void 0:e.mappedLocalClaimURI,mappedSCIMAttributeURI:null==e?void 0:e.claimURI,mappedSCIMClaimDialectURI:null==e?void 0:e.claimDialectURI}}));a.push.apply(a,pt(t))})),e.abrupt("return",a);case 15:e.prev=15,e.t0=e.catch(5),j(!0),g((0,C.V_)({description:(null===(o=e.t0[0])||void 0===o||null===(o=o.response)||void 0===o||null===(o=o.data)||void 0===o?void 0:o.description)||i("claims:dialects.notifications.fetchExternalClaims.genericError.description"),level:U.QU.ERROR,message:(null===(l=e.t0[0])||void 0===l||null===(l=l.response)||void 0===l||null===(l=l.data)||void 0===l?void 0:l.message)||i("claims:dialects.notifications.fetchExternalClaims.genericError.message")}));case 19:return e.prev=19,Q(!1),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[5,15,19,22]])})));return function(){return e.apply(this,arguments)}}(),en=function(e){return 0===e.length?"":1===e.length?e[0]:e.slice(0,-1).join(", ")+" and "+e[e.length-1]},tn=function(e){return 0===e.length},nn=function(e){return!e||""===e.trim()},rn=function(e){ke({description:i("users:notifications.bulkImportUser.validation.".concat(e.descriptionKey),e.descriptionValues||{}),level:U.QU.ERROR,message:i("users:notifications.bulkImportUser.validation.".concat(e.messageKey))})},an=function(e,t){var n,r=e.headers,a=e.items,i=Nt?Object.values(se.NS):[se.NS.USERNAME],o=function(e,t){return t.filter((function(t){return!e.some((function(e){return e.toLowerCase()===t.toLowerCase()}))}))}(r,i),l=(n=r.reduce((function(e,t){var n=t.toLowerCase();return e[n]=(e[n]||0)+1,e}),{}),Object.keys(n).filter((function(e){return n[e]>1}))),s=Object.values(se.GU),u=function(e,t){return e.filter((function(e){return t.some((function(t){return e.toLowerCase()===t.toLowerCase()}))}))}(r,s),c=function(e,t){return e.filter((function(e){return!t.some((function(t){return e.toLowerCase()===t.toLowerCase()}))}))}(r,t),d=function(e){return e.map((function(e,t){return nn(e)?t:-1})).filter((function(e){return-1!==e}))}(r);return!!function(e){var t,n=ft(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!r.check())return rn(r.error),!1}}catch(a){n.e(a)}finally{n.f()}return!0}([{check:function(){return!(tn(r)||tn(a))},error:{descriptionKey:"emptyRowError.description",messageKey:"emptyRowError.message"}},{check:function(){return a.every((function(e){return e.length===r.length}))},error:{descriptionKey:"columnMismatchError.description",messageKey:"columnMismatchError.message"}},{check:function(){return 0===d.length},error:{descriptionKey:"emptyHeaderError.description",messageKey:"emptyHeaderError.message"}},{check:function(){return 0===o.length},error:{descriptionKey:"missingRequiredHeaderError.description",descriptionValues:{headers:en(o)},messageKey:"missingRequiredHeaderError.message"}},{check:function(){return 0===u.length},error:{descriptionKey:"blockedHeaderError.description",descriptionValues:{headers:en(u)},messageKey:"blockedHeaderError.message"}},{check:function(){return 0===l.length},error:{descriptionKey:"duplicateHeaderError.description",descriptionValues:{headers:en(l)},messageKey:"duplicateHeaderError.message"}},{check:function(){return 0===c.length},error:{descriptionKey:"invalidHeaderError.description",descriptionValues:{headers:en(c)},messageKey:"invalidHeaderError.message"}}])},on=function(e,t){var n=e.map((function(e){return t.find((function(t){return e.toLowerCase()===t.attributeName.toLowerCase()}))})).filter(Boolean);return n.push(t.find((function(e){return e.attributeName.toLowerCase()===St.toLowerCase()}))),n},ln=function(e){j(!0),rn({descriptionKey:"emptyDataField.description",descriptionValues:{dataField:e},messageKey:"emptyDataField.message"})},sn=function(e,t,n){var r,a={},o=new Set([se._F.SCIM2_USER_SCHEMA]),l="",s=ft(t);try{var u=function(){var t=r.value,s=t.mappedSCIMAttributeURI.replace("".concat(t.mappedSCIMClaimDialectURI,":"),""),u=e[n.indexOf(t.attributeName.toLowerCase())],c=s.includes("#");if(t.attributeName===se._F.ROLES||t.attributeName===se._F.GROUPS)return 0;if(s===se.NS.USERNAME){if(l=u,nn(u))throw ln(t.attributeName),new Error(It);return a[se.NS.USERNAME]=ct&&ct.toLowerCase()!==(null===I.pH||void 0===I.pH?void 0:I.pH.toLowerCase())?"".concat(ct,"/").concat(u):u,0}if(t.attributeName===se.NS.EMAILADDRESS){if(!Nt)return 0;if(nn(u))throw ln(t.attributeName),new Error(It);if(!Ht&&!He.w.validateInputAgainstRegEx(u,Kt))throw ke({description:i("user:forms.addUserForm.inputs.email.validations.invalid"),level:U.QU.ERROR,message:i("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.invalidDataMessage")}),new Error(It)}if(t.attributeName.toLowerCase()===St.toLowerCase())return a[t.mappedSCIMClaimDialectURI]=dt(dt({},a[t.mappedSCIMClaimDialectURI]||{}),{},mt({},s,"true")),0;var d=Object.values(se.DD).find((function(e){return s.includes(e)}));if(!c&&d){var m=s.includes(d+".")?{type:s.split(".")[1],value:u}:{primary:!0,value:u};return a[d]=a[d]||[],a[d].push(m),0}if(s.includes(Ut))return a[Ct]=a[Ct]||[],a[Ct].push(mt({type:"home"},s.replace("".concat(Ut,"."),""),u)),0;o.add(t.mappedSCIMClaimDialectURI);var p=c?s.split("#")[0]:s;if(!p.includes(".")){var f=t.mappedSCIMClaimDialectURI===se._F.SCIM2_USER_SCHEMA?a:a[t.mappedSCIMClaimDialectURI]||(a[t.mappedSCIMClaimDialectURI]={});return f[p]=c?(f[p]||[]).concat(u):u,0}if(p.includes(".")){var v=yt(p.split("."),2),g=v[0],h=v[1],y=t.mappedSCIMClaimDialectURI===se._F.SCIM2_USER_SCHEMA?a:a[t.mappedSCIMClaimDialectURI]||(a[t.mappedSCIMClaimDialectURI]={});return c?y[g]=(y[g]||[]).concat(mt({},h,u)):(y[g]||(y[g]={}),y[g][h]=u),0}};for(s.s();!(r=s.n()).done;)u()}catch(c){s.e(c)}finally{s.f()}return Nt||(a[se.DD.Emails]=[{primary:!0,value:l}]),dt({schema:Array.from(o)},a)},un=function(e,t,n,r){var a=(0,et.Z)(),i="".concat(Ot,":").concat(e[n.indexOf(se.NS.USERNAME.toLowerCase())],":").concat(a),o=e[n.indexOf(se.NS.USERNAME.toLowerCase())],l=dt({},r);if(n.includes(se._F.GROUPS)){var s=e[n.indexOf(se._F.GROUPS)].split("|");pt(new Set(s)).forEach((function(e){if(!nn(e)){var t=ct&&ct.toLowerCase()!==(null===I.pH||void 0===I.pH?void 0:I.pH.toLowerCase())?"".concat(ct,"/").concat(e):e;if(!(t.toLowerCase()in r))throw rn({descriptionKey:"invalidGroup.description",descriptionValues:{group:t},messageKey:"invalidGroup.message"}),new Error(It);l=cn(t,{display:o,value:"bulkId:".concat(i)},l)}}))}var u={bulkId:i,data:sn(e,t,n),method:U.f2.POST,path:se._F.SCIM_USER_PATH};return{newGroupMemberAssociations:l,userOperation:u}},cn=function(e,t,n){var r=dt({},n),a=r[e.toLowerCase()];return r[e.toLowerCase()]=dt(dt({},a),{},{members:Array.from(new Set([].concat(pt(a.members),[t])))}),r},dn=function(e){var t=(0,et.Z)();return Object.values(e).filter((function(e){return e.members.length>0})).map((function(e){return{bulkId:"".concat(Ot,":").concat(e.displayName,":").concat(t),data:{Operations:[{op:"add",value:{members:e.members.map((function(e){return{display:e.display,value:e.value}}))}}]},method:U.f2.PATCH,path:"".concat(se._F.SCIM_GROUP_PATH,"/").concat(e.id)}}))},mn=function(){var e=ht(vt().mark((function e(t){var n,r,a,i,o,l,s,u,c,d;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=R.headers.map((function(e){return e.toLowerCase()})),r=R.items,a=on(n,t),e.next=5,Xt();case 5:for(i=e.sent,o=[],l=[],s=0;s<r.length;s++)u=r[s],c=un(u,a,n,i),o.push(c.userOperation),i=c.newGroupMemberAssociations;return n.includes(se._F.GROUPS)&&(l=dn(i)),d=o.concat(l),e.abrupt("return",{Operations:d,failOnErrors:0,schemas:[se._F.BULK_REQUEST_SCHEMA]});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pn=function(){var e=[],t=[],n=(0,et.Z)();return null==ge||ge.map((function(r){var a=mt({emails:[{primary:!0,value:r}],schemas:["urn:ietf:params:scim:schemas:core:2.0:User","urn:ietf:params:scim:schemas:extension:enterprise:2.0:User"],userName:ct.toLowerCase()!==(null===I.pH||void 0===I.pH?void 0:I.pH.toLowerCase())?"".concat(ct,"/").concat(r):r},se._F.SYSTEMSCHEMA,{askPassword:"true"}),i={bulkId:"bulkId:".concat(r,":").concat(n),data:a,method:U.f2.POST,path:se._F.SCIM_USER_PATH},o={display:r,value:"bulkId:bulkId:".concat(r,":").concat(n)};t.push(o),e.push(i)})),null==Ce||Ce.map((function(r){var a={Operations:[{op:"add",value:{members:t}}]},i={bulkId:"bulkId:".concat(null==r?void 0:r.displayName,":").concat(n),data:a,method:U.f2.PATCH,path:"".concat(se._F.SCIM_GROUP_PATH,"/").concat(null==r?void 0:r.id)};e.push(i)})),{Operations:e,failOnErrors:0,schemas:[se._F.BULK_REQUEST_SCHEMA]}},fn=function(){var e=ht(vt().mark((function e(){var t,n,r;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=pn(),e.prev=1,e.next=4,(0,x.er)(t);case 4:if(n=e.sent,re(!0),200===n.status){e.next=8;break}throw new Error("Failed to import users.");case 8:r=n.data.Operations.map(hn),q(r),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),j(!0),nt({description:i("users:notifications.bulkImportUser.submit.genericError.description"),level:U.QU.ERROR,message:i("users:notifications.bulkImportUser.submit.genericError.message")});case 16:return e.prev=16,F(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[1,12,16,19]])})));return function(){return e.apply(this,arguments)}}(),vn=function(){var e=ht(vt().mark((function e(){var t,n,r,a,o,l,s;return vt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return F(!0),e.prev=1,e.next=4,Jt();case 4:if(t=e.sent,n=t.map((function(e){return e.attributeName})),an(R,n)){e.next=10;break}return j(!0),F(!1),e.abrupt("return");case 10:return e.next=12,mn(t);case 12:return r=e.sent,ee(!0),a=(0,x.er)(r),o=new Promise((function(e,t){setTimeout((function(){return t(new Error(wt))}),Pt||6e4)})),e.next=18,Promise.race([a,o]);case 18:if(200===(l=e.sent).status){e.next=21;break}throw new Error("Failed to import users.");case 21:s=l.data.Operations.map(gn),B(s),e.next=29;break;case 25:e.prev=25,e.t0=e.catch(1),j(!0),e.t0.message===wt?(Rt(!0),ke({description:i("users:notifications.bulkImportUser.timeOut.description"),level:U.QU.WARNING,message:i("users:notifications.bulkImportUser.timeOut.message")})):e.t0.message!==It&&ke({description:i("users:notifications.bulkImportUser.submit.genericError.description"),level:U.QU.ERROR,message:i("users:notifications.bulkImportUser.submit.genericError.message")});case 29:return e.prev=29,Q(!1),F(!1),e.finish(29);case 33:case"end":return e.stop()}}),e,null,[[1,25,29,33]])})));return function(){return e.apply(this,arguments)}}(),gn=function(e){var t,n,r=null==e?void 0:e.bulkId.split(":")[1],a=null==e||null===(t=e.status)||void 0===t?void 0:t.code,o=se.tr.USER_CREATION,l=i("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.internalErrorMessage"),s={};(null==e?void 0:e.method)===U.f2.POST?s={201:i("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.userCreatedMessage"),202:i("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.userCreationAcceptedMessage"),400:null!=e&&null!==(n=e.response)&&void 0!==n&&n.includes(se._F.USERNAME_REGEX_ERROR_CODE)?i("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.invalidUserNameFormatMessage"):i("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.invalidDataMessage"),409:i("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.userAlreadyExistsMessage"),500:i("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.internalErrorMessage")}:(null==e?void 0:e.method)===U.f2.PATCH&&(o=se.tr.ROLE_ASSIGNMENT,s={200:i("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.userAssignmentSuccessMessage",{resource:r}),400:i("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.userAssignmentFailedMessage",{resource:r}),500:i("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.userAssignmentInternalErrorMessage",{resource:r})});oe((function(t){var n=(null==e?void 0:e.method)===U.f2.PATCH&&200===a?t.successUserAssignment+1:t.successUserAssignment,r=(null==e?void 0:e.method)===U.f2.PATCH&&200!==a?t.failedUserAssignment+1:t.failedUserAssignment,i=(null==e?void 0:e.method)!==U.f2.POST||201!==a&&202!==a?t.successUserCreation:t.successUserCreation+1,o=(null==e?void 0:e.method)===U.f2.POST&&201!==a&&202!==a?t.failedUserCreation+1:t.failedUserCreation;return dt(dt({},t),{},{failedUserAssignment:r,failedUserCreation:o,successUserAssignment:n,successUserCreation:i})}));var u=se.IC.FAILED;return 201!==a&&202!==a&&200!==a||(u=se.IC.SUCCESS),{message:s[a]||l,operationType:o,resourceIdentifier:r,status:yn(a),statusCode:u}},hn=function(e){var t,n,r=null==e?void 0:e.bulkId.split(":")[1],a=null==e||null===(t=e.status)||void 0===t?void 0:t.code,o=se.tr.USER_CREATION,l=i("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.internalErrorMessage"),s={};(null==e?void 0:e.method)===U.f2.POST?s={201:i("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.userCreatedMessage"),202:i("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.userCreationAcceptedMessage"),400:null!=e&&null!==(n=e.response)&&void 0!==n&&n.includes(se._F.USERNAME_REGEX_ERROR_CODE)?i("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.invalidUserNameFormatMessage"):i("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.invalidDataMessage"),409:i("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.userAlreadyExistsMessage"),500:i("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.internalErrorMessage")}:(null==e?void 0:e.method)===U.f2.PATCH&&(o=se.tr.ROLE_ASSIGNMENT,s={200:i("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.userAssignmentSuccessMessage",{resource:r}),400:i("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.userAssignmentFailedMessage",{resource:r}),500:i("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.userAssignmentInternalErrorMessage",{resource:r})});de((function(t){var n=(null==e?void 0:e.method)===U.f2.PATCH&&200===a?t.successUserAssignment+1:t.successUserAssignment,r=(null==e?void 0:e.method)===U.f2.PATCH&&200!==a?t.failedUserAssignment+1:t.failedUserAssignment,i=(null==e?void 0:e.method)!==U.f2.POST||201!==a&&202!==a?t.successUserCreation:t.successUserCreation+1,o=(null==e?void 0:e.method)===U.f2.POST&&201!==a&&202!==a?t.failedUserCreation+1:t.failedUserCreation;return dt(dt({},t),{},{failedUserAssignment:r,failedUserCreation:o,successUserAssignment:n,successUserCreation:i})}));var u=se.IC.FAILED;return 201!==a&&202!==a&&200!==a||(u=se.IC.SUCCESS),{message:s[a]||l,operationType:o,resourceIdentifier:r,status:yn(a),statusCode:u}},yn=function(e){return i(201===e||200===e?"user:modals.bulkImportUserWizard.wizardSummary.tableStatus.success":202===e?"user:modals.bulkImportUserWizard.wizardSummary.tableStatus.warning":"user:modals.bulkImportUserWizard.wizardSummary.tableStatus.failed")},bn=function(){return A.createElement(Je.Z.Field,{required:!0},A.createElement(ze.Z,{htmlFor:"tags-filled",disableAnimation:!0,shrink:!1,margin:"dense",className:"spacing-bottom","data-componentid":"".concat(a,"-userstore-label")},i("user:forms.addUserForm.inputs.domain.label")),A.createElement(P.Z,{className:"mt-2",fluid:!0,selection:!0,labeled:!0,options:it,loading:!1,"data-testid":"".concat(a,"-userstore-dropdown"),"data-componentid":"".concat(a,"-userstore-dropdown"),name:"userstore",disabled:!1,readOnly:!1,value:ct,onChange:function(e,t){gt(t.value.toString())},tabIndex:1,maxLength:60}))},En=function(){return c.m.push(s.$.getPaths().get("ATTRIBUTE_MAPPINGS").replace(":type",De.QN.SCIM))};return A.createElement(Fe.wv,{"data-testid":a,"data-componentid":a,open:!0,className:"wizard application-create-wizard",dimmer:"blurring",size:"small",onClose:t,closeOnDimmerClick:!1,closeOnEscape:!0},A.createElement(Fe.wv.MainPanel,null,A.createElement(Fe.wv.Header,{className:"wizard-header"},i("user:modals.bulkImportUserWizard.title"),A.createElement(O.X6,{as:"h6"},i("user:modals.bulkImportUserWizard.subTitle"),A.createElement(O.eb,{link:Tt("manage.users.bulkUsers.learnMore")},i("common:learnMore")))),A.createElement(Fe.wv.Content,{className:"content-container"},A.createElement(qe.Z,null,A.createElement(A.Fragment,null,A.createElement(qe.Z.Row,{columns:1},A.createElement(qe.Z.Column,null,A.createElement(O.v0,{icon:"mail",content:i("user:modals.bulkImportUserWizard.wizardSummary.inviteEmailInfo"),hideDefaultIcon:!0})))),A.createElement(qe.Z.Row,null,A.createElement(qe.Z.Column,{mobile:16,tablet:16,computer:16},A.createElement(Ye.Z.Group,{size:"large",labeled:!0,basic:!0},Object.values(ue.Wv).map((function(e,t){return A.createElement(A.Fragment,null,A.createElement(O.GI,{trigger:A.createElement("div",{className:"inline-button"},A.createElement(Ye.Z,{disabled:Nt&&e===ue.Wv.MANUAL&&(null===p.x8||void 0===p.x8?void 0:p.x8.enableUsernameValidation),"data-componentid":"".concat(a,"-").concat(e,"-tab-option"),key:t,active:pe===e,className:"multiple-users-config-mode-wizard-tab",content:tt.QH.resolveMultipleInvitesDisplayName(e),onClick:function(t){t.preventDefault(),fe(e)}})),content:i("user:modals.bulkImportUserWizard.wizardSummary.manualCreation.disabledHint"),size:"mini",wide:!0,disabled:e===ue.Wv.META_FILE||!Nt||!(null!==p.x8&&void 0!==p.x8&&p.x8.enableUsernameValidation),"data-componentid":"".concat(a,"-disabled-hint")}))}))))),pe==ue.Wv.MANUAL?A.createElement(A.Fragment,null,Be&&A.createElement(qe.Z.Row,{columns:1},A.createElement(qe.Z.Column,{mobile:16,tablet:16,computer:16},rt)),ne?A.createElement(A.Fragment,null,Be&&A.createElement(qe.Z.Row,{columns:1},A.createElement(qe.Z.Column,{mobile:16,tablet:16,computer:16},rt)),A.createElement(lt,{isLoading:D,"data-componentid":"".concat(a,"-manual-response-list"),hasError:Z,responseList:X,bulkResponseSummary:ce,successAlert:A.createElement(_e.Z,{severity:"success","data-componentid":"".concat(a,"-success-alert")},A.createElement(Pe.Z,{"data-componentid":"".concat(a,"-success-alert-title")},i("user:modals.bulkImportUserWizard.wizardSummary.manualCreation.alerts.creationSuccess.message")),i("user:modals.bulkImportUserWizard.wizardSummary.manualCreation.alerts.creationSuccess.description"))})):A.createElement(A.Fragment,null,!(null!==p.x8&&void 0!==p.x8&&p.x8.enableBulkImportSecondaryUserStore)&&A.createElement(qe.Z.Row,{columns:1,className:"mb-0 pb-0"},A.createElement(qe.Z.Column,{mobile:16},A.createElement(_e.Z,{severity:"info"},A.createElement(T.c,{i18nKey:"console:manage.features.user.modals.bulkImportUserWizard.wizardSummary.userstoreMessage",tOptions:{userstore:(0,Xe.Z)(n)}},"The created users will be added to the ",A.createElement("b",null,(0,Xe.Z)(n))," user store.")))),!$t()&&A.createElement(qe.Z.Row,{columns:1,className:"mb-0 pb-0"},A.createElement(qe.Z.Column,{mobile:16,tablet:16,computer:16},bn())),A.createElement(Ne.Z,{size:"small",limitTags:p.x8.bulkUserImportLimit.inviteEmails,fullWidth:!0,multiple:!0,id:"tags-filled",options:Mt.map((function(e){return e})),defaultValue:[],freeSolo:!0,renderTags:function(e,t){return e.map((function(e,n){return A.createElement(r.Z,ut({key:n,size:"small",sx:{marginLeft:1},className:"oxygen-chip-beta",label:e},t({index:n})))}))},renderInput:function(e){return A.createElement(A.Fragment,null,A.createElement(ze.Z,{htmlFor:"tags-filled",disableAnimation:!0,shrink:!1,margin:"dense",className:"mt-2","data-componentid":"".concat(a,"-emails-label")},i("user:modals.bulkImportUserWizard.wizardSummary.manualCreation.emailsLabel")),A.createElement(Me.Z,ut({id:"tags-filled",margin:"normal",error:be,helperText:be&&Ie,InputLabelProps:{required:!0}},e,{required:!0,variant:"outlined",placeholder:i("user:modals.bulkImportUserWizard.wizardSummary.manualCreation.emailsPlaceholder"),"data-componentid":"".concat(a,"-email-input")})))},onChange:function(e,t){var n;he(t),n=t,(null!=u&&u.enableEmailDomain&&!Ht?He.w.validateInputAgainstRegEx(n[n.length-1],Gt)&&He.w.validateInputAgainstRegEx(n[n.length-1],Kt):He.w.validateInputAgainstRegEx(n[n.length-1],Kt))||(Ee(!0),we(i("users:guestUsers.fields.username.validations.regExViolation")),n.pop())},onInputChange:function(){Ee(!1)}}),A.createElement(O.kW,null,i("user:modals.bulkImportUserWizard.wizardSummary.manualCreation.hint")),A.createElement(Ne.Z,{size:"small",multiple:!0,fullWidth:!0,disablePortal:!0,id:"combo-box-demo",options:null!==(qt=null==jt?void 0:jt.Resources)&&void 0!==qt?qt:[],getOptionLabel:function(e){return null==e?void 0:e.displayName},renderOption:function(e,t){return A.createElement(M.Z,ut({component:"li"},e),A.createElement(Ze.Z,{sx:{fontWeight:500}},null==t?void 0:t.displayName))},renderInput:function(e){return A.createElement(A.Fragment,null,A.createElement(ze.Z,{htmlFor:"tags-filled",disableAnimation:!0,shrink:!1,margin:"dense",className:"mt-2","data-componentid":"".concat(a,"-roles-label")},i("user:modals.bulkImportUserWizard.wizardSummary.manualCreation.groupsLabel")),A.createElement(Me.Z,ut({id:"tags-filled",margin:"normal",InputLabelProps:{required:!0}},e,{required:!0,variant:"outlined",placeholder:i("user:modals.bulkImportUserWizard.wizardSummary.manualCreation.groupsPlaceholder"),"data-componentid":"".concat(a,"-roles-input")})))},onChange:function(e,t){Oe(t)},renderTags:function(e,t){return e.map((function(e,n){return A.createElement(r.Z,ut({key:n,size:"small",className:"oxygen-chip-beta",label:A.createElement("label",null,null==e?void 0:e.displayName)},t({index:n})))}))}}))):pe===ue.Wv.META_FILE?J?A.createElement(A.Fragment,null,Ae&&A.createElement(qe.Z.Row,{columns:1},A.createElement(qe.Z.Column,{mobile:16,tablet:16,computer:16},Te)),!Et&&A.createElement(lt,{isLoading:D,"data-componentid":"".concat(a,"-response-list"),hasError:Z,responseList:K,bulkResponseSummary:ie})):A.createElement(A.Fragment,null,Ae&&A.createElement(qe.Z.Row,{columns:1},A.createElement(qe.Z.Column,{mobile:16,tablet:16,computer:16},Te)),!(null!==p.x8&&void 0!==p.x8&&p.x8.enableBulkImportSecondaryUserStore)&&A.createElement(qe.Z.Row,{columns:1,className:"mb-0 pb-0"},A.createElement(qe.Z.Column,{mobile:16},A.createElement(_e.Z,{severity:"info"},A.createElement(T.c,{i18nKey:"console:manage.features.user.modals.bulkImportUserWizard.wizardSummary.userstoreMessage",tOptions:{userstore:(0,Xe.Z)(n)}},"The created users will be added to the ",A.createElement("b",null,(0,Xe.Z)(n))," user store.")))),!H&&!$t()&&A.createElement(qe.Z.Row,{columns:1,className:"mb-0 pb-0"},A.createElement(qe.Z.Column,{mobile:16,tablet:16,computer:16},bn())),A.createElement(qe.Z.Row,{columns:1,className:"pt-0"},A.createElement(qe.Z.Column,{mobile:16},A.createElement(O.GB,{key:1,fileStrategy:zt,file:b,onChange:function(e){E(e.file),_(e.serialized),ke(null),j(!1)},uploadButtonText:"Upload CSV File",dropzoneText:"Drag and drop a CSV file here.","data-testid":"".concat(a,"-form-wizard-csv-file-picker"),"data-componentid":"".concat(a,"-form-wizard-csv-file-picker"),icon:(0,l._5)().uploadPlaceholder,placeholderIcon:A.createElement(N.Z,{name:"file code",size:"huge"}),normalizeStateOnRemoveOperations:!0,emptyFileError:!1,hidePasteOption:!0}))),A.createElement(O.kW,null,i("user:modals.bulkImportUserWizard.wizardSummary.fileBased.hint"))):void 0)),A.createElement(Fe.wv.Actions,null,A.createElement(qe.Z,null,pe==ue.Wv.MANUAL?A.createElement(qe.Z.Row,{column:1},A.createElement(qe.Z.Column,{mobile:8,tablet:8,computer:8},A.createElement(O.Qj,{"data-testid":"".concat(a,"-close-button"),"data-componentid":"".concat(a,"-close-button"),floated:"left",onClick:function(){t(),re(!1)},disabled:D},i("common:close"))),!ne||D?A.createElement(qe.Z.Column,{mobile:8,tablet:8,computer:8},A.createElement(O.KM,{"data-testid":"".concat(a,"-invite-button"),"data-componentid":"".concat(a,"-invite-button"),floated:"right",onClick:fn,loading:D,disabled:H||D||Z||!ge||0===(null==ge?void 0:ge.length)},i("user:modals.bulkImportUserWizard.wizardSummary.manualCreation.primaryButton"))):null):A.createElement(qe.Z.Row,{column:1},A.createElement(qe.Z.Column,{mobile:8,tablet:8,computer:8},A.createElement(O.Qj,{"data-testid":"".concat(a,"-cancel-button"),"data-componentid":"".concat(a,"-cancel-button"),floated:"left",onClick:function(){t(),ee(!1)},disabled:D},i("common:close"))),!J||D?A.createElement(qe.Z.Column,{mobile:8,tablet:8,computer:8},A.createElement(O.KM,{"data-testid":"".concat(a,"-finish-button"),"data-componentid":"".concat(a,"-finish-button"),floated:"right",onClick:vn,loading:D,disabled:H||D||Z||!b},i("user:modals.bulkImportUserWizard.buttons.import"))):null)))),A.createElement(Fe.wv.SidePanel,null,A.createElement(Fe.wv.Header,{className:"wizard-header help-panel-header muted"},A.createElement("div",{className:"help-panel-header-text"},i("applications:wizards.minimalAppCreationWizard.help.heading"))),A.createElement(Fe.wv.Content,null,A.createElement(A.Suspense,{fallback:A.createElement(O.pO,null)},A.createElement(O.X6,{as:"h5"},i("user:modals.bulkImportUserWizard.sidePanel.manual")),A.createElement("p",null,i("user:modals.bulkImportUserWizard.wizardSummary.manualCreation.hint")),A.createElement(xe.Z,null),A.createElement(O.X6,{as:"h5"},i("user:modals.bulkImportUserWizard.sidePanel.fileBased")),A.createElement("p",null,i("user:modals.bulkImportUserWizard.wizardSummary.fileBased.hint")),A.createElement(O.X6,{as:"h6"},i("user:modals.bulkImportUserWizard.sidePanel.fileFormatTitle")),A.createElement("p",null,o()?A.createElement(T.c,{i18nKey:"user:modals.bulkImportUserWizard.sidePanel.fileFormatContent"},"Headers of the CSV file should be user attributes that are mapped to",A.createElement("b",null,"local attribute")," names."):A.createElement(T.c,{i18nKey:"user:modals.bulkImportUserWizard.sidePanel.fileFormatContent"},"Headers of the CSV file should be user attributes that are mapped to local ",A.createElement(O.rU,{onClick:En},"attribute names"),".")),A.createElement("p",null," ",i("user:modals.bulkImportUserWizard.sidePanel.fileFormatSampleHeading")),A.createElement("p",null,Nt?A.createElement("code",null,"username,givenname,emailaddress,groups",A.createElement("br",null),"user1,john,john@test.com,group1|group2",A.createElement("br",null),"user2,jake,jake@test.com,group2",A.createElement("br",null),"user3,jane,jane@test.com,group1",A.createElement("br",null)):A.createElement("code",null,"username,givenname,groups",A.createElement("br",null),"user1,john,group1|group2",A.createElement("br",null),"user2,jake,group2",A.createElement("br",null),"user3,jane,group1",A.createElement("br",null)))))))},At={failedUserAssignment:0,failedUserCreation:0,successUserAssignment:0,successUserCreation:0},kt=n(47018),Tt=n(79438),Lt=n(22557),Nt=n.n(Lt),Pt=n(43392),_t={};_t.styleTagTransform=te(),_t.setAttributes=q(),_t.insert=$().bind(null,"head"),_t.domAPI=K(),_t.insertStyleElement=J();Q()(Pt.Z,_t);Pt.Z&&Pt.Z.locals&&Pt.Z.locals;function xt(){return xt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xt.apply(null,arguments)}var zt=function(e){var t=e.onSubmit,n=e["data-componentid"],a=(0,k.$)().t,i=(0,Qe.Ug)(null,null,null,null===ge.w||void 0===ge.w?void 0:ge.w.primaryUserstoreName,"members",!0).data,o=(0,A.useMemo)((function(){var e;return(0,be.Z)(null==i?void 0:i.Resources)?[]:null==i||null===(e=i.Resources)||void 0===e?void 0:e.map((function(e){return{group:e,key:e.id,label:e.displayName}}))}),[i]);return A.createElement(Tt.vy,{initialValues:null,keepDirtyOnReinitialize:!0,"data-componentid":"".concat(n,"-external-form"),onSubmit:t,validate:function(e){var t={groups:void 0,username:void 0};return e.username||(t.username=a("parentOrgInvitations:addUserWizard.username.validations.required")),t},render:function(e){var t=e.handleSubmit;return A.createElement("form",{id:se._F.INVITE_PARENT_ORG_USER_FORM_ID,onSubmit:t,className:"invite-parent-org-user-form"},A.createElement(O.v0,{type:"info",className:"add-user-info",content:a("parentOrgInvitations:addUserWizard.hint")}),A.createElement(Tt.SE,{fullWidth:!0,ariaLabel:"Usernames field","data-componentid":"".concat(n,"-external-form-username-input"),label:a("parentOrgInvitations:addUserWizard.username.label"),name:"username",placeholder:a("parentOrgInvitations:addUserWizard.username.placeholder"),required:!0,helperText:A.createElement(O.kW,null,A.createElement(Ze.Z,{variant:"inherit"},a("parentOrgInvitations:addUserWizard.username.hint"))),component:Tt.KQ,options:[],renderTags:function(e,t){return e.map((function(e,n){return A.createElement(r.Z,xt({key:n,size:"small",sx:{marginLeft:1},className:"oxygen-chip-beta",label:e},t({index:n})))}))},filterOptions:function(e,t){var n=t.inputValue;return""!==n?["".concat(n)]:[]},renderOption:function(e,t){return A.createElement("li",xt({},e,{className:Nt()("press-enter-prompt",e.className)}),t,A.createElement("p",null,A.createElement(T.c,{i18nKey:"common:pressEnterPrompt"},"Press ",A.createElement("kbd",null,"Enter")," to select")))},multipleValues:!0,freeSolo:!0}),A.createElement(Tt.SE,{fullWidth:!0,multipleValues:!0,ariaLabel:"Groups field","data-componentid":"".concat(n,"-form-groups-field"),name:"groups",label:a("parentOrgInvitations:addUserWizard.groups.label"),helperText:A.createElement(O.kW,null,A.createElement(Ze.Z,{variant:"inherit"},a("parentOrgInvitations:addUserWizard.groups.hint"))),placeholder:a("parentOrgInvitations:addUserWizard.groups.placeholder"),component:Tt.KQ,options:o,renderTags:function(e,t){return e.map((function(e,n){return A.createElement(r.Z,xt({key:n,size:"medium",label:e.label},t({index:n})))}))}}))}})};zt.defaultProps={"data-componentid":"invite-parent-org-user"};var Mt=n(69005);function Zt(e){return Zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zt(e)}function jt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jt(Object(n),!0).forEach((function(t){Dt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Dt(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Zt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Zt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Zt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ft(e){return function(e){if(Array.isArray(e))return Qt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ht(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,l=[],s=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,a=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}(e,t)||Ht(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ht(e,t){if(e){if("string"==typeof e)return Qt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qt(e,t):void 0}}function Qt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Gt=function(e){var t=e.response,n=e.isLoading,r=e.hasError,a=e["data-componentid"],i=(0,k.$)().t,o=Vt((0,A.useState)([]),2),s=o[0],c=o[1],d=Vt((0,A.useState)({failedCount:0,successCount:0,totalCount:0}),2),m=d[0],p=d[1];(0,A.useEffect)((function(){t&&(null==t?void 0:t.length)>0&&t.map((function(e){var t=i("invite:notifications.sendInvite.success.message");if(e.result.errorCode)switch(e.result.errorCode){case Mt.jI.ERROR_CODE_USER_NOT_FOUND:t=i("user:modals.inviteParentUserWizard.tableMessages.userNotFound");break;case Mt.jI.ERROR_CODE_ACTIVE_INVITATION_EXISTS:t=i("user:modals.inviteParentUserWizard.tableMessages.activeInvitationExists");break;case Mt.jI.ERROR_CODE_INVITED_USER_EMAIL_NOT_FOUND:t=i("user:modals.inviteParentUserWizard.tableMessages.userEmailNotFound");break;case Mt.jI.ERROR_CODE_USER_ALREADY_EXISTS_INVITED_ORGANIZATION:t=i("user:modals.inviteParentUserWizard.tableMessages.userAlreadyExist")}c((function(n){return[].concat(Ft(n),[{message:t,status:e.result.status,username:e.username}])})),e.result.status===Mt.YV.SUCCESS?p((function(e){return Wt(Wt({},e),{},{successCount:e.successCount+1,totalCount:e.totalCount+1})})):p((function(e){return Wt(Wt({},e),{},{failedCount:e.failedCount+1,totalCount:e.totalCount+1})}))}))}),[t]);return A.createElement(qe.Z,null,A.createElement(qe.Z.Row,{columns:1},A.createElement(qe.Z.Column,{mobile:16,tablet:16,computer:16},n||r?null:0===(null==m?void 0:m.failedCount)?A.createElement(_e.Z,{severity:"success","data-componentid":"".concat(a,"-success-alert")},A.createElement(nt.Z,{"data-componentid":"".concat(a,"-success-alert-title")},i("user:modals.inviteParentUserWizard.successAlert.message")),i("user:modals.inviteParentUserWizard.successAlert.description")):A.createElement(_e.Z,{severity:"error","data-componentid":"".concat(a,"-error-alert")},A.createElement(nt.Z,{"data-componentid":"".concat(a,"-error-alert-title")},i("user:modals.inviteParentUserWizard.errorAlert.message")),A.createElement(T.c,{i18nKey:"user:modals.inviteParentUserWizard.errorAlert.description",tOptions:{failedCount:null==m?void 0:m.failedCount}},"An error occurred while inviting ",null==m?void 0:m.failedCount," user(s)..")))),A.createElement(qe.Z.Row,{columns:1},A.createElement(qe.Z.Column,{mobile:16,tablet:16,computer:16},A.createElement(Ze.Z,{variant:"body2",style:{textAlign:"right"}},i("user:modals.inviteParentUserWizard.totalInvitations")+" : "+(null==m?void 0:m.totalCount)),A.createElement(O.wQ,{className:"addon-field-wrapper",isLoading:n,actions:[],columns:[{allowToggleVisibility:!1,dataIndex:"resourceIdentifier",id:"resourceIdentifier",key:"resourceIdentifier",render:function(e){return A.createElement(oe.Z,{as:"h6","data-componentid":"".concat(a,"-username-item-heading")},A.createElement(oe.Z.Content,null,e.username))},title:i("user:modals.bulkImportUserWizard.wizardSummary.tableHeaders.username")},{allowToggleVisibility:!1,dataIndex:"status",id:"status",key:"status",render:function(e){return A.createElement(oe.Z,{as:"h6","data-componentid":"".concat(a,"-status-item-heading")},A.createElement(oe.Z.Content,null,A.createElement(_.Z,{"data-componentid":"".concat(a,"-bulk-label"),content:e.status,size:"small",color:e.status===Mt.YV.SUCCESS?"green":"red",className:"group-label"})))},title:i("user:modals.bulkImportUserWizard.wizardSummary.tableHeaders.status")},{allowToggleVisibility:!1,dataIndex:"message",id:"message",key:"message",render:function(e){return A.createElement(oe.Z,{as:"h6","data-componentid":"".concat(a,"-status-item-heading")},A.createElement(oe.Z.Content,null,e.message))},title:i("user:modals.bulkImportUserWizard.wizardSummary.tableHeaders.message")}],data:s,onColumnSelectionChange:function(){return null},onRowClick:function(){return null},placeholders:A.createElement(O.$J,{"data-testid":"".concat(a,"-empty-search-result"),"data-componentid":"".concat(a,"-empty-search-result"),image:(0,l.jF)().emptySearch,imageSize:"tiny",title:i("users:usersList.search.emptyResultPlaceholder.title"),subtitle:""}),transparent:!0,selectable:!1,showHeader:!1,"data-testid":"".concat(a,"-data-table"),"data-componentid":"".concat(a,"-data-table"),loadingStateOptions:{count:u.r.DEFAULT_RESOURCE_LIST_ITEM_LIMIT,imageType:"circular"}}))))};function Kt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,l=[],s=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,a=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Bt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Bt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}Gt.defaultProps={"data-componentid":"parent-invite-response-list",hasError:!1,isLoading:!1,response:[]};var $t=function(e){var t=e.closeWizard,n=e.onUserInviteSuccess,r=e["data-componentid"],a=(0,k.$)().t,i=Kt((0,A.useState)(!1),2),o=i[0],l=i[1],s=Kt((0,A.useState)(!1),2),u=s[0],c=s[1],d=Kt((0,O.IK)(),3),m=d[0],p=d[1],f=d[2],v=Kt((0,A.useState)([]),2),g=v[0],h=v[1];return A.createElement(kt.Z,{"data-componentid":r,open:!0,className:"wizard application-create-wizard",dimmer:"blurring",size:"small",onClose:t,closeOnDimmerClick:!1,closeOnEscape:!0},A.createElement(kt.Z.Header,{className:"wizard-header"},a("parentOrgInvitations:addUserWizard.heading"),A.createElement(O.X6,{as:"h6"},a("parentOrgInvitations:addUserWizard.description"))),A.createElement(kt.Z.Content,{className:"content-container",scrolling:!0},m&&f,(null==g?void 0:g.length)>0?A.createElement(Gt,{response:g,isLoading:o}):A.createElement(zt,{onSubmit:function(e){var t,r={groups:null==e||null===(t=e.groups)||void 0===t?void 0:t.map((function(e){return e.group.id})),usernames:null==e?void 0:e.username};p(null),l(!0),(0,ce.O)(r).then((function(e){var t=null==e?void 0:e.data;h(t),n()})).catch((function(e){!function(e){var t,n,r,i;if(null!=e&&e.response&&401!==(null==e||null===(t=e.response)||void 0===t?void 0:t.status))if(403===(null==e||null===(n=e.response)||void 0===n?void 0:n.status)&&(null==e||null===(r=e.response)||void 0===r||null===(r=r.data)||void 0===r?void 0:r.code)===se._F.ERROR_COLLABORATOR_USER_LIMIT_REACHED)p({description:a("extensions:manage.invite.notifications.sendInvite.limitReachError.description"),level:U.QU.ERROR,message:a("extensions:manage.invite.notifications.sendInvite.limitReachError.message")});else if(null!=e&&null!==(i=e.response)&&void 0!==i&&null!==(i=i.data)&&void 0!==i&&i.description){var o;p({description:a("invite:notifications.sendInvite.error.description",{description:null==e||null===(o=e.response)||void 0===o||null===(o=o.data)||void 0===o?void 0:o.description}),level:U.QU.ERROR,message:a("invite:notifications.sendInvite.error.message")})}else p({description:a("invite:notifications.sendInvite.genericError.description"),level:U.QU.ERROR,message:a("invite:notifications.sendInvite.genericError.message")});else p({description:a("invite:notifications.sendInvite.error.description"),level:U.QU.ERROR,message:a("invite:notifications.sendInvite.error.message")})}(e)})).finally((function(){c(!0),l(!1)}))},"data-componentid":"".concat(r,"-form")})),A.createElement(kt.Z.Actions,null,A.createElement(qe.Z,null,A.createElement(qe.Z.Row,{column:2},A.createElement(qe.Z.Column,{mobile:8},A.createElement(O.Qj,{"data-componentid":"".concat(r,"-cancel-button"),floated:"left",onClick:function(){t()}},a(u?"common:close":"common:cancel"))),!g||(null==g?void 0:g.length)<1&&A.createElement(qe.Z.Column,{mobile:8,tablet:8,computer:8},A.createElement(O.KM,{"data-componentid":"".concat(r,"-finish-button"),floated:"right",onClick:function(){document.getElementById(se._F.INVITE_PARENT_ORG_USER_FORM_ID).dispatchEvent(new Event("submit",{bubbles:!0,cancelable:!0}))},loading:o,disabled:o},a("extensions:manage.features.user.addUser.invite")))))))},Xt=n(45711),qt={};qt.styleTagTransform=te(),qt.setAttributes=q(),qt.insert=$().bind(null,"head"),qt.domAPI=K(),qt.insertStyleElement=J();Q()(Xt.Z,qt);Xt.Z&&Xt.Z.locals&&Xt.Z.locals;function Yt(){return Yt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Yt.apply(null,arguments)}function Jt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,l=[],s=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,a=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return en(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?en(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function en(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var tn=function(e){var t,n,z,M,Z=e["data-testid"],j=e["data-componentid"],W=(0,k.$)().t,D=(0,O.fQ)().getLink,F=(0,L.I0)(),V=null===(t=window.AppUtils)||void 0===t||null===(t=t.getConfig())||void 0===t||null===(t=t.ui)||void 0===t?void 0:t.showStatusLabelForNewAuthzRuntimeFeatures,H=(0,i.Ac)(f.Z.SAAS_FEATURES_IDENTIFIER),Q=(0,y.z)().isSubOrganization,G=(0,w.Z)(),K=G.isLoading,B=G.isUserStoreReadOnly,$=G.mutateUserStoreList,X=G.readOnlyUserStoreNamesList,q=G.userStoresList,Y=(0,L.v9)((function(e){return e.config.ui.features})),J=(0,i.EV)(null==Y||null===(n=Y.users)||void 0===n||null===(n=n.scopes)||void 0===n?void 0:n.create),ee=(0,i.EV)(null==Y||null===(z=Y.bulkUserImport)||void 0===z||null===(z=z.scopes)||void 0===z?void 0:z.create),te=(0,L.v9)((function(e){var t;return(null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t||null===(t=t.features)||void 0===t||null===(t=t.users)||void 0===t?void 0:t.disabledFeatures)||[]})),ne=(0,A.useMemo)((function(){return te.includes("users.totalUserCount")}),[te]),re=(0,i.EV)(null==Y||null===(M=Y.guestUser)||void 0===M||null===(M=M.scopes)||void 0===M?void 0:M.create),oe=(0,g.Z)(h.Z.INVITED_USER_REGISTRATION).data,le=Jt((0,A.useState)(""),2),ce=le[0],de=le[1],me=Jt((0,A.useState)(1),2),fe=me[0],ve=me[1],ge=Jt((0,A.useState)(0),2),he=ge[0],ye=ge[1],be=Jt((0,A.useState)(u.r.DEFAULT_RESOURCE_LIST_ITEM_LIMIT),2),Ee=be[0],Se=be[1],we=Jt((0,A.useState)(!1),2),Ue=we[0],Ce=we[1],Oe=Jt((0,A.useState)(!1),2),Re=Oe[0],Ae=Oe[1],ke=Jt((0,A.useState)(!1),2),Ne=ke[0],Pe=ke[1],_e=Jt((0,A.useState)(void 0),2),xe=_e[0],ze=_e[1],Me=Jt((0,A.useState)(void 0),2),Ze=Me[0],je=Me[1],We=Jt((0,A.useState)(void 0),2),De=We[0],Fe=We[1],Ve=Jt((0,A.useState)(se.sk.USER),1)[0],He=Jt((0,A.useState)(),2),Qe=He[0],Ge=He[1],Ke=Jt((0,A.useState)(m.wO.primaryUserstoreName),2),Be=Ke[0],$e=Ke[1],Xe=Jt((0,A.useState)(ue.XC.PENDING),2),qe=Xe[0],Ye=Xe[1],Je=Jt((0,A.useState)(!1),1)[0],et=Jt((0,A.useState)(!1),2),tt=et[0],nt=et[1],rt=Jt((0,A.useState)([]),2),at=rt[0],it=rt[1],ot=Jt((0,A.useState)([]),2),lt=ot[0],st=ot[1],ut=Jt((0,A.useState)(!1),2),ct=ut[0],dt=ut[1],mt=Jt((0,A.useState)(!1),2),pt=mt[0],ft=mt[1],vt=Jt((0,A.useState)(!1),2),gt=vt[0],ht=vt[1],yt=Jt((0,A.useState)(u.r.DEFAULT_RESOURCE_LIST_ITEM_LIMIT),2),bt=yt[0],Et=yt[1],St=Jt((0,A.useState)(1),2),It=St[0],wt=St[1],Ut=(0,L.v9)((function(e){return e.config.ui.flowExecution.enableLegacyFlows})),Ct=(0,L.v9)((function(e){var t;return null==e||null===(t=e.profile)||void 0===t?void 0:t.profileSchemas})),Ot=(0,L.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t?void 0:t.systemReservedUserStores})),At=Jt((0,A.useState)([]),2),kt=At[0],Tt=At[1],Lt=d.l.getInstance(),Nt=[{key:2,text:W("parentOrgInvitations:searchdropdown.pendingLabel"),value:"Pending"},{key:3,text:W("parentOrgInvitations:searchdropdown.expiredLabel"),value:"Expired"}],Pt=Ee+1,_t=se._F.GROUPS_AND_ROLES_ATTRIBUTE,xt=(0,ie.M)(Q()),zt=xt.data,Mt=xt.isLoading,Zt=xt.mutate,jt=(0,E.y)(H===i.iK.ENABLED&&!Q()).data,Wt=(0,A.useMemo)((function(){var e=""===ce?null:ce;if(kt.length>0){var t=kt.map((function(e){var t=se.i4.find((function(t){return t.key===e}));return t?t.value:""})).filter((function(e){return""!==e}));if(t.length>0){var n=t.join(" and ");e=e?"".concat(e," and ").concat(n):n}}return e}),[ce,kt]),Dt=(0,x.WW)(Pt,fe,Wt,null,Be,_t),Ft=Dt.data,Vt=Dt.isLoading,Ht=Dt.error,Qt=Dt.mutate,Gt=(0,A.useMemo)((function(){return null==jt?void 0:jt.realmConfig}),[jt]),Kt=(0,A.useMemo)((function(){var e=[{key:-1,text:m.wO.primaryUserstoreName,value:m.wO.primaryUserstoreName}];return(null==q?void 0:q.length)>0&&q.forEach((function(t,n){if(t.name.toUpperCase()!==m.wO.primaryUserstoreName&&t.enabled&&(null==Ot||!Ot.includes(t.name))){var r={disabled:t.typeName===I.uD.RemoteUserStoreManager,key:n,text:t.name,value:t.name};e.push(r)}})),e}),[q]),Bt=(0,A.useMemo)((function(){return B(Be)}),[Be,X]);(0,A.useEffect)((function(){$()}),[]),(0,A.useEffect)((function(){Ht&&(Ht.response&&Ht.response.data&&Ht.response.data.description?F((0,C.V_)({description:Ht.response.data.description,level:U.QU.ERROR,message:W("console:manage.features.users.notifications.fetchUsers.error.message")})):F((0,C.V_)({description:W("console:manage.features.users.notifications.fetchUsers.genericError.description"),level:U.QU.ERROR,message:W("console:manage.features.users.notifications.fetchUsers.genericError.message")})))}),[Ht]),(0,A.useEffect)((function(){if(Q())if(wt(1),"userName co "!==ce&&""!==ce&&null!==ce){if(ce){var e=null==zt?void 0:zt.invitations;if(ce.includes("userName sw ")){var t,n=ce.split("sw ")[1];e=null===(t=e)||void 0===t?void 0:t.filter((function(e){return null==e?void 0:e.username.startsWith(n)}))}else if(ce.includes("userName ew ")){var r,a=ce.split("ew ")[1];e=null===(r=e)||void 0===r?void 0:r.filter((function(e){return null==e?void 0:e.username.endsWith(a)}))}else if(ce.includes("userName eq ")){var i,o=ce.split("eq ")[1];e=null===(i=e)||void 0===i?void 0:i.filter((function(e){return(null==e?void 0:e.username)===o}))}else if(ce.includes("userName co ")){var l,s=ce.split("co ")[1];e=null===(l=e)||void 0===l?void 0:l.filter((function(e){return null==e?void 0:e.username.includes(s)}))}st(e)}}else st(null==zt?void 0:zt.invitations)}),[ce]),(0,A.useEffect)((function(){dt(Re&&!pt&&!xe)}),[Re,pt]),(0,A.useEffect)((function(){var e;st(null==zt||null===(e=zt.invitations)||void 0===e?void 0:e.filter((function(e){return e.status===ue.XC.PENDING.toUpperCase()})))}),[null==zt?void 0:zt.invitations]),(0,A.useEffect)((function(){var e;if(qe!==ue.XC.ACCEPTED){var t=null==lt?void 0:lt.filter((function(e){return e.status===qe.toUpperCase()}));if((null===(e=t)||void 0===e?void 0:e.length)>bt){var n=It-1;t=t.slice(n,n+bt),it(t),Fe(t.length===bt)}else it(t),Fe(!1)}}),[lt,It,bt,tt,qe]);var Xt,qt,en,tn,nn=function(e){var t;if(e){var n=(0,R.Z)(e);return n.Resources=null==n||null===(t=n.Resources)||void 0===t?void 0:t.map((function(e){if((e.userName.split("/").length>1?e.userName.split("/")[0]:m.wO.primaryUserstoreName)!==m.wO.primaryUserstoreName){var t=null;if((null==e?void 0:e.emails)instanceof Array){var n=null==e?void 0:e.emails[0];t="string"==typeof n?n:null==n?void 0:n.value}return e.emails=[t],e}return e})),function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=e;return r.itemsPerPage===t?(r.Resources.splice(-1,n),je(!0)):je(!1),r}(n,Pt,1)}},rn=(0,A.useMemo)((function(){return nn(Ft)}),[Ft]),an=(0,A.useMemo)((function(){return(null==Ft?void 0:Ft.totalResults)||0}),[Ft]),on=(0,A.useMemo)((function(){return(0,Ie.I_)(Ct)}),[Ct]),ln=function(){Pe(!Ne),de(""),Tt([])},sn=function(e){de(e),ve(1),wt(1)},un=function(e){Tt(e),ve(1)},cn=function(e,t){ve((t.activePage-1)*Ee+1)},dn=function(e,t){Se(t.value)},mn=function(e,t){wt((t.activePage-1)*bt+1)},pn=function(e,t){Et(t.value)},fn=function(e,t){"all"===t.value?$e(null):$e(t.value),ve(1),Se(u.r.DEFAULT_RESOURCE_LIST_ITEM_LIMIT)},vn=function(){Qt()},gn=function(){ft(!0),(0,b.Qy)(S.v.USER_ONBOARDING_CONNECTOR_ID).then((function(e){var t=(null==e?void 0:e.connectors).find((function(e){return e.id===S.v.USER_EMAIL_VERIFICATION_CONNECTOR_ID})).properties.find((function(e){return e.name===S.v.EMAIL_VERIFICATION_ENABLED}));ze("true"===t.value||(null==oe?void 0:oe.isEnabled))})).catch((function(e){var t,n,r,a,i;i={description:null!==(t=null==e||null===(n=e.response)||void 0===n||null===(n=n.data)||void 0===n?void 0:n.description)&&void 0!==t?t:W("governanceConnectors:notifications.getConnector.genericError.description"),level:U.QU.ERROR,message:null!==(r=null==e||null===(a=e.response)||void 0===a||null===(a=a.data)||void 0===a?void 0:a.message)&&void 0!==r?r:W("governanceConnectors:notifications.getConnector.genericError.message")},F((0,C.V_)(i))})).finally((function(){return ft(!1)}))},hn=A.createElement(O.KM,{"data-componentid":"".concat(Z,"-add-user-button"),"data-testid":"".concat(Z,"-add-user-button")},A.createElement(N.Z,{name:"add"}),W("extensions:manage.users.buttons.addUserBtn"),A.createElement(N.Z,{name:"dropdown",className:"ml-3 mr-0"})),yn=[{key:0,text:W("common:startsWith"),value:"sw"},{key:1,text:W("common:endsWith"),value:"ew"},{key:2,text:W("common:contains"),value:"co"},{key:3,text:W("common:equals"),value:"eq"},{key:4,text:W("common:greaterThanOrEqual"),value:"ge"},{key:5,text:W("common:lessThanOrEqual"),value:"le"}],bn=function(e){return A.createElement(o.n,{onFilter:sn,filterAttributeOptions:(t=e,n=[{key:0,text:W("users:advancedSearch.form.dropdown.filterAttributeOptions.username"),value:"userName"}],t&&(n=n.concat(on)),n),filterConditionOptions:yn,filterAttributePlaceholder:W("users:advancedSearch.form.inputs.filterAttribute.placeholder"),filterConditionsPlaceholder:W("users:advancedSearch.form.inputs.filterCondition.placeholder"),filterValuePlaceholder:W("users:advancedSearch.form.inputs.filterValue.placeholder"),placeholder:W("users:advancedSearch.placeholder"),defaultSearchAttribute:"userName",defaultSearchOperator:"co",enableMultipleFilterConditions:!0,triggerClearQuery:Ne,disableSearchAndFilterOptions:(null==rn?void 0:rn.totalResults)<=0&&!ce});var t,n},En=function(){var e;return A.createElement(O.PS,{className:"sub-org-users-list",advancedSearch:A.createElement(A.Fragment,null,bn(!0),A.createElement(ae,{selectedFilters:kt,onChange:un})),currentListSize:null==rn||null===(e=rn.Resources)||void 0===e?void 0:e.length,listItemLimit:Ee,onItemsPerPageDropdownChange:dn,"data-testid":"user-mgt-user-list-layout",onPageChange:cn,rightActionPanel:A.createElement(P.Z,{"data-testid":"user-mgt-user-list-userstore-dropdown",selection:!0,options:Kt,onChange:fn,defaultValue:m.wO.primaryUserstoreName,loading:K,readonly:Kt.length<=1}),showPagination:!0,totalPages:wn(),totalListSize:an,showTotalListSize:!ne,paginationOptions:{disableNextButton:!Ze,showItemsPerPageDropdown:!(null!==p.x8&&void 0!==p.x8&&p.x8.hiddenItemsPerPageRemoteUserStoreDropdown)||Be===m.wO.primaryUserstoreName},isLoading:Vt},kt.length>0&&A.createElement(_.Z.Group,null,kt.map((function(e){var t=se.i4.find((function(t){return t.key===e}));return t?A.createElement(_.Z,{key:e,className:"filter-label active basic",as:"a",onClick:function(){return Un(e)},"data-componentid":"".concat(j,"-account-status-filter-label-").concat(e)},W(t.text),A.createElement(a.DX,{className:"filter-label-close-icon"})):null}))),K||0!==(null==Kt?void 0:Kt.length)?A.createElement(Te,{advancedSearch:bn(!0),usersList:rn,onUserDelete:vn,userMetaListContent:null,realmConfigs:Gt,onEmptyListPlaceholderActionClick:function(){return Ce(!0)},onSearchQueryClear:ln,searchQuery:Wt,"data-testid":"user-mgt-user-list",featureConfig:Y,isReadOnlyUserStore:Bt}):A.createElement(O.$J,{subtitle:[W("users:placeholders.userstoreError.subtitles.0"),W("users:placeholders.userstoreError.subtitles.1")],title:W("users:placeholders.userstoreError.title"),image:(0,l.jF)().genericError,imageSize:"tiny"}))},Sn=function(){var e;return A.createElement(O.PS,{className:"sub-org-users-list",advancedSearch:bn(!1),currentListSize:(null==zt||null===(e=zt.invitations)||void 0===e?void 0:e.length)||null,listItemLimit:bt,onItemsPerPageDropdownChange:pn,"data-componentid":"".concat(j,"-user-mgt-user-list-layout"),"data-testid":"".concat(Z,"-user-mgt-user-list-layout"),onPageChange:mn,showPagination:!0,totalPages:wn(),totalListSize:null==at?void 0:at.length,showTotalListSize:!ne,isLoading:Vt||Mt,paginationOptions:{disableNextButton:!De,showItemsPerPageDropdown:Be===m.wO.primaryUserstoreName},showPaginationPageLimit:!Je,leftActionPanel:A.createElement(P.Z,{"data-componentid":"".concat(j,"-list-userstore-dropdown"),selection:!0,options:Nt,onChange:In,text:W("parentOrgInvitations:filterLabel")+qe,disabled:Mt})},K||0!==(null==Kt?void 0:Kt.length)?A.createElement(pe,{invitationStatusOption:null,onEmptyListPlaceholderActionClick:function(){return Ce(!0)},onboardedGuestUserList:rn,onSearchQueryClear:ln,guestUsersList:at,getGuestUsersList:function(){return Zt()},searchQuery:ce,userTypeSelection:se.rb.EXTERNAL,"data-testid":Z}):A.createElement(O.$J,{subtitle:[W("users:placeholders.userstoreError.subtitles.0"),W("users:placeholders.userstoreError.subtitles.1")],title:W("users:placeholders.userstoreError.title"),image:(0,l.jF)().genericError,imageSize:"tiny"}))},In=function(e,t){Ye(t.value),nt(!0)},wn=function(){return(fe-1)/Ee+2},Un=function(e){Tt((function(t){return t.filter((function(t){return t!==e}))})),ve(1)};return A.createElement(O.Xg,{action:J&&!Vt&&(!Q()||!Mt)&&!Bt&&A.createElement(P.Z,{"data-componentid":"".concat(j,"-add-user-dropdown"),direction:"left",floating:!0,icon:null,trigger:hn},A.createElement(P.Z.Menu,null,(tn=[],J&&tn.push({"data-componentid":"".concat(j,"-add-user-dropdown-item"),key:1,text:W("users:addUserDropDown.addNewUser"),value:se.rb.EXTERNAL}),ee&&tn.push({"data-componentid":"".concat(Z,"-bulk-import-users-dropdown-item"),"data-testid":"".concat(Z,"-bulk-import-users-dropdown-item"),key:2,text:W("users:addUserDropDown.bulkImport"),value:se.Bv.BULK_IMPORT}),Q()&&null!=Y&&null!==(en=Y.parentUserInvitation)&&void 0!==en&&en.enabled&&re&&tn.push({className:"users-invite-parent-user","data-componentid":"".concat(j,"-invite-parent-user"),key:3,text:A.createElement(A.Fragment,null,W("parentOrgInvitations:addUserWizard.heading"),V&&A.createElement(r.Z,{size:"small",label:W(v.j.NEW),className:"oxygen-chip-new"})),value:se.rb.INTERNAL}),tn).map((function(e){return A.createElement(P.Z.Item,Yt({key:e.value,onClick:function(){return function(e){switch(gn(),e){case se.rb.EXTERNAL:Lt.publish("manage-users-click-create-new",{type:"user"}),Ce(!0),Ge(se.rb.EXTERNAL);break;case se.Bv.BULK_IMPORT:Ae(!0);break;case se.rb.INTERNAL:Lt.publish("manage-users-click-invite-new",{type:"user"}),ht(!0)}}(e.value)}},e))})))),title:W("pages:users.title"),pageTitle:W("pages:users.title"),description:A.createElement(A.Fragment,null,W("extensions:manage.users.usersSubTitle"),A.createElement(O.eb,{link:D("manage.users.learnMore")},W("common:learnMore"))),"data-testid":"".concat(Z,"-page-layout")},Q()?A.createElement(O.M$,{activeIndex:he,"data-testid":"".concat(Z,"-administrator-tabs"),defaultActiveIndex:0,onTabChange:function(e,t){ye(t.activeIndex),ln(),0===t.activeIndex?Ge(se.rb.INTERNAL):1===t.activeIndex&&Ge(se.rb.EXTERNAL)},panes:(qt=[],qt.push({componentId:"users",menuItem:W("parentOrgInvitations:tab.usersTab"),render:En}),null!=Y&&null!==(Xt=Y.parentUserInvitation)&&void 0!==Xt&&Xt.enabled&&qt.push({componentId:"invitations",menuItem:W("parentOrgInvitations:tab.invitationsTab"),render:Sn}),qt)}):En(),Ue&&!pt&&A.createElement(Le.G,{"data-componentid":"user-mgt-add-user-wizard-modal","data-testid":"user-mgt-add-user-wizard-modal",isSubOrg:Q(),closeWizard:function(){Ce(!1),ze(void 0)},emailVerificationEnabled:xe,onSuccessfulUserAddition:function(e){var t;e?(Zt(),Qt(),Lt.publish("manage-users-finish-creating-user"),c.m.push(null===(t=s.$.getPaths().get("USER_EDIT"))||void 0===t?void 0:t.replace(":id",e))):c.m.push(s.$.getPaths().get("USERS"))},defaultUserTypeSelection:Ve,userTypeSelection:Qe,listOffset:fe,listItemLimit:Ee,updateList:function(){return Qt()},userStore:null!=Be?Be:m.wO.primaryUserstoreName}),Re&&!pt&&xe&&A.createElement(Rt,{"data-componentid":"user-mgt-bulk-import-user-wizard-modal",closeWizard:function(){Ae(!1),Qt()},userstore:null!=Be?Be:m.wO.primaryUserstoreName}),ct&&A.createElement(O.cV,{"data-componentid":"".concat(j,"-select-multiple-invite-confirmation-modal"),onClose:function(){dt(!1),Ae(!1)},type:"warning",open:ct,primaryAction:W("common:close"),onPrimaryActionClick:function(){dt(!1),Ae(!1)},closeOnDimmerClick:!1},A.createElement(O.cV.Header,null,W("users:confirmations.addMultipleUser.header")),A.createElement(O.cV.Message,{attached:!0,warning:!0},W("users:confirmations.addMultipleUser.message")),A.createElement(O.cV.Content,null,Ut?A.createElement(T.c,{i18nKey:"users:confirmations.addMultipleUser.legacyContent"},"Invite User to Set Password should be enabled to add multiple users. Please enable email invitations for user password setup from",A.createElement(O.rU,{onClick:function(){return c.m.push(s.$.getPaths().get("GOVERNANCE_CONNECTOR_EDIT").replace(":categoryId",S.v.USER_ONBOARDING_CONNECTOR_ID).replace(":connectorId",S.v.ASK_PASSWORD_CONNECTOR_ID))},external:!1},"Login & Registration settings")):A.createElement(T.c,{i18nKey:"users:confirmations.addMultipleUser.content"},"Invite User to Set Password should be enabled to add multiple users. Please enable user password setup invitations from the",A.createElement(O.rU,{onClick:function(){return c.m.push(s.$.getPaths().get("INVITE_USER_PASSWORD_SETUP_FLOW_BUILDER"))},external:!1},"Invited User Registration Flow Builder.")))),gt&&A.createElement($t,{closeWizard:function(){ht(!1),Zt()},onUserInviteSuccess:function(){return Zt()},"data-componentid":"user-mgt-invite-parent-user-wizard-modal"}))};tn.defaultProps={"data-componentid":"users","data-testid":"users"};const nn=tn},13932:(e,t,n)=>{n.d(t,{r:()=>s});var r,a=n(44194),i=["title","titleId"];function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(null,arguments)}var l=function(e,t){var n=e.title,l=e.titleId,s=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,i);return a.createElement("svg",o({xmlns:"http://www.w3.org/2000/svg",className:"icon",width:24,height:24,viewBox:"0 0 24 24",ref:t,"aria-labelledby":l},s),n?a.createElement("title",{id:l},n):null,r||(r=a.createElement("path",{id:"remove-circle",d:"M7,14a7,7,0,1,1,7-7A7.008,7.008,0,0,1,7,14ZM3.5,6.69v.6h7v-.6Z"})))},s=(0,a.forwardRef)(l);n.p},78779:(e,t,n)=>{n.d(t,{r:()=>s});var r,a=n(44194),i=["title","titleId"];function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(null,arguments)}var l=function(e,t){var n=e.title,l=e.titleId,s=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,i);return a.createElement("svg",o({xmlns:"http://www.w3.org/2000/svg",className:"icon",width:24,height:24,viewBox:"0 0 24 24",ref:t,"aria-labelledby":l},s),n?a.createElement("title",{id:l},n):null,r||(r=a.createElement("path",{d:"M12,22a7,7,0,0,0,5-11.894V7A5,5,0,0,0,7,7v3.106A7,7,0,0,0,12,22Zm1-6.277V18a1,1,0,0,1-2,0V15.723a2,2,0,1,1,2,0ZM9,7a3,3,0,0,1,6,0V8.683a6.93,6.93,0,0,0-6,0Z"})))},s=(0,a.forwardRef)(l);n.p},10050:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(81611),a=n.n(r),i=n(83948),o=n.n(i)()(a());o.push([e.id,".account-status-filter-dropdown{margin-right:5px;min-width:200px}.account-status-filter-dropdown .dropdown-label-container{align-items:center;display:flex;justify-content:space-between;width:100%}.account-status-filter-dropdown .dropdown-label-container .status-count-badge{margin-right:5px}.account-status-filter-dropdown .dropdown-label-container .status-count-badge .MuiBadge-badge{background-color:var(--oxygen-palette-primary-main);color:var(--oxygen-palette-primary-contrastText)}.account-status-filter-dropdown .account-status-select-input{background-color:var(--oxygen-palette-grey-50);height:40px}.account-status-filter-dropdown .account-status-select-input .MuiOutlinedInput-notchedOutline{border:none}.account-status-filter-dropdown .account-status-select-input.Mui-focused .MuiOutlinedInput-notchedOutline{border:1px solid var(--oxygen-palette-primary-main)}",""]);const l=o},43392:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(81611),a=n.n(r),i=n(83948),o=n.n(i)()(a());o.push([e.id,".invite-parent-org-user-form .press-enter-prompt{display:flex;align-items:center;justify-content:space-between}",""]);const l=o},45711:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(81611),a=n.n(r),i=n(83948),o=n.n(i)()(a());o.push([e.id,".users-invite-parent-user .oxygen-chip-new{margin-left:.5rem}.filter-label{display:inline-flex !important;align-items:center;justify-content:center}.filter-label-close-icon{margin-left:4px}",""]);const l=o}}]);