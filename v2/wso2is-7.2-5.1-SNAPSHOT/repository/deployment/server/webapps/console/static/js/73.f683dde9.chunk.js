"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[73],{73:(e,n,t)=>{t.r(n),t.d(n,{default:()=>V});var a=t(9821),r=t(60486),i=t(40838),o=t(33839),l=t(44485),c=t(6833),u=t(82406),s=t(79438),m=t(20494),d=t(44194),f=t(10479),g=t(47245),p=t(41206),v=t(89141);function A(e){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A(e)}function E(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,I(a.key),a)}}function N(e,n,t){return n&&E(e.prototype,n),t&&E(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function h(e,n,t){return(n=I(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function I(e){var n=function(e,n){if("object"!=A(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,n||"default");if("object"!=A(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==A(n)?n:n+""}var b=N((function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e)}));h(b,"VALIDATION_CONFIGURATION_FIELD_CONSTRAINTS",{MIN_LENGTH:1,MIN_VALUE:0,USERNAME_MAX_LENGTH:2,USERNAME_MAX_VALUE:50,USERNAME_MIN_LENGTH:1,USERNAME_MIN_VALUE:3}),h(b,"VALIDATION_DEFAULT_CONSTANTS",{USERNAME_MAX:"50",USERNAME_MIN:"3"});var y=function(e){return e.EMAIL="emailType",e.ALPHANUMERIC="customType",e}({});function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function T(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function L(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?T(Object(t),!0).forEach((function(n){S(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):T(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function S(e,n,t){return(n=function(e){var n=function(e,n){if("object"!=O(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,n||"default");if("object"!=O(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==O(n)?n:n+""}(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function _(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var a,r,i,o,l=[],c=!0,u=!1;try{if(i=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;c=!1}else for(;!(c=(a=i.call(t)).done)&&(l.push(a.value),l.length!==n);c=!0);}catch(e){u=!0,r=e}finally{try{if(!c&&null!=t.return&&(o=t.return(),Object(o)!==o))return}finally{if(u)throw r}}return l}}(e,n)||function(e,n){if(e){if("string"==typeof e)return R(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?R(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,a=Array(n);t<n;t++)a[t]=e[t];return a}var C="username-validation-form",U=function(e){var n=e["data-componentid"],t=(0,g.I0)(),A=(0,d.useRef)(null),E=(0,f.$)().t,N=_((0,d.useState)(!1),2),h=N[0],I=N[1],O=_((0,d.useState)(void 0),2),T=O[0],S=O[1],R=_((0,d.useState)(!1),2),U=R[0],V=R[1],x=_((0,d.useState)(void 0),2),M=x[0],w=x[1],P=(0,o.Wf)(),D=P.data,F=P.isLoading,j=P.error,G=P.mutate,k=null==D?void 0:D.filter((function(e){return"password"===e.field}));(0,d.useEffect)((function(){F||D&&H()}),[F]),(0,d.useEffect)((function(){i.m.location.state===a.jo.APPLICATION_STATE&&V(!0)}),[]),(0,d.useEffect)((function(){if(j)if(j.response&&j.response.data&&j.response.data.description){var e;if(404===j.response.status)return;t((0,u.V_)({description:null!==(e=j.response.data.description)&&void 0!==e?e:E("extensions:manage.accountLogin.notifications.error.description"),level:c.QU.ERROR,message:E("extensions:manage.accountLogin.notifications.error.message")}))}else t((0,u.V_)({description:E("extensions:manage.accountLogin.notifications.genericError.description"),level:c.QU.ERROR,message:E("extensions:manage.accountLogin.notifications.genericError.message")}))}),[j]);var H=function(){var e=null==D?void 0:D.filter((function(e){return"username"===e.field}));if(!((null==e?void 0:e.length)<1)){var n=e[0].rules,t={enableValidator:"true"==q(n,"AlphanumericValidator","enable.validator")||"true"!=q(n,"EmailFormatValidator","enable.validator")?"true":"false",field:"username",isAlphanumericOnly:"true"!==q(n,"AlphanumericValidator","enable.special.characters"),maxLength:q(n,"LengthValidator","max.length")?q(n,"LengthValidator","max.length"):b.VALIDATION_DEFAULT_CONSTANTS.USERNAME_MAX,minLength:q(n,"LengthValidator","min.length")?q(n,"LengthValidator","min.length"):b.VALIDATION_DEFAULT_CONSTANTS.USERNAME_MIN,type:"rules"};S(t),w(t)}},q=function(e,n,t){var a=null==e?void 0:e.filter((function(e){return e.validator===n}));if((null==a?void 0:a.length)>0){var r,i=a[0].properties;if((null===(r=i=i.filter((function(e){return e.key===t})))||void 0===r?void 0:r.length)>0)return i[0].value}return null},Q=function(){I(!0),(0,o.Tf)([l.Pv.USERNAME]).then((function(){G(),t((0,u.V_)({description:E("extensions:manage.accountLogin.notifications.revert.success.description"),level:c.QU.SUCCESS,message:E("extensions:manage.accountLogin.notifications.revert.success.message")}))})).catch((function(){t((0,u.V_)({description:E("extensions:manage.accountLogin.notifications.revert.error.description"),level:c.QU.ERROR,message:E("extensions:manage.accountLogin.notifications.revert.error.message")}))})).finally((function(){I(!1)}))},X=function(e){(function(e){var n=!1,a="";return Number(e.minLength)<3?(n=!0,a=E("extensions:manage.accountLogin.validationError.minLimitError")):Number(e.maxLength)>50?(n=!0,a=E("extensions:manage.accountLogin.validationError.maxLimitError")):Number(e.minLength)>Number(e.maxLength)&&(n=!0,a=E("extensions:manage.accountLogin.validationError.minMaxMismatch")),!n||(t((0,u.V_)({description:a,level:c.QU.ERROR,message:E("extensions:manage.accountLogin.validationError.wrongCombination")})),!1)})(e)&&(I(!0),(0,o.sM)(e,k[0],null).then((function(){G(),t((0,u.V_)({description:E("extensions:manage.accountLogin.notifications.success.description"),level:c.QU.SUCCESS,message:E("validation:notifications.success.message")}))})).catch((function(e){var n,a,r,i,o,l,s;null!=e&&null!==(n=e.response)&&void 0!==n&&null!==(n=n.data)&&void 0!==n&&n.description?t((0,u.V_)({description:null!==(a=null!==(r=null==e||null===(i=e.response)||void 0===i||null===(i=i.data)||void 0===i?void 0:i.description)&&void 0!==r?r:null==e||null===(o=e.response)||void 0===o||null===(o=o.data)||void 0===o?void 0:o.detail)&&void 0!==a?a:E("extensions:manage.accountLogin.notifications.error.description"),level:c.QU.ERROR,message:null!==(l=null==e||null===(s=e.response)||void 0===s||null===(s=s.data)||void 0===s?void 0:s.message)&&void 0!==l?l:E("extensions:manage.accountLogin.notifications.error.message")})):t((0,u.V_)({description:E("extensions:manage.accountLogin.notifications.genericError.description"),level:c.QU.ERROR,message:E("extensions:manage.accountLogin.notifications.genericError.message")}))})).finally((function(){I(!1)})))};return d.createElement(m.Xg,{pageTitle:E("extensions:manage.accountLogin.editPage.pageTitle"),title:d.createElement(d.Fragment,null,E("extensions:manage.accountLogin.editPage.pageTitle")),description:d.createElement(d.Fragment,null,E("extensions:manage.accountLogin.editPage.description")),"data-componentid":"".concat(n,"-page-layout"),backButton:{"data-testid":"".concat(n,"-page-back-button"),onClick:function(){U?i.m.push(r.$.getPaths().get("APPLICATIONS")):i.m.push(r.$.getPaths().get("LOGIN_AND_REGISTRATION"))},text:E(U?"extensions:manage.accountLogin.goBackToApplication":"governanceConnectors:goBackLoginAndRegistration")},bottomMargin:!1,contentTopMargin:!0,pageHeaderMaxWidth:!0},d.createElement(p.R,{innerRef:A},d.createElement(v.Z,{className:"mt-3"},d.createElement(v.Z.Row,{columns:1},d.createElement(v.Z.Column,{width:16},d.createElement(m.pJ,{className:"form-wrapper",padded:"very"},T&&M?d.createElement("div",{className:"validation-configurations password-validation-configurations"},d.createElement(s.l0,{id:C,initialValues:T,uncontrolledForm:!0,validate:null,onSubmit:function(e){return X(e)}},d.createElement("div",null,d.createElement(m.xv,null,E("extensions:manage.accountLogin.editPage.usernameType")),d.createElement(m.kW,{compact:!0},E("extensions:manage.accountLogin.editPage.usernameTypeHint"))),d.createElement("div",null,Object.keys(y).map((function(e,t){var a=y[e];return d.createElement(s.gN.Radio,{key:t,ariaLabel:"".concat(a," layout swatch"),name:"enableValidator",label:E("extensions:manage.accountLogin.editPage."+a),required:!1,value:"customType"==a?"true":"false","data-componentid":"".concat(n,"-").concat(a,"-radio"),listen:function(){w(L(L({},M),{},{enableValidator:"customType"==a?"true":"false"}))}})}))),"true"==(null==M?void 0:M.enableValidator)&&d.createElement("div",{className:"ml-6"},d.createElement("div",{className:"criteria-username"},d.createElement(m.xv,null,E("extensions:manage.accountLogin.editPage.usernameLength.0")),d.createElement(s.gN.Input,{ariaLabel:"minLength",inputType:"number",name:"minLength",min:b.VALIDATION_CONFIGURATION_FIELD_CONSTRAINTS.USERNAME_MIN_VALUE,max:b.VALIDATION_CONFIGURATION_FIELD_CONSTRAINTS.USERNAME_MAX_VALUE,width:2,required:!0,hidden:!1,placeholder:"min",maxLength:b.VALIDATION_CONFIGURATION_FIELD_CONSTRAINTS.USERNAME_MAX_LENGTH,minLength:b.VALIDATION_CONFIGURATION_FIELD_CONSTRAINTS.USERNAME_MIN_LENGTH,validation:function(e,n){var t=parseInt(e),a=b.VALIDATION_CONFIGURATION_FIELD_CONSTRAINTS.USERNAME_MIN_VALUE;if(t<a)return E("common:minValidation",{min:a});var r=n.maxLength?parseInt(n.maxLength):b.VALIDATION_CONFIGURATION_FIELD_CONSTRAINTS.USERNAME_MAX_VALUE;return t>r?E("common:maxValidation",{max:r}):void 0},listen:function(e){w(L(L({},M),{},{minLength:e}))},readOnly:!1,disabled:!1,"data-testid":"".concat(n,"-min-length")}),d.createElement("label",null,E("extensions:manage.accountLogin.editPage.usernameLength.1")),d.createElement(s.gN.Input,{ariaLabel:"maxLength",inputType:"number",name:"maxLength",min:b.VALIDATION_CONFIGURATION_FIELD_CONSTRAINTS.USERNAME_MIN_VALUE,max:b.VALIDATION_CONFIGURATION_FIELD_CONSTRAINTS.USERNAME_MAX_VALUE,width:2,required:!0,hidden:!1,placeholder:"max",maxLength:b.VALIDATION_CONFIGURATION_FIELD_CONSTRAINTS.USERNAME_MAX_LENGTH,labelPosition:"top",minLength:b.VALIDATION_CONFIGURATION_FIELD_CONSTRAINTS.USERNAME_MIN_LENGTH,validation:function(e,n){var t=parseInt(e),a=n.minLength?parseInt(n.minLength):b.VALIDATION_CONFIGURATION_FIELD_CONSTRAINTS.USERNAME_MIN_VALUE;if(t<a)return E("common:minValidation",{min:a});var r=b.VALIDATION_CONFIGURATION_FIELD_CONSTRAINTS.USERNAME_MAX_VALUE;return t>r?E("common:maxValidation",{max:r}):void 0},listen:function(e){w(L(L({},M),{},{maxLength:e}))},readOnly:!1,disabled:!1,"data-testid":"".concat(n,"-max-length")}),d.createElement("label",null,E("extensions:manage.accountLogin.editPage.usernameLength.2"))),d.createElement(s.gN.Checkbox,{ariaLabel:"isAlphanumericOnly",name:"isAlphanumericOnly",label:E("extensions:manage.accountLogin.editPage.usernameAlphanumeric"),tabIndex:3,hint:M.isAlphanumericOnly?void 0:E("extensions:manage.accountLogin.editPage.usernameSpecialCharsHint"),listen:function(e){return w(L(L({},M),{},{isAlphanumericOnly:e}))},width:16,defaultValue:T,"data-componentid":"".concat(n,"-is-alphanumeric-only")})),d.createElement(s.gN.Button,{form:C,size:"small",buttonType:"primary_btn",ariaLabel:"Self registration update button",name:"update-button","data-testid":"".concat(n,"-submit-button"),disabled:null,loading:h,label:E("common:update"),hidden:null}))):d.createElement(m.pO,null)))),d.createElement(v.Z.Row,{columns:1},d.createElement(v.Z.Column,{width:16},d.createElement(m.v9,{sectionHeader:E("common:dangerZone")},d.createElement(m.cN,{actionTitle:E("governanceConnectors:dangerZone.actionTitle"),header:E("governanceConnectors:dangerZone.heading"),subheader:E("governanceConnectors:dangerZone.subHeading"),onActionClick:function(){return Q()},"data-componentid":"".concat(n,"-danger-zone")})))))))};U.defaultProps={"data-componentid":"username-validation-edit-page"};const V=U},33839:(e,n,t)=>{t.d(n,{Tf:()=>a.Tf,Wf:()=>a.Wf,sM:()=>a.sM});var a=t(3116)},3116:(e,n,t)=>{t.d(n,{Tf:()=>p,Wf:()=>v,sM:()=>g});var a=t(2292),r=t(96124),i=t(76271),o=t(87029),l=t(21257),c=t(43939),u=t(6833),s=t(44485);function m(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(e){if("string"==typeof e)return d(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?d(e,n):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,a=Array(n);t<n;t++)a[t]=e[t];return a}var f=a.AsgardeoSPAClient.getInstance().httpRequest.bind(a.AsgardeoSPAClient.getInstance()).bind(a.AsgardeoSPAClient.getInstance()),g=function(e,n,t){var a={data:[n,t,A(e),E(e)].filter((function(e){return null!=e})),headers:{Accept:"application/json","Content-Type":"application/json"},method:u.f2.PUT,url:i.h.getState().config.endpoints.validationServiceMgt};return f(a).then((function(e){if(200!==e.status)throw new c.u(s.Q0.CONFIGURATION_UPDATE_INVALID_STATUS_CODE_ERROR,null,e.status,e.request,e,e.config);return Promise.resolve(e.data)})).catch((function(e){throw new c.u(s.Q0.CONFIGURATION_STATUS_UPDATE_ERROR,e.stack,e.code,e.request,e.response,e.config)}))},p=function(e){var n={data:{fields:e},headers:{Accept:"application/json","Content-Type":"application/json"},method:u.f2.POST,url:i.h.getState().config.endpoints.validationServiceMgt+"/revert"};return f(n).then((function(e){if(200!==e.status)throw new c.u(s.Q0.CONFIGURATION_REVERT_INVALID_STATUS_CODE_ERROR,null,e.status,e.request,e,e.config);return Promise.resolve(e.data)})).catch((function(e){throw new c.u(s.Q0.CONFIGURATION_REVERT_ERROR,e.stack,e.code,e.request,e.response,e.config)}))},v=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=(0,l.z)().organizationType,t={headers:{Accept:"application/json","Content-Type":"application/json"},method:u.f2.GET,params:{},url:n===o.$B.SUBORGANIZATION?i.h.getState().config.endpoints.validationServiceMgtSubOrg:i.h.getState().config.endpoints.validationServiceMgt},a=(0,r.Z)(e?t:null,{shouldRetryOnError:!1}),c=a.data,s=a.error;return{data:c,error:s,isLoading:!c&&!s,isValidating:a.isValidating,mutate:a.mutate}},A=function(e){if("username"!==e.field){var n=[{properties:[{key:"min.length",value:e.minLength?e.minLength:"8"},{key:"max.length",value:e.maxLength?e.maxLength:"30"}],validator:"LengthValidator"},{properties:[{key:"min.length",value:e.minNumbers?e.minNumbers:"1"}],validator:"NumeralValidator"},{properties:[{key:"min.length",value:e.minUpperCaseCharacters?e.minUpperCaseCharacters:"1"}],validator:"UpperCaseValidator"},{properties:[{key:"min.length",value:e.minLowerCaseCharacters?e.minLowerCaseCharacters:"8"}],validator:"LowerCaseValidator"},{properties:[{key:"min.length",value:e.minSpecialCharacters?e.minSpecialCharacters:"8"}],validator:"SpecialCharacterValidator"}];return e.uniqueCharacterValidatorEnabled&&Number(e.minUniqueCharacters)>0&&(n=[].concat(m(n),[{properties:[{key:"min.unique.character",value:e.minUniqueCharacters?e.minUniqueCharacters:"1"}],validator:"UniqueCharacterValidator"}])),e.consecutiveCharacterValidatorEnabled&&Number(e.maxConsecutiveCharacters)>0&&(n=[].concat(m(n),[{properties:[{key:"max.consecutive.character",value:e.maxConsecutiveCharacters?e.maxConsecutiveCharacters:"1"}],validator:"RepeatedCharacterValidator"}])),{field:"password",rules:n}}},E=function(e){if(e&&"password"!==(null==e?void 0:e.field)){var n=[];return"false"===(null==e?void 0:e.enableValidator)?n.push({properties:[{key:"enable.validator",value:"true"}],validator:"EmailFormatValidator"}):n.push({properties:[{key:"enable.validator",value:"true"},{key:"enable.special.characters",value:"".concat(!e.isAlphanumericOnly)}],validator:"AlphanumericValidator"},{properties:[{key:"min.length",value:e.minLength?e.minLength:"3"},{key:"max.length",value:e.maxLength?e.maxLength:"50"}],validator:"LengthValidator"}),{field:"username",rules:n}}}},44485:(e,n,t)=>{function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function r(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,c(a.key),a)}}function i(e,n,t){return n&&r(e.prototype,n),t&&r(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function o(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function l(e,n,t){return(n=c(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function c(e){var n=function(e,n){if("object"!=a(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==a(n)?n:n+""}t.d(n,{Ps:()=>u,Pv:()=>m,Q0:()=>s});var u=i((function e(){o(this,e)}));l(u,"VALIDATION_CONFIGURATION_FORM_FIELD_CONSTRAINTS",{MIN_LENGTH:1,MIN_VALUE:0,PASSWORD_MIN_LENGTH:1,PASSWORD_MIN_VALUE:5}),l(u,"FEATURE_DICTIONARY",(new Map).set("RULE_BASED_PASSWORD_EXPIRY","validation.ruleBasedPasswordExpiry"));var s=i((function e(){o(this,e)}));l(s,"CONFIGURATION_STATUS_UPDATE_ERROR","An error occurred while updating validation configurations."),l(s,"CONFIGURATION_REVERT_ERROR","An error occurred while reverting validation configurations."),l(s,"CONFIGURATION_UPDATE_INVALID_STATUS_CODE_ERROR","Received an invalid status code while updating validation configurations."),l(s,"CONFIGURATION_REVERT_INVALID_STATUS_CODE_ERROR","Received an invalid status code while reverting validation configurations.");var m=function(e){return e.USERNAME="username",e.PASSWORD="password",e}({})}}]);