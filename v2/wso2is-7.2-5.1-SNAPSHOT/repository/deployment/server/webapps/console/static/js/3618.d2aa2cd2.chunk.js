"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[3618],{43618:(e,t,n)=>{n.r(t),n.d(t,{default:()=>te});var o=n(10999),a=n(55007),r=n(25134),i=n(60486),l=n(40838),c=n(86105),s=n(20494),u=n(44194),d=n(10479),m=n(47245),h=n(10909),f=n(26154),p=n(52087),b=n(96124),g=n(76271),v=n(6833);const y=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t={headers:{Accept:"application/json","Content-Type":"application/json"},method:v.f2.GET,url:"".concat(g.h.getState().config.endpoints.webhooks)},n=(0,b.Z)(e?t:null,{shouldRetryOnError:!1});return{data:n.data,error:n.error,isLoading:n.isLoading,isValidating:n.isValidating,mutate:n.mutate}};var w=n(58951),k=n(64961),S=n(12638),E=n(37077),A=n(57982),C=n(51835),T=n.n(C),I=n(27975),P=n.n(I),L=n(55900),O=n.n(L),W=n(21555),j=n.n(W),M=n(3621),V=n.n(M),x=n(5062),Z=n.n(x),R=n(35758),Q={};Q.styleTagTransform=Z(),Q.setAttributes=j(),Q.insert=O().bind(null,"head"),Q.domAPI=P(),Q.insertStyleElement=V();T()(R.Z,Q);R.Z&&R.Z.locals&&R.Z.locals;function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,a,r,i,l=[],c=!0,s=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(o=r.call(n)).done)&&(l.push(o.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return F(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?F(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}const H=function(e){var t,n,o,r=e.isLoading,i=e.list,l=e.isWebSubHubAdapterMode,c=e.onWebhookDelete,h=e.onWebhookEdit,p=e.onEmptyListPlaceholderActionClick,b=e.onSearchQueryClear,g=e.searchQuery,v=e["data-componentid"],y=void 0===v?"webhook-list":v,w=(0,d.$)().t,C=(0,m.v9)((function(e){var t;return null===(t=e.config.ui.features)||void 0===t?void 0:t.webhooks})),T=(0,a.EV)(null==C||null===(t=C.scopes)||void 0===t?void 0:t.update),I=(0,a.EV)(null==C||null===(n=C.scopes)||void 0===n?void 0:n.delete),P=(0,a.EV)(null==C||null===(o=C.scopes)||void 0===o?void 0:o.create),L=_((0,u.useState)(!1),2),O=L[0],W=L[1],j=_((0,u.useState)(void 0),2),M=j[0],V=j[1],x=function(e){h(e)},Z=function(){var e,t;return g&&0===(null==i||null===(e=i.webhooks)||void 0===e?void 0:e.length)?u.createElement(s.$J,{action:u.createElement(s.Qj,{onClick:b},w("console:develop.placeholders.emptySearchResult.action")),image:(0,k.jF)().emptySearch,imageSize:"tiny",title:w("console:develop.placeholders.emptySearchResult.title"),subtitle:[w("console:develop.placeholders.emptySearchResult.subtitles.0",{query:g}),w("console:develop.placeholders.emptySearchResult.subtitles.1")],"data-componentid":"".concat(y,"-empty-search-placeholder")}):0!==(null==i?void 0:i.totalResults)||r?null:u.createElement(s.$J,{action:u.createElement(a.di,{when:null==C||null===(t=C.scopes)||void 0===t?void 0:t.create},u.createElement(s.KM,{onClick:p,disabled:!P},u.createElement(f.Z,{name:"add"}),w("webhooks:pages.list.buttons.add"))),image:(0,k.jF)().newList,imageSize:"tiny",subtitle:[w("webhooks:pages.list.emptyList.subHeading")],"data-componentid":"".concat(y,"-empty-list-placeholder")})};return u.createElement(u.Fragment,null,u.createElement(s.wQ,{className:"webhooks-table",isLoading:r,loadingStateOptions:{count:10,imageType:"square"},actions:function(){var e=[];e.push({"data-componentid":"".concat(y,"-item-edit-button"),icon:function(){return T?"pencil alternate":"eye"},onClick:function(e,t){x(t)},popupText:function(){return w(T?"common:edit":"common:view")},renderer:"semantic-icon"});return I&&e.push({"data-componentid":"".concat(y,"-item-delete-button"),hidden:function(e){return!function(e){return!l||(null==e?void 0:e.status)===A.v.INACTIVE||(null==e?void 0:e.status)===A.v.PARTIALLY_INACTIVE}(e)},icon:function(){return"trash alternate"},onClick:function(e,t){!function(e){I&&(V(e),W(!0))}(t)},popupText:function(){return w("common:delete")},renderer:"semantic-icon"}),e}(),columns:[{allowToggleVisibility:!1,dataIndex:"name",id:"name",key:"name",render:function(e){return u.createElement(S.Z,{image:!0,as:"h6",className:"header-with-icon"},u.createElement(s.JT,{image:u.createElement(s.Xo,{name:e.name,size:"mini"}),size:"mini",spaced:"right"}),u.createElement(S.Z.Content,null,u.createElement("div",{className:"webhook-name"},e.name),u.createElement(S.Z.Subheader,{className:"webhook-endpoint"},e.endpoint)))},title:w("webhooks:pages.list.columns.webhook")},{allowToggleVisibility:!1,dataIndex:"isActive",id:"status",key:"status",render:function(e){var t=e.status===A.v.ACTIVE||e.status===A.v.PARTIALLY_ACTIVE,n=w(t?"webhooks:common.status.active":"webhooks:common.status.inactive");return u.createElement(E.Z,{size:"mini",color:t?void 0:"grey",className:"compact-label ".concat(t?"webhook-status-label active":"")},n)},textAlign:"center",title:w("webhooks:pages.list.columns.status")},{allowToggleVisibility:!1,dataIndex:"action",id:"actions",key:"actions",textAlign:"right",title:""}],data:null==i?void 0:i.webhooks,onRowClick:function(e,t){x(t)},placeholders:Z(),showHeader:!0,transparent:!r&&null!==Z(),"data-componentid":"".concat(y,"-data-table")}),M&&I&&u.createElement(s.cV,{onClose:function(){return W(!1)},type:"negative",open:O,assertion:M.name,assertionHint:w("webhooks:confirmations.delete.assertionHint"),assertionType:"checkbox",primaryAction:w("common:confirm"),secondaryAction:w("common:cancel"),onSecondaryActionClick:function(){W(!1),V(void 0)},onPrimaryActionClick:function(){I&&(c(M),W(!1),V(void 0))},closeOnDimmerClick:!1,"data-componentid":"".concat(y,"-delete-confirmation-modal")},u.createElement(s.cV.Header,{"data-componentid":"".concat(y,"-delete-confirmation-modal-header")},w("webhooks:confirmations.delete.heading")),u.createElement(s.cV.Message,{attached:!0,negative:!0,"data-componentid":"".concat(y,"-delete-confirmation-modal-message")},w("webhooks:confirmations.delete.message")),u.createElement(s.cV.Content,{"data-componentid":"".concat(y,"-delete-confirmation-modal-content")},w("webhooks:confirmations.delete.content"))))};var N=n(33241),$=n(90302);function z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,a,r,i,l=[],c=!0,s=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(o=r.call(n)).done)&&(l.push(o.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return D(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?D(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}const U=function(e,t){var n=z((0,u.useState)(1),2),o=n[0],a=n[1],r=z((0,u.useState)(t||$.r.DEFAULT_RESOURCE_LIST_ITEM_LIMIT),2),i=r[0],l=r[1],c=(0,u.useMemo)((function(){return Math.ceil(e.length/i)}),[e.length,i]),s=(0,u.useMemo)((function(){var t=(o-1)*i,n=t+i;return e.slice(t,n)}),[e,o,i]);return{currentPage:o,handleItemsPerPageDropdownChange:function(e,t){l(t.value),a(1)},handlePaginationChange:function(e,t){a(t.activePage)},itemsPerPage:i,paginatedItems:s,resetToFirstPage:function(){a(1)},totalPages:c}};var G=n(18982);function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,a,r,i,l=[],c=!0,s=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(o=r.call(n)).done)&&(l.push(o.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return J(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?J(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}const K=function(e){var t=q((0,u.useState)(""),2),n=t[0],o=t[1],a=q((0,u.useState)("co"),2),r=a[0],i=a[1],l=q((0,u.useState)("name"),2),c=l[0],s=l[1],d=q((0,u.useState)(!1),2),m=d[0],h=d[1];return{filteredWebhooks:(0,u.useMemo)((function(){return null!=n&&n.trim()?e.filter((function(e){return function(e,t,n,o){var a=t.toLowerCase(),r=[];switch(o){case"name":r=[e.name.toLowerCase()];break;case"endpoint":r=[e.endpoint.toLowerCase()];break;default:r=[e.name.toLowerCase(),e.endpoint.toLowerCase()]}return r.some((function(e){switch(n){case"eq":return e===a;case"sw":return e.startsWith(a);case"ew":return e.endsWith(a);default:return e.includes(a)}}))}(e,n,r,c)})):e}),[e,n,r,c]),handleSearchQueryClear:function(){o(""),i("co"),s("name"),h(!m)},handleWebhookFilter:function(e){if(e&&"string"==typeof e){var t=function(e){var t=e.trim(),n=t.split(" ");if(n.length>=3){var o=n[1];if(["co","eq","sw","ew"].includes(o))return{attribute:n[0],operator:o,value:n.slice(2).join(" ")}}return{attribute:"name",operator:"co",value:t}}(e),n=t.attribute,a=t.operator,r=t.value;o(r),i(a),s(n)}else o("")},searchAttribute:c,searchOperator:r,searchQuery:n,triggerClearQuery:m}};var Y=n(7238),B=n(67071);function X(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,a,r,i,l=[],c=!0,s=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(o=r.call(n)).done)&&(l.push(o.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ee(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ee(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}const te=function(e){var t,n,b=e["data-componentid"],g=void 0===b?"webhook-list-page":b,v=(0,d.$)().t,k=(0,s.fQ)().getLink,S=(0,m.v9)((function(e){var t;return null===(t=e.config.ui.features)||void 0===t?void 0:t.webhooks})),E=(0,a.EV)(null==S||null===(t=S.scopes)||void 0===t?void 0:t.create),A=(0,a.EV)(null==S||null===(n=S.scopes)||void 0===n?void 0:n.delete),C=X((0,u.useState)(!1),2),T=C[0],I=C[1],P=y(),L=P.data,O=P.isLoading,W=P.error,j=P.mutate,M=(0,w.Z)(),V=M.data,x=M.isLoading,Z=M.error,R=(0,u.useMemo)((function(){return(null==L?void 0:L.webhooks)||[]}),[L]),Q=K(R),_=Q.searchQuery,F=Q.triggerClearQuery,$=Q.filteredWebhooks,z=Q.handleWebhookFilter,D=Q.handleSearchQueryClear,q=U($),J=q.totalPages,ee=q.paginatedItems,te=q.handlePaginationChange,ne=q.handleItemsPerPageDropdownChange,oe=q.resetToFirstPage,ae=q.itemsPerPage,re=(0,G.Z)(),ie=re.navigateToWebhookCreation,le=re.navigateToWebhookEdit,ce=(0,B.L)(),se=(0,B.F)(),ue=O||T||x||!L&&!W,de=(0,c.cr)(S,N.J.FEATURE_DICTIONARY.get("WEBHOOK_SETTINGS"));(0,u.useEffect)((function(){oe()}),[_,oe]),(0,u.useEffect)((function(){W&&se(W,"fetchWebhooks")}),[W,se]),(0,u.useEffect)((function(){Z&&se(Z,"fetchWebhooksMetadata")}),[Z,se]);var me,he,fe=function(){E&&ie()},pe=(0,u.useMemo)((function(){return{totalResults:$.length,webhooks:ee}}),[ee,$.length]),be=function(){l.m.push(i.$.getPaths().get("WEBHOOK_SETTINGS"))};return u.createElement(s.Xg,{pageTitle:"Webhooks",action:(null==pe?void 0:pe.totalResults)>0?u.createElement(u.Fragment,null,de&&u.createElement(a.di,{when:null==S||null===(me=S.scopes)||void 0===me?void 0:me.update},u.createElement(s.GI,{trigger:u.createElement(h.Z,{"data-componentid":"webhook-settings-button",icon:o.UG,onClick:be}),content:v("webhooks:pages.list.buttons.settings"),position:"top center",size:"mini",hideOnScroll:!0,inverted:!0})),u.createElement(a.di,{when:null==S||null===(he=S.scopes)||void 0===he?void 0:he.create},u.createElement(s.KM,{onClick:fe,disabled:!E,"data-componentid":"".concat(g,"-list-layout-add-button")},u.createElement(f.Z,{name:"add"}),v("webhooks:pages.list.buttons.add")))):null,title:v("webhooks:pages.list.heading"),description:u.createElement("p",null,v("webhooks:pages.list.subHeading"),u.createElement(s.eb,{link:k("develop.webhooks.learnMore")},v("common:learnMore"))),contentTopMargin:!0,"data-componentid":"".concat(g,"-page-layout")},u.createElement(s.PS,{advancedSearch:ue?null:u.createElement(r.n,{onFilter:z,filterAttributeOptions:[{key:0,text:v("webhooks:advancedSearch.filterAttributeOptions.name.label"),value:"name"},{key:1,text:v("webhooks:advancedSearch.filterAttributeOptions.endpoint.label"),value:"endpoint"}],filterAttributePlaceholder:v("webhooks:advancedSearch.filterAttribute.placeholder"),filterConditionsPlaceholder:v("webhooks:advancedSearch.filterCondition.placeholder"),filterValuePlaceholder:v("webhooks:advancedSearch.form.filterValue.placeholder"),placeholder:v("webhooks:advancedSearch.placeholder"),style:{minWidth:"425px"},defaultSearchAttribute:"name",defaultSearchOperator:"co",triggerClearQuery:F,"data-componentid":"".concat(g,"-list-advanced-search")}),currentListSize:ee.length,isLoading:ue,listItemLimit:ae,onItemsPerPageDropdownChange:ne,onPageChange:te,showPagination:J>1&&!ue,showTopActionPanel:!ue||!((!_||""===_.trim())&&(null==pe?void 0:pe.totalResults)<=0),totalPages:J,totalListSize:$.length,"data-componentid":"".concat(g,"-list-layout")},u.createElement(H,{isLoading:ue,list:pe,isWebSubHubAdapterMode:!(null==V||!V.adapter)&&Y.ZT.isWebSubHub(V.adapter),onWebhookDelete:function(e){A&&(I(!0),(0,p.Z)(e.id).then((function(){j(),ce("deleteWebhook")})).catch((function(e){se(e,"deleteWebhook")})).finally((function(){I(!1)})))},onWebhookEdit:function(e){le(e)},onEmptyListPlaceholderActionClick:fe,onSearchQueryClear:D,searchQuery:_,"data-componentid":"".concat(g,"-webhook-list")})))}},35758:(e,t,n)=>{n.d(t,{Z:()=>l});var o=n(81611),a=n.n(o),r=n(83948),i=n.n(r)()(a());i.push([e.id,".webhooks-table .compact-label{min-width:60px;text-align:center}.webhooks-table .webhook-status-label.active{background-color:var(--oxygen-palette-success-main) !important;border-color:var(--oxygen-palette-success-main) !important;color:#fff !important}",""]);const l=i}}]);